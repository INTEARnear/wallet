var Fs=Object.create;var Nr=Object.defineProperty;var Hs=Object.getOwnPropertyDescriptor;var qs=Object.getOwnPropertyNames;var zs=Object.getPrototypeOf,Ws=Object.prototype.hasOwnProperty;var rr=(t,e)=>()=>(t&&(e=t(t=0)),e);var nr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Dr=(t,e)=>{for(var r in e)Nr(t,r,{get:e[r],enumerable:!0})},qi=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qs(e))!Ws.call(t,i)&&i!==r&&Nr(t,i,{get:()=>e[i],enumerable:!(s=Hs(e,i))||s.enumerable});return t};var zi=(t,e,r)=>(r=t!=null?Fs(zs(t)):{},qi(e||!t||!t.__esModule?Nr(r,"default",{value:t,enumerable:!0}):r,t)),Wi=t=>qi(Nr({},"__esModule",{value:!0}),t);var P=rr(()=>{});function $s(t,e){this.fun=t,this.array=e}function $i(t){var e=Math.floor((Date.now()-De.now())*.001),r=De.now()*.001,s=Math.floor(r)+e,i=Math.floor(r%1*1e9);return t&&(s=s-t[0],i=i-t[1],i<0&&(s--,i+=Kn)),[s,i]}var Lc,De,Dn,Kn,Vi=rr(()=>{P();H();F();$s.prototype.run=function(){this.fun.apply(null,this.array)};Lc={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},De={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};De.now===void 0&&(Dn=Date.now(),De.timing&&De.timing.navigationStart&&(Dn=De.timing.navigationStart),De.now=()=>Date.now()-Dn);Kn=1e9;$i.bigint=function(t){var e=$i(t);return typeof BigInt>"u"?e[0]*Kn+e[1]:BigInt(e[0]*Kn)+BigInt(e[1])}});var F=rr(()=>{Vi()});function Vs(){if(Zi)return wr;Zi=!0,wr.byteLength=E,wr.toByteArray=_,wr.fromByteArray=k;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=s.length;i<l;++i)t[i]=s[i],e[s.charCodeAt(i)]=i;e[45]=62,e[95]=63;function f(L){var C=L.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=L.indexOf("=");U===-1&&(U=C);var R=U===C?0:4-U%4;return[U,R]}function E(L){var C=f(L),U=C[0],R=C[1];return(U+R)*3/4-R}function v(L,C,U){return(C+U)*3/4-U}function _(L){var C,U=f(L),R=U[0],z=U[1],Z=new r(v(L,R,z)),W=0,O=z>0?R-4:R,j;for(j=0;j<O;j+=4)C=e[L.charCodeAt(j)]<<18|e[L.charCodeAt(j+1)]<<12|e[L.charCodeAt(j+2)]<<6|e[L.charCodeAt(j+3)],Z[W++]=C>>16&255,Z[W++]=C>>8&255,Z[W++]=C&255;return z===2&&(C=e[L.charCodeAt(j)]<<2|e[L.charCodeAt(j+1)]>>4,Z[W++]=C&255),z===1&&(C=e[L.charCodeAt(j)]<<10|e[L.charCodeAt(j+1)]<<4|e[L.charCodeAt(j+2)]>>2,Z[W++]=C>>8&255,Z[W++]=C&255),Z}function I(L){return t[L>>18&63]+t[L>>12&63]+t[L>>6&63]+t[L&63]}function A(L,C,U){for(var R,z=[],Z=C;Z<U;Z+=3)R=(L[Z]<<16&16711680)+(L[Z+1]<<8&65280)+(L[Z+2]&255),z.push(I(R));return z.join("")}function k(L){for(var C,U=L.length,R=U%3,z=[],Z=16383,W=0,O=U-R;W<O;W+=Z)z.push(A(L,W,W+Z>O?O:W+Z));return R===1?(C=L[U-1],z.push(t[C>>2]+t[C<<4&63]+"==")):R===2&&(C=(L[U-2]<<8)+L[U-1],z.push(t[C>>10]+t[C>>4&63]+t[C<<2&63]+"=")),z.join("")}return wr}function Zs(){if(Gi)return Kr;Gi=!0;return Kr.read=function(t,e,r,s,i){var l,f,E=i*8-s-1,v=(1<<E)-1,_=v>>1,I=-7,A=r?i-1:0,k=r?-1:1,L=t[e+A];for(A+=k,l=L&(1<<-I)-1,L>>=-I,I+=E;I>0;l=l*256+t[e+A],A+=k,I-=8);for(f=l&(1<<-I)-1,l>>=-I,I+=s;I>0;f=f*256+t[e+A],A+=k,I-=8);if(l===0)l=1-_;else{if(l===v)return f?NaN:(L?-1:1)*(1/0);f=f+Math.pow(2,s),l=l-_}return(L?-1:1)*f*Math.pow(2,l-s)},Kr.write=function(t,e,r,s,i,l){var f,E,v,_=l*8-i-1,I=(1<<_)-1,A=I>>1,k=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=s?0:l-1,C=s?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(E=isNaN(e)?1:0,f=I):(f=Math.floor(Math.log(e)/Math.LN2),e*(v=Math.pow(2,-f))<1&&(f--,v*=2),f+A>=1?e+=k/v:e+=k*Math.pow(2,1-A),e*v>=2&&(f++,v/=2),f+A>=I?(E=0,f=I):f+A>=1?(E=(e*v-1)*Math.pow(2,i),f=f+A):(E=e*Math.pow(2,A-1)*Math.pow(2,i),f=0));i>=8;t[r+L]=E&255,L+=C,E/=256,i-=8);for(f=f<<i|E,_+=i;_>0;t[r+L]=f&255,L+=C,f/=256,_-=8);t[r+L-C]|=U*128},Kr}function ji(){if(Ji)return Ke;Ji=!0;let t=Vs(),e=Zs(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ke.Buffer=f,Ke.SlowBuffer=z,Ke.INSPECT_MAX_BYTES=50;let s=2147483647;Ke.kMaxLength=s,f.TYPED_ARRAY_SUPPORT=i(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let h=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(h,o),h.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function l(h){if(h>s)throw new RangeError('The value "'+h+'" is invalid for option "size"');let o=new Uint8Array(h);return Object.setPrototypeOf(o,f.prototype),o}function f(h,o,c){if(typeof h=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(h)}return E(h,o,c)}f.poolSize=8192;function E(h,o,c){if(typeof h=="string")return A(h,o);if(ArrayBuffer.isView(h))return L(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(it(h,ArrayBuffer)||h&&it(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(it(h,SharedArrayBuffer)||h&&it(h.buffer,SharedArrayBuffer)))return C(h,o,c);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let y=h.valueOf&&h.valueOf();if(y!=null&&y!==h)return f.from(y,o,c);let B=U(h);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return f.from(h[Symbol.toPrimitive]("string"),o,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}f.from=function(h,o,c){return E(h,o,c)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function v(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function _(h,o,c){return v(h),h<=0?l(h):o!==void 0?typeof c=="string"?l(h).fill(o,c):l(h).fill(o):l(h)}f.alloc=function(h,o,c){return _(h,o,c)};function I(h){return v(h),l(h<0?0:R(h)|0)}f.allocUnsafe=function(h){return I(h)},f.allocUnsafeSlow=function(h){return I(h)};function A(h,o){if((typeof o!="string"||o==="")&&(o="utf8"),!f.isEncoding(o))throw new TypeError("Unknown encoding: "+o);let c=Z(h,o)|0,y=l(c),B=y.write(h,o);return B!==c&&(y=y.slice(0,B)),y}function k(h){let o=h.length<0?0:R(h.length)|0,c=l(o);for(let y=0;y<o;y+=1)c[y]=h[y]&255;return c}function L(h){if(it(h,Uint8Array)){let o=new Uint8Array(h);return C(o.buffer,o.byteOffset,o.byteLength)}return k(h)}function C(h,o,c){if(o<0||h.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<o+(c||0))throw new RangeError('"length" is outside of buffer bounds');let y;return o===void 0&&c===void 0?y=new Uint8Array(h):c===void 0?y=new Uint8Array(h,o):y=new Uint8Array(h,o,c),Object.setPrototypeOf(y,f.prototype),y}function U(h){if(f.isBuffer(h)){let o=R(h.length)|0,c=l(o);return c.length===0||h.copy(c,0,0,o),c}if(h.length!==void 0)return typeof h.length!="number"||er(h.length)?l(0):k(h);if(h.type==="Buffer"&&Array.isArray(h.data))return k(h.data)}function R(h){if(h>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return h|0}function z(h){return+h!=h&&(h=0),f.alloc(+h)}f.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==f.prototype},f.compare=function(o,c){if(it(o,Uint8Array)&&(o=f.from(o,o.offset,o.byteLength)),it(c,Uint8Array)&&(c=f.from(c,c.offset,c.byteLength)),!f.isBuffer(o)||!f.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===c)return 0;let y=o.length,B=c.length;for(let S=0,T=Math.min(y,B);S<T;++S)if(o[S]!==c[S]){y=o[S],B=c[S];break}return y<B?-1:B<y?1:0},f.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(o,c){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return f.alloc(0);let y;if(c===void 0)for(c=0,y=0;y<o.length;++y)c+=o[y].length;let B=f.allocUnsafe(c),S=0;for(y=0;y<o.length;++y){let T=o[y];if(it(T,Uint8Array))S+T.length>B.length?(f.isBuffer(T)||(T=f.from(T)),T.copy(B,S)):Uint8Array.prototype.set.call(B,T,S);else if(f.isBuffer(T))T.copy(B,S);else throw new TypeError('"list" argument must be an Array of Buffers');S+=T.length}return B};function Z(h,o){if(f.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||it(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let c=h.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&c===0)return 0;let B=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return we(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Ne(h).length;default:if(B)return y?-1:we(h).length;o=(""+o).toLowerCase(),B=!0}}f.byteLength=Z;function W(h,o,c){let y=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,o>>>=0,c<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return g(this,o,c);case"utf8":case"utf-8":return M(this,o,c);case"ascii":return d(this,o,c);case"latin1":case"binary":return m(this,o,c);case"base64":return Zt(this,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,o,c);default:if(y)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),y=!0}}f.prototype._isBuffer=!0;function O(h,o,c){let y=h[o];h[o]=h[c],h[c]=y}f.prototype.swap16=function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<o;c+=2)O(this,c,c+1);return this},f.prototype.swap32=function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<o;c+=4)O(this,c,c+3),O(this,c+1,c+2);return this},f.prototype.swap64=function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<o;c+=8)O(this,c,c+7),O(this,c+1,c+6),O(this,c+2,c+5),O(this,c+3,c+4);return this},f.prototype.toString=function(){let o=this.length;return o===0?"":arguments.length===0?M(this,0,o):W.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(o){if(!f.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:f.compare(this,o)===0},f.prototype.inspect=function(){let o="",c=Ke.INSPECT_MAX_BYTES;return o=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(o+=" ... "),"<Buffer "+o+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(o,c,y,B,S){if(it(o,Uint8Array)&&(o=f.from(o,o.offset,o.byteLength)),!f.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(c===void 0&&(c=0),y===void 0&&(y=o?o.length:0),B===void 0&&(B=0),S===void 0&&(S=this.length),c<0||y>o.length||B<0||S>this.length)throw new RangeError("out of range index");if(B>=S&&c>=y)return 0;if(B>=S)return-1;if(c>=y)return 1;if(c>>>=0,y>>>=0,B>>>=0,S>>>=0,this===o)return 0;let T=S-B,V=y-c,mt=Math.min(T,V),J=this.slice(B,S),Q=o.slice(c,y);for(let at=0;at<mt;++at)if(J[at]!==Q[at]){T=J[at],V=Q[at];break}return T<V?-1:V<T?1:0};function j(h,o,c,y,B){if(h.length===0)return-1;if(typeof c=="string"?(y=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,er(c)&&(c=B?0:h.length-1),c<0&&(c=h.length+c),c>=h.length){if(B)return-1;c=h.length-1}else if(c<0)if(B)c=0;else return-1;if(typeof o=="string"&&(o=f.from(o,y)),f.isBuffer(o))return o.length===0?-1:nt(h,o,c,y,B);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(h,o,c):Uint8Array.prototype.lastIndexOf.call(h,o,c):nt(h,[o],c,y,B);throw new TypeError("val must be string, number or Buffer")}function nt(h,o,c,y,B){let S=1,T=h.length,V=o.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(h.length<2||o.length<2)return-1;S=2,T/=2,V/=2,c/=2}function mt(Q,at){return S===1?Q[at]:Q.readUInt16BE(at*S)}let J;if(B){let Q=-1;for(J=c;J<T;J++)if(mt(h,J)===mt(o,Q===-1?0:J-Q)){if(Q===-1&&(Q=J),J-Q+1===V)return Q*S}else Q!==-1&&(J-=J-Q),Q=-1}else for(c+V>T&&(c=T-V),J=c;J>=0;J--){let Q=!0;for(let at=0;at<V;at++)if(mt(h,J+at)!==mt(o,at)){Q=!1;break}if(Q)return J}return-1}f.prototype.includes=function(o,c,y){return this.indexOf(o,c,y)!==-1},f.prototype.indexOf=function(o,c,y){return j(this,o,c,y,!0)},f.prototype.lastIndexOf=function(o,c,y){return j(this,o,c,y,!1)};function ct(h,o,c,y){c=Number(c)||0;let B=h.length-c;y?(y=Number(y),y>B&&(y=B)):y=B;let S=o.length;y>S/2&&(y=S/2);let T;for(T=0;T<y;++T){let V=parseInt(o.substr(T*2,2),16);if(er(V))return T;h[c+T]=V}return T}function yt(h,o,c,y){return dt(we(o,h.length-c),h,c,y)}function Ht(h,o,c,y){return dt(gt(o),h,c,y)}function te(h,o,c,y){return dt(Ne(o),h,c,y)}function ot(h,o,c,y){return dt(wt(o,h.length-c),h,c,y)}f.prototype.write=function(o,c,y,B){if(c===void 0)B="utf8",y=this.length,c=0;else if(y===void 0&&typeof c=="string")B=c,y=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(y)?(y=y>>>0,B===void 0&&(B="utf8")):(B=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let S=this.length-c;if((y===void 0||y>S)&&(y=S),o.length>0&&(y<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let T=!1;for(;;)switch(B){case"hex":return ct(this,o,c,y);case"utf8":case"utf-8":return yt(this,o,c,y);case"ascii":case"latin1":case"binary":return Ht(this,o,c,y);case"base64":return te(this,o,c,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,o,c,y);default:if(T)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),T=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Zt(h,o,c){return o===0&&c===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(o,c))}function M(h,o,c){c=Math.min(h.length,c);let y=[],B=o;for(;B<c;){let S=h[B],T=null,V=S>239?4:S>223?3:S>191?2:1;if(B+V<=c){let mt,J,Q,at;switch(V){case 1:S<128&&(T=S);break;case 2:mt=h[B+1],(mt&192)===128&&(at=(S&31)<<6|mt&63,at>127&&(T=at));break;case 3:mt=h[B+1],J=h[B+2],(mt&192)===128&&(J&192)===128&&(at=(S&15)<<12|(mt&63)<<6|J&63,at>2047&&(at<55296||at>57343)&&(T=at));break;case 4:mt=h[B+1],J=h[B+2],Q=h[B+3],(mt&192)===128&&(J&192)===128&&(Q&192)===128&&(at=(S&15)<<18|(mt&63)<<12|(J&63)<<6|Q&63,at>65535&&at<1114112&&(T=at))}}T===null?(T=65533,V=1):T>65535&&(T-=65536,y.push(T>>>10&1023|55296),T=56320|T&1023),y.push(T),B+=V}return u(y)}let n=4096;function u(h){let o=h.length;if(o<=n)return String.fromCharCode.apply(String,h);let c="",y=0;for(;y<o;)c+=String.fromCharCode.apply(String,h.slice(y,y+=n));return c}function d(h,o,c){let y="";c=Math.min(h.length,c);for(let B=o;B<c;++B)y+=String.fromCharCode(h[B]&127);return y}function m(h,o,c){let y="";c=Math.min(h.length,c);for(let B=o;B<c;++B)y+=String.fromCharCode(h[B]);return y}function g(h,o,c){let y=h.length;(!o||o<0)&&(o=0),(!c||c<0||c>y)&&(c=y);let B="";for(let S=o;S<c;++S)B+=xt[h[S]];return B}function w(h,o,c){let y=h.slice(o,c),B="";for(let S=0;S<y.length-1;S+=2)B+=String.fromCharCode(y[S]+y[S+1]*256);return B}f.prototype.slice=function(o,c){let y=this.length;o=~~o,c=c===void 0?y:~~c,o<0?(o+=y,o<0&&(o=0)):o>y&&(o=y),c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),c<o&&(c=o);let B=this.subarray(o,c);return Object.setPrototypeOf(B,f.prototype),B};function b(h,o,c){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>c)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(o,c,y){o=o>>>0,c=c>>>0,y||b(o,c,this.length);let B=this[o],S=1,T=0;for(;++T<c&&(S*=256);)B+=this[o+T]*S;return B},f.prototype.readUintBE=f.prototype.readUIntBE=function(o,c,y){o=o>>>0,c=c>>>0,y||b(o,c,this.length);let B=this[o+--c],S=1;for(;c>0&&(S*=256);)B+=this[o+--c]*S;return B},f.prototype.readUint8=f.prototype.readUInt8=function(o,c){return o=o>>>0,c||b(o,1,this.length),this[o]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(o,c){return o=o>>>0,c||b(o,2,this.length),this[o]|this[o+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(o,c){return o=o>>>0,c||b(o,2,this.length),this[o]<<8|this[o+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(o,c){return o=o>>>0,c||b(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(o,c){return o=o>>>0,c||b(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},f.prototype.readBigUInt64LE=ut(function(o){o=o>>>0,Y(o,"offset");let c=this[o],y=this[o+7];(c===void 0||y===void 0)&&zt(o,this.length-8);let B=c+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,S=this[++o]+this[++o]*2**8+this[++o]*2**16+y*2**24;return BigInt(B)+(BigInt(S)<<BigInt(32))}),f.prototype.readBigUInt64BE=ut(function(o){o=o>>>0,Y(o,"offset");let c=this[o],y=this[o+7];(c===void 0||y===void 0)&&zt(o,this.length-8);let B=c*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],S=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+y;return(BigInt(B)<<BigInt(32))+BigInt(S)}),f.prototype.readIntLE=function(o,c,y){o=o>>>0,c=c>>>0,y||b(o,c,this.length);let B=this[o],S=1,T=0;for(;++T<c&&(S*=256);)B+=this[o+T]*S;return S*=128,B>=S&&(B-=Math.pow(2,8*c)),B},f.prototype.readIntBE=function(o,c,y){o=o>>>0,c=c>>>0,y||b(o,c,this.length);let B=c,S=1,T=this[o+--B];for(;B>0&&(S*=256);)T+=this[o+--B]*S;return S*=128,T>=S&&(T-=Math.pow(2,8*c)),T},f.prototype.readInt8=function(o,c){return o=o>>>0,c||b(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},f.prototype.readInt16LE=function(o,c){o=o>>>0,c||b(o,2,this.length);let y=this[o]|this[o+1]<<8;return y&32768?y|4294901760:y},f.prototype.readInt16BE=function(o,c){o=o>>>0,c||b(o,2,this.length);let y=this[o+1]|this[o]<<8;return y&32768?y|4294901760:y},f.prototype.readInt32LE=function(o,c){return o=o>>>0,c||b(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},f.prototype.readInt32BE=function(o,c){return o=o>>>0,c||b(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},f.prototype.readBigInt64LE=ut(function(o){o=o>>>0,Y(o,"offset");let c=this[o],y=this[o+7];(c===void 0||y===void 0)&&zt(o,this.length-8);let B=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(y<<24);return(BigInt(B)<<BigInt(32))+BigInt(c+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),f.prototype.readBigInt64BE=ut(function(o){o=o>>>0,Y(o,"offset");let c=this[o],y=this[o+7];(c===void 0||y===void 0)&&zt(o,this.length-8);let B=(c<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(B)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+y)}),f.prototype.readFloatLE=function(o,c){return o=o>>>0,c||b(o,4,this.length),e.read(this,o,!0,23,4)},f.prototype.readFloatBE=function(o,c){return o=o>>>0,c||b(o,4,this.length),e.read(this,o,!1,23,4)},f.prototype.readDoubleLE=function(o,c){return o=o>>>0,c||b(o,8,this.length),e.read(this,o,!0,52,8)},f.prototype.readDoubleBE=function(o,c){return o=o>>>0,c||b(o,8,this.length),e.read(this,o,!1,52,8)};function p(h,o,c,y,B,S){if(!f.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>B||o<S)throw new RangeError('"value" argument is out of bounds');if(c+y>h.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(o,c,y,B){if(o=+o,c=c>>>0,y=y>>>0,!B){let V=Math.pow(2,8*y)-1;p(this,o,c,y,V,0)}let S=1,T=0;for(this[c]=o&255;++T<y&&(S*=256);)this[c+T]=o/S&255;return c+y},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(o,c,y,B){if(o=+o,c=c>>>0,y=y>>>0,!B){let V=Math.pow(2,8*y)-1;p(this,o,c,y,V,0)}let S=y-1,T=1;for(this[c+S]=o&255;--S>=0&&(T*=256);)this[c+S]=o/T&255;return c+y},f.prototype.writeUint8=f.prototype.writeUInt8=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,1,255,0),this[c]=o&255,c+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,2,65535,0),this[c]=o&255,this[c+1]=o>>>8,c+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,2,65535,0),this[c]=o>>>8,this[c+1]=o&255,c+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,4,4294967295,0),this[c+3]=o>>>24,this[c+2]=o>>>16,this[c+1]=o>>>8,this[c]=o&255,c+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,4,4294967295,0),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4};function a(h,o,c,y,B){tt(o,y,B,h,c,7);let S=Number(o&BigInt(4294967295));h[c++]=S,S=S>>8,h[c++]=S,S=S>>8,h[c++]=S,S=S>>8,h[c++]=S;let T=Number(o>>BigInt(32)&BigInt(4294967295));return h[c++]=T,T=T>>8,h[c++]=T,T=T>>8,h[c++]=T,T=T>>8,h[c++]=T,c}function x(h,o,c,y,B){tt(o,y,B,h,c,7);let S=Number(o&BigInt(4294967295));h[c+7]=S,S=S>>8,h[c+6]=S,S=S>>8,h[c+5]=S,S=S>>8,h[c+4]=S;let T=Number(o>>BigInt(32)&BigInt(4294967295));return h[c+3]=T,T=T>>8,h[c+2]=T,T=T>>8,h[c+1]=T,T=T>>8,h[c]=T,c+8}f.prototype.writeBigUInt64LE=ut(function(o,c=0){return a(this,o,c,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=ut(function(o,c=0){return x(this,o,c,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(o,c,y,B){if(o=+o,c=c>>>0,!B){let mt=Math.pow(2,8*y-1);p(this,o,c,y,mt-1,-mt)}let S=0,T=1,V=0;for(this[c]=o&255;++S<y&&(T*=256);)o<0&&V===0&&this[c+S-1]!==0&&(V=1),this[c+S]=(o/T>>0)-V&255;return c+y},f.prototype.writeIntBE=function(o,c,y,B){if(o=+o,c=c>>>0,!B){let mt=Math.pow(2,8*y-1);p(this,o,c,y,mt-1,-mt)}let S=y-1,T=1,V=0;for(this[c+S]=o&255;--S>=0&&(T*=256);)o<0&&V===0&&this[c+S+1]!==0&&(V=1),this[c+S]=(o/T>>0)-V&255;return c+y},f.prototype.writeInt8=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,1,127,-128),o<0&&(o=255+o+1),this[c]=o&255,c+1},f.prototype.writeInt16LE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,2,32767,-32768),this[c]=o&255,this[c+1]=o>>>8,c+2},f.prototype.writeInt16BE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,2,32767,-32768),this[c]=o>>>8,this[c+1]=o&255,c+2},f.prototype.writeInt32LE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,4,2147483647,-2147483648),this[c]=o&255,this[c+1]=o>>>8,this[c+2]=o>>>16,this[c+3]=o>>>24,c+4},f.prototype.writeInt32BE=function(o,c,y){return o=+o,c=c>>>0,y||p(this,o,c,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4},f.prototype.writeBigInt64LE=ut(function(o,c=0){return a(this,o,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=ut(function(o,c=0){return x(this,o,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function N(h,o,c,y,B,S){if(c+y>h.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function K(h,o,c,y,B){return o=+o,c=c>>>0,B||N(h,o,c,4),e.write(h,o,c,y,23,4),c+4}f.prototype.writeFloatLE=function(o,c,y){return K(this,o,c,!0,y)},f.prototype.writeFloatBE=function(o,c,y){return K(this,o,c,!1,y)};function D(h,o,c,y,B){return o=+o,c=c>>>0,B||N(h,o,c,8),e.write(h,o,c,y,52,8),c+8}f.prototype.writeDoubleLE=function(o,c,y){return D(this,o,c,!0,y)},f.prototype.writeDoubleBE=function(o,c,y){return D(this,o,c,!1,y)},f.prototype.copy=function(o,c,y,B){if(!f.isBuffer(o))throw new TypeError("argument should be a Buffer");if(y||(y=0),!B&&B!==0&&(B=this.length),c>=o.length&&(c=o.length),c||(c=0),B>0&&B<y&&(B=y),B===y||o.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),o.length-c<B-y&&(B=o.length-c+y);let S=B-y;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,y,B):Uint8Array.prototype.set.call(o,this.subarray(y,B),c),S},f.prototype.fill=function(o,c,y,B){if(typeof o=="string"){if(typeof c=="string"?(B=c,c=0,y=this.length):typeof y=="string"&&(B=y,y=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!f.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(o.length===1){let T=o.charCodeAt(0);(B==="utf8"&&T<128||B==="latin1")&&(o=T)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(c<0||this.length<c||this.length<y)throw new RangeError("Out of range index");if(y<=c)return this;c=c>>>0,y=y===void 0?this.length:y>>>0,o||(o=0);let S;if(typeof o=="number")for(S=c;S<y;++S)this[S]=o;else{let T=f.isBuffer(o)?o:f.from(o,B),V=T.length;if(V===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(S=0;S<y-c;++S)this[S+c]=T[S%V]}return this};let q={};function G(h,o,c){q[h]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(h,o){return`The "${h}" argument must be of type number. Received type ${typeof o}`},TypeError),G("ERR_OUT_OF_RANGE",function(h,o,c){let y=`The value of "${h}" is out of range.`,B=c;return Number.isInteger(c)&&Math.abs(c)>2**32?B=X(String(c)):typeof c=="bigint"&&(B=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(B=X(B)),B+="n"),y+=` It must be ${o}. Received ${B}`,y},RangeError);function X(h){let o="",c=h.length,y=h[0]==="-"?1:0;for(;c>=y+4;c-=3)o=`_${h.slice(c-3,c)}${o}`;return`${h.slice(0,c)}${o}`}function vt(h,o,c){Y(o,"offset"),(h[o]===void 0||h[o+c]===void 0)&&zt(o,h.length-(c+1))}function tt(h,o,c,y,B,S){if(h>c||h<o){let T=typeof o=="bigint"?"n":"",V;throw o===0||o===BigInt(0)?V=`>= 0${T} and < 2${T} ** ${(S+1)*8}${T}`:V=`>= -(2${T} ** ${(S+1)*8-1}${T}) and < 2 ** ${(S+1)*8-1}${T}`,new q.ERR_OUT_OF_RANGE("value",V,h)}vt(y,B,S)}function Y(h,o){if(typeof h!="number")throw new q.ERR_INVALID_ARG_TYPE(o,"number",h)}function zt(h,o,c){throw Math.floor(h)!==h?(Y(h,c),new q.ERR_OUT_OF_RANGE("offset","an integer",h)):o<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${o}`,h)}let st=/[^+/0-9A-Za-z-_]/g;function ht(h){if(h=h.split("=")[0],h=h.trim().replace(st,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function we(h,o){o=o||1/0;let c,y=h.length,B=null,S=[];for(let T=0;T<y;++T){if(c=h.charCodeAt(T),c>55295&&c<57344){if(!B){if(c>56319){(o-=3)>-1&&S.push(239,191,189);continue}else if(T+1===y){(o-=3)>-1&&S.push(239,191,189);continue}B=c;continue}if(c<56320){(o-=3)>-1&&S.push(239,191,189),B=c;continue}c=(B-55296<<10|c-56320)+65536}else B&&(o-=3)>-1&&S.push(239,191,189);if(B=null,c<128){if((o-=1)<0)break;S.push(c)}else if(c<2048){if((o-=2)<0)break;S.push(c>>6|192,c&63|128)}else if(c<65536){if((o-=3)<0)break;S.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((o-=4)<0)break;S.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return S}function gt(h){let o=[];for(let c=0;c<h.length;++c)o.push(h.charCodeAt(c)&255);return o}function wt(h,o){let c,y,B,S=[];for(let T=0;T<h.length&&!((o-=2)<0);++T)c=h.charCodeAt(T),y=c>>8,B=c%256,S.push(B),S.push(y);return S}function Ne(h){return t.toByteArray(ht(h))}function dt(h,o,c,y){let B;for(B=0;B<y&&!(B+c>=o.length||B>=h.length);++B)o[B+c]=h[B];return B}function it(h,o){return h instanceof o||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===o.name}function er(h){return h!==h}let xt=function(){let h="0123456789abcdef",o=new Array(256);for(let c=0;c<16;++c){let y=c*16;for(let B=0;B<16;++B)o[y+B]=h[c]+h[B]}return o}();function ut(h){return typeof BigInt>"u"?Or:h}function Or(){throw new Error("BigInt not supported")}return Ke}var wr,Zi,Kr,Gi,Ke,Ji,Yi=rr(()=>{P();H();F();wr={},Zi=!1;Kr={},Gi=!1;Ke={},Ji=!1});var Pn={};Dr(Pn,{Buffer:()=>$,INSPECT_MAX_BYTES:()=>Gs,default:()=>Ae,kMaxLength:()=>Js});var Ae,$,Gs,Js,Pr=rr(()=>{P();H();F();Yi();Ae=ji();Ae.Buffer;Ae.SlowBuffer;Ae.INSPECT_MAX_BYTES;Ae.kMaxLength;$=Ae.Buffer,Gs=Ae.INSPECT_MAX_BYTES,Js=Ae.kMaxLength});var H=rr(()=>{Pr()});var hs=nr((ls,pi)=>{P();H();F();(function(t,e){"use strict";function r(M,n){if(!M)throw new Error(n||"Assertion failed")}function s(M,n){M.super_=n;var u=function(){};u.prototype=n.prototype,M.prototype=new u,M.prototype.constructor=M}function i(M,n,u){if(i.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((n==="le"||n==="be")&&(u=n,n=10),this._init(M||0,n||10,u||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=(Pr(),Wi(Pn)).Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,u){return n.cmp(u)>0?n:u},i.min=function(n,u){return n.cmp(u)<0?n:u},i.prototype._init=function(n,u,d){if(typeof n=="number")return this._initNumber(n,u,d);if(typeof n=="object")return this._initArray(n,u,d);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),n=n.toString().replace(/\s+/g,"");var m=0;n[0]==="-"&&(m++,this.negative=1),m<n.length&&(u===16?this._parseHex(n,m,d):(this._parseBase(n,u,m),d==="le"&&this._initArray(this.toArray(),u,d)))},i.prototype._initNumber=function(n,u,d){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},i.prototype._initArray=function(n,u,d){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g,w,b=0;if(d==="be")for(m=n.length-1,g=0;m>=0;m-=3)w=n[m]|n[m-1]<<8|n[m-2]<<16,this.words[g]|=w<<b&67108863,this.words[g+1]=w>>>26-b&67108863,b+=24,b>=26&&(b-=26,g++);else if(d==="le")for(m=0,g=0;m<n.length;m+=3)w=n[m]|n[m+1]<<8|n[m+2]<<16,this.words[g]|=w<<b&67108863,this.words[g+1]=w>>>26-b&67108863,b+=24,b>=26&&(b-=26,g++);return this._strip()};function f(M,n){var u=M.charCodeAt(n);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;r(!1,"Invalid character in "+M)}function E(M,n,u){var d=f(M,u);return u-1>=n&&(d|=f(M,u-1)<<4),d}i.prototype._parseHex=function(n,u,d){this.length=Math.ceil((n.length-u)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var g=0,w=0,b;if(d==="be")for(m=n.length-1;m>=u;m-=2)b=E(n,u,m)<<g,this.words[w]|=b&67108863,g>=18?(g-=18,w+=1,this.words[w]|=b>>>26):g+=8;else{var p=n.length-u;for(m=p%2===0?u+1:u;m<n.length;m+=2)b=E(n,u,m)<<g,this.words[w]|=b&67108863,g>=18?(g-=18,w+=1,this.words[w]|=b>>>26):g+=8}this._strip()};function v(M,n,u,d){for(var m=0,g=0,w=Math.min(M.length,u),b=n;b<w;b++){var p=M.charCodeAt(b)-48;m*=d,p>=49?g=p-49+10:p>=17?g=p-17+10:g=p,r(p>=0&&g<d,"Invalid character"),m+=g}return m}i.prototype._parseBase=function(n,u,d){this.words=[0],this.length=1;for(var m=0,g=1;g<=67108863;g*=u)m++;m--,g=g/u|0;for(var w=n.length-d,b=w%m,p=Math.min(w,w-b)+d,a=0,x=d;x<p;x+=m)a=v(n,x,x+m,u),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(b!==0){var N=1;for(a=v(n,x,n.length,u),x=0;x<b;x++)N*=u;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var u=0;u<this.length;u++)n.words[u]=this.words[u];n.length=this.length,n.negative=this.negative,n.red=this.red};function _(M,n){M.words=n.words,M.length=n.length,M.negative=n.negative,M.red=n.red}if(i.prototype._move=function(n){_(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,u){n=n||10,u=u|0||1;var d;if(n===16||n==="hex"){d="";for(var m=0,g=0,w=0;w<this.length;w++){var b=this.words[w],p=((b<<m|g)&16777215).toString(16);g=b>>>24-m&16777215,m+=2,m>=26&&(m-=26,w--),g!==0||w!==this.length-1?d=A[6-p.length]+p+d:d=p+d}for(g!==0&&(d=g.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(n===(n|0)&&n>=2&&n<=36){var a=k[n],x=L[n];d="";var N=this.clone();for(N.negative=0;!N.isZero();){var K=N.modrn(x).toString(n);N=N.idivn(x),N.isZero()?d=K+d:d=A[a-K.length]+K+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},l&&(i.prototype.toBuffer=function(n,u){return this.toArrayLike(l,n,u)}),i.prototype.toArray=function(n,u){return this.toArrayLike(Array,n,u)};var C=function(n,u){return n.allocUnsafe?n.allocUnsafe(u):new n(u)};i.prototype.toArrayLike=function(n,u,d){this._strip();var m=this.byteLength(),g=d||Math.max(1,m);r(m<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var w=C(n,g),b=u==="le"?"LE":"BE";return this["_toArrayLike"+b](w,m),w},i.prototype._toArrayLikeLE=function(n,u){for(var d=0,m=0,g=0,w=0;g<this.length;g++){var b=this.words[g]<<w|m;n[d++]=b&255,d<n.length&&(n[d++]=b>>8&255),d<n.length&&(n[d++]=b>>16&255),w===6?(d<n.length&&(n[d++]=b>>24&255),m=0,w=0):(m=b>>>24,w+=2)}if(d<n.length)for(n[d++]=m;d<n.length;)n[d++]=0},i.prototype._toArrayLikeBE=function(n,u){for(var d=n.length-1,m=0,g=0,w=0;g<this.length;g++){var b=this.words[g]<<w|m;n[d--]=b&255,d>=0&&(n[d--]=b>>8&255),d>=0&&(n[d--]=b>>16&255),w===6?(d>=0&&(n[d--]=b>>24&255),m=0,w=0):(m=b>>>24,w+=2)}if(d>=0)for(n[d--]=m;d>=0;)n[d--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var u=n,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},i.prototype._zeroBits=function(n){if(n===0)return 26;var u=n,d=0;return(u&8191)===0&&(d+=13,u>>>=13),(u&127)===0&&(d+=7,u>>>=7),(u&15)===0&&(d+=4,u>>>=4),(u&3)===0&&(d+=2,u>>>=2),(u&1)===0&&d++,d},i.prototype.bitLength=function(){var n=this.words[this.length-1],u=this._countBits(n);return(this.length-1)*26+u};function U(M){for(var n=new Array(M.bitLength()),u=0;u<n.length;u++){var d=u/26|0,m=u%26;n[u]=M.words[d]>>>m&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(n+=d,d!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var u=0;u<n.length;u++)this.words[u]=this.words[u]|n.words[u];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var u;this.length>n.length?u=n:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&n.words[d];return this.length=u.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var u,d;this.length>n.length?(u=this,d=n):(u=n,d=this);for(var m=0;m<d.length;m++)this.words[m]=u.words[m]^d.words[m];if(this!==u)for(;m<u.length;m++)this.words[m]=u.words[m];return this.length=u.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var u=Math.ceil(n/26)|0,d=n%26;this._expand(u),d>0&&u--;for(var m=0;m<u;m++)this.words[m]=~this.words[m]&67108863;return d>0&&(this.words[m]=~this.words[m]&67108863>>26-d),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,u){r(typeof n=="number"&&n>=0);var d=n/26|0,m=n%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<m:this.words[d]=this.words[d]&~(1<<m),this._strip()},i.prototype.iadd=function(n){var u;if(this.negative!==0&&n.negative===0)return this.negative=0,u=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,u=this.isub(n),n.negative=1,u._normSign();var d,m;this.length>n.length?(d=this,m=n):(d=n,m=this);for(var g=0,w=0;w<m.length;w++)u=(d.words[w]|0)+(m.words[w]|0)+g,this.words[w]=u&67108863,g=u>>>26;for(;g!==0&&w<d.length;w++)u=(d.words[w]|0)+g,this.words[w]=u&67108863,g=u>>>26;if(this.length=d.length,g!==0)this.words[this.length]=g,this.length++;else if(d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this},i.prototype.add=function(n){var u;return n.negative!==0&&this.negative===0?(n.negative=0,u=this.sub(n),n.negative^=1,u):n.negative===0&&this.negative!==0?(this.negative=0,u=n.sub(this),this.negative=1,u):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var u=this.iadd(n);return n.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var d=this.cmp(n);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,g;d>0?(m=this,g=n):(m=n,g=this);for(var w=0,b=0;b<g.length;b++)u=(m.words[b]|0)-(g.words[b]|0)+w,w=u>>26,this.words[b]=u&67108863;for(;w!==0&&b<m.length;b++)u=(m.words[b]|0)+w,w=u>>26,this.words[b]=u&67108863;if(w===0&&b<m.length&&m!==this)for(;b<m.length;b++)this.words[b]=m.words[b];return this.length=Math.max(this.length,b),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function R(M,n,u){u.negative=n.negative^M.negative;var d=M.length+n.length|0;u.length=d,d=d-1|0;var m=M.words[0]|0,g=n.words[0]|0,w=m*g,b=w&67108863,p=w/67108864|0;u.words[0]=b;for(var a=1;a<d;a++){for(var x=p>>>26,N=p&67108863,K=Math.min(a,n.length-1),D=Math.max(0,a-M.length+1);D<=K;D++){var q=a-D|0;m=M.words[q]|0,g=n.words[D]|0,w=m*g+N,x+=w/67108864|0,N=w&67108863}u.words[a]=N|0,p=x|0}return p!==0?u.words[a]=p|0:u.length--,u._strip()}var z=function(n,u,d){var m=n.words,g=u.words,w=d.words,b=0,p,a,x,N=m[0]|0,K=N&8191,D=N>>>13,q=m[1]|0,G=q&8191,X=q>>>13,vt=m[2]|0,tt=vt&8191,Y=vt>>>13,zt=m[3]|0,st=zt&8191,ht=zt>>>13,we=m[4]|0,gt=we&8191,wt=we>>>13,Ne=m[5]|0,dt=Ne&8191,it=Ne>>>13,er=m[6]|0,xt=er&8191,ut=er>>>13,Or=m[7]|0,h=Or&8191,o=Or>>>13,c=m[8]|0,y=c&8191,B=c>>>13,S=m[9]|0,T=S&8191,V=S>>>13,mt=g[0]|0,J=mt&8191,Q=mt>>>13,at=g[1]|0,Mt=at&8191,Bt=at>>>13,Ci=g[2]|0,At=Ci&8191,_t=Ci>>>13,Oi=g[3]|0,It=Oi&8191,St=Oi>>>13,Ni=g[4]|0,Ut=Ni&8191,kt=Ni>>>13,Di=g[5]|0,Tt=Di&8191,Lt=Di>>>13,Ki=g[6]|0,Rt=Ki&8191,Ct=Ki>>>13,Pi=g[7]|0,Ot=Pi&8191,Nt=Pi>>>13,Fi=g[8]|0,Dt=Fi&8191,Kt=Fi>>>13,Hi=g[9]|0,Pt=Hi&8191,Ft=Hi>>>13;d.negative=n.negative^u.negative,d.length=19,p=Math.imul(K,J),a=Math.imul(K,Q),a=a+Math.imul(D,J)|0,x=Math.imul(D,Q);var wn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(wn>>>26)|0,wn&=67108863,p=Math.imul(G,J),a=Math.imul(G,Q),a=a+Math.imul(X,J)|0,x=Math.imul(X,Q),p=p+Math.imul(K,Mt)|0,a=a+Math.imul(K,Bt)|0,a=a+Math.imul(D,Mt)|0,x=x+Math.imul(D,Bt)|0;var xn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(xn>>>26)|0,xn&=67108863,p=Math.imul(tt,J),a=Math.imul(tt,Q),a=a+Math.imul(Y,J)|0,x=Math.imul(Y,Q),p=p+Math.imul(G,Mt)|0,a=a+Math.imul(G,Bt)|0,a=a+Math.imul(X,Mt)|0,x=x+Math.imul(X,Bt)|0,p=p+Math.imul(K,At)|0,a=a+Math.imul(K,_t)|0,a=a+Math.imul(D,At)|0,x=x+Math.imul(D,_t)|0;var vn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(vn>>>26)|0,vn&=67108863,p=Math.imul(st,J),a=Math.imul(st,Q),a=a+Math.imul(ht,J)|0,x=Math.imul(ht,Q),p=p+Math.imul(tt,Mt)|0,a=a+Math.imul(tt,Bt)|0,a=a+Math.imul(Y,Mt)|0,x=x+Math.imul(Y,Bt)|0,p=p+Math.imul(G,At)|0,a=a+Math.imul(G,_t)|0,a=a+Math.imul(X,At)|0,x=x+Math.imul(X,_t)|0,p=p+Math.imul(K,It)|0,a=a+Math.imul(K,St)|0,a=a+Math.imul(D,It)|0,x=x+Math.imul(D,St)|0;var bn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(bn>>>26)|0,bn&=67108863,p=Math.imul(gt,J),a=Math.imul(gt,Q),a=a+Math.imul(wt,J)|0,x=Math.imul(wt,Q),p=p+Math.imul(st,Mt)|0,a=a+Math.imul(st,Bt)|0,a=a+Math.imul(ht,Mt)|0,x=x+Math.imul(ht,Bt)|0,p=p+Math.imul(tt,At)|0,a=a+Math.imul(tt,_t)|0,a=a+Math.imul(Y,At)|0,x=x+Math.imul(Y,_t)|0,p=p+Math.imul(G,It)|0,a=a+Math.imul(G,St)|0,a=a+Math.imul(X,It)|0,x=x+Math.imul(X,St)|0,p=p+Math.imul(K,Ut)|0,a=a+Math.imul(K,kt)|0,a=a+Math.imul(D,Ut)|0,x=x+Math.imul(D,kt)|0;var En=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(En>>>26)|0,En&=67108863,p=Math.imul(dt,J),a=Math.imul(dt,Q),a=a+Math.imul(it,J)|0,x=Math.imul(it,Q),p=p+Math.imul(gt,Mt)|0,a=a+Math.imul(gt,Bt)|0,a=a+Math.imul(wt,Mt)|0,x=x+Math.imul(wt,Bt)|0,p=p+Math.imul(st,At)|0,a=a+Math.imul(st,_t)|0,a=a+Math.imul(ht,At)|0,x=x+Math.imul(ht,_t)|0,p=p+Math.imul(tt,It)|0,a=a+Math.imul(tt,St)|0,a=a+Math.imul(Y,It)|0,x=x+Math.imul(Y,St)|0,p=p+Math.imul(G,Ut)|0,a=a+Math.imul(G,kt)|0,a=a+Math.imul(X,Ut)|0,x=x+Math.imul(X,kt)|0,p=p+Math.imul(K,Tt)|0,a=a+Math.imul(K,Lt)|0,a=a+Math.imul(D,Tt)|0,x=x+Math.imul(D,Lt)|0;var Mn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,p=Math.imul(xt,J),a=Math.imul(xt,Q),a=a+Math.imul(ut,J)|0,x=Math.imul(ut,Q),p=p+Math.imul(dt,Mt)|0,a=a+Math.imul(dt,Bt)|0,a=a+Math.imul(it,Mt)|0,x=x+Math.imul(it,Bt)|0,p=p+Math.imul(gt,At)|0,a=a+Math.imul(gt,_t)|0,a=a+Math.imul(wt,At)|0,x=x+Math.imul(wt,_t)|0,p=p+Math.imul(st,It)|0,a=a+Math.imul(st,St)|0,a=a+Math.imul(ht,It)|0,x=x+Math.imul(ht,St)|0,p=p+Math.imul(tt,Ut)|0,a=a+Math.imul(tt,kt)|0,a=a+Math.imul(Y,Ut)|0,x=x+Math.imul(Y,kt)|0,p=p+Math.imul(G,Tt)|0,a=a+Math.imul(G,Lt)|0,a=a+Math.imul(X,Tt)|0,x=x+Math.imul(X,Lt)|0,p=p+Math.imul(K,Rt)|0,a=a+Math.imul(K,Ct)|0,a=a+Math.imul(D,Rt)|0,x=x+Math.imul(D,Ct)|0;var Bn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,p=Math.imul(h,J),a=Math.imul(h,Q),a=a+Math.imul(o,J)|0,x=Math.imul(o,Q),p=p+Math.imul(xt,Mt)|0,a=a+Math.imul(xt,Bt)|0,a=a+Math.imul(ut,Mt)|0,x=x+Math.imul(ut,Bt)|0,p=p+Math.imul(dt,At)|0,a=a+Math.imul(dt,_t)|0,a=a+Math.imul(it,At)|0,x=x+Math.imul(it,_t)|0,p=p+Math.imul(gt,It)|0,a=a+Math.imul(gt,St)|0,a=a+Math.imul(wt,It)|0,x=x+Math.imul(wt,St)|0,p=p+Math.imul(st,Ut)|0,a=a+Math.imul(st,kt)|0,a=a+Math.imul(ht,Ut)|0,x=x+Math.imul(ht,kt)|0,p=p+Math.imul(tt,Tt)|0,a=a+Math.imul(tt,Lt)|0,a=a+Math.imul(Y,Tt)|0,x=x+Math.imul(Y,Lt)|0,p=p+Math.imul(G,Rt)|0,a=a+Math.imul(G,Ct)|0,a=a+Math.imul(X,Rt)|0,x=x+Math.imul(X,Ct)|0,p=p+Math.imul(K,Ot)|0,a=a+Math.imul(K,Nt)|0,a=a+Math.imul(D,Ot)|0,x=x+Math.imul(D,Nt)|0;var An=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(An>>>26)|0,An&=67108863,p=Math.imul(y,J),a=Math.imul(y,Q),a=a+Math.imul(B,J)|0,x=Math.imul(B,Q),p=p+Math.imul(h,Mt)|0,a=a+Math.imul(h,Bt)|0,a=a+Math.imul(o,Mt)|0,x=x+Math.imul(o,Bt)|0,p=p+Math.imul(xt,At)|0,a=a+Math.imul(xt,_t)|0,a=a+Math.imul(ut,At)|0,x=x+Math.imul(ut,_t)|0,p=p+Math.imul(dt,It)|0,a=a+Math.imul(dt,St)|0,a=a+Math.imul(it,It)|0,x=x+Math.imul(it,St)|0,p=p+Math.imul(gt,Ut)|0,a=a+Math.imul(gt,kt)|0,a=a+Math.imul(wt,Ut)|0,x=x+Math.imul(wt,kt)|0,p=p+Math.imul(st,Tt)|0,a=a+Math.imul(st,Lt)|0,a=a+Math.imul(ht,Tt)|0,x=x+Math.imul(ht,Lt)|0,p=p+Math.imul(tt,Rt)|0,a=a+Math.imul(tt,Ct)|0,a=a+Math.imul(Y,Rt)|0,x=x+Math.imul(Y,Ct)|0,p=p+Math.imul(G,Ot)|0,a=a+Math.imul(G,Nt)|0,a=a+Math.imul(X,Ot)|0,x=x+Math.imul(X,Nt)|0,p=p+Math.imul(K,Dt)|0,a=a+Math.imul(K,Kt)|0,a=a+Math.imul(D,Dt)|0,x=x+Math.imul(D,Kt)|0;var _n=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(_n>>>26)|0,_n&=67108863,p=Math.imul(T,J),a=Math.imul(T,Q),a=a+Math.imul(V,J)|0,x=Math.imul(V,Q),p=p+Math.imul(y,Mt)|0,a=a+Math.imul(y,Bt)|0,a=a+Math.imul(B,Mt)|0,x=x+Math.imul(B,Bt)|0,p=p+Math.imul(h,At)|0,a=a+Math.imul(h,_t)|0,a=a+Math.imul(o,At)|0,x=x+Math.imul(o,_t)|0,p=p+Math.imul(xt,It)|0,a=a+Math.imul(xt,St)|0,a=a+Math.imul(ut,It)|0,x=x+Math.imul(ut,St)|0,p=p+Math.imul(dt,Ut)|0,a=a+Math.imul(dt,kt)|0,a=a+Math.imul(it,Ut)|0,x=x+Math.imul(it,kt)|0,p=p+Math.imul(gt,Tt)|0,a=a+Math.imul(gt,Lt)|0,a=a+Math.imul(wt,Tt)|0,x=x+Math.imul(wt,Lt)|0,p=p+Math.imul(st,Rt)|0,a=a+Math.imul(st,Ct)|0,a=a+Math.imul(ht,Rt)|0,x=x+Math.imul(ht,Ct)|0,p=p+Math.imul(tt,Ot)|0,a=a+Math.imul(tt,Nt)|0,a=a+Math.imul(Y,Ot)|0,x=x+Math.imul(Y,Nt)|0,p=p+Math.imul(G,Dt)|0,a=a+Math.imul(G,Kt)|0,a=a+Math.imul(X,Dt)|0,x=x+Math.imul(X,Kt)|0,p=p+Math.imul(K,Pt)|0,a=a+Math.imul(K,Ft)|0,a=a+Math.imul(D,Pt)|0,x=x+Math.imul(D,Ft)|0;var In=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(In>>>26)|0,In&=67108863,p=Math.imul(T,Mt),a=Math.imul(T,Bt),a=a+Math.imul(V,Mt)|0,x=Math.imul(V,Bt),p=p+Math.imul(y,At)|0,a=a+Math.imul(y,_t)|0,a=a+Math.imul(B,At)|0,x=x+Math.imul(B,_t)|0,p=p+Math.imul(h,It)|0,a=a+Math.imul(h,St)|0,a=a+Math.imul(o,It)|0,x=x+Math.imul(o,St)|0,p=p+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,kt)|0,a=a+Math.imul(ut,Ut)|0,x=x+Math.imul(ut,kt)|0,p=p+Math.imul(dt,Tt)|0,a=a+Math.imul(dt,Lt)|0,a=a+Math.imul(it,Tt)|0,x=x+Math.imul(it,Lt)|0,p=p+Math.imul(gt,Rt)|0,a=a+Math.imul(gt,Ct)|0,a=a+Math.imul(wt,Rt)|0,x=x+Math.imul(wt,Ct)|0,p=p+Math.imul(st,Ot)|0,a=a+Math.imul(st,Nt)|0,a=a+Math.imul(ht,Ot)|0,x=x+Math.imul(ht,Nt)|0,p=p+Math.imul(tt,Dt)|0,a=a+Math.imul(tt,Kt)|0,a=a+Math.imul(Y,Dt)|0,x=x+Math.imul(Y,Kt)|0,p=p+Math.imul(G,Pt)|0,a=a+Math.imul(G,Ft)|0,a=a+Math.imul(X,Pt)|0,x=x+Math.imul(X,Ft)|0;var Sn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,p=Math.imul(T,At),a=Math.imul(T,_t),a=a+Math.imul(V,At)|0,x=Math.imul(V,_t),p=p+Math.imul(y,It)|0,a=a+Math.imul(y,St)|0,a=a+Math.imul(B,It)|0,x=x+Math.imul(B,St)|0,p=p+Math.imul(h,Ut)|0,a=a+Math.imul(h,kt)|0,a=a+Math.imul(o,Ut)|0,x=x+Math.imul(o,kt)|0,p=p+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Lt)|0,a=a+Math.imul(ut,Tt)|0,x=x+Math.imul(ut,Lt)|0,p=p+Math.imul(dt,Rt)|0,a=a+Math.imul(dt,Ct)|0,a=a+Math.imul(it,Rt)|0,x=x+Math.imul(it,Ct)|0,p=p+Math.imul(gt,Ot)|0,a=a+Math.imul(gt,Nt)|0,a=a+Math.imul(wt,Ot)|0,x=x+Math.imul(wt,Nt)|0,p=p+Math.imul(st,Dt)|0,a=a+Math.imul(st,Kt)|0,a=a+Math.imul(ht,Dt)|0,x=x+Math.imul(ht,Kt)|0,p=p+Math.imul(tt,Pt)|0,a=a+Math.imul(tt,Ft)|0,a=a+Math.imul(Y,Pt)|0,x=x+Math.imul(Y,Ft)|0;var Un=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Un>>>26)|0,Un&=67108863,p=Math.imul(T,It),a=Math.imul(T,St),a=a+Math.imul(V,It)|0,x=Math.imul(V,St),p=p+Math.imul(y,Ut)|0,a=a+Math.imul(y,kt)|0,a=a+Math.imul(B,Ut)|0,x=x+Math.imul(B,kt)|0,p=p+Math.imul(h,Tt)|0,a=a+Math.imul(h,Lt)|0,a=a+Math.imul(o,Tt)|0,x=x+Math.imul(o,Lt)|0,p=p+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Ct)|0,a=a+Math.imul(ut,Rt)|0,x=x+Math.imul(ut,Ct)|0,p=p+Math.imul(dt,Ot)|0,a=a+Math.imul(dt,Nt)|0,a=a+Math.imul(it,Ot)|0,x=x+Math.imul(it,Nt)|0,p=p+Math.imul(gt,Dt)|0,a=a+Math.imul(gt,Kt)|0,a=a+Math.imul(wt,Dt)|0,x=x+Math.imul(wt,Kt)|0,p=p+Math.imul(st,Pt)|0,a=a+Math.imul(st,Ft)|0,a=a+Math.imul(ht,Pt)|0,x=x+Math.imul(ht,Ft)|0;var kn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(kn>>>26)|0,kn&=67108863,p=Math.imul(T,Ut),a=Math.imul(T,kt),a=a+Math.imul(V,Ut)|0,x=Math.imul(V,kt),p=p+Math.imul(y,Tt)|0,a=a+Math.imul(y,Lt)|0,a=a+Math.imul(B,Tt)|0,x=x+Math.imul(B,Lt)|0,p=p+Math.imul(h,Rt)|0,a=a+Math.imul(h,Ct)|0,a=a+Math.imul(o,Rt)|0,x=x+Math.imul(o,Ct)|0,p=p+Math.imul(xt,Ot)|0,a=a+Math.imul(xt,Nt)|0,a=a+Math.imul(ut,Ot)|0,x=x+Math.imul(ut,Nt)|0,p=p+Math.imul(dt,Dt)|0,a=a+Math.imul(dt,Kt)|0,a=a+Math.imul(it,Dt)|0,x=x+Math.imul(it,Kt)|0,p=p+Math.imul(gt,Pt)|0,a=a+Math.imul(gt,Ft)|0,a=a+Math.imul(wt,Pt)|0,x=x+Math.imul(wt,Ft)|0;var Tn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,p=Math.imul(T,Tt),a=Math.imul(T,Lt),a=a+Math.imul(V,Tt)|0,x=Math.imul(V,Lt),p=p+Math.imul(y,Rt)|0,a=a+Math.imul(y,Ct)|0,a=a+Math.imul(B,Rt)|0,x=x+Math.imul(B,Ct)|0,p=p+Math.imul(h,Ot)|0,a=a+Math.imul(h,Nt)|0,a=a+Math.imul(o,Ot)|0,x=x+Math.imul(o,Nt)|0,p=p+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,Kt)|0,a=a+Math.imul(ut,Dt)|0,x=x+Math.imul(ut,Kt)|0,p=p+Math.imul(dt,Pt)|0,a=a+Math.imul(dt,Ft)|0,a=a+Math.imul(it,Pt)|0,x=x+Math.imul(it,Ft)|0;var Ln=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,p=Math.imul(T,Rt),a=Math.imul(T,Ct),a=a+Math.imul(V,Rt)|0,x=Math.imul(V,Ct),p=p+Math.imul(y,Ot)|0,a=a+Math.imul(y,Nt)|0,a=a+Math.imul(B,Ot)|0,x=x+Math.imul(B,Nt)|0,p=p+Math.imul(h,Dt)|0,a=a+Math.imul(h,Kt)|0,a=a+Math.imul(o,Dt)|0,x=x+Math.imul(o,Kt)|0,p=p+Math.imul(xt,Pt)|0,a=a+Math.imul(xt,Ft)|0,a=a+Math.imul(ut,Pt)|0,x=x+Math.imul(ut,Ft)|0;var Rn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,p=Math.imul(T,Ot),a=Math.imul(T,Nt),a=a+Math.imul(V,Ot)|0,x=Math.imul(V,Nt),p=p+Math.imul(y,Dt)|0,a=a+Math.imul(y,Kt)|0,a=a+Math.imul(B,Dt)|0,x=x+Math.imul(B,Kt)|0,p=p+Math.imul(h,Pt)|0,a=a+Math.imul(h,Ft)|0,a=a+Math.imul(o,Pt)|0,x=x+Math.imul(o,Ft)|0;var Cn=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,p=Math.imul(T,Dt),a=Math.imul(T,Kt),a=a+Math.imul(V,Dt)|0,x=Math.imul(V,Kt),p=p+Math.imul(y,Pt)|0,a=a+Math.imul(y,Ft)|0,a=a+Math.imul(B,Pt)|0,x=x+Math.imul(B,Ft)|0;var On=(b+p|0)+((a&8191)<<13)|0;b=(x+(a>>>13)|0)+(On>>>26)|0,On&=67108863,p=Math.imul(T,Pt),a=Math.imul(T,Ft),a=a+Math.imul(V,Pt)|0,x=Math.imul(V,Ft);var Nn=(b+p|0)+((a&8191)<<13)|0;return b=(x+(a>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,w[0]=wn,w[1]=xn,w[2]=vn,w[3]=bn,w[4]=En,w[5]=Mn,w[6]=Bn,w[7]=An,w[8]=_n,w[9]=In,w[10]=Sn,w[11]=Un,w[12]=kn,w[13]=Tn,w[14]=Ln,w[15]=Rn,w[16]=Cn,w[17]=On,w[18]=Nn,b!==0&&(w[19]=b,d.length++),d};Math.imul||(z=R);function Z(M,n,u){u.negative=n.negative^M.negative,u.length=M.length+n.length;for(var d=0,m=0,g=0;g<u.length-1;g++){var w=m;m=0;for(var b=d&67108863,p=Math.min(g,n.length-1),a=Math.max(0,g-M.length+1);a<=p;a++){var x=g-a,N=M.words[x]|0,K=n.words[a]|0,D=N*K,q=D&67108863;w=w+(D/67108864|0)|0,q=q+b|0,b=q&67108863,w=w+(q>>>26)|0,m+=w>>>26,w&=67108863}u.words[g]=b,d=w,w=m}return d!==0?u.words[g]=d:u.length--,u._strip()}function W(M,n,u){return Z(M,n,u)}i.prototype.mulTo=function(n,u){var d,m=this.length+n.length;return this.length===10&&n.length===10?d=z(this,n,u):m<63?d=R(this,n,u):m<1024?d=Z(this,n,u):d=W(this,n,u),d};function O(M,n){this.x=M,this.y=n}O.prototype.makeRBT=function(n){for(var u=new Array(n),d=i.prototype._countBits(n)-1,m=0;m<n;m++)u[m]=this.revBin(m,d,n);return u},O.prototype.revBin=function(n,u,d){if(n===0||n===d-1)return n;for(var m=0,g=0;g<u;g++)m|=(n&1)<<u-g-1,n>>=1;return m},O.prototype.permute=function(n,u,d,m,g,w){for(var b=0;b<w;b++)m[b]=u[n[b]],g[b]=d[n[b]]},O.prototype.transform=function(n,u,d,m,g,w){this.permute(w,n,u,d,m,g);for(var b=1;b<g;b<<=1)for(var p=b<<1,a=Math.cos(2*Math.PI/p),x=Math.sin(2*Math.PI/p),N=0;N<g;N+=p)for(var K=a,D=x,q=0;q<b;q++){var G=d[N+q],X=m[N+q],vt=d[N+q+b],tt=m[N+q+b],Y=K*vt-D*tt;tt=K*tt+D*vt,vt=Y,d[N+q]=G+vt,m[N+q]=X+tt,d[N+q+b]=G-vt,m[N+q+b]=X-tt,q!==p&&(Y=a*K-x*D,D=a*D+x*K,K=Y)}},O.prototype.guessLen13b=function(n,u){var d=Math.max(u,n)|1,m=d&1,g=0;for(d=d/2|0;d;d=d>>>1)g++;return 1<<g+1+m},O.prototype.conjugate=function(n,u,d){if(!(d<=1))for(var m=0;m<d/2;m++){var g=n[m];n[m]=n[d-m-1],n[d-m-1]=g,g=u[m],u[m]=-u[d-m-1],u[d-m-1]=-g}},O.prototype.normalize13b=function(n,u){for(var d=0,m=0;m<u/2;m++){var g=Math.round(n[2*m+1]/u)*8192+Math.round(n[2*m]/u)+d;n[m]=g&67108863,g<67108864?d=0:d=g/67108864|0}return n},O.prototype.convert13b=function(n,u,d,m){for(var g=0,w=0;w<u;w++)g=g+(n[w]|0),d[2*w]=g&8191,g=g>>>13,d[2*w+1]=g&8191,g=g>>>13;for(w=2*u;w<m;++w)d[w]=0;r(g===0),r((g&-8192)===0)},O.prototype.stub=function(n){for(var u=new Array(n),d=0;d<n;d++)u[d]=0;return u},O.prototype.mulp=function(n,u,d){var m=2*this.guessLen13b(n.length,u.length),g=this.makeRBT(m),w=this.stub(m),b=new Array(m),p=new Array(m),a=new Array(m),x=new Array(m),N=new Array(m),K=new Array(m),D=d.words;D.length=m,this.convert13b(n.words,n.length,b,m),this.convert13b(u.words,u.length,x,m),this.transform(b,w,p,a,m,g),this.transform(x,w,N,K,m,g);for(var q=0;q<m;q++){var G=p[q]*N[q]-a[q]*K[q];a[q]=p[q]*K[q]+a[q]*N[q],p[q]=G}return this.conjugate(p,a,m),this.transform(p,a,D,w,m,g),this.conjugate(D,w,m),this.normalize13b(D,m),d.negative=n.negative^u.negative,d.length=n.length+u.length,d._strip()},i.prototype.mul=function(n){var u=new i(null);return u.words=new Array(this.length+n.length),this.mulTo(n,u)},i.prototype.mulf=function(n){var u=new i(null);return u.words=new Array(this.length+n.length),W(this,n,u)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var u=n<0;u&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var d=0,m=0;m<this.length;m++){var g=(this.words[m]|0)*n,w=(g&67108863)+(d&67108863);d>>=26,d+=g/67108864|0,d+=w>>>26,this.words[m]=w&67108863}return d!==0&&(this.words[m]=d,this.length++),u?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var u=U(n);if(u.length===0)return new i(1);for(var d=this,m=0;m<u.length&&u[m]===0;m++,d=d.sqr());if(++m<u.length)for(var g=d.sqr();m<u.length;m++,g=g.sqr())u[m]!==0&&(d=d.mul(g));return d},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,m=67108863>>>26-u<<26-u,g;if(u!==0){var w=0;for(g=0;g<this.length;g++){var b=this.words[g]&m,p=(this.words[g]|0)-b<<u;this.words[g]=p|w,w=b>>>26-u}w&&(this.words[g]=w,this.length++)}if(d!==0){for(g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(g=0;g<d;g++)this.words[g]=0;this.length+=d}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,u,d){r(typeof n=="number"&&n>=0);var m;u?m=(u-u%26)/26:m=0;var g=n%26,w=Math.min((n-g)/26,this.length),b=67108863^67108863>>>g<<g,p=d;if(m-=w,m=Math.max(0,m),p){for(var a=0;a<w;a++)p.words[a]=this.words[a];p.length=w}if(w!==0)if(this.length>w)for(this.length-=w,a=0;a<this.length;a++)this.words[a]=this.words[a+w];else this.words[0]=0,this.length=1;var x=0;for(a=this.length-1;a>=0&&(x!==0||a>=m);a--){var N=this.words[a]|0;this.words[a]=x<<26-g|N>>>g,x=N&b}return p&&x!==0&&(p.words[p.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,u,d){return r(this.negative===0),this.iushrn(n,u,d)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,m=1<<u;if(this.length<=d)return!1;var g=this.words[d];return!!(g&m)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var m=67108863^67108863>>>u<<u;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,u,d){var m=n.length+d,g;this._expand(m);var w,b=0;for(g=0;g<n.length;g++){w=(this.words[g+d]|0)+b;var p=(n.words[g]|0)*u;w-=p&67108863,b=(w>>26)-(p/67108864|0),this.words[g+d]=w&67108863}for(;g<this.length-d;g++)w=(this.words[g+d]|0)+b,b=w>>26,this.words[g+d]=w&67108863;if(b===0)return this._strip();for(r(b===-1),b=0,g=0;g<this.length;g++)w=-(this.words[g]|0)+b,b=w>>26,this.words[g]=w&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,u){var d=this.length-n.length,m=this.clone(),g=n,w=g.words[g.length-1]|0,b=this._countBits(w);d=26-b,d!==0&&(g=g.ushln(d),m.iushln(d),w=g.words[g.length-1]|0);var p=m.length-g.length,a;if(u!=="mod"){a=new i(null),a.length=p+1,a.words=new Array(a.length);for(var x=0;x<a.length;x++)a.words[x]=0}var N=m.clone()._ishlnsubmul(g,1,p);N.negative===0&&(m=N,a&&(a.words[p]=1));for(var K=p-1;K>=0;K--){var D=(m.words[g.length+K]|0)*67108864+(m.words[g.length+K-1]|0);for(D=Math.min(D/w|0,67108863),m._ishlnsubmul(g,D,K);m.negative!==0;)D--,m.negative=0,m._ishlnsubmul(g,1,K),m.isZero()||(m.negative^=1);a&&(a.words[K]=D)}return a&&a._strip(),m._strip(),u!=="div"&&d!==0&&m.iushrn(d),{div:a||null,mod:m}},i.prototype.divmod=function(n,u,d){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,g,w;return this.negative!==0&&n.negative===0?(w=this.neg().divmod(n,u),u!=="mod"&&(m=w.div.neg()),u!=="div"&&(g=w.mod.neg(),d&&g.negative!==0&&g.iadd(n)),{div:m,mod:g}):this.negative===0&&n.negative!==0?(w=this.divmod(n.neg(),u),u!=="mod"&&(m=w.div.neg()),{div:m,mod:w.mod}):(this.negative&n.negative)!==0?(w=this.neg().divmod(n.neg(),u),u!=="div"&&(g=w.mod.neg(),d&&g.negative!==0&&g.isub(n)),{div:w.div,mod:g}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?u==="div"?{div:this.divn(n.words[0]),mod:null}:u==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,u)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var u=this.divmod(n);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(n):u.mod,m=n.ushrn(1),g=n.andln(1),w=d.cmp(m);return w<0||g===1&&w===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},i.prototype.modrn=function(n){var u=n<0;u&&(n=-n),r(n<=67108863);for(var d=(1<<26)%n,m=0,g=this.length-1;g>=0;g--)m=(d*m+(this.words[g]|0))%n;return u?-m:m},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var u=n<0;u&&(n=-n),r(n<=67108863);for(var d=0,m=this.length-1;m>=0;m--){var g=(this.words[m]|0)+d*67108864;this.words[m]=g/n|0,d=g%n}return this._strip(),u?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var m=new i(1),g=new i(0),w=new i(0),b=new i(1),p=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++p;for(var a=d.clone(),x=u.clone();!u.isZero();){for(var N=0,K=1;(u.words[0]&K)===0&&N<26;++N,K<<=1);if(N>0)for(u.iushrn(N);N-- >0;)(m.isOdd()||g.isOdd())&&(m.iadd(a),g.isub(x)),m.iushrn(1),g.iushrn(1);for(var D=0,q=1;(d.words[0]&q)===0&&D<26;++D,q<<=1);if(D>0)for(d.iushrn(D);D-- >0;)(w.isOdd()||b.isOdd())&&(w.iadd(a),b.isub(x)),w.iushrn(1),b.iushrn(1);u.cmp(d)>=0?(u.isub(d),m.isub(w),g.isub(b)):(d.isub(u),w.isub(m),b.isub(g))}return{a:w,b,gcd:d.iushln(p)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var m=new i(1),g=new i(0),w=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var b=0,p=1;(u.words[0]&p)===0&&b<26;++b,p<<=1);if(b>0)for(u.iushrn(b);b-- >0;)m.isOdd()&&m.iadd(w),m.iushrn(1);for(var a=0,x=1;(d.words[0]&x)===0&&a<26;++a,x<<=1);if(a>0)for(d.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(w),g.iushrn(1);u.cmp(d)>=0?(u.isub(d),m.isub(g)):(d.isub(u),g.isub(m))}var N;return u.cmpn(1)===0?N=m:N=g,N.cmpn(0)<0&&N.iadd(n),N},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var u=this.clone(),d=n.clone();u.negative=0,d.negative=0;for(var m=0;u.isEven()&&d.isEven();m++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var g=u.cmp(d);if(g<0){var w=u;u=d,d=w}else if(g===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(m)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var u=n%26,d=(n-u)/26,m=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=m,this;for(var g=m,w=d;g!==0&&w<this.length;w++){var b=this.words[w]|0;b+=g,g=b>>>26,b&=67108863,this.words[w]=b}return g!==0&&(this.words[w]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var u=n<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(n=-n),r(n<=67108863,"Number is too big");var m=this.words[0]|0;d=m===n?0:m<n?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var u=this.ucmp(n);return this.negative!==0?-u|0:u},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var m=this.words[d]|0,g=n.words[d]|0;if(m!==g){m<g?u=-1:m>g&&(u=1);break}}return u},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new ot(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var j={k256:null,p224:null,p192:null,p25519:null};function nt(M,n){this.name=M,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}nt.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},nt.prototype.ireduce=function(n){var u=n,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var m=d<this.n?-1:u.ucmp(this.p);return m===0?(u.words[0]=0,u.length=1):m>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},nt.prototype.split=function(n,u){n.iushrn(this.n,0,u)},nt.prototype.imulK=function(n){return n.imul(this.k)};function ct(){nt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ct,nt),ct.prototype.split=function(n,u){for(var d=4194303,m=Math.min(n.length,9),g=0;g<m;g++)u.words[g]=n.words[g];if(u.length=m,n.length<=9){n.words[0]=0,n.length=1;return}var w=n.words[9];for(u.words[u.length++]=w&d,g=10;g<n.length;g++){var b=n.words[g]|0;n.words[g-10]=(b&d)<<4|w>>>22,w=b}w>>>=22,n.words[g-10]=w,w===0&&n.length>10?n.length-=10:n.length-=9},ct.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var u=0,d=0;d<n.length;d++){var m=n.words[d]|0;u+=m*977,n.words[d]=u&67108863,u=m*64+(u/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function yt(){nt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(yt,nt);function Ht(){nt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Ht,nt);function te(){nt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(te,nt),te.prototype.imulK=function(n){for(var u=0,d=0;d<n.length;d++){var m=(n.words[d]|0)*19+u,g=m&67108863;m>>>=26,n.words[d]=g,u=m}return u!==0&&(n.words[n.length++]=u),n},i._prime=function(n){if(j[n])return j[n];var u;if(n==="k256")u=new ct;else if(n==="p224")u=new yt;else if(n==="p192")u=new Ht;else if(n==="p25519")u=new te;else throw new Error("Unknown prime "+n);return j[n]=u,u};function ot(M){if(typeof M=="string"){var n=i._prime(M);this.m=n.p,this.prime=n}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}ot.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},ot.prototype._verify2=function(n,u){r((n.negative|u.negative)===0,"red works only with positives"),r(n.red&&n.red===u.red,"red works only with red numbers")},ot.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(_(n,n.umod(this.m)._forceRed(this)),n)},ot.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},ot.prototype.add=function(n,u){this._verify2(n,u);var d=n.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},ot.prototype.iadd=function(n,u){this._verify2(n,u);var d=n.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},ot.prototype.sub=function(n,u){this._verify2(n,u);var d=n.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},ot.prototype.isub=function(n,u){this._verify2(n,u);var d=n.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},ot.prototype.shl=function(n,u){return this._verify1(n),this.imod(n.ushln(u))},ot.prototype.imul=function(n,u){return this._verify2(n,u),this.imod(n.imul(u))},ot.prototype.mul=function(n,u){return this._verify2(n,u),this.imod(n.mul(u))},ot.prototype.isqr=function(n){return this.imul(n,n.clone())},ot.prototype.sqr=function(n){return this.mul(n,n)},ot.prototype.sqrt=function(n){if(n.isZero())return n.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(n,d)}for(var m=this.m.subn(1),g=0;!m.isZero()&&m.andln(1)===0;)g++,m.iushrn(1);r(!m.isZero());var w=new i(1).toRed(this),b=w.redNeg(),p=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,p).cmp(b)!==0;)a.redIAdd(b);for(var x=this.pow(a,m),N=this.pow(n,m.addn(1).iushrn(1)),K=this.pow(n,m),D=g;K.cmp(w)!==0;){for(var q=K,G=0;q.cmp(w)!==0;G++)q=q.redSqr();r(G<D);var X=this.pow(x,new i(1).iushln(D-G-1));N=N.redMul(X),x=X.redSqr(),K=K.redMul(x),D=G}return N},ot.prototype.invm=function(n){var u=n._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},ot.prototype.pow=function(n,u){if(u.isZero())return new i(1).toRed(this);if(u.cmpn(1)===0)return n.clone();var d=4,m=new Array(1<<d);m[0]=new i(1).toRed(this),m[1]=n;for(var g=2;g<m.length;g++)m[g]=this.mul(m[g-1],n);var w=m[0],b=0,p=0,a=u.bitLength()%26;for(a===0&&(a=26),g=u.length-1;g>=0;g--){for(var x=u.words[g],N=a-1;N>=0;N--){var K=x>>N&1;if(w!==m[0]&&(w=this.sqr(w)),K===0&&b===0){p=0;continue}b<<=1,b|=K,p++,!(p!==d&&(g!==0||N!==0))&&(w=this.mul(w,m[b]),p=0,b=0)}a=26}return w},ot.prototype.convertTo=function(n){var u=n.umod(this.m);return u===n?u.clone():u},ot.prototype.convertFrom=function(n){var u=n.clone();return u.red=null,u},i.mont=function(n){return new Zt(n)};function Zt(M){ot.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Zt,ot),Zt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Zt.prototype.convertFrom=function(n){var u=this.imod(n.mul(this.rinv));return u.red=null,u},Zt.prototype.imul=function(n,u){if(n.isZero()||u.isZero())return n.words[0]=0,n.length=1,n;var d=n.imul(u),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=d.isub(m).iushrn(this.shift),w=g;return g.cmp(this.m)>=0?w=g.isub(this.m):g.cmpn(0)<0&&(w=g.iadd(this.m)),w._forceRed(this)},Zt.prototype.mul=function(n,u){if(n.isZero()||u.isZero())return new i(0)._forceRed(this);var d=n.mul(u),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=d.isub(m).iushrn(this.shift),w=g;return g.cmp(this.m)>=0?w=g.isub(this.m):g.cmpn(0)<0&&(w=g.iadd(this.m)),w._forceRed(this)},Zt.prototype.invm=function(n){var u=this.imod(n._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof pi>"u"||pi,ls)});var gs=nr((gi,ps)=>{P();H();F();var Xr=(Pr(),Wi(Pn)),pe=Xr.Buffer;function ds(t,e){for(var r in t)e[r]=t[r]}pe.from&&pe.alloc&&pe.allocUnsafe&&pe.allocUnsafeSlow?ps.exports=Xr:(ds(Xr,gi),gi.Buffer=Je);function Je(t,e,r){return pe(t,e,r)}Je.prototype=Object.create(pe.prototype);ds(pe,Je);Je.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return pe(t,e,r)};Je.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var s=pe(t);return e!==void 0?typeof r=="string"?s.fill(e,r):s.fill(e):s.fill(0),s};Je.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return pe(t)};Je.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Xr.SlowBuffer(t)}});var ys=nr((ul,ms)=>{"use strict";P();H();F();var Qr=gs().Buffer;function Xa(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),l=i.charCodeAt(0);if(e[l]!==255)throw new TypeError(i+" is ambiguous");e[l]=s}var f=t.length,E=t.charAt(0),v=Math.log(f)/Math.log(256),_=Math.log(256)/Math.log(f);function I(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=Qr.from(L)),!Qr.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var C=0,U=0,R=0,z=L.length;R!==z&&L[R]===0;)R++,C++;for(var Z=(z-R)*_+1>>>0,W=new Uint8Array(Z);R!==z;){for(var O=L[R],j=0,nt=Z-1;(O!==0||j<U)&&nt!==-1;nt--,j++)O+=256*W[nt]>>>0,W[nt]=O%f>>>0,O=O/f>>>0;if(O!==0)throw new Error("Non-zero carry");U=j,R++}for(var ct=Z-U;ct!==Z&&W[ct]===0;)ct++;for(var yt=E.repeat(C);ct<Z;++ct)yt+=t.charAt(W[ct]);return yt}function A(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return Qr.alloc(0);for(var C=0,U=0,R=0;L[C]===E;)U++,C++;for(var z=(L.length-C)*v+1>>>0,Z=new Uint8Array(z);C<L.length;){var W=L.charCodeAt(C);if(W>255)return;var O=e[W];if(O===255)return;for(var j=0,nt=z-1;(O!==0||j<R)&&nt!==-1;nt--,j++)O+=f*Z[nt]>>>0,Z[nt]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");R=j,C++}for(var ct=z-R;ct!==z&&Z[ct]===0;)ct++;var yt=Qr.allocUnsafe(U+(z-ct));yt.fill(0,0,U);for(var Ht=U;ct!==z;)yt[Ht++]=Z[ct++];return yt}function k(L){var C=A(L);if(C)return C;throw new Error("Non-base"+f+" character")}return{encode:I,decodeUnsafe:A,decode:k}}ms.exports=Xa});var xs=nr((dl,ws)=>{P();H();F();var Qa=ys(),tc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";ws.exports=Qa(tc)});var vs=nr(wi=>{"use strict";P();H();F();function Ee(t,e,r){return e<=t&&t<=r}function on(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function ec(t){for(var e=String(t),r=e.length,s=0,i=[];s<r;){var l=e.charCodeAt(s);if(l<55296||l>57343)i.push(l);else if(56320<=l&&l<=57343)i.push(65533);else if(55296<=l&&l<=56319)if(s===r-1)i.push(65533);else{var f=t.charCodeAt(s+1);if(56320<=f&&f<=57343){var E=l&1023,v=f&1023;i.push(65536+(E<<10)+v),s+=1}else i.push(65533)}s+=1}return i}function rc(t){for(var e="",r=0;r<t.length;++r){var s=t[r];s<=65535?e+=String.fromCharCode(s):(s-=65536,e+=String.fromCharCode((s>>10)+55296,(s&1023)+56320))}return e}var tn=-1;function yi(t){this.tokens=[].slice.call(t)}yi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():tn},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var pr=-1;function mi(t,e){if(t)throw TypeError("Decoder error");return e||65533}var en="utf-8";function rn(t,e){if(!(this instanceof rn))return new rn(t,e);if(t=t!==void 0?String(t).toLowerCase():en,t!==en)throw new Error("Encoding not supported. Only utf-8 is supported");e=on(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}rn.prototype={decode:function(e,r){var s;typeof e=="object"&&e instanceof ArrayBuffer?s=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):s=new Uint8Array(0),r=on(r),this._streaming||(this._decoder=new nc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new yi(s),l=[],f;!i.endOfStream()&&(f=this._decoder.handler(i,i.read()),f!==pr);)f!==null&&(Array.isArray(f)?l.push.apply(l,f):l.push(f));if(!this._streaming){do{if(f=this._decoder.handler(i,i.read()),f===pr)break;f!==null&&(Array.isArray(f)?l.push.apply(l,f):l.push(f))}while(!i.endOfStream());this._decoder=null}return l.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(l[0]===65279?(this._BOMseen=!0,l.shift()):this._BOMseen=!0),rc(l)}};function nn(t,e){if(!(this instanceof nn))return new nn(t,e);if(t=t!==void 0?String(t).toLowerCase():en,t!==en)throw new Error("Encoding not supported. Only utf-8 is supported");e=on(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}nn.prototype={encode:function(e,r){e=e?String(e):"",r=on(r),this._streaming||(this._encoder=new ic(this._options)),this._streaming=!!r.stream;for(var s=[],i=new yi(ec(e)),l;!i.endOfStream()&&(l=this._encoder.handler(i,i.read()),l!==pr);)Array.isArray(l)?s.push.apply(s,l):s.push(l);if(!this._streaming){for(;l=this._encoder.handler(i,i.read()),l!==pr;)Array.isArray(l)?s.push.apply(s,l):s.push(l);this._encoder=null}return new Uint8Array(s)}};function nc(t){var e=t.fatal,r=0,s=0,i=0,l=128,f=191;this.handler=function(E,v){if(v===tn&&i!==0)return i=0,mi(e);if(v===tn)return pr;if(i===0){if(Ee(v,0,127))return v;if(Ee(v,194,223))i=1,r=v-192;else if(Ee(v,224,239))v===224&&(l=160),v===237&&(f=159),i=2,r=v-224;else if(Ee(v,240,244))v===240&&(l=144),v===244&&(f=143),i=3,r=v-240;else return mi(e);return r=r<<6*i,null}if(!Ee(v,l,f))return r=i=s=0,l=128,f=191,E.prepend(v),mi(e);if(l=128,f=191,s+=1,r+=v-128<<6*(i-s),s!==i)return null;var _=r;return r=i=s=0,_}}function ic(t){var e=t.fatal;this.handler=function(r,s){if(s===tn)return pr;if(Ee(s,0,127))return s;var i,l;Ee(s,128,2047)?(i=1,l=192):Ee(s,2048,65535)?(i=2,l=224):Ee(s,65536,1114111)&&(i=3,l=240);for(var f=[(s>>6*i)+l];i>0;){var E=s>>6*(i-1);f.push(128|E&63),i-=1}return f}}wi.TextEncoder=nn;wi.TextDecoder=rn});var bi=nr(lt=>{"use strict";P();H();F();var oc=lt&&lt.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),sc=lt&&lt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ge=lt&&lt.__decorate||function(t,e,r,s){var i=arguments.length,l=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,s);else for(var E=t.length-1;E>=0;E--)(f=t[E])&&(l=(i<3?f(l):i>3?f(e,r,l):f(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l},ac=lt&&lt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&oc(e,t,r);return sc(e,t),e},bs=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lt,"__esModule",{value:!0});lt.deserializeUnchecked=lt.deserialize=lt.serialize=lt.BinaryReader=lt.BinaryWriter=lt.BorshError=lt.baseDecode=lt.baseEncode=void 0;var Le=bs(hs()),Es=bs(xs()),cc=ac(vs()),uc=typeof TextDecoder!="function"?cc.TextDecoder:TextDecoder,fc=new uc("utf-8",{fatal:!0});function lc(t){return typeof t=="string"&&(t=$.from(t,"utf8")),Es.default.encode($.from(t))}lt.baseEncode=lc;function hc(t){return $.from(Es.default.decode(t))}lt.baseDecode=hc;var xi=1024,Vt=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};lt.BorshError=Vt;var sn=class{constructor(){this.buf=$.alloc(xi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=$.concat([this.buf,$.alloc(xi)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer($.from(new Le.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer($.from(new Le.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer($.from(new Le.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer($.from(new Le.default(e).toArray("le",64)))}writeBuffer(e){this.buf=$.concat([$.from(this.buf.subarray(0,this.length)),e,$.alloc(xi)]),this.length+=e.length}writeString(e){this.maybeResize();let r=$.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer($.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(let s of e)this.maybeResize(),r(s)}toArray(){return this.buf.subarray(0,this.length)}};lt.BinaryWriter=sn;function me(t,e,r){let s=r.value;r.value=function(...i){try{return s.apply(this,i)}catch(l){if(l instanceof RangeError){let f=l.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new Vt("Reached the end of buffer when deserializing")}throw l}}}var Xt=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Le.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Le.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Le.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Le.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Vt(`Expected buffer length ${e} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){let e=this.readU32(),r=this.readBuffer(e);try{return fc.decode(r)}catch(s){throw new Vt(`Error decoding UTF-8 string: ${s}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let r=this.readU32(),s=Array();for(let i=0;i<r;++i)s.push(e());return s}};ge([me],Xt.prototype,"readU8",null);ge([me],Xt.prototype,"readU16",null);ge([me],Xt.prototype,"readU32",null);ge([me],Xt.prototype,"readU64",null);ge([me],Xt.prototype,"readU128",null);ge([me],Xt.prototype,"readU256",null);ge([me],Xt.prototype,"readU512",null);ge([me],Xt.prototype,"readString",null);ge([me],Xt.prototype,"readFixedArray",null);ge([me],Xt.prototype,"readArray",null);lt.BinaryReader=Xt;function Ms(t){return t.charAt(0).toUpperCase()+t.slice(1)}function je(t,e,r,s,i){try{if(typeof s=="string")i[`write${Ms(s)}`](r);else if(s instanceof Array)if(typeof s[0]=="number"){if(r.length!==s[0])throw new Vt(`Expecting byte array of length ${s[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(s.length===2&&typeof s[1]=="number"){if(r.length!==s[1])throw new Vt(`Expecting byte array of length ${s[1]}, but got ${r.length} bytes`);for(let l=0;l<s[1];l++)je(t,null,r[l],s[0],i)}else i.writeArray(r,l=>{je(t,e,l,s[0],i)});else if(s.kind!==void 0)switch(s.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),je(t,e,r,s.type,i));break}case"map":{i.writeU32(r.size),r.forEach((l,f)=>{je(t,e,f,s.key,i),je(t,e,l,s.value,i)});break}default:throw new Vt(`FieldType ${s} unrecognized`)}else Bs(t,r,i)}catch(l){throw l instanceof Vt&&l.addToFieldPath(e),l}}function Bs(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}let s=t.get(e.constructor);if(!s)throw new Vt(`Class ${e.constructor.name} is missing in schema`);if(s.kind==="struct")s.fields.map(([i,l])=>{je(t,i,e[i],l,r)});else if(s.kind==="enum"){let i=e[s.field];for(let l=0;l<s.values.length;++l){let[f,E]=s.values[l];if(f===i){r.writeU8(l),je(t,f,e[f],E,r);break}}}else throw new Vt(`Unexpected schema kind: ${s.kind} for ${e.constructor.name}`)}function dc(t,e,r=sn){let s=new r;return Bs(t,e,s),s.toArray()}lt.serialize=dc;function Ye(t,e,r,s){try{if(typeof r=="string")return s[`read${Ms(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return s.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let l=0;l<r[1];l++)i.push(Ye(t,null,r[0],s));return i}else return s.readArray(()=>Ye(t,e,r[0],s))}if(r.kind==="option")return s.readU8()?Ye(t,e,r.type,s):void 0;if(r.kind==="map"){let i=new Map,l=s.readU32();for(let f=0;f<l;f++){let E=Ye(t,e,r.key,s),v=Ye(t,e,r.value,s);i.set(E,v)}return i}return vi(t,r,s)}catch(i){throw i instanceof Vt&&i.addToFieldPath(e),i}}function vi(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);let s=t.get(e);if(!s)throw new Vt(`Class ${e.name} is missing in schema`);if(s.kind==="struct"){let i={};for(let[l,f]of t.get(e).fields)i[l]=Ye(t,l,f,r);return new e(i)}if(s.kind==="enum"){let i=r.readU8();if(i>=s.values.length)throw new Vt(`Enum index: ${i} is out of range`);let[l,f]=s.values[i],E=Ye(t,l,f,r);return new e({[l]:E})}throw new Vt(`Unexpected schema kind: ${s.kind} for ${e.constructor.name}`)}function pc(t,e,r,s=Xt){let i=new s(r),l=vi(t,e,i);if(i.offset<r.length)throw new Vt(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return l}lt.deserialize=pc;function gc(t,e,r,s=Xt){let i=new s(r);return vi(t,e,i)}lt.deserializeUnchecked=gc});P();H();F();P();H();F();Object.defineProperty(window,"localStorage",{value:sandboxedLocalStorage});Object.defineProperty(window,"open",{value:function(t,e,r){return console.log("open",t),window.selector.open(t,e,r)}});P();H();F();var ln={};Dr(ln,{LsPrefix:()=>Jr,SCHEMA:()=>Ii,base64ToBytes:()=>Sr,bytesToBase64:()=>ui,canSignWithLAK:()=>hi,convertUnit:()=>cs,createDefaultStorage:()=>os,deepCopy:()=>us,exp:()=>fn,fromBase58:()=>Yt,fromBase64:()=>Yr,fromHex:()=>as,keyFromString:()=>Te,keyToString:()=>di,lsGet:()=>ke,lsSet:()=>oe,mapAction:()=>cn,mapTransaction:()=>an,memoryStore:()=>Ir,parseJsonFromBytes:()=>li,privateKeyFromRandom:()=>dr,publicKeyFromPrivate:()=>qt,serializeSignedTransaction:()=>_i,serializeTransaction:()=>Ai,sha256:()=>ir,signBytes:()=>fs,signHash:()=>be,storage:()=>jr,toBase58:()=>We,toBase64:()=>fi,toHex:()=>ss,tryParseJson:()=>lr,txToJson:()=>Is,txToJsonStringified:()=>wc});P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();var Pe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function js(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hr(t,...e){if(!js(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Fn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Qi(t,e){Hr(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Fe(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ae(t,e){return t<<32-e|t>>>e}function to(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Hn(t){return typeof t=="string"&&(t=to(t)),Hr(t),t}var Fr=class{};function qn(t){let e=s=>t().update(Hn(s)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function eo(t=32){if(Pe&&typeof Pe.getRandomValues=="function")return Pe.getRandomValues(new Uint8Array(t));if(Pe&&typeof Pe.randomBytes=="function")return Uint8Array.from(Pe.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Ys(t,e,r,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,s);let i=BigInt(32),l=BigInt(4294967295),f=Number(r>>i&l),E=Number(r&l),v=s?4:0,_=s?0:4;t.setUint32(e+v,f,s),t.setUint32(e+_,E,s)}function ro(t,e,r){return t&e^~t&r}function no(t,e,r){return t&e^t&r^e&r}var xr=class extends Fr{constructor(e,r,s,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=s,this.isLE=i,this.buffer=new Uint8Array(e),this.view=qr(this.buffer)}update(e){Fn(this),e=Hn(e),Hr(e);let{view:r,buffer:s,blockLen:i}=this,l=e.length;for(let f=0;f<l;){let E=Math.min(i-this.pos,l-f);if(E===i){let v=qr(e);for(;i<=l-f;f+=i)this.process(v,f);continue}s.set(e.subarray(f,f+E),this.pos),this.pos+=E,f+=E,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fn(this),Qi(e,this),this.finished=!0;let{buffer:r,view:s,blockLen:i,isLE:l}=this,{pos:f}=this;r[f++]=128,Fe(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(s,0),f=0);for(let A=f;A<i;A++)r[A]=0;Ys(s,i-8,BigInt(this.length*8),l),this.process(s,0);let E=qr(e),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let _=v/4,I=this.get();if(_>I.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<_;A++)E.setUint32(4*A,I[A],l)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let s=e.slice(0,r);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:s,length:i,finished:l,destroyed:f,pos:E}=this;return e.destroyed=f,e.finished=l,e.length=i,e.pos=E,i%r&&e.buffer.set(s),e}clone(){return this._cloneInto()}},xe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var Wt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);P();H();F();var zr=BigInt(4294967295),io=BigInt(32);function Xs(t,e=!1){return e?{h:Number(t&zr),l:Number(t>>io&zr)}:{h:Number(t>>io&zr)|0,l:Number(t&zr)|0}}function oo(t,e=!1){let r=t.length,s=new Uint32Array(r),i=new Uint32Array(r);for(let l=0;l<r;l++){let{h:f,l:E}=Xs(t[l],e);[s[l],i[l]]=[f,E]}return[s,i]}var zn=(t,e,r)=>t>>>r,Wn=(t,e,r)=>t<<32-r|e>>>r,He=(t,e,r)=>t>>>r|e<<32-r,qe=(t,e,r)=>t<<32-r|e>>>r,vr=(t,e,r)=>t<<64-r|e>>>r-32,br=(t,e,r)=>t>>>r-32|e<<64-r;function fe(t,e,r,s){let i=(e>>>0)+(s>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var so=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),ao=(t,e,r,s)=>e+r+s+(t/2**32|0)|0,co=(t,e,r,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),uo=(t,e,r,s,i)=>e+r+s+i+(t/2**32|0)|0,fo=(t,e,r,s,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0)+(i>>>0),lo=(t,e,r,s,i,l)=>e+r+s+i+l+(t/2**32|0)|0;var ta=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_e=new Uint32Array(64),$n=class extends xr{constructor(e=32){super(64,e,8,!1),this.A=xe[0]|0,this.B=xe[1]|0,this.C=xe[2]|0,this.D=xe[3]|0,this.E=xe[4]|0,this.F=xe[5]|0,this.G=xe[6]|0,this.H=xe[7]|0}get(){let{A:e,B:r,C:s,D:i,E:l,F:f,G:E,H:v}=this;return[e,r,s,i,l,f,E,v]}set(e,r,s,i,l,f,E,v){this.A=e|0,this.B=r|0,this.C=s|0,this.D=i|0,this.E=l|0,this.F=f|0,this.G=E|0,this.H=v|0}process(e,r){for(let A=0;A<16;A++,r+=4)_e[A]=e.getUint32(r,!1);for(let A=16;A<64;A++){let k=_e[A-15],L=_e[A-2],C=ae(k,7)^ae(k,18)^k>>>3,U=ae(L,17)^ae(L,19)^L>>>10;_e[A]=U+_e[A-7]+C+_e[A-16]|0}let{A:s,B:i,C:l,D:f,E,F:v,G:_,H:I}=this;for(let A=0;A<64;A++){let k=ae(E,6)^ae(E,11)^ae(E,25),L=I+k+ro(E,v,_)+ta[A]+_e[A]|0,U=(ae(s,2)^ae(s,13)^ae(s,22))+no(s,i,l)|0;I=_,_=v,v=E,E=f+L|0,f=l,l=i,i=s,s=L+U|0}s=s+this.A|0,i=i+this.B|0,l=l+this.C|0,f=f+this.D|0,E=E+this.E|0,v=v+this.F|0,_=_+this.G|0,I=I+this.H|0,this.set(s,i,l,f,E,v,_,I)}roundClean(){Fe(_e)}destroy(){this.set(0,0,0,0,0,0,0,0),Fe(this.buffer)}};var ho=oo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ea=ho[0],ra=ho[1],Ie=new Uint32Array(80),Se=new Uint32Array(80),Vn=class extends xr{constructor(e=64){super(128,e,16,!1),this.Ah=Wt[0]|0,this.Al=Wt[1]|0,this.Bh=Wt[2]|0,this.Bl=Wt[3]|0,this.Ch=Wt[4]|0,this.Cl=Wt[5]|0,this.Dh=Wt[6]|0,this.Dl=Wt[7]|0,this.Eh=Wt[8]|0,this.El=Wt[9]|0,this.Fh=Wt[10]|0,this.Fl=Wt[11]|0,this.Gh=Wt[12]|0,this.Gl=Wt[13]|0,this.Hh=Wt[14]|0,this.Hl=Wt[15]|0}get(){let{Ah:e,Al:r,Bh:s,Bl:i,Ch:l,Cl:f,Dh:E,Dl:v,Eh:_,El:I,Fh:A,Fl:k,Gh:L,Gl:C,Hh:U,Hl:R}=this;return[e,r,s,i,l,f,E,v,_,I,A,k,L,C,U,R]}set(e,r,s,i,l,f,E,v,_,I,A,k,L,C,U,R){this.Ah=e|0,this.Al=r|0,this.Bh=s|0,this.Bl=i|0,this.Ch=l|0,this.Cl=f|0,this.Dh=E|0,this.Dl=v|0,this.Eh=_|0,this.El=I|0,this.Fh=A|0,this.Fl=k|0,this.Gh=L|0,this.Gl=C|0,this.Hh=U|0,this.Hl=R|0}process(e,r){for(let W=0;W<16;W++,r+=4)Ie[W]=e.getUint32(r),Se[W]=e.getUint32(r+=4);for(let W=16;W<80;W++){let O=Ie[W-15]|0,j=Se[W-15]|0,nt=He(O,j,1)^He(O,j,8)^zn(O,j,7),ct=qe(O,j,1)^qe(O,j,8)^Wn(O,j,7),yt=Ie[W-2]|0,Ht=Se[W-2]|0,te=He(yt,Ht,19)^vr(yt,Ht,61)^zn(yt,Ht,6),ot=qe(yt,Ht,19)^br(yt,Ht,61)^Wn(yt,Ht,6),Zt=co(ct,ot,Se[W-7],Se[W-16]),M=uo(Zt,nt,te,Ie[W-7],Ie[W-16]);Ie[W]=M|0,Se[W]=Zt|0}let{Ah:s,Al:i,Bh:l,Bl:f,Ch:E,Cl:v,Dh:_,Dl:I,Eh:A,El:k,Fh:L,Fl:C,Gh:U,Gl:R,Hh:z,Hl:Z}=this;for(let W=0;W<80;W++){let O=He(A,k,14)^He(A,k,18)^vr(A,k,41),j=qe(A,k,14)^qe(A,k,18)^br(A,k,41),nt=A&L^~A&U,ct=k&C^~k&R,yt=fo(Z,j,ct,ra[W],Se[W]),Ht=lo(yt,z,O,nt,ea[W],Ie[W]),te=yt|0,ot=He(s,i,28)^vr(s,i,34)^vr(s,i,39),Zt=qe(s,i,28)^br(s,i,34)^br(s,i,39),M=s&l^s&E^l&E,n=i&f^i&v^f&v;z=U|0,Z=R|0,U=L|0,R=C|0,L=A|0,C=k|0,{h:A,l:k}=fe(_|0,I|0,Ht|0,te|0),_=E|0,I=v|0,E=l|0,v=f|0,l=s|0,f=i|0;let u=so(te,Zt,n);s=ao(u,Ht,ot,M),i=u|0}({h:s,l:i}=fe(this.Ah|0,this.Al|0,s|0,i|0)),{h:l,l:f}=fe(this.Bh|0,this.Bl|0,l|0,f|0),{h:E,l:v}=fe(this.Ch|0,this.Cl|0,E|0,v|0),{h:_,l:I}=fe(this.Dh|0,this.Dl|0,_|0,I|0),{h:A,l:k}=fe(this.Eh|0,this.El|0,A|0,k|0),{h:L,l:C}=fe(this.Fh|0,this.Fl|0,L|0,C|0),{h:U,l:R}=fe(this.Gh|0,this.Gl|0,U|0,R|0),{h:z,l:Z}=fe(this.Hh|0,this.Hl|0,z|0,Z|0),this.set(s,i,l,f,E,v,_,I,A,k,L,C,U,R,z,Z)}roundClean(){Fe(Ie,Se)}destroy(){Fe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var ir=qn(()=>new $n);var po=qn(()=>new Vn);P();H();F();P();H();F();P();H();F();var Jn=BigInt(0),Gn=BigInt(1);function jn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yn(t){if(!jn(t))throw new Error("Uint8Array expected")}function Wr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function mo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Jn:BigInt("0x"+t)}var yo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",na=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $r(t){if(Yn(t),yo)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=na[t[r]];return e}var ve={_0:48,_9:57,A:65,F:70,a:97,f:102};function go(t){if(t>=ve._0&&t<=ve._9)return t-ve._0;if(t>=ve.A&&t<=ve.F)return t-(ve.A-10);if(t>=ve.a&&t<=ve.f)return t-(ve.a-10)}function wo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(yo)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let s=new Uint8Array(r);for(let i=0,l=0;i<r;i++,l+=2){let f=go(t.charCodeAt(l)),E=go(t.charCodeAt(l+1));if(f===void 0||E===void 0){let v=t[l]+t[l+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+l)}s[i]=f*16+E}return s}function xo(t){return mo($r(t))}function or(t){return Yn(t),mo($r(Uint8Array.from(t).reverse()))}function Xn(t,e){return wo(t.toString(16).padStart(e*2,"0"))}function Er(t,e){return Xn(t,e).reverse()}function ce(t,e,r){let s;if(typeof e=="string")try{s=wo(e)}catch(l){throw new Error(t+" must be hex string or Uint8Array, cause: "+l)}else if(jn(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let i=s.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return s}function Qn(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];Yn(i),e+=i.length}let r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){let l=t[s];r.set(l,i),i+=l.length}return r}var Zn=t=>typeof t=="bigint"&&Jn<=t;function ia(t,e,r){return Zn(t)&&Zn(e)&&Zn(r)&&e<=t&&t<r}function sr(t,e,r,s){if(!ia(e,r,s))throw new Error("expected valid "+t+": "+r+" <= n < "+s+", got "+e)}function vo(t){let e;for(e=0;t>Jn;t>>=Gn,e+=1);return e}var Mr=t=>(Gn<<BigInt(t))-Gn;var oa={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jn(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ar(t,e,r={}){let s=(i,l,f)=>{let E=oa[l];if(typeof E!="function")throw new Error("invalid validator function");let v=t[i];if(!(f&&v===void 0)&&!E(v,t))throw new Error("param "+String(i)+" is invalid. Expected "+l+", got "+v)};for(let[i,l]of Object.entries(e))s(i,l,!1);for(let[i,l]of Object.entries(r))s(i,l,!0);return t}function ti(t){let e=new WeakMap;return(r,...s)=>{let i=e.get(r);if(i!==void 0)return i;let l=t(r,...s);return e.set(r,l),l}}var Jt=BigInt(0),Gt=BigInt(1),ze=BigInt(2),sa=BigInt(3),Mo=BigInt(4),Bo=BigInt(5),Ao=BigInt(8);function bt(t,e){let r=t%e;return r>=Jt?r:e+r}function ue(t,e,r){let s=t;for(;e-- >Jt;)s*=s,s%=r;return s}function bo(t,e){if(t===Jt)throw new Error("invert: expected non-zero number");if(e<=Jt)throw new Error("invert: expected positive modulus, got "+e);let r=bt(t,e),s=e,i=Jt,l=Gt,f=Gt,E=Jt;for(;r!==Jt;){let _=s/r,I=s%r,A=i-f*_,k=l-E*_;s=r,r=I,i=f,l=E,f=A,E=k}if(s!==Gt)throw new Error("invert: does not exist");return bt(i,e)}function _o(t,e){let r=(t.ORDER+Gt)/Mo,s=t.pow(e,r);if(!t.eql(t.sqr(s),e))throw new Error("Cannot find square root");return s}function aa(t,e){let r=(t.ORDER-Bo)/Ao,s=t.mul(e,ze),i=t.pow(s,r),l=t.mul(e,i),f=t.mul(t.mul(l,ze),i),E=t.mul(l,t.sub(f,t.ONE));if(!t.eql(t.sqr(E),e))throw new Error("Cannot find square root");return E}function ca(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Gt,r=0;for(;e%ze===Jt;)e/=ze,r++;let s=ze,i=Br(t);for(;Eo(i,s)===1;)if(s++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return _o;let l=i.pow(s,e),f=(e+Gt)/ze;return function(v,_){if(v.is0(_))return _;if(Eo(v,_)!==1)throw new Error("Cannot find square root");let I=r,A=v.mul(v.ONE,l),k=v.pow(_,e),L=v.pow(_,f);for(;!v.eql(k,v.ONE);){if(v.is0(k))return v.ZERO;let C=1,U=v.sqr(k);for(;!v.eql(U,v.ONE);)if(C++,U=v.sqr(U),C===I)throw new Error("Cannot find square root");let R=Gt<<BigInt(I-C-1),z=v.pow(A,R);I=C,A=v.sqr(z),k=v.mul(k,A),L=v.mul(L,z)}return L}}function ua(t){return t%Mo===sa?_o:t%Ao===Bo?aa:ca(t)}var Io=(t,e)=>(bt(t,e)&Gt)===Gt,fa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function So(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=fa.reduce((s,i)=>(s[i]="function",s),e);return ar(t,r)}function la(t,e,r){if(r<Jt)throw new Error("invalid exponent, negatives unsupported");if(r===Jt)return t.ONE;if(r===Gt)return e;let s=t.ONE,i=e;for(;r>Jt;)r&Gt&&(s=t.mul(s,i)),i=t.sqr(i),r>>=Gt;return s}function Vr(t,e,r=!1){let s=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((f,E,v)=>t.is0(E)?f:(s[v]=f,t.mul(f,E)),t.ONE),l=t.inv(i);return e.reduceRight((f,E,v)=>t.is0(E)?f:(s[v]=t.mul(f,s[v]),t.mul(f,E)),l),s}function Eo(t,e){let r=(t.ORDER-Gt)/ze,s=t.pow(e,r),i=t.eql(s,t.ONE),l=t.eql(s,t.ZERO),f=t.eql(s,t.neg(t.ONE));if(!i&&!l&&!f)throw new Error("invalid Legendre symbol result");return i?1:l?0:-1}function ei(t,e){e!==void 0&&Xi(e);let r=e!==void 0?e:t.toString(2).length,s=Math.ceil(r/8);return{nBitLength:r,nByteLength:s}}function Br(t,e,r=!1,s={}){if(t<=Jt)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:i,nByteLength:l}=ei(t,e);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f,E=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:l,MASK:Mr(i),ZERO:Jt,ONE:Gt,create:v=>bt(v,t),isValid:v=>{if(typeof v!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof v);return Jt<=v&&v<t},is0:v=>v===Jt,isOdd:v=>(v&Gt)===Gt,neg:v=>bt(-v,t),eql:(v,_)=>v===_,sqr:v=>bt(v*v,t),add:(v,_)=>bt(v+_,t),sub:(v,_)=>bt(v-_,t),mul:(v,_)=>bt(v*_,t),pow:(v,_)=>la(E,v,_),div:(v,_)=>bt(v*bo(_,t),t),sqrN:v=>v*v,addN:(v,_)=>v+_,subN:(v,_)=>v-_,mulN:(v,_)=>v*_,inv:v=>bo(v,t),sqrt:s.sqrt||(v=>(f||(f=ua(t)),f(E,v))),toBytes:v=>r?Er(v,l):Xn(v,l),fromBytes:v=>{if(v.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+v.length);return r?or(v):xo(v)},invertBatch:v=>Vr(E,v),cmov:(v,_,I)=>I?_:v});return Object.freeze(E)}var Uo=BigInt(0),si=BigInt(1);function ri(t,e){let r=e.negate();return t?r:e}function To(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ni(t,e){To(t,e);let r=Math.ceil(e/t)+1,s=2**(t-1),i=2**t,l=Mr(t),f=BigInt(t);return{windows:r,windowSize:s,mask:l,maxNumber:i,shiftBy:f}}function ko(t,e,r){let{windowSize:s,mask:i,maxNumber:l,shiftBy:f}=r,E=Number(t&i),v=t>>f;E>s&&(E-=l,v+=si);let _=e*s,I=_+Math.abs(E)-1,A=E===0,k=E<0,L=e%2!==0;return{nextN:v,offset:I,isZero:A,isNeg:k,isNegF:L,offsetF:_}}function ha(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,s)=>{if(!(r instanceof e))throw new Error("invalid point at index "+s)})}function da(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,s)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+s)})}var ii=new WeakMap,Lo=new WeakMap;function oi(t){return Lo.get(t)||1}function Ro(t,e){return{constTimeNegate:ri,hasPrecomputes(r){return oi(r)!==1},unsafeLadder(r,s,i=t.ZERO){let l=r;for(;s>Uo;)s&si&&(i=i.add(l)),l=l.double(),s>>=si;return i},precomputeWindow(r,s){let{windows:i,windowSize:l}=ni(s,e),f=[],E=r,v=E;for(let _=0;_<i;_++){v=E,f.push(v);for(let I=1;I<l;I++)v=v.add(E),f.push(v);E=v.double()}return f},wNAF(r,s,i){let l=t.ZERO,f=t.BASE,E=ni(r,e);for(let v=0;v<E.windows;v++){let{nextN:_,offset:I,isZero:A,isNeg:k,isNegF:L,offsetF:C}=ko(i,v,E);i=_,A?f=f.add(ri(L,s[C])):l=l.add(ri(k,s[I]))}return{p:l,f}},wNAFUnsafe(r,s,i,l=t.ZERO){let f=ni(r,e);for(let E=0;E<f.windows&&i!==Uo;E++){let{nextN:v,offset:_,isZero:I,isNeg:A}=ko(i,E,f);if(i=v,!I){let k=s[_];l=l.add(A?k.negate():k)}}return l},getPrecomputes(r,s,i){let l=ii.get(s);return l||(l=this.precomputeWindow(s,r),r!==1&&ii.set(s,i(l))),l},wNAFCached(r,s,i){let l=oi(r);return this.wNAF(l,this.getPrecomputes(l,r,i),s)},wNAFCachedUnsafe(r,s,i,l){let f=oi(r);return f===1?this.unsafeLadder(r,s,l):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),s,l)},setWindowSize(r,s){To(s,e),Lo.set(r,s),ii.delete(r)}}}function Co(t,e,r,s){ha(r,t),da(s,e);let i=r.length,l=s.length;if(i!==l)throw new Error("arrays of points and scalars must have equal length");let f=t.ZERO,E=vo(BigInt(i)),v=1;E>12?v=E-3:E>4?v=E-2:E>0&&(v=2);let _=Mr(v),I=new Array(Number(_)+1).fill(f),A=Math.floor((e.BITS-1)/v)*v,k=f;for(let L=A;L>=0;L-=v){I.fill(f);for(let U=0;U<l;U++){let R=s[U],z=Number(R>>BigInt(L)&_);I[z]=I[z].add(r[U])}let C=f;for(let U=I.length-1,R=f;U>0;U--)R=R.add(I[U]),C=C.add(R);if(k=k.add(C),L!==0)for(let U=0;U<v;U++)k=k.double()}return k}function Oo(t){return So(t.Fp),ar(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ei(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}P();H();F();var le=BigInt(0),jt=BigInt(1),No=BigInt(2),pa=BigInt(8),ga={zip215:!0};function ma(t){let e=Oo(t);return ar(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Do(t){let e=ma(t),{Fp:r,n:s,prehash:i,hash:l,randomBytes:f,nByteLength:E,h:v}=e,_=No<<BigInt(E*8)-jt,I=r.create,A=Br(e.n,e.nBitLength);function k(g,w){let b=r.sqr(g),p=r.sqr(w),a=r.add(r.mul(e.a,b),p),x=r.add(r.ONE,r.mul(e.d,r.mul(b,p)));return r.eql(a,x)}if(!k(e.Gx,e.Gy))throw new Error("bad curve params: generator point");let L=e.uvRatio||((g,w)=>{try{return{isValid:!0,value:r.sqrt(g*r.inv(w))}}catch{return{isValid:!1,value:le}}}),C=e.adjustScalarBytes||(g=>g),U=e.domain||((g,w,b)=>{if(Wr("phflag",b),w.length||b)throw new Error("Contexts/pre-hash are not supported");return g});function R(g,w,b=!1){let p=b?jt:le;sr("coordinate "+g,w,p,_)}function z(g){if(!(g instanceof O))throw new Error("ExtendedPoint expected")}let Z=ti((g,w)=>{let{ex:b,ey:p,ez:a}=g,x=g.is0();w==null&&(w=x?pa:r.inv(a));let N=I(b*w),K=I(p*w),D=I(a*w);if(x)return{x:le,y:jt};if(D!==jt)throw new Error("invZ was invalid");return{x:N,y:K}}),W=ti(g=>{let{a:w,d:b}=e;if(g.is0())throw new Error("bad point: ZERO");let{ex:p,ey:a,ez:x,et:N}=g,K=I(p*p),D=I(a*a),q=I(x*x),G=I(q*q),X=I(K*w),vt=I(q*I(X+D)),tt=I(G+I(b*I(K*D)));if(vt!==tt)throw new Error("bad point: equation left != right (1)");let Y=I(p*a),zt=I(x*N);if(Y!==zt)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(w,b,p,a){R("x",w),R("y",b),R("z",p,!0),R("t",a),this.ex=w,this.ey=b,this.ez=p,this.et=a,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof O)throw new Error("extended point not allowed");let{x:b,y:p}=w||{};return R("x",b),R("y",p),new O(b,p,jt,I(b*p))}static normalizeZ(w){let b=Vr(r,w.map(p=>p.ez));return w.map((p,a)=>p.toAffine(b[a])).map(O.fromAffine)}static msm(w,b){return Co(O,A,w,b)}_setWindowSize(w){ct.setWindowSize(this,w)}assertValidity(){W(this)}equals(w){z(w);let{ex:b,ey:p,ez:a}=this,{ex:x,ey:N,ez:K}=w,D=I(b*K),q=I(x*a),G=I(p*K),X=I(N*a);return D===q&&G===X}is0(){return this.equals(O.ZERO)}negate(){return new O(I(-this.ex),this.ey,this.ez,I(-this.et))}double(){let{a:w}=e,{ex:b,ey:p,ez:a}=this,x=I(b*b),N=I(p*p),K=I(No*I(a*a)),D=I(w*x),q=b+p,G=I(I(q*q)-x-N),X=D+N,vt=X-K,tt=D-N,Y=I(G*vt),zt=I(X*tt),st=I(G*tt),ht=I(vt*X);return new O(Y,zt,ht,st)}add(w){z(w);let{a:b,d:p}=e,{ex:a,ey:x,ez:N,et:K}=this,{ex:D,ey:q,ez:G,et:X}=w,vt=I(a*D),tt=I(x*q),Y=I(K*p*X),zt=I(N*G),st=I((a+x)*(D+q)-vt-tt),ht=zt-Y,we=zt+Y,gt=I(tt-b*vt),wt=I(st*ht),Ne=I(we*gt),dt=I(st*gt),it=I(ht*we);return new O(wt,Ne,it,dt)}subtract(w){return this.add(w.negate())}wNAF(w){return ct.wNAFCached(this,w,O.normalizeZ)}multiply(w){let b=w;sr("scalar",b,jt,s);let{p,f:a}=this.wNAF(b);return O.normalizeZ([p,a])[0]}multiplyUnsafe(w,b=O.ZERO){let p=w;return sr("scalar",p,le,s),p===le?nt:this.is0()||p===jt?this:ct.wNAFCachedUnsafe(this,p,O.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(v).is0()}isTorsionFree(){return ct.unsafeLadder(this,s).is0()}toAffine(w){return Z(this,w)}clearCofactor(){let{h:w}=e;return w===jt?this:this.multiplyUnsafe(w)}static fromHex(w,b=!1){let{d:p,a}=e,x=r.BYTES;w=ce("pointHex",w,x),Wr("zip215",b);let N=w.slice(),K=w[x-1];N[x-1]=K&-129;let D=or(N),q=b?_:r.ORDER;sr("pointHex.y",D,le,q);let G=I(D*D),X=I(G-jt),vt=I(p*G-a),{isValid:tt,value:Y}=L(X,vt);if(!tt)throw new Error("Point.fromHex: invalid y coordinate");let zt=(Y&jt)===jt,st=(K&128)!==0;if(!b&&Y===le&&st)throw new Error("Point.fromHex: x=0 and x_0=1");return st!==zt&&(Y=I(-Y)),O.fromAffine({x:Y,y:D})}static fromPrivateKey(w){let{scalar:b}=te(w);return j.multiply(b)}toRawBytes(){let{x:w,y:b}=this.toAffine(),p=Er(b,r.BYTES);return p[p.length-1]|=w&jt?128:0,p}toHex(){return $r(this.toRawBytes())}}O.BASE=new O(e.Gx,e.Gy,jt,I(e.Gx*e.Gy)),O.ZERO=new O(le,jt,jt,le);let{BASE:j,ZERO:nt}=O,ct=Ro(O,E*8);function yt(g){return bt(g,s)}function Ht(g){return yt(or(g))}function te(g){let w=r.BYTES;g=ce("private key",g,w);let b=ce("hashed private key",l(g),2*w),p=C(b.slice(0,w)),a=b.slice(w,2*w),x=Ht(p);return{head:p,prefix:a,scalar:x}}function ot(g){let{head:w,prefix:b,scalar:p}=te(g),a=j.multiply(p),x=a.toRawBytes();return{head:w,prefix:b,scalar:p,point:a,pointBytes:x}}function Zt(g){return ot(g).pointBytes}function M(g=Uint8Array.of(),...w){let b=Qn(...w);return Ht(l(U(b,ce("context",g),!!i)))}function n(g,w,b={}){g=ce("message",g),i&&(g=i(g));let{prefix:p,scalar:a,pointBytes:x}=ot(w),N=M(b.context,p,g),K=j.multiply(N).toRawBytes(),D=M(b.context,K,x,g),q=yt(N+D*a);sr("signature.s",q,le,s);let G=Qn(K,Er(q,r.BYTES));return ce("result",G,r.BYTES*2)}let u=ga;function d(g,w,b,p=u){let{context:a,zip215:x}=p,N=r.BYTES;g=ce("signature",g,2*N),w=ce("message",w),b=ce("publicKey",b,N),x!==void 0&&Wr("zip215",x),i&&(w=i(w));let K=or(g.slice(N,2*N)),D,q,G;try{D=O.fromHex(b,x),q=O.fromHex(g.slice(0,N),x),G=j.multiplyUnsafe(K)}catch{return!1}if(!x&&D.isSmallOrder())return!1;let X=M(a,q.toRawBytes(),D.toRawBytes(),w);return q.add(D.multiplyUnsafe(X)).subtract(G).clearCofactor().equals(O.ZERO)}return j._setWindowSize(8),{CURVE:e,getPublicKey:Zt,sign:n,verify:d,ExtendedPoint:O,utils:{getExtendedPublicKey:ot,randomPrivateKey:()=>f(r.BYTES),precompute(g=8,w=O.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}}}}var ai=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ko=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Yu=BigInt(0),ya=BigInt(1),Po=BigInt(2),Xu=BigInt(3),wa=BigInt(5),xa=BigInt(8);function va(t){let e=BigInt(10),r=BigInt(20),s=BigInt(40),i=BigInt(80),l=ai,E=t*t%l*t%l,v=ue(E,Po,l)*E%l,_=ue(v,ya,l)*t%l,I=ue(_,wa,l)*_%l,A=ue(I,e,l)*I%l,k=ue(A,r,l)*A%l,L=ue(k,s,l)*k%l,C=ue(L,i,l)*L%l,U=ue(C,i,l)*L%l,R=ue(U,e,l)*I%l;return{pow_p_5_8:ue(R,Po,l)*t%l,b2:E}}function ba(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ea(t,e){let r=ai,s=bt(e*e*e,r),i=bt(s*s*e,r),l=va(t*i).pow_p_5_8,f=bt(t*s*l,r),E=bt(e*f*f,r),v=f,_=bt(f*Ko,r),I=E===t,A=E===bt(-t,r),k=E===bt(-t*Ko,r);return I&&(f=v),(A||k)&&(f=_),Io(f,r)&&(f=bt(-f,r)),{isValid:I||A,value:f}}var Fo=Br(ai,void 0,!0),Ma={a:Fo.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fo,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:xa,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:po,randomBytes:eo,adjustScalarBytes:ba,uvRatio:Ea},cr=Do(Ma);P();H();F();P();H();F();P();H();F();P();H();F();var Ba="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ue=Ba;function Aa(t){if(!t||typeof t!="string")throw new Error(`Expected base58 string but got \u201C${t}\u201D`);if(t.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character \u201C${t.match(/[IOl0]/gmu)}\u201D`);let e=t.match(/^1+/gmu),r=e?e[0].length:0,s=(t.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(r),...t.match(/.{1}/gmu).map(i=>Ue.indexOf(i)).reduce((i,l)=>(i=i.map(f=>{let E=f*58+l;return l=E>>8,E}),i),new Uint8Array(s)).reverse().filter((i=>l=>i=i||l)(!1))])}var Yt=Aa;P();H();F();P();H();F();var _a=()=>{let t=Array(256).fill(-1);for(let e=0;e<Ue.length;++e)t[Ue.charCodeAt(e)]=e;return t},Ho=_a;var Ia=Ho();function Sa(t){let e=[];for(let r of t){let s=r;for(let i=0;i<e.length;++i){let l=(Ia[e[i]]<<8)+s;e[i]=Ue.charCodeAt(l%58),s=l/58|0}for(;s;)e.push(Ue.charCodeAt(s%58)),s=s/58|0}for(let r of t){if(r)break;e.push(49)}return e.reverse(),String.fromCharCode(...e)}var We=Sa;P();H();F();var Ua=20,ka=1,$e=1e6,qo=1e6,Ta=-7,La=21,Ra=!1,Ar="[big.js] ",Ve=Ar+"Invalid ",Zr=Ve+"decimal places",Ca=Ve+"rounding mode",zo=Ar+"Division by zero",ft={},he=void 0,Oa=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Wo(){function t(e){var r=this;if(!(r instanceof t))return e===he?Wo():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Ve+"value");e=e===0&&1/e<0?"-0":String(e)}Na(r,e)}r.constructor=t}return t.prototype=ft,t.DP=Ua,t.RM=ka,t.NE=Ta,t.PE=La,t.strict=Ra,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Na(t,e){var r,s,i;if(!Oa.test(e))throw Error(Ve+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),i=e.length,s=0;s<i&&e.charAt(s)=="0";)++s;if(s==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-s-1,t.c=[],r=0;s<=i;)t.c[r++]=+e.charAt(s++)}return t}function Ze(t,e,r,s){var i=t.c;if(r===he&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(Ca);if(e<1)s=r===3&&(s||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(s||i[1]!==he))),i.length=1,s?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(s=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(s||i[e+1]!==he||i[e-1]&1))||r===3&&(s||!!i[0]),i.length=e,s){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Ge(t,e,r){var s=t.e,i=t.c.join(""),l=i.length;if(e)i=i.charAt(0)+(l>1?"."+i.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)i="0"+i;i="0."+i}else if(s>0)if(++s>l)for(s-=l;s--;)i+="0";else s<l&&(i=i.slice(0,s)+"."+i.slice(s));else l>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}ft.abs=function(){var t=new this.constructor(this);return t.s=1,t};ft.cmp=function(t){var e,r=this,s=r.c,i=(t=new r.constructor(t)).c,l=r.s,f=t.s,E=r.e,v=t.e;if(!s[0]||!i[0])return s[0]?l:i[0]?-f:0;if(l!=f)return l;if(e=l<0,E!=v)return E>v^e?1:-1;for(f=(E=s.length)<(v=i.length)?E:v,l=-1;++l<f;)if(s[l]!=i[l])return s[l]>i[l]^e?1:-1;return E==v?0:E>v^e?1:-1};ft.div=function(t){var e=this,r=e.constructor,s=e.c,i=(t=new r(t)).c,l=e.s==t.s?1:-1,f=r.DP;if(f!==~~f||f<0||f>$e)throw Error(Zr);if(!i[0])throw Error(zo);if(!s[0])return t.s=l,t.c=[t.e=0],t;var E,v,_,I,A,k=i.slice(),L=E=i.length,C=s.length,U=s.slice(0,E),R=U.length,z=t,Z=z.c=[],W=0,O=f+(z.e=e.e-t.e)+1;for(z.s=l,l=O<0?0:O,k.unshift(0);R++<E;)U.push(0);do{for(_=0;_<10;_++){if(E!=(R=U.length))I=E>R?1:-1;else for(A=-1,I=0;++A<E;)if(i[A]!=U[A]){I=i[A]>U[A]?1:-1;break}if(I<0){for(v=R==E?i:k;R;){if(U[--R]<v[R]){for(A=R;A&&!U[--A];)U[A]=9;--U[A],U[R]+=10}U[R]-=v[R]}for(;!U[0];)U.shift()}else break}Z[W++]=I?_:++_,U[0]&&I?U[R]=s[L]||0:U=[s[L]]}while((L++<C||U[0]!==he)&&l--);return!Z[0]&&W!=1&&(Z.shift(),z.e--,O--),W>O&&Ze(z,O,r.RM,U[0]!==he),z};ft.eq=function(t){return this.cmp(t)===0};ft.gt=function(t){return this.cmp(t)>0};ft.gte=function(t){return this.cmp(t)>-1};ft.lt=function(t){return this.cmp(t)<0};ft.lte=function(t){return this.cmp(t)<1};ft.minus=ft.sub=function(t){var e,r,s,i,l=this,f=l.constructor,E=l.s,v=(t=new f(t)).s;if(E!=v)return t.s=-v,l.plus(t);var _=l.c.slice(),I=l.e,A=t.c,k=t.e;if(!_[0]||!A[0])return A[0]?t.s=-v:_[0]?t=new f(l):t.s=1,t;if(E=I-k){for((i=E<0)?(E=-E,s=_):(k=I,s=A),s.reverse(),v=E;v--;)s.push(0);s.reverse()}else for(r=((i=_.length<A.length)?_:A).length,E=v=0;v<r;v++)if(_[v]!=A[v]){i=_[v]<A[v];break}if(i&&(s=_,_=A,A=s,t.s=-t.s),(v=(r=A.length)-(e=_.length))>0)for(;v--;)_[e++]=0;for(v=e;r>E;){if(_[--r]<A[r]){for(e=r;e&&!_[--e];)_[e]=9;--_[e],_[r]+=10}_[r]-=A[r]}for(;_[--v]===0;)_.pop();for(;_[0]===0;)_.shift(),--k;return _[0]||(t.s=1,_=[k=0]),t.c=_,t.e=k,t};ft.mod=function(t){var e,r=this,s=r.constructor,i=r.s,l=(t=new s(t)).s;if(!t.c[0])throw Error(zo);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=l,e?new s(r):(i=s.DP,l=s.RM,s.DP=s.RM=0,r=r.div(t),s.DP=i,s.RM=l,this.minus(r.times(t)))};ft.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};ft.plus=ft.add=function(t){var e,r,s,i=this,l=i.constructor;if(t=new l(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var f=i.e,E=i.c,v=t.e,_=t.c;if(!E[0]||!_[0])return _[0]||(E[0]?t=new l(i):t.s=i.s),t;if(E=E.slice(),e=f-v){for(e>0?(v=f,s=_):(e=-e,s=E),s.reverse();e--;)s.push(0);s.reverse()}for(E.length-_.length<0&&(s=_,_=E,E=s),e=_.length,r=0;e;E[e]%=10)r=(E[--e]=E[e]+_[e]+r)/10|0;for(r&&(E.unshift(r),++v),e=E.length;E[--e]===0;)E.pop();return t.c=E,t.e=v,t};ft.pow=function(t){var e=this,r=new e.constructor("1"),s=r,i=t<0;if(t!==~~t||t<-qo||t>qo)throw Error(Ve+"exponent");for(i&&(t=-t);t&1&&(s=s.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(s):s};ft.prec=function(t,e){if(t!==~~t||t<1||t>$e)throw Error(Ve+"precision");return Ze(new this.constructor(this),t,e)};ft.round=function(t,e){if(t===he)t=0;else if(t!==~~t||t<-$e||t>$e)throw Error(Zr);return Ze(new this.constructor(this),t+this.e+1,e)};ft.sqrt=function(){var t,e,r,s=this,i=s.constructor,l=s.s,f=s.e,E=new i("0.5");if(!s.c[0])return new i(s);if(l<0)throw Error(Ar+"No square root");l=Math.sqrt(+Ge(s,!0,!0)),l===0||l===1/0?(e=s.c.join(""),e.length+f&1||(e+="0"),l=Math.sqrt(e),f=((f+1)/2|0)-(f<0||f&1),t=new i((l==1/0?"5e":(l=l.toExponential()).slice(0,l.indexOf("e")+1))+f)):t=new i(l+""),f=t.e+(i.DP+=4);do r=t,t=E.times(r.plus(s.div(r)));while(r.c.slice(0,f).join("")!==t.c.slice(0,f).join(""));return Ze(t,(i.DP-=4)+t.e+1,i.RM)};ft.times=ft.mul=function(t){var e,r=this,s=r.constructor,i=r.c,l=(t=new s(t)).c,f=i.length,E=l.length,v=r.e,_=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!l[0])return t.c=[t.e=0],t;for(t.e=v+_,f<E&&(e=i,i=l,l=e,_=f,f=E,E=_),e=new Array(_=f+E);_--;)e[_]=0;for(v=E;v--;){for(E=0,_=f+v;_>v;)E=e[_]+l[v]*i[_-v-1]+E,e[_--]=E%10,E=E/10|0;e[_]=E}for(E?++t.e:e.shift(),v=e.length;!e[--v];)e.pop();return t.c=e,t};ft.toExponential=function(t,e){var r=this,s=r.c[0];if(t!==he){if(t!==~~t||t<0||t>$e)throw Error(Zr);for(r=Ze(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Ge(r,!0,!!s)};ft.toFixed=function(t,e){var r=this,s=r.c[0];if(t!==he){if(t!==~~t||t<0||t>$e)throw Error(Zr);for(r=Ze(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Ge(r,!1,!!s)};ft[Symbol.for("nodejs.util.inspect.custom")]=ft.toJSON=ft.toString=function(){var t=this,e=t.constructor;return Ge(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};ft.toNumber=function(){var t=+Ge(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Ar+"Imprecise conversion");return t};ft.toPrecision=function(t,e){var r=this,s=r.constructor,i=r.c[0];if(t!==he){if(t!==~~t||t<1||t>$e)throw Error(Ve+"precision");for(r=Ze(new s(r),t,e);r.c.length<t;)r.c.push(0)}return Ge(r,t<=r.e||r.e<=s.NE||r.e>=s.PE,!!i)};ft.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Ar+"valueOf disallowed");return Ge(t,t.e<=e.NE||t.e>=e.PE,!0)};var Da=Wo(),ee=Da;P();H();F();var ur=typeof $=="function",$o=typeof TextDecoder=="function"?new TextDecoder:void 0,Vo=typeof TextEncoder=="function"?new TextEncoder:void 0,Ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_r=Array.prototype.slice.call(Ka),Gr=(t=>{let e={};return t.forEach((r,s)=>e[r]=s),e})(_r),Pa=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$t=String.fromCharCode.bind(String),Zo=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Jo=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),jo=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Fa=t=>{let e,r,s,i,l="",f=t.length%3;for(let E=0;E<t.length;){if((r=t.charCodeAt(E++))>255||(s=t.charCodeAt(E++))>255||(i=t.charCodeAt(E++))>255)throw new TypeError("invalid character found");e=r<<16|s<<8|i,l+=_r[e>>18&63]+_r[e>>12&63]+_r[e>>6&63]+_r[e&63]}return f?l.slice(0,f-3)+"===".substring(f):l},Yo=typeof btoa=="function"?t=>btoa(t):ur?t=>$.from(t,"binary").toString("base64"):Fa,ci=ur?t=>$.from(t).toString("base64"):t=>{let r=[];for(let s=0,i=t.length;s<i;s+=4096)r.push($t.apply(null,t.subarray(s,s+4096)));return Yo(r.join(""))},Xo=(t,e=!1)=>e?Jo(ci(t)):ci(t),Ha=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?$t(192|e>>>6)+$t(128|e&63):$t(224|e>>>12&15)+$t(128|e>>>6&63)+$t(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return $t(240|e>>>18&7)+$t(128|e>>>12&63)+$t(128|e>>>6&63)+$t(128|e&63)}},qa=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,za=t=>t.replace(qa,Ha),Go=ur?t=>$.from(t,"utf8").toString("base64"):Vo?t=>ci(Vo.encode(t)):t=>Yo(za(t)),Qo=(t,e=!1)=>e?Jo(Go(t)):Go(t);var Wa=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,$a=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return $t((r>>>10)+55296)+$t((r&1023)+56320);case 3:return $t((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return $t((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Va=t=>t.replace(Wa,$a),Za=t=>{if(t=t.replace(/\s+/g,""),!Pa.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r,s,i=[];for(let l=0;l<t.length;)e=Gr[t.charAt(l++)]<<18|Gr[t.charAt(l++)]<<12|(r=Gr[t.charAt(l++)])<<6|(s=Gr[t.charAt(l++)]),r===64?i.push($t(e>>16&255)):s===64?i.push($t(e>>16&255,e>>8&255)):i.push($t(e>>16&255,e>>8&255,e&255));return i.join("")},ts=typeof atob=="function"?t=>atob(jo(t)):ur?t=>$.from(t,"base64").toString("binary"):Za,es=ur?t=>Zo($.from(t,"base64")):t=>Zo(ts(t).split("").map(e=>e.charCodeAt(0))),rs=t=>es(ns(t)),Ga=ur?t=>$.from(t,"base64").toString("utf8"):$o?t=>$o.decode(es(t)):t=>Va(ts(t)),ns=t=>jo(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),is=t=>Ga(ns(t));P();H();F();var Ja=Object.defineProperty,de=(t,e)=>Ja(t,"name",{value:e,configurable:!0}),Jr="__fastnear_",os=de(()=>typeof localStorage<"u"?localStorage:{getItem:de(t=>Ir.get(t)||null,"getItem"),setItem:de((t,e)=>Ir.set(t,e),"setItem"),removeItem:de(t=>Ir.delete(t),"removeItem"),clear:de(()=>Ir.clear(),"clear")},"createDefaultStorage"),Ir=new Map,fr=os(),jr={setBackend:de(t=>{fr=t},"setBackend"),set:de((t,e)=>{e==null?fr.removeItem(Jr+t):fr.setItem(Jr+t,JSON.stringify(e))},"set"),get:de(t=>{let e=fr.getItem(Jr+t);if(e===null)return null;try{return JSON.parse(e)}catch{return e}},"get"),remove:de(t=>fr.removeItem(t),"remove"),clear:de(()=>fr.clear(),"clear")};var ja=Object.defineProperty,re=(t,e)=>ja(t,"name",{value:e,configurable:!0});function ss(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}re(ss,"toHex");function as(t){if(t.length%2)throw new Error("Hex string must be even length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return e}re(as,"fromHex");function Sr(t){return rs(t)}re(Sr,"base64ToBytes");function ui(t){return Xo(t)}re(ui,"bytesToBase64");function fi(t){try{return Qo(t)}catch(e){return console.error("Issue base64 encoding",e),null}}re(fi,"toBase64");function Yr(t){try{return is(t)}catch(e){return console.error("Issue base64 decoding",e),null}}re(Yr,"fromBase64");function cs(t,...e){if(Array.isArray(t)&&(t=t.reduce((r,s,i)=>r+(e[i-1]??"")+s)),typeof t=="string"){let r=t.match(/([0-9.,_]+)\s*([a-zA-Z]+)?/);if(r){let s=r[1].replace(/[_,]/g,""),i=r[2];if(i)switch(i.toLowerCase()){case"near":return ee(s).mul(ee(10).pow(24)).toFixed(0);case"tgas":return ee(s).mul(ee(10).pow(12)).toFixed(0);case"ggas":return ee(s).mul(ee(10).pow(9)).toFixed(0);case"gas":case"yoctonear":return ee(s).toFixed(0);default:throw new Error(`Unknown unit: ${i}`)}else return ee(s).toFixed(0)}}return ee(`${t}`).toFixed(0)}re(cs,"convertUnit");function oe(t,e){jr.set(t,e)}re(oe,"lsSet");function ke(t){return jr.get(t)}re(ke,"lsGet");function us(t){return JSON.parse(JSON.stringify(t))}re(us,"deepCopy");function lr(...t){try{return JSON.parse(t[0])}catch{return t.length>1?t[1]:t[0]}}re(lr,"tryParseJson");function li(t){try{let e=new TextDecoder;return JSON.parse(e.decode(t instanceof Uint8Array?t:new Uint8Array(t)))}catch{try{return t instanceof Uint8Array?t:new Uint8Array(t)}catch{return t}}}re(li,"parseJsonFromBytes");function hi(t){return t.length===1&&t[0].type==="FunctionCall"&&ee(t[0]?.deposit??"0").eq(0)}re(hi,"canSignWithLAK");var Ya=Object.defineProperty,hr=(t,e)=>Ya(t,"name",{value:e,configurable:!0}),Te=hr(t=>Yt(t.includes(":")?(()=>{let[e,r]=t.split(":");if(e!=="ed25519")throw new Error(`Unsupported curve: ${e}`);return r})():t),"keyFromString"),di=hr(t=>`ed25519:${We(t)}`,"keyToString");function qt(t){let e=Te(t).slice(0,32),r=cr.getPublicKey(e);return di(r)}hr(qt,"publicKeyFromPrivate");function dr(){let t=crypto.getRandomValues(new Uint8Array(64));return di(t)}hr(dr,"privateKeyFromRandom");function be(t,e,r){let s=Te(e).slice(0,32),i=cr.sign(t,s);return r?.returnBase58?We(i):i}hr(be,"signHash");function fs(t,e){let r=ir(t);return be(r,e)}hr(fs,"signBytes");P();H();F();var Bi=zi(bi(),1);var Mi={};Dr(Mi,{getBorshSchema:()=>Ei,nearChainSchema:()=>_s});P();H();F();var mc=Object.defineProperty,As=(t,e)=>mc(t,"name",{value:e,configurable:!0}),_s=new class{static{As(this,"BorshSchema")}Ed25519Signature={struct:{data:{array:{type:"u8",len:64}}}};Secp256k1Signature={struct:{data:{array:{type:"u8",len:65}}}};Signature={enum:[{struct:{ed25519Signature:this.Ed25519Signature}},{struct:{secp256k1Signature:this.Secp256k1Signature}}]};Ed25519Data={struct:{data:{array:{type:"u8",len:32}}}};Secp256k1Data={struct:{data:{array:{type:"u8",len:64}}}};PublicKey={enum:[{struct:{ed25519Key:this.Ed25519Data}},{struct:{secp256k1Key:this.Secp256k1Data}}]};FunctionCallPermission={struct:{allowance:{option:"u128"},receiverId:"string",methodNames:{array:{type:"string"}}}};FullAccessPermission={struct:{}};AccessKeyPermission={enum:[{struct:{functionCall:this.FunctionCallPermission}},{struct:{fullAccess:this.FullAccessPermission}}]};AccessKey={struct:{nonce:"u64",permission:this.AccessKeyPermission}};CreateAccount={struct:{}};DeployContract={struct:{code:{array:{type:"u8"}}}};FunctionCall={struct:{methodName:"string",args:{array:{type:"u8"}},gas:"u64",deposit:"u128"}};Transfer={struct:{deposit:"u128"}};Stake={struct:{stake:"u128",publicKey:this.PublicKey}};AddKey={struct:{publicKey:this.PublicKey,accessKey:this.AccessKey}};DeleteKey={struct:{publicKey:this.PublicKey}};DeleteAccount={struct:{beneficiaryId:"string"}};ClassicAction={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}}]};DelegateAction={struct:{senderId:"string",receiverId:"string",actions:{array:{type:this.ClassicAction}},nonce:"u64",maxBlockHeight:"u64",publicKey:this.PublicKey}};SignedDelegate={struct:{delegateAction:this.DelegateAction,signature:this.Signature}};Action={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}},{struct:{signedDelegate:this.SignedDelegate}}]};Transaction={struct:{signerId:"string",publicKey:this.PublicKey,nonce:"u64",receiverId:"string",blockHash:{array:{type:"u8",len:32}},actions:{array:{type:this.Action}}}};SignedTransaction={struct:{transaction:this.Transaction,signature:this.Signature}}},Ei=As(()=>_s,"getBorshSchema");var yc=Object.defineProperty,gr=(t,e)=>yc(t,"name",{value:e,configurable:!0}),Is=gr(t=>JSON.parse(JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString():r)),"txToJson"),wc=gr(t=>JSON.stringify(Is(t)),"txToJsonStringified");function an(t){return{signerId:t.signerId,publicKey:{ed25519Key:{data:Te(t.publicKey)}},nonce:BigInt(t.nonce),receiverId:t.receiverId,blockHash:Yt(t.blockHash),actions:t.actions.map(cn)}}gr(an,"mapTransaction");function Ai(t){console.log("fastnear: serializing transaction");let e=an(t);return console.log("fastnear: mapped transaction for borsh:",e),(0,Bi.serialize)(Ii.Transaction,e)}gr(Ai,"serializeTransaction");function _i(t,e){console.log("fastnear: Serializing Signed Transaction",t),console.log("fastnear: signature",e),console.log("fastnear: signature length",Yt(e).length);let r=an(t);console.log("fastnear: mapped (for borsh schema) signed transaction",r);let s={transaction:r,signature:{ed25519Signature:{data:Yt(e)}}},i=(0,Bi.serialize)(Ii.SignedTransaction,s,!0);return console.log("fastnear: borsh-serialized signed transaction:",i),i}gr(_i,"serializeSignedTransaction");function cn(t){switch(t.type){case"CreateAccount":return{createAccount:{}};case"DeployContract":return{deployContract:{code:Sr(t.codeBase64)}};case"FunctionCall":return{functionCall:{methodName:t.methodName,args:t.argsBase64!==null&&t.argsBase64!==void 0?Sr(t.argsBase64):new TextEncoder().encode(JSON.stringify(t.args)),gas:BigInt(t.gas??"300000000000000"),deposit:BigInt(t.deposit??"0")}};case"Transfer":return{transfer:{deposit:BigInt(t.deposit)}};case"Stake":return{stake:{stake:BigInt(t.stake),publicKey:{ed25519Key:{data:Te(t.publicKey)}}}};case"AddKey":return{addKey:{publicKey:{ed25519Key:{data:Te(t.publicKey)}},accessKey:{nonce:BigInt(t.accessKey.nonce),permission:t.accessKey.permission==="FullAccess"?{fullAccess:{}}:{functionCall:{allowance:t.accessKey.allowance?BigInt(t.accessKey.allowance):null,receiverId:t.accessKey.receiverId,methodNames:t.accessKey.methodNames}}}}};case"DeleteKey":return{deleteKey:{publicKey:{ed25519Key:{data:Te(t.publicKey)}}}};case"DeleteAccount":return{deleteAccount:{beneficiaryId:t.beneficiaryId}};case"SignedDelegate":return{signedDelegate:{delegateAction:cn(t.delegateAction),signature:{ed25519Signature:Yt(t.signature)}}};default:throw new Error("Not implemented action: "+t.type)}}gr(cn,"mapAction");var Ii=Ei();var un=zi(bi(),1);var fn={borsh:{serialize:un.serialize,deserialize:un.deserialize},borshSchema:Mi};var mn={};Dr(mn,{DEFAULT_NETWORK_ID:()=>Ls,NETWORKS:()=>Rr,WIDGET_URL:()=>Ts,_adapter:()=>Xe,_config:()=>Lr,_state:()=>pt,_txHistory:()=>Re,_unbroadcastedEvents:()=>Be,events:()=>ne,getConfig:()=>Qe,getTxHistory:()=>ki,getWalletAdapterState:()=>Cs,onAdapterStateUpdate:()=>Rs,resetTxHistory:()=>Ti,setConfig:()=>gn,update:()=>ye,updateTxHistory:()=>Ce});P();H();F();P();H();F();var xc=Object.defineProperty,se=(t,e)=>xc(t,"name",{value:e,configurable:!0}),vc="https://wallet.intear.tech",bc="https://logout-bridge-service.intear.tech",Tr="_intear_wallet_connected_account",Ss="width=400,height=700",Us=!1,Ur=null,Si=!1,Et=class extends Error{constructor(e,r){super(e),this.cause=r,this.name="IntearAdapterError",r&&(this.stack+=`
Caused by: ${r instanceof Error?r.stack:String(r)}`)}static{se(this,"IntearAdapterError")}},Me=class t{static{se(this,"LogoutWebSocket")}static instance=null;ws=null;network;accountId;appPrivateKey;userLogoutPublicKey;logoutBridgeServiceUrl;intentionallyClosed=!1;reconnectAttempts=0;maxReconnectAttempts=3;logger;constructor(e,r,s,i,l,f){this.network=e,this.accountId=r,this.appPrivateKey=s,this.userLogoutPublicKey=i,this.logoutBridgeServiceUrl=l,this.logger=f,this.connect()}async connect(){try{let e=this.logoutBridgeServiceUrl.replace("https://","wss://").replace("http://","ws://");this.ws=new WebSocket(`${e}/api/subscribe`),this.ws.onopen=async()=>{if(!this.ws)return;let r=Date.now(),s=`subscribe|${r}`,i=new TextEncoder().encode(s),l=qt(this.appPrivateKey),E=`ed25519:${be(i,this.appPrivateKey,{returnBase58:!0})}`,v={Auth:{network:this.network,account_id:this.accountId,app_public_key:l,nonce:r,signature:E}};this.ws.send(JSON.stringify(v))},this.ws.onmessage=async r=>{let s=JSON.parse(r.data);if("Success"in s)this.logger.log("LogoutWebSocket:",s.Success.message),this.reconnectAttempts=0;else if("Error"in s)this.logger.error("LogoutWebSocket error:",s.Error.message),this.ws?.close();else if("LoggedOut"in s){let{logout_info:i}=s.LoggedOut;if(this.logger.log("LogoutWebSocket: Received logout notification:",i),i.nonce>Date.now()||i.nonce<Date.now()-1e3*60*5){this.logger.error("LogoutWebSocket: Invalid logout nonce:",i.nonce);return}let l=qt(this.appPrivateKey),f=`logout|${i.nonce}|${this.accountId}|${l}`,E=new TextEncoder().encode(f),v=i.signature.split(":");if(v.length!==2||v[0]!=="ed25519"&&v[0]!=="secp256k1"){this.logger.error("LogoutWebSocket: Invalid signature format:",i.signature);return}let _=v[1],I=Yt(_),A;if(i.caused_by==="User")A=this.userLogoutPublicKey;else if(i.caused_by==="App")A=l;else{this.logger.error("LogoutWebSocket: Unknown logout cause:",i.caused_by);return}let k,L=A.substring(8);if(k=Yt(L),!cr.verify(I,E,k)){this.logger.error("LogoutWebSocket: Invalid logout signature");return}this.logger.log("LogoutWebSocket: Valid logout message received. Calling signOut and reloading."),pn(),this.intentionallyClosed=!0,this.close(),window.location.reload()}},this.ws.onclose=()=>{this.logger.log("LogoutWebSocket: Connection closed."),this.intentionallyClosed?t.instance===this&&(t.instance=null):this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.logger.log(`LogoutWebSocket: Attempting to reconnect in 500ms... (Attempt ${this.reconnectAttempts} of ${this.maxReconnectAttempts})`),setTimeout(()=>this.connect(),500)):(this.logger.warn(`LogoutWebSocket: Maximum reconnection attempts (${this.maxReconnectAttempts}) reached. Giving up.`),t.instance===this&&(t.instance=null))},this.ws.onerror=r=>{this.logger.warn("LogoutWebSocket: Error:",r),this.intentionallyClosed?t.instance=null:this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.logger.log(`LogoutWebSocket: Attempting to reconnect in 500ms... (Attempt ${this.reconnectAttempts} of ${this.maxReconnectAttempts})`),setTimeout(()=>this.connect(),500)):(this.logger.warn(`LogoutWebSocket: Maximum reconnection attempts (${this.maxReconnectAttempts}) reached. Giving up.`),t.instance===this&&(t.instance=null))}}catch(e){this.logger.warn("LogoutWebSocket: Error creating WebSocket connection:",e)}}static initialize(e,r,s,i,l,f){try{return t.instance||(t.instance=new t(e,r,s,i,l,f)),t.instance}catch(E){return f.warn("LogoutWebSocket: Failed to initialize:",E),null}}static getInstance(){return t.instance}close(){this.ws&&(this.intentionallyClosed=!0,this.ws.close()),t.instance=null}};async function mr(t,e,r){let s=r.toString()+"|"+e,i=new TextEncoder().encode(s),l=ir(i);return`ed25519:${be(l,t,{returnBase58:!0})}`}se(mr,"generateAuthSignature");function hn(){if(typeof window>"u")throw new Et("Cannot access localStorage in this environment.");let t=window.localStorage.getItem(Tr);if(!t)throw new Et("Not signed in (no data found)");try{let e=JSON.parse(t);if(!e||!e.accounts||e.accounts.length===0||!e.key)throw new Error("Invalid saved data structure");return e}catch(e){throw console.error("Error parsing saved login data, clearing storage.",e),window.localStorage.removeItem(Tr),new Et("Failed to parse login data, please sign in again.",e)}}se(hn,"assertLoggedIn");function kr(){try{return hn()}catch{return null}}se(kr,"getSavedData");function ks(t,e,r,s){try{let i=`logout|${t.nonce}|${e}|${r}`,l=t.signature.split(":");if(l.length!==2||l[0]!=="ed25519"&&l[0]!=="secp256k1")return console.error("WalletAdapter: Invalid signature format:",t.signature),!1;let f=l[1],E=Yt(f),v;if(t.caused_by==="User")v=s;else if(t.caused_by==="App")v=r;else return console.error("WalletAdapter: Unknown logout cause:",t.caused_by),!1;let _=v.substring(8),I=Yt(_);return cr.verify(E,new TextEncoder().encode(i),I)}catch(i){return console.error("WalletAdapter: Error verifying logout signature:",i),!1}}se(ks,"verifyLogoutSignature");async function Ui(t,e,r){try{let s=t.accounts[0],i=t.networkId,l=t.key,f=qt(l);Me.initialize(i,s.accountId,l,t.logoutKey,e,console);let E=Date.now(),v=`check|${E}`,_=new TextEncoder().encode(v),A=`ed25519:${be(_,l,{returnBase58:!0})}`,k=await fetch(`${e}/api/check_logout/${i}/${s.accountId}/${f}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({nonce:E,signature:A})});if(!k.ok)return console.warn("WalletAdapter: Failed to check logout status:",await k.text()),{isActive:!0,accounts:t.accounts};let L=await k.json();if(console.debug("WalletAdapter: Logout check response:",L),L==="Active")return{isActive:!0,accounts:t.accounts};{let C=L.LoggedOut;return console.debug("WalletAdapter: User was logged out:",C),ks(C,s.accountId,f,t.logoutKey)?(console.debug("WalletAdapter: Valid remote logout. Clearing local session."),window.localStorage.removeItem(Tr),Me.getInstance()?.close(),r?.({accountId:null,networkId:null,publicKey:null}),{isActive:!1,accounts:[]}):(console.error("WalletAdapter: Invalid logout signature"),{isActive:!0,accounts:t.accounts})}}catch(s){return console.error("WalletAdapter: Error verifying session status:",s),{isActive:!0,accounts:t.accounts}}}se(Ui,"verifySessionStatus");var dn=class{static{se(this,"WalletAdapter")}#t;#e;#r;constructor({walletUrl:e=vc,targetOrigin:r,onStateUpdate:s,lastState:i,callbackUrl:l,logoutBridgeService:f=bc}){this.#t=e,this.#e=f,this.#r=s,console.debug("Intear Popup WalletAdapter initialized. URL:",this.#t),typeof window<"u"&&this.initializeSession().catch(E=>{console.error("Error during initial session initialization:",E)})}async signIn({contractId:e,methodNames:r,networkId:s,callbacks:i}){console.debug("WalletAdapter: signIn",{contractId:e,methodNames:r,networkId:s});let{onPending:l,onError:f,timeout:E=6e4}=i||{},v=dr();return new Promise((_,I)=>{l?.({step:"popup_opening",networkId:s,contractId:e});let A=new Promise(U=>{let R=null,z=setInterval(()=>{R&&(clearInterval(z),U(R))},100),Z=se(W=>{W.data.origin&&(R=W.data.origin,window.removeEventListener("message",Z))},"listener");window.addEventListener("message",Z)}),k=document.createElement("iframe");k.src=`${this.#t}/hot-wallet-connector-iframe.html`,k.style.position="fixed",k.style.inset="0",k.style.width="100vw",k.style.height="100vh",k.style.border="none",k.style.zIndex="100000",document.body.appendChild(k),k.onload=()=>{A.then(U=>{k.contentWindow?.postMessage({type:"hotConnectorData",origin:U,location:window.selector.location},"*")})};let L=null,C=se(async U=>{if(U.data.status){k.contentWindow?.postMessage(U.data,"*");return}switch(console.debug("Message from connect popup",U.data),U.data.type){case"ready":{let R=location.origin||"file://local-html-file",z=JSON.stringify({origin:R}),Z=Date.now(),W=await mr(v,z,Z),O=qt(v);k.contentWindow?.postMessage({type:"signIn",data:{contractId:e,methodNames:r,publicKey:O,networkId:s,nonce:Z,message:z,signature:W,version:"V2"}},"*");break}case"connected":{l?.({step:"processing_result",networkId:s,contractId:e});let R=U.data.accounts;if(!R||R.length===0){let nt={type:"wallet_error",message:"No accounts returned from wallet",retryable:!0,suggestedAction:"retry",timestamp:Date.now()};return f?.(nt),I(new Et("No accounts returned from wallet"))}let z=U.data.functionCallKeyAdded,Z=U.data.logoutKey,W=U.data.useBridge,O={accounts:R,key:v,contractId:z&&e?e:"",methodNames:z?r??[]:[],logoutKey:Z,networkId:s,walletUrl:U.data.walletUrl,useBridge:W};console.log("dataToSave",O,"event.data",U.data),window.localStorage.setItem(Tr,JSON.stringify(O)),L={accountId:R[0].accountId,accounts:R,privateKey:O.key,publicKey:qt(O.key)},k.contentWindow?.postMessage({type:"close"},"*");let j={accountId:R[0].accountId,networkId:s,privateKey:O.key,publicKey:qt(O.key)};this.#r?.(j),Me.getInstance()?.close(),Me.initialize(O.networkId,O.accounts[0].accountId,O.key,O.logoutKey,this.#e,console);break}case"error":{console.error("Error from connect popup",U.data.message),k.contentWindow?.postMessage({type:"close",message:U.data.message},this.#t);break}case"close":if(window.removeEventListener("message",C),k.remove(),U.data.message){let R=U.data.message||"Unknown error from wallet popup",z={type:"wallet_error",message:R,retryable:!0,suggestedAction:"contact_support",originalError:U.data,timestamp:Date.now()};f?.(z),I(new Et(R));break}else L?_(L):(console.error("No result and no error"),I(new Et("No result and no error")))}},"listener");window.addEventListener("message",C),l?.({step:"waiting_for_user",networkId:s,contractId:e})})}async signOut(){console.debug("WalletAdapter: signOut");let e=kr();if(Me.getInstance()?.close(),e)try{let r=e.accounts[0].accountId,s=e.key,i=qt(s),l=e.networkId,f=Date.now(),E=`logout|${f}|${r}|${i}`,v=new TextEncoder().encode(E),_=ir(v),A=`ed25519:${be(_,s,{returnBase58:!0})}`,k=await fetch(`${this.#e}/api/logout_app/${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_id:r,app_public_key:i,nonce:f,signature:A})});k.ok?console.debug("WalletAdapter: Successfully notified bridge service of logout"):console.error("WalletAdapter: Failed to notify bridge service of logout:",await k.text())}catch(r){console.error("WalletAdapter: Error during bridge service logout notification:",r)}window.localStorage.removeItem(Tr),this.#r?.({accountId:null,networkId:null,publicKey:null})}async initializeSession(){if(!Si){Si=!0;try{let e=kr();if(!e){Me.getInstance()?.close();return}await Ui(e,this.#e,this.#r)}catch(e){console.error("WalletAdapter: Unexpected error during session initialization:",e),Me.getInstance()?.close()}finally{Si=!1}}}getState(){let e=kr();return e?{accountId:e.accounts[0].accountId,networkId:e.networkId,publicKey:qt(e.key)}:{accountId:null,networkId:null,publicKey:null}}setState(e){this.#r?.(e)}async getAccounts(){console.debug("WalletAdapter: getAccounts");let e=kr();return e?Us?(console.debug("WalletAdapter: Accounts:",e.accounts),e.accounts):Ur?await Ur:(Ur=new Promise(async r=>{try{let s=await Ui(e,this.#e,this.#r);r(s.accounts)}catch(s){console.error("WalletAdapter: Error in getAccounts:",s),r(e.accounts)}}).finally(()=>{Ur=null,Us=!0}),await Ur):[]}async sendTransactions({transactions:e}){console.debug("WalletAdapter: sendTransactions",{transactions:e});let r=hn(),s=r.key,i=r.accounts[0].accountId;return r.useBridge?new Promise((l,f)=>{let E=this.#e.replace("https://","wss://").replace("http://","ws://"),v=new WebSocket(`${E}/api/session/create`);v.onopen=async()=>{console.debug("WebSocket connected for transactions");let I=JSON.stringify(e),A=Date.now(),k=await mr(r.key,I,A);v.send(JSON.stringify({type:"signAndSendTransactions",data:{transactions:I,accountId:r.accounts[0].accountId,publicKey:qt(r.key),nonce:A,signature:k}}))};let _=null;v.onmessage=I=>{try{let A=JSON.parse(I.data);if(A.session_id)_=A.session_id,console.debug("Received session ID for send-transactions:",_);else if(console.debug("Received send-transactions response:",A),v.close(),A.type==="error"){let k=A.message||"Unknown error from wallet popup";f(new Et(k))}else l({outcomes:A.outcomes})}catch(A){console.error("Error parsing WebSocket message:",A),f(new Et("Error parsing WebSocket message",A))}},v.onerror=I=>{console.error("WebSocket error:",I),f(new Et("WebSocket error",I))},v.onclose=()=>{console.debug("WebSocket closed for send-transactions")},(async()=>{let A=`intear://send-transactions?session_id=${await new Promise(k=>{setInterval(()=>{_&&k(_)},100)})}`;console.debug("Opening wallet with URL:",A),window.open(A)})()}):new Promise(async(l,f)=>{let E=window.open(`${r.walletUrl??this.#t}/send-transactions`,"_blank",Ss);if(!E)return f(new Et("Popup was blocked"));let v=!1,_=se(async A=>{if(!(!A.data||!A.data.type))switch(console.debug("Message from send-transactions popup",A.data),A.data.type){case"ready":{let k=JSON.stringify(e),L=Date.now(),C=await mr(s,k,L),U=qt(s);E.postMessage({type:"signAndSendTransactions",data:{transactions:k,accountId:i,publicKey:U,nonce:L,signature:C}},r.walletUrl??this.#t);break}case"sent":{v=!0,E.close(),window.removeEventListener("message",_),l({outcomes:A.data.outcomes});break}case"error":{v=!0,E.close(),window.removeEventListener("message",_),f(new Et(A.data.message||"Unknown error from send-transactions popup"));break}}},"listener");window.addEventListener("message",_);let I=setInterval(()=>{E.closed&&(window.removeEventListener("message",_),clearInterval(I),v||f(new Et("Transaction canceled - popup closed by user")))},100)})}async signMessage({message:e,nonce:r,recipient:s,callbackUrl:i,state:l}){console.debug("WalletAdapter: signMessage",{message:e,nonce:r,recipient:s});let f=hn(),E=f.key,v=f.accounts[0].accountId;return f.useBridge?new Promise((_,I)=>{let A=this.#e.replace("https://","wss://").replace("http://","ws://"),k=new WebSocket(`${A}/api/session/create`);k.onopen=async()=>{console.debug("WebSocket connected for sign-message");let C=JSON.stringify({message:e,recipient:s,nonce:Array.from(r),callbackUrl:i,state:l}),U=Date.now(),R=await mr(E,C,U);k.send(JSON.stringify({type:"signMessage",data:{message:C,accountId:f.accounts[0].accountId,publicKey:qt(E),nonce:U,signature:R}}))};let L=null;k.onmessage=C=>{try{let U=JSON.parse(C.data);if(U.session_id)L=U.session_id,console.debug("Received session ID for sign-message:",L);else if(console.debug("Received sign-message response:",U),k.close(),U.type==="error")I(new Error(U.message));else{console.log(JSON.stringify(U));let R=U.signature;try{_({accountId:R.accountId,publicKey:R.publicKey,signature:R.signature})}catch(z){I(new Et("Failed to process signature from wallet",z))}}}catch(U){console.error("Error parsing WebSocket message:",U),I(new Et("Error parsing WebSocket message",U))}},k.onerror=C=>{console.error("WebSocket error:",C),I(new Et("WebSocket error",C))},k.onclose=()=>{console.debug("WebSocket closed for sign-message")},(async()=>{let U=`intear://sign-message?session_id=${await new Promise(R=>{setInterval(()=>{L&&R(L)},100)})}`;console.debug("Opening wallet with URL:",U),window.open(U,"_blank")})()}):new Promise(async(_,I)=>{let A=window.open(`${f.walletUrl??this.#t}/sign-message`,"_blank",Ss);if(!A)return I(new Et("Popup was blocked"));let k=!1,L=se(async U=>{if(!(!U.data||!U.data.type))switch(console.debug("Message from sign-message popup",U.data),U.data.type){case"ready":{let R=JSON.stringify({message:e,recipient:s,nonce:Array.from(r),callbackUrl:i,state:l}),z=Date.now(),Z=await mr(E,R,z),W=qt(E);A.postMessage({type:"signMessage",data:{message:R,accountId:v,publicKey:W,nonce:z,signature:Z}},f.walletUrl??this.#t);break}case"signed":{k=!0,A.close(),window.removeEventListener("message",L);let R=U.data.signature;try{_({accountId:R.accountId,publicKey:R.publicKey,signature:R.signature})}catch(z){I(new Et("Failed to process signature from wallet",z))}break}case"error":{k=!0,A.close(),window.removeEventListener("message",L),I(new Et(U.data.message||"Unknown error from sign-message popup"));break}}},"listener");window.addEventListener("message",L);let C=setInterval(()=>{A.closed&&(window.removeEventListener("message",L),clearInterval(C),k||I(new Et("Message signing canceled - popup closed by user")))},100)})}destroy(){console.debug("Intear Popup WalletAdapter destroyed.")}};var Ec=Object.defineProperty,Qt=(t,e)=>Ec(t,"name",{value:e,configurable:!0}),Ts="https://wallet.intear.tech",Ls="mainnet",Rr={testnet:{networkId:"testnet",nodeUrl:"https://rpc.testnet.fastnear.com/"},mainnet:{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.fastnear.com/"}},Lr=ke("config")||{...Rr[Ls]},pt=ke("state")||{},Rs=Qt(t=>{let{accountId:e,lastWalletId:r,privateKey:s}=t,i=e||null;i!==pt.accountId&&ye({accountId:i,lastWalletId:r||void 0,...s?{privateKey:s}:{}})},"onAdapterStateUpdate"),Cs=Qt(()=>({publicKey:pt.publicKey,accountId:pt.accountId,lastWalletId:pt.lastWalletId,networkId:Lr.networkId}),"getWalletAdapterState"),Xe=new dn({onStateUpdate:Rs,walletUrl:Ts});try{pt.publicKey=pt.privateKey?qt(pt.privateKey):null}catch(t){console.error("Error parsing private key:",t),pt.privateKey=null,oe("nonce",null)}var Re=ke("txHistory")||{},Be={account:[],tx:[]},ne={_eventListeners:{account:new Set,tx:new Set},notifyAccountListeners:Qt(t=>{if(ne._eventListeners.account.size===0){Be.account.push(t);return}ne._eventListeners.account.forEach(e=>{try{e(t)}catch(r){console.error(r)}})},"notifyAccountListeners"),notifyTxListeners:Qt(t=>{if(ne._eventListeners.tx.size===0){Be.tx.push(t);return}ne._eventListeners.tx.forEach(e=>{try{e(t)}catch(r){console.error(r)}})},"notifyTxListeners"),onAccount:Qt(t=>{if(ne._eventListeners.account.add(t),Be.account.length>0){let e=Be.account;Be.account=[],e.forEach(ne.notifyAccountListeners)}return t},"onAccount"),onTx:Qt(t=>{if(ne._eventListeners.tx.add(t),Be.tx.length>0){let e=Be.tx;Be.tx=[],e.forEach(ne.notifyTxListeners)}return t},"onTx"),offAccount:Qt(t=>{ne._eventListeners.account.delete(t)},"offAccount"),offTx:Qt(t=>{ne._eventListeners.tx.delete(t)},"offTx")},ye=Qt(t=>{let e=pt;pt={...pt,...t},oe("state",{accountId:pt.accountId,privateKey:pt.privateKey,lastWalletId:pt.lastWalletId,accessKeyContractId:pt.accessKeyContractId}),t.hasOwnProperty("privateKey")&&t.privateKey!==e.privateKey&&(pt.publicKey=t.privateKey?qt(t.privateKey):null,oe("nonce",null)),t.hasOwnProperty("accountId")&&t.accountId!==e.accountId&&ne.notifyAccountListeners(t.accountId),(t.hasOwnProperty("lastWalletId")&&t.lastWalletId!==e.lastWalletId||t.hasOwnProperty("accountId")&&t.accountId!==e.accountId||t.hasOwnProperty("privateKey")&&t.privateKey!==e.privateKey)&&Xe.setState(Cs())},"update"),Ce=Qt(t=>{let e=t.txId;Re[e]={...Re[e]||{},...t,updateTimestamp:Date.now()},oe("txHistory",Re),ne.notifyTxListeners(Re[e])},"updateTxHistory"),Qe=Qt(()=>Lr,"getConfig"),ki=Qt(()=>Re,"getTxHistory"),gn=Qt(t=>{Lr={...Rr[t.networkId],...t},oe("config",Lr)},"setConfig"),Ti=Qt(()=>{Re={},oe("txHistory",Re)},"resetTxHistory");var Mc=Object.defineProperty,ie=(t,e)=>Mc(t,"name",{value:e,configurable:!0});ee.DP=27;var o0=1e3*60*60*6;function Bc(t,e){return e==="final"||e==="optimistic"?{...t,finality:e}:e?{...t,block_id:e}:{...t,finality:"optimistic"}}ie(Bc,"withBlockId");async function Li(t,e){let r=Qe();if(!r?.nodeUrl)throw new Error("fastnear: getConfig() returned invalid config: missing nodeUrl.");let i=await(await fetch(r.nodeUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:`fastnear-${Date.now()}`,method:t,params:e})})).json();if(i.error)throw new Error(JSON.stringify(i.error));return i}ie(Li,"sendRpc");function Ri(t){let e=ki();Li("tx",{tx_hash:e[t]?.txHash,sender_account_id:e[t]?.tx?.signerId,wait_until:"EXECUTED_OPTIMISTIC"}).then(r=>{let s=r?.result?.status?.SuccessValue;Ce({txId:t,status:"Executed",result:r,successValue:s?lr(Yr(s)):void 0,finalState:!0})}).catch(r=>{Ce({txId:t,status:"ErrorAfterIncluded",error:lr(r.message)??r.message,finalState:!0})})}ie(Ri,"afterTxSent");async function Ac(t,e,r){e=e||"INCLUDED";try{let s=await Li("send_tx",{signed_tx_base64:t,wait_until:e});return Ce({txId:r,status:"Included",finalState:!1}),Ri(r),s}catch(s){let i=s instanceof Error?s.message:"Unknown error";throw Ce({txId:r,status:"Error",error:lr(i)??i,finalState:!1}),new Error(i)}}ie(Ac,"sendTxToRpc");function _c(){let t=crypto.getRandomValues(new Uint32Array(2)).join("");return`tx-${Date.now()}-${parseInt(t,10).toString(36)}`}ie(_c,"generateTxId");var Os=0,Ic=6e4,tr=ie(()=>{let t=Date.now();return pt.accountId&&t-Os>Ic&&(Os=t,Xe.getAccounts().then(e=>{e.length===0&&pt.accountId&&ye({accountId:null,privateKey:null,lastWalletId:null})}).catch(e=>{console.error("Error checking account status:",e)})),pt.accountId},"accountId"),Cr=ie(()=>pt.publicKey,"publicKey"),Oe=ie(t=>{let e=Qe();return t&&(t.networkId&&e.networkId!==t.networkId&&(gn({...Rr[t.networkId],networkId:t.networkId}),ye({accountId:null,privateKey:null,lastWalletId:null}),oe("block",null),Ti()),gn({...Qe(),...t})),Qe()},"config"),Ns=ie(()=>pt.accountId?"SignedIn":"SignedOut","authStatus");var Ds=ie(async(t={},e={})=>{let{contractId:r,methodNames:s}=t,{onSuccess:i,onError:l,timeout:f=6e4}=e,E=Qe().networkId,v=ke("lastSignedInAccount"),_=!!v&&v!==pt.accountId,I=dr();ye({accessKeyContractId:r,privateKey:I});try{let A=await Xe.signIn({networkId:E,contractId:r,methodNames:s,callbacks:{onError:l?k=>{l(k)}:void 0,timeout:f}});if(A.error){let k={type:"wallet_error",message:A.error,retryable:!0,suggestedAction:"contact_support",originalError:A.error,timestamp:Date.now()};throw l?.(k),new Error(`Wallet error: ${A.error}`)}if(A.accountId){oe("lastSignedInAccount",A.accountId),ye({accountId:A.accountId,privateKey:A.privateKey,publicKey:A.publicKey,accessKeyContractId:r});let k={accountId:A.accountId,publicKey:A.publicKey,networkId:E,contractId:r,methodNames:s,accounts:A.accounts||[{accountId:A.accountId,publicKey:A.publicKey}],isReconnection:_};return i?.(k),k}else{console.warn("@fastnear: signIn resolved without accountId or error."),ye({accountId:null,privateKey:null,publicKey:null,accessKeyContractId:null});let k={type:"unknown",message:"Sign-in completed but no account information was returned",retryable:!0,suggestedAction:"retry",originalError:null,timestamp:Date.now()};throw l?.(k),new Error("Sign-in completed but no account information was returned")}}catch(A){let k={type:"unknown",message:A instanceof Error?A.message:"Unknown error occurred",retryable:!0,suggestedAction:"contact_support",originalError:A,timestamp:Date.now()};throw l?.(k),A}},"requestSignIn");var pn=ie(async()=>{await Xe.signOut(),ye({accountId:null,privateKey:null,accessKeyContractId:null,lastWalletId:null})},"signOut"),Ks=ie(async({message:t,recipient:e,nonce:r,callbackUrl:s,state:i})=>{if(!pt.accountId)throw new Error("Must sign in");let f=r||crypto.getRandomValues(new Uint8Array(32));try{let E=await Xe.signMessage({message:t,recipient:e,nonce:f,callbackUrl:s,state:i});return{accountId:E.accountId,publicKey:E.publicKey,signature:E.signature}}catch(E){throw console.error("fastnear: error signing message using adapter:",E),E}},"signMessage");function Sc(t){for(let e of t)if((e.type==="FunctionCall"||e.type==="Transfer")&&e.params.deposit&&e.params.deposit!=="0")return!0;return!1}ie(Sc,"hasNonZeroDeposit");var Ps={utils:{},borsh:fn.borsh,borshSchema:fn.borshSchema.getBorshSchema()};for(let t in ln)Ps.utils[t]=ln[t];var s0=Ps.utils,yr={};for(let t in mn)yr[t]=mn[t];var a0=yr.events;delete yr.events;try{if(typeof window<"u"){let t=new URL(window.location.href),e=t.searchParams.get("account_id"),r=t.searchParams.get("public_key"),s=t.searchParams.get("errorCode"),i=t.searchParams.get("errorMessage"),l=i?decodeURIComponent(i):null,f=t.searchParams.get("transactionHashes"),E=t.searchParams.get("txIds");if((s||i)&&console.warn(new Error(`Wallet raises:
code: ${s}
message: ${l}`)),e&&r&&(r===pt.publicKey?ye({accountId:e}):(Ns()==="SignedIn"&&console.warn("Public key mismatch from wallet redirect",r,pt.publicKey),t.searchParams.delete("public_key"))),f||E){let v=f?f.split(","):[],_=E?E.split(","):[];_.length>v.length?_.forEach(I=>{Ce({txId:I,status:"RejectedByUser",finalState:!0})}):_.length===v.length?_.forEach((I,A)=>{Ce({txId:I,status:"PendingGotTxHash",txHash:v[A],finalState:!1}),Ri(I)}):console.error(new Error("Transaction hash mismatch from wallet redirect"),_,v)}t.searchParams.delete("txIds"),Ns()==="SignedOut"&&(t.searchParams.delete("errorCode"),t.searchParams.delete("errorMessage"))}}catch(t){console.error("Error handling wallet redirect:",t)}function yn(t){return t instanceof Map?Object.fromEntries(Array.from(t,([e,r])=>[e,r instanceof Map?yn(r):Array.isArray(r)?r.map(s=>s instanceof Map?yn(s):s):r])):t}async function Uc(){return{async signIn({network:t,contractId:e,methodNames:r,successUrl:s,failureUrl:i}){if(Oe({networkId:t}),window.selector.ui.showIframe(),await Ds(),tr()&&Cr())return[{accountId:tr(),publicKey:Cr()}];throw new Error("Connection failed")},async signOut({network:t}){console.log("signOut"),Oe().networkId===t&&pn()},async getAccounts({network:t}){if(console.log("getAccounts"),Oe().networkId&&Oe().networkId!==t)throw new Error("Network mismatch");return tr()&&Cr()?[{accountId:tr(),publicKey:Cr()}]:[]},async signMessage({network:t,message:e,nonce:r,recipient:s}){if(console.log("signMessage"),Oe().networkId!==t)throw new Error("Network mismatch");return await Ks({message:e,nonce:r,recipient:s})},async signAndSendTransaction({network:t,signerId:e,receiverId:r,actions:s}){if(console.log("signAndSendTransaction"),Oe().networkId!==t)throw new Error("Network mismatch");e=e??tr();let i=await yr._adapter.sendTransactions({transactions:[{signerId:e,receiverId:r,actions:s}]});return yn(i.outcomes[0])},async signAndSendTransactions({network:t,transactions:e}){if(console.log("signAndSendTransactions"),Oe().networkId!==t)throw new Error("Network mismatch");return e=e.map(s=>({signerId:s.signerId??tr(),receiverId:s.receiverId,actions:s.actions})),(await yr._adapter.sendTransactions({transactions:e})).outcomes.map(yn)}}}Uc().then(t=>{window.selector.ready(t)});
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
