var bc=Object.create;var Qr=Object.defineProperty;var vc=Object.getOwnPropertyDescriptor;var Ec=Object.getOwnPropertyNames;var Bc=Object.getPrototypeOf,Ac=Object.prototype.hasOwnProperty;var wr=(t,e)=>()=>(t&&(e=t(t=0)),e);var xr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),tn=(t,e)=>{for(var r in e)Qr(t,r,{get:e[r],enumerable:!0})},Zi=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ec(e))!Ac.call(t,n)&&n!==r&&Qr(t,n,{get:()=>e[n],enumerable:!(o=vc(e,n))||o.enumerable});return t};var $i=(t,e,r)=>(r=t!=null?bc(Bc(t)):{},Zi(e||!t||!t.__esModule?Qr(r,"default",{value:t,enumerable:!0}):r,t)),Gi=t=>Zi(Qr({},"__esModule",{value:!0}),t);var F=wr(()=>{});function _c(t,e){this.fun=t,this.array=e}function ji(t){var e=Math.floor((Date.now()-Qe.now())*.001),r=Qe.now()*.001,o=Math.floor(r)+e,n=Math.floor(r%1*1e9);return t&&(o=o-t[0],n=n-t[1],n<0&&(o--,n+=mo)),[o,n]}var mu,Qe,go,mo,Yi=wr(()=>{F();P();H();_c.prototype.run=function(){this.fun.apply(null,this.array)};mu={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},Qe={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};Qe.now===void 0&&(go=Date.now(),Qe.timing&&Qe.timing.navigationStart&&(go=Qe.timing.navigationStart),Qe.now=()=>Date.now()-go);mo=1e9;ji.bigint=function(t){var e=ji(t);return typeof BigInt>"u"?e[0]*mo+e[1]:BigInt(e[0]*mo)+BigInt(e[1])}});var H=wr(()=>{Yi()});function Mc(){if(Ji)return Nr;Ji=!0,Nr.byteLength=y,Nr.toByteArray=A,Nr.fromByteArray=S;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,c=o.length;n<c;++n)t[n]=o[n],e[o.charCodeAt(n)]=n;e[45]=62,e[95]=63;function u(U){var k=U.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=U.indexOf("=");L===-1&&(L=k);var R=L===k?0:4-L%4;return[L,R]}function y(U){var k=u(U),L=k[0],R=k[1];return(L+R)*3/4-R}function h(U,k,L){return(k+L)*3/4-L}function A(U){var k,L=u(U),R=L[0],z=L[1],Z=new r(h(U,R,z)),O=0,D=z>0?R-4:R,j;for(j=0;j<D;j+=4)k=e[U.charCodeAt(j)]<<18|e[U.charCodeAt(j+1)]<<12|e[U.charCodeAt(j+2)]<<6|e[U.charCodeAt(j+3)],Z[O++]=k>>16&255,Z[O++]=k>>8&255,Z[O++]=k&255;return z===2&&(k=e[U.charCodeAt(j)]<<2|e[U.charCodeAt(j+1)]>>4,Z[O++]=k&255),z===1&&(k=e[U.charCodeAt(j)]<<10|e[U.charCodeAt(j+1)]<<4|e[U.charCodeAt(j+2)]>>2,Z[O++]=k>>8&255,Z[O++]=k&255),Z}function B(U){return t[U>>18&63]+t[U>>12&63]+t[U>>6&63]+t[U&63]}function _(U,k,L){for(var R,z=[],Z=k;Z<L;Z+=3)R=(U[Z]<<16&16711680)+(U[Z+1]<<8&65280)+(U[Z+2]&255),z.push(B(R));return z.join("")}function S(U){for(var k,L=U.length,R=L%3,z=[],Z=16383,O=0,D=L-R;O<D;O+=Z)z.push(_(U,O,O+Z>D?D:O+Z));return R===1?(k=U[L-1],z.push(t[k>>2]+t[k<<4&63]+"==")):R===2&&(k=(U[L-2]<<8)+U[L-1],z.push(t[k>>10]+t[k>>4&63]+t[k<<2&63]+"=")),z.join("")}return Nr}function Ic(){if(Xi)return en;Xi=!0;return en.read=function(t,e,r,o,n){var c,u,y=n*8-o-1,h=(1<<y)-1,A=h>>1,B=-7,_=r?n-1:0,S=r?-1:1,U=t[e+_];for(_+=S,c=U&(1<<-B)-1,U>>=-B,B+=y;B>0;c=c*256+t[e+_],_+=S,B-=8);for(u=c&(1<<-B)-1,c>>=-B,B+=o;B>0;u=u*256+t[e+_],_+=S,B-=8);if(c===0)c=1-A;else{if(c===h)return u?NaN:(U?-1:1)*(1/0);u=u+Math.pow(2,o),c=c-A}return(U?-1:1)*u*Math.pow(2,c-o)},en.write=function(t,e,r,o,n,c){var u,y,h,A=c*8-n-1,B=(1<<A)-1,_=B>>1,S=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=o?0:c-1,k=o?1:-1,L=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,u=B):(u=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+_>=1?e+=S/h:e+=S*Math.pow(2,1-_),e*h>=2&&(u++,h/=2),u+_>=B?(y=0,u=B):u+_>=1?(y=(e*h-1)*Math.pow(2,n),u=u+_):(y=e*Math.pow(2,_-1)*Math.pow(2,n),u=0));n>=8;t[r+U]=y&255,U+=k,y/=256,n-=8);for(u=u<<n|y,A+=n;A>0;t[r+U]=u&255,U+=k,u/=256,A-=8);t[r+U-k]|=L*128},en}function ts(){if(Qi)return tr;Qi=!0;let t=Mc(),e=Ic(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;tr.Buffer=u,tr.SlowBuffer=z,tr.INSPECT_MAX_BYTES=50;let o=2147483647;tr.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=n(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{let g=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(g,s),g.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(g){if(g>o)throw new RangeError('The value "'+g+'" is invalid for option "size"');let s=new Uint8Array(g);return Object.setPrototypeOf(s,u.prototype),s}function u(g,s,f){if(typeof g=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(g)}return y(g,s,f)}u.poolSize=8192;function y(g,s,f){if(typeof g=="string")return _(g,s);if(ArrayBuffer.isView(g))return U(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(ct(g,ArrayBuffer)||g&&ct(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ct(g,SharedArrayBuffer)||g&&ct(g.buffer,SharedArrayBuffer)))return k(g,s,f);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let v=g.valueOf&&g.valueOf();if(v!=null&&v!==g)return u.from(v,s,f);let I=L(g);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return u.from(g[Symbol.toPrimitive]("string"),s,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}u.from=function(g,s,f){return y(g,s,f)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function A(g,s,f){return h(g),g<=0?c(g):s!==void 0?typeof f=="string"?c(g).fill(s,f):c(g).fill(s):c(g)}u.alloc=function(g,s,f){return A(g,s,f)};function B(g){return h(g),c(g<0?0:R(g)|0)}u.allocUnsafe=function(g){return B(g)},u.allocUnsafeSlow=function(g){return B(g)};function _(g,s){if((typeof s!="string"||s==="")&&(s="utf8"),!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let f=Z(g,s)|0,v=c(f),I=v.write(g,s);return I!==f&&(v=v.slice(0,I)),v}function S(g){let s=g.length<0?0:R(g.length)|0,f=c(s);for(let v=0;v<s;v+=1)f[v]=g[v]&255;return f}function U(g){if(ct(g,Uint8Array)){let s=new Uint8Array(g);return k(s.buffer,s.byteOffset,s.byteLength)}return S(g)}function k(g,s,f){if(s<0||g.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<s+(f||0))throw new RangeError('"length" is outside of buffer bounds');let v;return s===void 0&&f===void 0?v=new Uint8Array(g):f===void 0?v=new Uint8Array(g,s):v=new Uint8Array(g,s,f),Object.setPrototypeOf(v,u.prototype),v}function L(g){if(u.isBuffer(g)){let s=R(g.length)|0,f=c(s);return f.length===0||g.copy(f,0,0,s),f}if(g.length!==void 0)return typeof g.length!="number"||be(g.length)?c(0):S(g);if(g.type==="Buffer"&&Array.isArray(g.data))return S(g.data)}function R(g){if(g>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return g|0}function z(g){return+g!=g&&(g=0),u.alloc(+g)}u.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==u.prototype},u.compare=function(s,f){if(ct(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),ct(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(s)||!u.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===f)return 0;let v=s.length,I=f.length;for(let T=0,C=Math.min(v,I);T<C;++T)if(s[T]!==f[T]){v=s[T],I=f[T];break}return v<I?-1:I<v?1:0},u.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(s,f){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return u.alloc(0);let v;if(f===void 0)for(f=0,v=0;v<s.length;++v)f+=s[v].length;let I=u.allocUnsafe(f),T=0;for(v=0;v<s.length;++v){let C=s[v];if(ct(C,Uint8Array))T+C.length>I.length?(u.isBuffer(C)||(C=u.from(C)),C.copy(I,T)):Uint8Array.prototype.set.call(I,C,T);else if(u.isBuffer(C))C.copy(I,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=C.length}return I};function Z(g,s){if(u.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||ct(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let f=g.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&f===0)return 0;let I=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return he(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Ue(g).length;default:if(I)return v?-1:he(g).length;s=(""+s).toLowerCase(),I=!0}}u.byteLength=Z;function O(g,s,f){let v=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,s>>>=0,f<=s))return"";for(g||(g="utf8");;)switch(g){case"hex":return w(this,s,f);case"utf8":case"utf-8":return M(this,s,f);case"ascii":return d(this,s,f);case"latin1":case"binary":return p(this,s,f);case"base64":return Bt(this,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,s,f);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),v=!0}}u.prototype._isBuffer=!0;function D(g,s,f){let v=g[s];g[s]=g[f],g[f]=v}u.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<s;f+=2)D(this,f,f+1);return this},u.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<s;f+=4)D(this,f,f+3),D(this,f+1,f+2);return this},u.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<s;f+=8)D(this,f,f+7),D(this,f+1,f+6),D(this,f+2,f+5),D(this,f+3,f+4);return this},u.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?M(this,0,s):O.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(s){if(!u.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:u.compare(this,s)===0},u.prototype.inspect=function(){let s="",f=tr.INSPECT_MAX_BYTES;return s=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(s+=" ... "),"<Buffer "+s+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(s,f,v,I,T){if(ct(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(f===void 0&&(f=0),v===void 0&&(v=s?s.length:0),I===void 0&&(I=0),T===void 0&&(T=this.length),f<0||v>s.length||I<0||T>this.length)throw new RangeError("out of range index");if(I>=T&&f>=v)return 0;if(I>=T)return-1;if(f>=v)return 1;if(f>>>=0,v>>>=0,I>>>=0,T>>>=0,this===s)return 0;let C=T-I,G=v-f,Et=Math.min(C,G),et=this.slice(I,T),rt=s.slice(f,v);for(let gt=0;gt<Et;++gt)if(et[gt]!==rt[gt]){C=et[gt],G=rt[gt];break}return C<G?-1:G<C?1:0};function j(g,s,f,v,I){if(g.length===0)return-1;if(typeof f=="string"?(v=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,be(f)&&(f=I?0:g.length-1),f<0&&(f=g.length+f),f>=g.length){if(I)return-1;f=g.length-1}else if(f<0)if(I)f=0;else return-1;if(typeof s=="string"&&(s=u.from(s,v)),u.isBuffer(s))return s.length===0?-1:nt(g,s,f,v,I);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(g,s,f):Uint8Array.prototype.lastIndexOf.call(g,s,f):nt(g,[s],f,v,I);throw new TypeError("val must be string, number or Buffer")}function nt(g,s,f,v,I){let T=1,C=g.length,G=s.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(g.length<2||s.length<2)return-1;T=2,C/=2,G/=2,f/=2}function Et(rt,gt){return T===1?rt[gt]:rt.readUInt16BE(gt*T)}let et;if(I){let rt=-1;for(et=f;et<C;et++)if(Et(g,et)===Et(s,rt===-1?0:et-rt)){if(rt===-1&&(rt=et),et-rt+1===G)return rt*T}else rt!==-1&&(et-=et-rt),rt=-1}else for(f+G>C&&(f=C-G),et=f;et>=0;et--){let rt=!0;for(let gt=0;gt<G;gt++)if(Et(g,et+gt)!==Et(s,gt)){rt=!1;break}if(rt)return et}return-1}u.prototype.includes=function(s,f,v){return this.indexOf(s,f,v)!==-1},u.prototype.indexOf=function(s,f,v){return j(this,s,f,v,!0)},u.prototype.lastIndexOf=function(s,f,v){return j(this,s,f,v,!1)};function at(g,s,f,v){f=Number(f)||0;let I=g.length-f;v?(v=Number(v),v>I&&(v=I)):v=I;let T=s.length;v>T/2&&(v=T/2);let C;for(C=0;C<v;++C){let G=parseInt(s.substr(C*2,2),16);if(be(G))return C;g[f+C]=G}return C}function st(g,s,f,v){return pt(he(s,g.length-f),g,f,v)}function ft(g,s,f,v){return pt(wt(s),g,f,v)}function Ut(g,s,f,v){return pt(Ue(s),g,f,v)}function it(g,s,f,v){return pt(bt(s,g.length-f),g,f,v)}u.prototype.write=function(s,f,v,I){if(f===void 0)I="utf8",v=this.length,f=0;else if(v===void 0&&typeof f=="string")I=f,v=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(v)?(v=v>>>0,I===void 0&&(I="utf8")):(I=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let T=this.length-f;if((v===void 0||v>T)&&(v=T),s.length>0&&(v<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let C=!1;for(;;)switch(I){case"hex":return at(this,s,f,v);case"utf8":case"utf-8":return st(this,s,f,v);case"ascii":case"latin1":case"binary":return ft(this,s,f,v);case"base64":return Ut(this,s,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,s,f,v);default:if(C)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),C=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bt(g,s,f){return s===0&&f===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(s,f))}function M(g,s,f){f=Math.min(g.length,f);let v=[],I=s;for(;I<f;){let T=g[I],C=null,G=T>239?4:T>223?3:T>191?2:1;if(I+G<=f){let Et,et,rt,gt;switch(G){case 1:T<128&&(C=T);break;case 2:Et=g[I+1],(Et&192)===128&&(gt=(T&31)<<6|Et&63,gt>127&&(C=gt));break;case 3:Et=g[I+1],et=g[I+2],(Et&192)===128&&(et&192)===128&&(gt=(T&15)<<12|(Et&63)<<6|et&63,gt>2047&&(gt<55296||gt>57343)&&(C=gt));break;case 4:Et=g[I+1],et=g[I+2],rt=g[I+3],(Et&192)===128&&(et&192)===128&&(rt&192)===128&&(gt=(T&15)<<18|(Et&63)<<12|(et&63)<<6|rt&63,gt>65535&&gt<1114112&&(C=gt))}}C===null?(C=65533,G=1):C>65535&&(C-=65536,v.push(C>>>10&1023|55296),C=56320|C&1023),v.push(C),I+=G}return l(v)}let i=4096;function l(g){let s=g.length;if(s<=i)return String.fromCharCode.apply(String,g);let f="",v=0;for(;v<s;)f+=String.fromCharCode.apply(String,g.slice(v,v+=i));return f}function d(g,s,f){let v="";f=Math.min(g.length,f);for(let I=s;I<f;++I)v+=String.fromCharCode(g[I]&127);return v}function p(g,s,f){let v="";f=Math.min(g.length,f);for(let I=s;I<f;++I)v+=String.fromCharCode(g[I]);return v}function w(g,s,f){let v=g.length;(!s||s<0)&&(s=0),(!f||f<0||f>v)&&(f=v);let I="";for(let T=s;T<f;++T)I+=vt[g[T]];return I}function x(g,s,f){let v=g.slice(s,f),I="";for(let T=0;T<v.length-1;T+=2)I+=String.fromCharCode(v[T]+v[T+1]*256);return I}u.prototype.slice=function(s,f){let v=this.length;s=~~s,f=f===void 0?v:~~f,s<0?(s+=v,s<0&&(s=0)):s>v&&(s=v),f<0?(f+=v,f<0&&(f=0)):f>v&&(f=v),f<s&&(f=s);let I=this.subarray(s,f);return Object.setPrototypeOf(I,u.prototype),I};function E(g,s,f){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+s>f)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(s,f,v){s=s>>>0,f=f>>>0,v||E(s,f,this.length);let I=this[s],T=1,C=0;for(;++C<f&&(T*=256);)I+=this[s+C]*T;return I},u.prototype.readUintBE=u.prototype.readUIntBE=function(s,f,v){s=s>>>0,f=f>>>0,v||E(s,f,this.length);let I=this[s+--f],T=1;for(;f>0&&(T*=256);)I+=this[s+--f]*T;return I},u.prototype.readUint8=u.prototype.readUInt8=function(s,f){return s=s>>>0,f||E(s,1,this.length),this[s]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(s,f){return s=s>>>0,f||E(s,2,this.length),this[s]|this[s+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(s,f){return s=s>>>0,f||E(s,2,this.length),this[s]<<8|this[s+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(s,f){return s=s>>>0,f||E(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(s,f){return s=s>>>0,f||E(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},u.prototype.readBigUInt64LE=ht(function(s){s=s>>>0,X(s,"offset");let f=this[s],v=this[s+7];(f===void 0||v===void 0)&&At(s,this.length-8);let I=f+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,T=this[++s]+this[++s]*2**8+this[++s]*2**16+v*2**24;return BigInt(I)+(BigInt(T)<<BigInt(32))}),u.prototype.readBigUInt64BE=ht(function(s){s=s>>>0,X(s,"offset");let f=this[s],v=this[s+7];(f===void 0||v===void 0)&&At(s,this.length-8);let I=f*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],T=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+v;return(BigInt(I)<<BigInt(32))+BigInt(T)}),u.prototype.readIntLE=function(s,f,v){s=s>>>0,f=f>>>0,v||E(s,f,this.length);let I=this[s],T=1,C=0;for(;++C<f&&(T*=256);)I+=this[s+C]*T;return T*=128,I>=T&&(I-=Math.pow(2,8*f)),I},u.prototype.readIntBE=function(s,f,v){s=s>>>0,f=f>>>0,v||E(s,f,this.length);let I=f,T=1,C=this[s+--I];for(;I>0&&(T*=256);)C+=this[s+--I]*T;return T*=128,C>=T&&(C-=Math.pow(2,8*f)),C},u.prototype.readInt8=function(s,f){return s=s>>>0,f||E(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},u.prototype.readInt16LE=function(s,f){s=s>>>0,f||E(s,2,this.length);let v=this[s]|this[s+1]<<8;return v&32768?v|4294901760:v},u.prototype.readInt16BE=function(s,f){s=s>>>0,f||E(s,2,this.length);let v=this[s+1]|this[s]<<8;return v&32768?v|4294901760:v},u.prototype.readInt32LE=function(s,f){return s=s>>>0,f||E(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},u.prototype.readInt32BE=function(s,f){return s=s>>>0,f||E(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},u.prototype.readBigInt64LE=ht(function(s){s=s>>>0,X(s,"offset");let f=this[s],v=this[s+7];(f===void 0||v===void 0)&&At(s,this.length-8);let I=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(v<<24);return(BigInt(I)<<BigInt(32))+BigInt(f+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),u.prototype.readBigInt64BE=ht(function(s){s=s>>>0,X(s,"offset");let f=this[s],v=this[s+7];(f===void 0||v===void 0)&&At(s,this.length-8);let I=(f<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(I)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+v)}),u.prototype.readFloatLE=function(s,f){return s=s>>>0,f||E(s,4,this.length),e.read(this,s,!0,23,4)},u.prototype.readFloatBE=function(s,f){return s=s>>>0,f||E(s,4,this.length),e.read(this,s,!1,23,4)},u.prototype.readDoubleLE=function(s,f){return s=s>>>0,f||E(s,8,this.length),e.read(this,s,!0,52,8)},u.prototype.readDoubleBE=function(s,f){return s=s>>>0,f||E(s,8,this.length),e.read(this,s,!1,52,8)};function m(g,s,f,v,I,T){if(!u.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>I||s<T)throw new RangeError('"value" argument is out of bounds');if(f+v>g.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(s,f,v,I){if(s=+s,f=f>>>0,v=v>>>0,!I){let G=Math.pow(2,8*v)-1;m(this,s,f,v,G,0)}let T=1,C=0;for(this[f]=s&255;++C<v&&(T*=256);)this[f+C]=s/T&255;return f+v},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(s,f,v,I){if(s=+s,f=f>>>0,v=v>>>0,!I){let G=Math.pow(2,8*v)-1;m(this,s,f,v,G,0)}let T=v-1,C=1;for(this[f+T]=s&255;--T>=0&&(C*=256);)this[f+T]=s/C&255;return f+v},u.prototype.writeUint8=u.prototype.writeUInt8=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,1,255,0),this[f]=s&255,f+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,2,65535,0),this[f]=s&255,this[f+1]=s>>>8,f+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,2,65535,0),this[f]=s>>>8,this[f+1]=s&255,f+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,4,4294967295,0),this[f+3]=s>>>24,this[f+2]=s>>>16,this[f+1]=s>>>8,this[f]=s&255,f+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,4,4294967295,0),this[f]=s>>>24,this[f+1]=s>>>16,this[f+2]=s>>>8,this[f+3]=s&255,f+4};function a(g,s,f,v,I){tt(s,v,I,g,f,7);let T=Number(s&BigInt(4294967295));g[f++]=T,T=T>>8,g[f++]=T,T=T>>8,g[f++]=T,T=T>>8,g[f++]=T;let C=Number(s>>BigInt(32)&BigInt(4294967295));return g[f++]=C,C=C>>8,g[f++]=C,C=C>>8,g[f++]=C,C=C>>8,g[f++]=C,f}function b(g,s,f,v,I){tt(s,v,I,g,f,7);let T=Number(s&BigInt(4294967295));g[f+7]=T,T=T>>8,g[f+6]=T,T=T>>8,g[f+5]=T,T=T>>8,g[f+4]=T;let C=Number(s>>BigInt(32)&BigInt(4294967295));return g[f+3]=C,C=C>>8,g[f+2]=C,C=C>>8,g[f+1]=C,C=C>>8,g[f]=C,f+8}u.prototype.writeBigUInt64LE=ht(function(s,f=0){return a(this,s,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ht(function(s,f=0){return b(this,s,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(s,f,v,I){if(s=+s,f=f>>>0,!I){let Et=Math.pow(2,8*v-1);m(this,s,f,v,Et-1,-Et)}let T=0,C=1,G=0;for(this[f]=s&255;++T<v&&(C*=256);)s<0&&G===0&&this[f+T-1]!==0&&(G=1),this[f+T]=(s/C>>0)-G&255;return f+v},u.prototype.writeIntBE=function(s,f,v,I){if(s=+s,f=f>>>0,!I){let Et=Math.pow(2,8*v-1);m(this,s,f,v,Et-1,-Et)}let T=v-1,C=1,G=0;for(this[f+T]=s&255;--T>=0&&(C*=256);)s<0&&G===0&&this[f+T+1]!==0&&(G=1),this[f+T]=(s/C>>0)-G&255;return f+v},u.prototype.writeInt8=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,1,127,-128),s<0&&(s=255+s+1),this[f]=s&255,f+1},u.prototype.writeInt16LE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,2,32767,-32768),this[f]=s&255,this[f+1]=s>>>8,f+2},u.prototype.writeInt16BE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,2,32767,-32768),this[f]=s>>>8,this[f+1]=s&255,f+2},u.prototype.writeInt32LE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,4,2147483647,-2147483648),this[f]=s&255,this[f+1]=s>>>8,this[f+2]=s>>>16,this[f+3]=s>>>24,f+4},u.prototype.writeInt32BE=function(s,f,v){return s=+s,f=f>>>0,v||m(this,s,f,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[f]=s>>>24,this[f+1]=s>>>16,this[f+2]=s>>>8,this[f+3]=s&255,f+4},u.prototype.writeBigInt64LE=ht(function(s,f=0){return a(this,s,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ht(function(s,f=0){return b(this,s,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function N(g,s,f,v,I,T){if(f+v>g.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function K(g,s,f,v,I){return s=+s,f=f>>>0,I||N(g,s,f,4),e.write(g,s,f,v,23,4),f+4}u.prototype.writeFloatLE=function(s,f,v){return K(this,s,f,!0,v)},u.prototype.writeFloatBE=function(s,f,v){return K(this,s,f,!1,v)};function q(g,s,f,v,I){return s=+s,f=f>>>0,I||N(g,s,f,8),e.write(g,s,f,v,52,8),f+8}u.prototype.writeDoubleLE=function(s,f,v){return q(this,s,f,!0,v)},u.prototype.writeDoubleBE=function(s,f,v){return q(this,s,f,!1,v)},u.prototype.copy=function(s,f,v,I){if(!u.isBuffer(s))throw new TypeError("argument should be a Buffer");if(v||(v=0),!I&&I!==0&&(I=this.length),f>=s.length&&(f=s.length),f||(f=0),I>0&&I<v&&(I=v),I===v||s.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),s.length-f<I-v&&(I=s.length-f+v);let T=I-v;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,v,I):Uint8Array.prototype.set.call(s,this.subarray(v,I),f),T},u.prototype.fill=function(s,f,v,I){if(typeof s=="string"){if(typeof f=="string"?(I=f,f=0,v=this.length):typeof v=="string"&&(I=v,v=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!u.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(s.length===1){let C=s.charCodeAt(0);(I==="utf8"&&C<128||I==="latin1")&&(s=C)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(f<0||this.length<f||this.length<v)throw new RangeError("Out of range index");if(v<=f)return this;f=f>>>0,v=v===void 0?this.length:v>>>0,s||(s=0);let T;if(typeof s=="number")for(T=f;T<v;++T)this[T]=s;else{let C=u.isBuffer(s)?s:u.from(s,I),G=C.length;if(G===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(T=0;T<v-f;++T)this[T+f]=C[T%G]}return this};let W={};function $(g,s,f){W[g]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}$("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(g,s){return`The "${g}" argument must be of type number. Received type ${typeof s}`},TypeError),$("ERR_OUT_OF_RANGE",function(g,s,f){let v=`The value of "${g}" is out of range.`,I=f;return Number.isInteger(f)&&Math.abs(f)>2**32?I=Y(String(f)):typeof f=="bigint"&&(I=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(I=Y(I)),I+="n"),v+=` It must be ${s}. Received ${I}`,v},RangeError);function Y(g){let s="",f=g.length,v=g[0]==="-"?1:0;for(;f>=v+4;f-=3)s=`_${g.slice(f-3,f)}${s}`;return`${g.slice(0,f)}${s}`}function ut(g,s,f){X(s,"offset"),(g[s]===void 0||g[s+f]===void 0)&&At(s,g.length-(f+1))}function tt(g,s,f,v,I,T){if(g>f||g<s){let C=typeof s=="bigint"?"n":"",G;throw s===0||s===BigInt(0)?G=`>= 0${C} and < 2${C} ** ${(T+1)*8}${C}`:G=`>= -(2${C} ** ${(T+1)*8-1}${C}) and < 2 ** ${(T+1)*8-1}${C}`,new W.ERR_OUT_OF_RANGE("value",G,g)}ut(v,I,T)}function X(g,s){if(typeof g!="number")throw new W.ERR_INVALID_ARG_TYPE(s,"number",g)}function At(g,s,f){throw Math.floor(g)!==g?(X(g,f),new W.ERR_OUT_OF_RANGE("offset","an integer",g)):s<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${s}`,g)}let lt=/[^+/0-9A-Za-z-_]/g;function dt(g){if(g=g.split("=")[0],g=g.trim().replace(lt,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function he(g,s){s=s||1/0;let f,v=g.length,I=null,T=[];for(let C=0;C<v;++C){if(f=g.charCodeAt(C),f>55295&&f<57344){if(!I){if(f>56319){(s-=3)>-1&&T.push(239,191,189);continue}else if(C+1===v){(s-=3)>-1&&T.push(239,191,189);continue}I=f;continue}if(f<56320){(s-=3)>-1&&T.push(239,191,189),I=f;continue}f=(I-55296<<10|f-56320)+65536}else I&&(s-=3)>-1&&T.push(239,191,189);if(I=null,f<128){if((s-=1)<0)break;T.push(f)}else if(f<2048){if((s-=2)<0)break;T.push(f>>6|192,f&63|128)}else if(f<65536){if((s-=3)<0)break;T.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((s-=4)<0)break;T.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return T}function wt(g){let s=[];for(let f=0;f<g.length;++f)s.push(g.charCodeAt(f)&255);return s}function bt(g,s){let f,v,I,T=[];for(let C=0;C<g.length&&!((s-=2)<0);++C)f=g.charCodeAt(C),v=f>>8,I=f%256,T.push(I),T.push(v);return T}function Ue(g){return t.toByteArray(dt(g))}function pt(g,s,f,v){let I;for(I=0;I<v&&!(I+f>=s.length||I>=g.length);++I)s[I+f]=g[I];return I}function ct(g,s){return g instanceof s||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===s.name}function be(g){return g!==g}let vt=function(){let g="0123456789abcdef",s=new Array(256);for(let f=0;f<16;++f){let v=f*16;for(let I=0;I<16;++I)s[v+I]=g[f]+g[I]}return s}();function ht(g){return typeof BigInt>"u"?Xe:g}function Xe(){throw new Error("BigInt not supported")}return tr}var Nr,Ji,en,Xi,tr,Qi,es=wr(()=>{F();P();H();Nr={},Ji=!1;en={},Xi=!1;tr={},Qi=!1});var yo={};tn(yo,{Buffer:()=>V,INSPECT_MAX_BYTES:()=>Sc,default:()=>De,kMaxLength:()=>Uc});var De,V,Sc,Uc,rn=wr(()=>{F();P();H();es();De=ts();De.Buffer;De.SlowBuffer;De.INSPECT_MAX_BYTES;De.kMaxLength;V=De.Buffer,Sc=De.INSPECT_MAX_BYTES,Uc=De.kMaxLength});var P=wr(()=>{rn()});var ga=xr((pa,Go)=>{F();P();H();(function(t,e){"use strict";function r(M,i){if(!M)throw new Error(i||"Assertion failed")}function o(M,i){M.super_=i;var l=function(){};l.prototype=i.prototype,M.prototype=new l,M.prototype.constructor=M}function n(M,i,l){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((i==="le"||i==="be")&&(l=i,i=10),this._init(M||0,i||10,l||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=(rn(),Gi(yo)).Buffer}catch{}n.isBN=function(i){return i instanceof n?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===n.wordSize&&Array.isArray(i.words)},n.max=function(i,l){return i.cmp(l)>0?i:l},n.min=function(i,l){return i.cmp(l)<0?i:l},n.prototype._init=function(i,l,d){if(typeof i=="number")return this._initNumber(i,l,d);if(typeof i=="object")return this._initArray(i,l,d);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),i=i.toString().replace(/\s+/g,"");var p=0;i[0]==="-"&&(p++,this.negative=1),p<i.length&&(l===16?this._parseHex(i,p,d):(this._parseBase(i,l,p),d==="le"&&this._initArray(this.toArray(),l,d)))},n.prototype._initNumber=function(i,l,d){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(r(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),l,d)},n.prototype._initArray=function(i,l,d){if(r(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,x,E=0;if(d==="be")for(p=i.length-1,w=0;p>=0;p-=3)x=i[p]|i[p-1]<<8|i[p-2]<<16,this.words[w]|=x<<E&67108863,this.words[w+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,w++);else if(d==="le")for(p=0,w=0;p<i.length;p+=3)x=i[p]|i[p+1]<<8|i[p+2]<<16,this.words[w]|=x<<E&67108863,this.words[w+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,w++);return this._strip()};function u(M,i){var l=M.charCodeAt(i);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+M)}function y(M,i,l){var d=u(M,l);return l-1>=i&&(d|=u(M,l-1)<<4),d}n.prototype._parseHex=function(i,l,d){this.length=Math.ceil((i.length-l)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,x=0,E;if(d==="be")for(p=i.length-1;p>=l;p-=2)E=y(i,l,p)<<w,this.words[x]|=E&67108863,w>=18?(w-=18,x+=1,this.words[x]|=E>>>26):w+=8;else{var m=i.length-l;for(p=m%2===0?l+1:l;p<i.length;p+=2)E=y(i,l,p)<<w,this.words[x]|=E&67108863,w>=18?(w-=18,x+=1,this.words[x]|=E>>>26):w+=8}this._strip()};function h(M,i,l,d){for(var p=0,w=0,x=Math.min(M.length,l),E=i;E<x;E++){var m=M.charCodeAt(E)-48;p*=d,m>=49?w=m-49+10:m>=17?w=m-17+10:w=m,r(m>=0&&w<d,"Invalid character"),p+=w}return p}n.prototype._parseBase=function(i,l,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=l)p++;p--,w=w/l|0;for(var x=i.length-d,E=x%p,m=Math.min(x,x-E)+d,a=0,b=d;b<m;b+=p)a=h(i,b,b+p,l),this.imuln(w),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(E!==0){var N=1;for(a=h(i,b,i.length,l),b=0;b<E;b++)N*=l;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(i){i.words=new Array(this.length);for(var l=0;l<this.length;l++)i.words[l]=this.words[l];i.length=this.length,i.negative=this.negative,i.red=this.red};function A(M,i){M.words=i.words,M.length=i.length,M.negative=i.negative,M.red=i.red}if(n.prototype._move=function(i){A(i,this)},n.prototype.clone=function(){var i=new n(null);return this.copy(i),i},n.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=B}catch{n.prototype.inspect=B}else n.prototype.inspect=B;function B(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],U=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(i,l){i=i||10,l=l|0||1;var d;if(i===16||i==="hex"){d="";for(var p=0,w=0,x=0;x<this.length;x++){var E=this.words[x],m=((E<<p|w)&16777215).toString(16);w=E>>>24-p&16777215,p+=2,p>=26&&(p-=26,x--),w!==0||x!==this.length-1?d=_[6-m.length]+m+d:d=m+d}for(w!==0&&(d=w.toString(16)+d);d.length%l!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(i===(i|0)&&i>=2&&i<=36){var a=S[i],b=U[i];d="";var N=this.clone();for(N.negative=0;!N.isZero();){var K=N.modrn(b).toString(i);N=N.idivn(b),N.isZero()?d=K+d:d=_[a-K.length]+K+d}for(this.isZero()&&(d="0"+d);d.length%l!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},n.prototype.toJSON=function(){return this.toString(16,2)},c&&(n.prototype.toBuffer=function(i,l){return this.toArrayLike(c,i,l)}),n.prototype.toArray=function(i,l){return this.toArrayLike(Array,i,l)};var k=function(i,l){return i.allocUnsafe?i.allocUnsafe(l):new i(l)};n.prototype.toArrayLike=function(i,l,d){this._strip();var p=this.byteLength(),w=d||Math.max(1,p);r(p<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0");var x=k(i,w),E=l==="le"?"LE":"BE";return this["_toArrayLike"+E](x,p),x},n.prototype._toArrayLikeLE=function(i,l){for(var d=0,p=0,w=0,x=0;w<this.length;w++){var E=this.words[w]<<x|p;i[d++]=E&255,d<i.length&&(i[d++]=E>>8&255),d<i.length&&(i[d++]=E>>16&255),x===6?(d<i.length&&(i[d++]=E>>24&255),p=0,x=0):(p=E>>>24,x+=2)}if(d<i.length)for(i[d++]=p;d<i.length;)i[d++]=0},n.prototype._toArrayLikeBE=function(i,l){for(var d=i.length-1,p=0,w=0,x=0;w<this.length;w++){var E=this.words[w]<<x|p;i[d--]=E&255,d>=0&&(i[d--]=E>>8&255),d>=0&&(i[d--]=E>>16&255),x===6?(d>=0&&(i[d--]=E>>24&255),p=0,x=0):(p=E>>>24,x+=2)}if(d>=0)for(i[d--]=p;d>=0;)i[d--]=0},Math.clz32?n.prototype._countBits=function(i){return 32-Math.clz32(i)}:n.prototype._countBits=function(i){var l=i,d=0;return l>=4096&&(d+=13,l>>>=13),l>=64&&(d+=7,l>>>=7),l>=8&&(d+=4,l>>>=4),l>=2&&(d+=2,l>>>=2),d+l},n.prototype._zeroBits=function(i){if(i===0)return 26;var l=i,d=0;return(l&8191)===0&&(d+=13,l>>>=13),(l&127)===0&&(d+=7,l>>>=7),(l&15)===0&&(d+=4,l>>>=4),(l&3)===0&&(d+=2,l>>>=2),(l&1)===0&&d++,d},n.prototype.bitLength=function(){var i=this.words[this.length-1],l=this._countBits(i);return(this.length-1)*26+l};function L(M){for(var i=new Array(M.bitLength()),l=0;l<i.length;l++){var d=l/26|0,p=l%26;i[l]=M.words[d]>>>p&1}return i}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,l=0;l<this.length;l++){var d=this._zeroBits(this.words[l]);if(i+=d,d!==26)break}return i},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},n.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var l=0;l<i.length;l++)this.words[l]=this.words[l]|i.words[l];return this._strip()},n.prototype.ior=function(i){return r((this.negative|i.negative)===0),this.iuor(i)},n.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},n.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},n.prototype.iuand=function(i){var l;this.length>i.length?l=i:l=this;for(var d=0;d<l.length;d++)this.words[d]=this.words[d]&i.words[d];return this.length=l.length,this._strip()},n.prototype.iand=function(i){return r((this.negative|i.negative)===0),this.iuand(i)},n.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},n.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},n.prototype.iuxor=function(i){var l,d;this.length>i.length?(l=this,d=i):(l=i,d=this);for(var p=0;p<d.length;p++)this.words[p]=l.words[p]^d.words[p];if(this!==l)for(;p<l.length;p++)this.words[p]=l.words[p];return this.length=l.length,this._strip()},n.prototype.ixor=function(i){return r((this.negative|i.negative)===0),this.iuxor(i)},n.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},n.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},n.prototype.inotn=function(i){r(typeof i=="number"&&i>=0);var l=Math.ceil(i/26)|0,d=i%26;this._expand(l),d>0&&l--;for(var p=0;p<l;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this._strip()},n.prototype.notn=function(i){return this.clone().inotn(i)},n.prototype.setn=function(i,l){r(typeof i=="number"&&i>=0);var d=i/26|0,p=i%26;return this._expand(d+1),l?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this._strip()},n.prototype.iadd=function(i){var l;if(this.negative!==0&&i.negative===0)return this.negative=0,l=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,l=this.isub(i),i.negative=1,l._normSign();var d,p;this.length>i.length?(d=this,p=i):(d=i,p=this);for(var w=0,x=0;x<p.length;x++)l=(d.words[x]|0)+(p.words[x]|0)+w,this.words[x]=l&67108863,w=l>>>26;for(;w!==0&&x<d.length;x++)l=(d.words[x]|0)+w,this.words[x]=l&67108863,w=l>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this},n.prototype.add=function(i){var l;return i.negative!==0&&this.negative===0?(i.negative=0,l=this.sub(i),i.negative^=1,l):i.negative===0&&this.negative!==0?(this.negative=0,l=i.sub(this),this.negative=1,l):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},n.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var l=this.iadd(i);return i.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var d=this.cmp(i);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=i):(p=i,w=this);for(var x=0,E=0;E<w.length;E++)l=(p.words[E]|0)-(w.words[E]|0)+x,x=l>>26,this.words[E]=l&67108863;for(;x!==0&&E<p.length;E++)l=(p.words[E]|0)+x,x=l>>26,this.words[E]=l&67108863;if(x===0&&E<p.length&&p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=Math.max(this.length,E),p!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(i){return this.clone().isub(i)};function R(M,i,l){l.negative=i.negative^M.negative;var d=M.length+i.length|0;l.length=d,d=d-1|0;var p=M.words[0]|0,w=i.words[0]|0,x=p*w,E=x&67108863,m=x/67108864|0;l.words[0]=E;for(var a=1;a<d;a++){for(var b=m>>>26,N=m&67108863,K=Math.min(a,i.length-1),q=Math.max(0,a-M.length+1);q<=K;q++){var W=a-q|0;p=M.words[W]|0,w=i.words[q]|0,x=p*w+N,b+=x/67108864|0,N=x&67108863}l.words[a]=N|0,m=b|0}return m!==0?l.words[a]=m|0:l.length--,l._strip()}var z=function(i,l,d){var p=i.words,w=l.words,x=d.words,E=0,m,a,b,N=p[0]|0,K=N&8191,q=N>>>13,W=p[1]|0,$=W&8191,Y=W>>>13,ut=p[2]|0,tt=ut&8191,X=ut>>>13,At=p[3]|0,lt=At&8191,dt=At>>>13,he=p[4]|0,wt=he&8191,bt=he>>>13,Ue=p[5]|0,pt=Ue&8191,ct=Ue>>>13,be=p[6]|0,vt=be&8191,ht=be>>>13,Xe=p[7]|0,g=Xe&8191,s=Xe>>>13,f=p[8]|0,v=f&8191,I=f>>>13,T=p[9]|0,C=T&8191,G=T>>>13,Et=w[0]|0,et=Et&8191,rt=Et>>>13,gt=w[1]|0,Lt=gt&8191,Tt=gt>>>13,Fi=w[2]|0,kt=Fi&8191,Ct=Fi>>>13,Hi=w[3]|0,Rt=Hi&8191,Ot=Hi>>>13,Pi=w[4]|0,Nt=Pi&8191,Dt=Pi>>>13,Ki=w[5]|0,Ft=Ki&8191,Ht=Ki>>>13,qi=w[6]|0,Pt=qi&8191,Kt=qi>>>13,zi=w[7]|0,qt=zi&8191,zt=zi>>>13,Wi=w[8]|0,Wt=Wi&8191,Vt=Wi>>>13,Vi=w[9]|0,Zt=Vi&8191,$t=Vi>>>13;d.negative=i.negative^l.negative,d.length=19,m=Math.imul(K,et),a=Math.imul(K,rt),a=a+Math.imul(q,et)|0,b=Math.imul(q,rt);var jn=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(jn>>>26)|0,jn&=67108863,m=Math.imul($,et),a=Math.imul($,rt),a=a+Math.imul(Y,et)|0,b=Math.imul(Y,rt),m=m+Math.imul(K,Lt)|0,a=a+Math.imul(K,Tt)|0,a=a+Math.imul(q,Lt)|0,b=b+Math.imul(q,Tt)|0;var Yn=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,m=Math.imul(tt,et),a=Math.imul(tt,rt),a=a+Math.imul(X,et)|0,b=Math.imul(X,rt),m=m+Math.imul($,Lt)|0,a=a+Math.imul($,Tt)|0,a=a+Math.imul(Y,Lt)|0,b=b+Math.imul(Y,Tt)|0,m=m+Math.imul(K,kt)|0,a=a+Math.imul(K,Ct)|0,a=a+Math.imul(q,kt)|0,b=b+Math.imul(q,Ct)|0;var Jn=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,m=Math.imul(lt,et),a=Math.imul(lt,rt),a=a+Math.imul(dt,et)|0,b=Math.imul(dt,rt),m=m+Math.imul(tt,Lt)|0,a=a+Math.imul(tt,Tt)|0,a=a+Math.imul(X,Lt)|0,b=b+Math.imul(X,Tt)|0,m=m+Math.imul($,kt)|0,a=a+Math.imul($,Ct)|0,a=a+Math.imul(Y,kt)|0,b=b+Math.imul(Y,Ct)|0,m=m+Math.imul(K,Rt)|0,a=a+Math.imul(K,Ot)|0,a=a+Math.imul(q,Rt)|0,b=b+Math.imul(q,Ot)|0;var Xn=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,m=Math.imul(wt,et),a=Math.imul(wt,rt),a=a+Math.imul(bt,et)|0,b=Math.imul(bt,rt),m=m+Math.imul(lt,Lt)|0,a=a+Math.imul(lt,Tt)|0,a=a+Math.imul(dt,Lt)|0,b=b+Math.imul(dt,Tt)|0,m=m+Math.imul(tt,kt)|0,a=a+Math.imul(tt,Ct)|0,a=a+Math.imul(X,kt)|0,b=b+Math.imul(X,Ct)|0,m=m+Math.imul($,Rt)|0,a=a+Math.imul($,Ot)|0,a=a+Math.imul(Y,Rt)|0,b=b+Math.imul(Y,Ot)|0,m=m+Math.imul(K,Nt)|0,a=a+Math.imul(K,Dt)|0,a=a+Math.imul(q,Nt)|0,b=b+Math.imul(q,Dt)|0;var Qn=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,m=Math.imul(pt,et),a=Math.imul(pt,rt),a=a+Math.imul(ct,et)|0,b=Math.imul(ct,rt),m=m+Math.imul(wt,Lt)|0,a=a+Math.imul(wt,Tt)|0,a=a+Math.imul(bt,Lt)|0,b=b+Math.imul(bt,Tt)|0,m=m+Math.imul(lt,kt)|0,a=a+Math.imul(lt,Ct)|0,a=a+Math.imul(dt,kt)|0,b=b+Math.imul(dt,Ct)|0,m=m+Math.imul(tt,Rt)|0,a=a+Math.imul(tt,Ot)|0,a=a+Math.imul(X,Rt)|0,b=b+Math.imul(X,Ot)|0,m=m+Math.imul($,Nt)|0,a=a+Math.imul($,Dt)|0,a=a+Math.imul(Y,Nt)|0,b=b+Math.imul(Y,Dt)|0,m=m+Math.imul(K,Ft)|0,a=a+Math.imul(K,Ht)|0,a=a+Math.imul(q,Ft)|0,b=b+Math.imul(q,Ht)|0;var to=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(to>>>26)|0,to&=67108863,m=Math.imul(vt,et),a=Math.imul(vt,rt),a=a+Math.imul(ht,et)|0,b=Math.imul(ht,rt),m=m+Math.imul(pt,Lt)|0,a=a+Math.imul(pt,Tt)|0,a=a+Math.imul(ct,Lt)|0,b=b+Math.imul(ct,Tt)|0,m=m+Math.imul(wt,kt)|0,a=a+Math.imul(wt,Ct)|0,a=a+Math.imul(bt,kt)|0,b=b+Math.imul(bt,Ct)|0,m=m+Math.imul(lt,Rt)|0,a=a+Math.imul(lt,Ot)|0,a=a+Math.imul(dt,Rt)|0,b=b+Math.imul(dt,Ot)|0,m=m+Math.imul(tt,Nt)|0,a=a+Math.imul(tt,Dt)|0,a=a+Math.imul(X,Nt)|0,b=b+Math.imul(X,Dt)|0,m=m+Math.imul($,Ft)|0,a=a+Math.imul($,Ht)|0,a=a+Math.imul(Y,Ft)|0,b=b+Math.imul(Y,Ht)|0,m=m+Math.imul(K,Pt)|0,a=a+Math.imul(K,Kt)|0,a=a+Math.imul(q,Pt)|0,b=b+Math.imul(q,Kt)|0;var eo=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(eo>>>26)|0,eo&=67108863,m=Math.imul(g,et),a=Math.imul(g,rt),a=a+Math.imul(s,et)|0,b=Math.imul(s,rt),m=m+Math.imul(vt,Lt)|0,a=a+Math.imul(vt,Tt)|0,a=a+Math.imul(ht,Lt)|0,b=b+Math.imul(ht,Tt)|0,m=m+Math.imul(pt,kt)|0,a=a+Math.imul(pt,Ct)|0,a=a+Math.imul(ct,kt)|0,b=b+Math.imul(ct,Ct)|0,m=m+Math.imul(wt,Rt)|0,a=a+Math.imul(wt,Ot)|0,a=a+Math.imul(bt,Rt)|0,b=b+Math.imul(bt,Ot)|0,m=m+Math.imul(lt,Nt)|0,a=a+Math.imul(lt,Dt)|0,a=a+Math.imul(dt,Nt)|0,b=b+Math.imul(dt,Dt)|0,m=m+Math.imul(tt,Ft)|0,a=a+Math.imul(tt,Ht)|0,a=a+Math.imul(X,Ft)|0,b=b+Math.imul(X,Ht)|0,m=m+Math.imul($,Pt)|0,a=a+Math.imul($,Kt)|0,a=a+Math.imul(Y,Pt)|0,b=b+Math.imul(Y,Kt)|0,m=m+Math.imul(K,qt)|0,a=a+Math.imul(K,zt)|0,a=a+Math.imul(q,qt)|0,b=b+Math.imul(q,zt)|0;var ro=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(ro>>>26)|0,ro&=67108863,m=Math.imul(v,et),a=Math.imul(v,rt),a=a+Math.imul(I,et)|0,b=Math.imul(I,rt),m=m+Math.imul(g,Lt)|0,a=a+Math.imul(g,Tt)|0,a=a+Math.imul(s,Lt)|0,b=b+Math.imul(s,Tt)|0,m=m+Math.imul(vt,kt)|0,a=a+Math.imul(vt,Ct)|0,a=a+Math.imul(ht,kt)|0,b=b+Math.imul(ht,Ct)|0,m=m+Math.imul(pt,Rt)|0,a=a+Math.imul(pt,Ot)|0,a=a+Math.imul(ct,Rt)|0,b=b+Math.imul(ct,Ot)|0,m=m+Math.imul(wt,Nt)|0,a=a+Math.imul(wt,Dt)|0,a=a+Math.imul(bt,Nt)|0,b=b+Math.imul(bt,Dt)|0,m=m+Math.imul(lt,Ft)|0,a=a+Math.imul(lt,Ht)|0,a=a+Math.imul(dt,Ft)|0,b=b+Math.imul(dt,Ht)|0,m=m+Math.imul(tt,Pt)|0,a=a+Math.imul(tt,Kt)|0,a=a+Math.imul(X,Pt)|0,b=b+Math.imul(X,Kt)|0,m=m+Math.imul($,qt)|0,a=a+Math.imul($,zt)|0,a=a+Math.imul(Y,qt)|0,b=b+Math.imul(Y,zt)|0,m=m+Math.imul(K,Wt)|0,a=a+Math.imul(K,Vt)|0,a=a+Math.imul(q,Wt)|0,b=b+Math.imul(q,Vt)|0;var no=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(no>>>26)|0,no&=67108863,m=Math.imul(C,et),a=Math.imul(C,rt),a=a+Math.imul(G,et)|0,b=Math.imul(G,rt),m=m+Math.imul(v,Lt)|0,a=a+Math.imul(v,Tt)|0,a=a+Math.imul(I,Lt)|0,b=b+Math.imul(I,Tt)|0,m=m+Math.imul(g,kt)|0,a=a+Math.imul(g,Ct)|0,a=a+Math.imul(s,kt)|0,b=b+Math.imul(s,Ct)|0,m=m+Math.imul(vt,Rt)|0,a=a+Math.imul(vt,Ot)|0,a=a+Math.imul(ht,Rt)|0,b=b+Math.imul(ht,Ot)|0,m=m+Math.imul(pt,Nt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(ct,Nt)|0,b=b+Math.imul(ct,Dt)|0,m=m+Math.imul(wt,Ft)|0,a=a+Math.imul(wt,Ht)|0,a=a+Math.imul(bt,Ft)|0,b=b+Math.imul(bt,Ht)|0,m=m+Math.imul(lt,Pt)|0,a=a+Math.imul(lt,Kt)|0,a=a+Math.imul(dt,Pt)|0,b=b+Math.imul(dt,Kt)|0,m=m+Math.imul(tt,qt)|0,a=a+Math.imul(tt,zt)|0,a=a+Math.imul(X,qt)|0,b=b+Math.imul(X,zt)|0,m=m+Math.imul($,Wt)|0,a=a+Math.imul($,Vt)|0,a=a+Math.imul(Y,Wt)|0,b=b+Math.imul(Y,Vt)|0,m=m+Math.imul(K,Zt)|0,a=a+Math.imul(K,$t)|0,a=a+Math.imul(q,Zt)|0,b=b+Math.imul(q,$t)|0;var oo=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(oo>>>26)|0,oo&=67108863,m=Math.imul(C,Lt),a=Math.imul(C,Tt),a=a+Math.imul(G,Lt)|0,b=Math.imul(G,Tt),m=m+Math.imul(v,kt)|0,a=a+Math.imul(v,Ct)|0,a=a+Math.imul(I,kt)|0,b=b+Math.imul(I,Ct)|0,m=m+Math.imul(g,Rt)|0,a=a+Math.imul(g,Ot)|0,a=a+Math.imul(s,Rt)|0,b=b+Math.imul(s,Ot)|0,m=m+Math.imul(vt,Nt)|0,a=a+Math.imul(vt,Dt)|0,a=a+Math.imul(ht,Nt)|0,b=b+Math.imul(ht,Dt)|0,m=m+Math.imul(pt,Ft)|0,a=a+Math.imul(pt,Ht)|0,a=a+Math.imul(ct,Ft)|0,b=b+Math.imul(ct,Ht)|0,m=m+Math.imul(wt,Pt)|0,a=a+Math.imul(wt,Kt)|0,a=a+Math.imul(bt,Pt)|0,b=b+Math.imul(bt,Kt)|0,m=m+Math.imul(lt,qt)|0,a=a+Math.imul(lt,zt)|0,a=a+Math.imul(dt,qt)|0,b=b+Math.imul(dt,zt)|0,m=m+Math.imul(tt,Wt)|0,a=a+Math.imul(tt,Vt)|0,a=a+Math.imul(X,Wt)|0,b=b+Math.imul(X,Vt)|0,m=m+Math.imul($,Zt)|0,a=a+Math.imul($,$t)|0,a=a+Math.imul(Y,Zt)|0,b=b+Math.imul(Y,$t)|0;var io=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(io>>>26)|0,io&=67108863,m=Math.imul(C,kt),a=Math.imul(C,Ct),a=a+Math.imul(G,kt)|0,b=Math.imul(G,Ct),m=m+Math.imul(v,Rt)|0,a=a+Math.imul(v,Ot)|0,a=a+Math.imul(I,Rt)|0,b=b+Math.imul(I,Ot)|0,m=m+Math.imul(g,Nt)|0,a=a+Math.imul(g,Dt)|0,a=a+Math.imul(s,Nt)|0,b=b+Math.imul(s,Dt)|0,m=m+Math.imul(vt,Ft)|0,a=a+Math.imul(vt,Ht)|0,a=a+Math.imul(ht,Ft)|0,b=b+Math.imul(ht,Ht)|0,m=m+Math.imul(pt,Pt)|0,a=a+Math.imul(pt,Kt)|0,a=a+Math.imul(ct,Pt)|0,b=b+Math.imul(ct,Kt)|0,m=m+Math.imul(wt,qt)|0,a=a+Math.imul(wt,zt)|0,a=a+Math.imul(bt,qt)|0,b=b+Math.imul(bt,zt)|0,m=m+Math.imul(lt,Wt)|0,a=a+Math.imul(lt,Vt)|0,a=a+Math.imul(dt,Wt)|0,b=b+Math.imul(dt,Vt)|0,m=m+Math.imul(tt,Zt)|0,a=a+Math.imul(tt,$t)|0,a=a+Math.imul(X,Zt)|0,b=b+Math.imul(X,$t)|0;var so=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(so>>>26)|0,so&=67108863,m=Math.imul(C,Rt),a=Math.imul(C,Ot),a=a+Math.imul(G,Rt)|0,b=Math.imul(G,Ot),m=m+Math.imul(v,Nt)|0,a=a+Math.imul(v,Dt)|0,a=a+Math.imul(I,Nt)|0,b=b+Math.imul(I,Dt)|0,m=m+Math.imul(g,Ft)|0,a=a+Math.imul(g,Ht)|0,a=a+Math.imul(s,Ft)|0,b=b+Math.imul(s,Ht)|0,m=m+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Kt)|0,a=a+Math.imul(ht,Pt)|0,b=b+Math.imul(ht,Kt)|0,m=m+Math.imul(pt,qt)|0,a=a+Math.imul(pt,zt)|0,a=a+Math.imul(ct,qt)|0,b=b+Math.imul(ct,zt)|0,m=m+Math.imul(wt,Wt)|0,a=a+Math.imul(wt,Vt)|0,a=a+Math.imul(bt,Wt)|0,b=b+Math.imul(bt,Vt)|0,m=m+Math.imul(lt,Zt)|0,a=a+Math.imul(lt,$t)|0,a=a+Math.imul(dt,Zt)|0,b=b+Math.imul(dt,$t)|0;var ao=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(ao>>>26)|0,ao&=67108863,m=Math.imul(C,Nt),a=Math.imul(C,Dt),a=a+Math.imul(G,Nt)|0,b=Math.imul(G,Dt),m=m+Math.imul(v,Ft)|0,a=a+Math.imul(v,Ht)|0,a=a+Math.imul(I,Ft)|0,b=b+Math.imul(I,Ht)|0,m=m+Math.imul(g,Pt)|0,a=a+Math.imul(g,Kt)|0,a=a+Math.imul(s,Pt)|0,b=b+Math.imul(s,Kt)|0,m=m+Math.imul(vt,qt)|0,a=a+Math.imul(vt,zt)|0,a=a+Math.imul(ht,qt)|0,b=b+Math.imul(ht,zt)|0,m=m+Math.imul(pt,Wt)|0,a=a+Math.imul(pt,Vt)|0,a=a+Math.imul(ct,Wt)|0,b=b+Math.imul(ct,Vt)|0,m=m+Math.imul(wt,Zt)|0,a=a+Math.imul(wt,$t)|0,a=a+Math.imul(bt,Zt)|0,b=b+Math.imul(bt,$t)|0;var co=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(co>>>26)|0,co&=67108863,m=Math.imul(C,Ft),a=Math.imul(C,Ht),a=a+Math.imul(G,Ft)|0,b=Math.imul(G,Ht),m=m+Math.imul(v,Pt)|0,a=a+Math.imul(v,Kt)|0,a=a+Math.imul(I,Pt)|0,b=b+Math.imul(I,Kt)|0,m=m+Math.imul(g,qt)|0,a=a+Math.imul(g,zt)|0,a=a+Math.imul(s,qt)|0,b=b+Math.imul(s,zt)|0,m=m+Math.imul(vt,Wt)|0,a=a+Math.imul(vt,Vt)|0,a=a+Math.imul(ht,Wt)|0,b=b+Math.imul(ht,Vt)|0,m=m+Math.imul(pt,Zt)|0,a=a+Math.imul(pt,$t)|0,a=a+Math.imul(ct,Zt)|0,b=b+Math.imul(ct,$t)|0;var fo=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(fo>>>26)|0,fo&=67108863,m=Math.imul(C,Pt),a=Math.imul(C,Kt),a=a+Math.imul(G,Pt)|0,b=Math.imul(G,Kt),m=m+Math.imul(v,qt)|0,a=a+Math.imul(v,zt)|0,a=a+Math.imul(I,qt)|0,b=b+Math.imul(I,zt)|0,m=m+Math.imul(g,Wt)|0,a=a+Math.imul(g,Vt)|0,a=a+Math.imul(s,Wt)|0,b=b+Math.imul(s,Vt)|0,m=m+Math.imul(vt,Zt)|0,a=a+Math.imul(vt,$t)|0,a=a+Math.imul(ht,Zt)|0,b=b+Math.imul(ht,$t)|0;var uo=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(uo>>>26)|0,uo&=67108863,m=Math.imul(C,qt),a=Math.imul(C,zt),a=a+Math.imul(G,qt)|0,b=Math.imul(G,zt),m=m+Math.imul(v,Wt)|0,a=a+Math.imul(v,Vt)|0,a=a+Math.imul(I,Wt)|0,b=b+Math.imul(I,Vt)|0,m=m+Math.imul(g,Zt)|0,a=a+Math.imul(g,$t)|0,a=a+Math.imul(s,Zt)|0,b=b+Math.imul(s,$t)|0;var lo=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(lo>>>26)|0,lo&=67108863,m=Math.imul(C,Wt),a=Math.imul(C,Vt),a=a+Math.imul(G,Wt)|0,b=Math.imul(G,Vt),m=m+Math.imul(v,Zt)|0,a=a+Math.imul(v,$t)|0,a=a+Math.imul(I,Zt)|0,b=b+Math.imul(I,$t)|0;var ho=(E+m|0)+((a&8191)<<13)|0;E=(b+(a>>>13)|0)+(ho>>>26)|0,ho&=67108863,m=Math.imul(C,Zt),a=Math.imul(C,$t),a=a+Math.imul(G,Zt)|0,b=Math.imul(G,$t);var po=(E+m|0)+((a&8191)<<13)|0;return E=(b+(a>>>13)|0)+(po>>>26)|0,po&=67108863,x[0]=jn,x[1]=Yn,x[2]=Jn,x[3]=Xn,x[4]=Qn,x[5]=to,x[6]=eo,x[7]=ro,x[8]=no,x[9]=oo,x[10]=io,x[11]=so,x[12]=ao,x[13]=co,x[14]=fo,x[15]=uo,x[16]=lo,x[17]=ho,x[18]=po,E!==0&&(x[19]=E,d.length++),d};Math.imul||(z=R);function Z(M,i,l){l.negative=i.negative^M.negative,l.length=M.length+i.length;for(var d=0,p=0,w=0;w<l.length-1;w++){var x=p;p=0;for(var E=d&67108863,m=Math.min(w,i.length-1),a=Math.max(0,w-M.length+1);a<=m;a++){var b=w-a,N=M.words[b]|0,K=i.words[a]|0,q=N*K,W=q&67108863;x=x+(q/67108864|0)|0,W=W+E|0,E=W&67108863,x=x+(W>>>26)|0,p+=x>>>26,x&=67108863}l.words[w]=E,d=x,x=p}return d!==0?l.words[w]=d:l.length--,l._strip()}function O(M,i,l){return Z(M,i,l)}n.prototype.mulTo=function(i,l){var d,p=this.length+i.length;return this.length===10&&i.length===10?d=z(this,i,l):p<63?d=R(this,i,l):p<1024?d=Z(this,i,l):d=O(this,i,l),d};function D(M,i){this.x=M,this.y=i}D.prototype.makeRBT=function(i){for(var l=new Array(i),d=n.prototype._countBits(i)-1,p=0;p<i;p++)l[p]=this.revBin(p,d,i);return l},D.prototype.revBin=function(i,l,d){if(i===0||i===d-1)return i;for(var p=0,w=0;w<l;w++)p|=(i&1)<<l-w-1,i>>=1;return p},D.prototype.permute=function(i,l,d,p,w,x){for(var E=0;E<x;E++)p[E]=l[i[E]],w[E]=d[i[E]]},D.prototype.transform=function(i,l,d,p,w,x){this.permute(x,i,l,d,p,w);for(var E=1;E<w;E<<=1)for(var m=E<<1,a=Math.cos(2*Math.PI/m),b=Math.sin(2*Math.PI/m),N=0;N<w;N+=m)for(var K=a,q=b,W=0;W<E;W++){var $=d[N+W],Y=p[N+W],ut=d[N+W+E],tt=p[N+W+E],X=K*ut-q*tt;tt=K*tt+q*ut,ut=X,d[N+W]=$+ut,p[N+W]=Y+tt,d[N+W+E]=$-ut,p[N+W+E]=Y-tt,W!==m&&(X=a*K-b*q,q=a*q+b*K,K=X)}},D.prototype.guessLen13b=function(i,l){var d=Math.max(l,i)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(i,l,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=i[p];i[p]=i[d-p-1],i[d-p-1]=w,w=l[p],l[p]=-l[d-p-1],l[d-p-1]=-w}},D.prototype.normalize13b=function(i,l){for(var d=0,p=0;p<l/2;p++){var w=Math.round(i[2*p+1]/l)*8192+Math.round(i[2*p]/l)+d;i[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return i},D.prototype.convert13b=function(i,l,d,p){for(var w=0,x=0;x<l;x++)w=w+(i[x]|0),d[2*x]=w&8191,w=w>>>13,d[2*x+1]=w&8191,w=w>>>13;for(x=2*l;x<p;++x)d[x]=0;r(w===0),r((w&-8192)===0)},D.prototype.stub=function(i){for(var l=new Array(i),d=0;d<i;d++)l[d]=0;return l},D.prototype.mulp=function(i,l,d){var p=2*this.guessLen13b(i.length,l.length),w=this.makeRBT(p),x=this.stub(p),E=new Array(p),m=new Array(p),a=new Array(p),b=new Array(p),N=new Array(p),K=new Array(p),q=d.words;q.length=p,this.convert13b(i.words,i.length,E,p),this.convert13b(l.words,l.length,b,p),this.transform(E,x,m,a,p,w),this.transform(b,x,N,K,p,w);for(var W=0;W<p;W++){var $=m[W]*N[W]-a[W]*K[W];a[W]=m[W]*K[W]+a[W]*N[W],m[W]=$}return this.conjugate(m,a,p),this.transform(m,a,q,x,p,w),this.conjugate(q,x,p),this.normalize13b(q,p),d.negative=i.negative^l.negative,d.length=i.length+l.length,d._strip()},n.prototype.mul=function(i){var l=new n(null);return l.words=new Array(this.length+i.length),this.mulTo(i,l)},n.prototype.mulf=function(i){var l=new n(null);return l.words=new Array(this.length+i.length),O(this,i,l)},n.prototype.imul=function(i){return this.clone().mulTo(i,this)},n.prototype.imuln=function(i){var l=i<0;l&&(i=-i),r(typeof i=="number"),r(i<67108864);for(var d=0,p=0;p<this.length;p++){var w=(this.words[p]|0)*i,x=(w&67108863)+(d&67108863);d>>=26,d+=w/67108864|0,d+=x>>>26,this.words[p]=x&67108863}return d!==0&&(this.words[p]=d,this.length++),l?this.ineg():this},n.prototype.muln=function(i){return this.clone().imuln(i)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(i){var l=L(i);if(l.length===0)return new n(1);for(var d=this,p=0;p<l.length&&l[p]===0;p++,d=d.sqr());if(++p<l.length)for(var w=d.sqr();p<l.length;p++,w=w.sqr())l[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(i){r(typeof i=="number"&&i>=0);var l=i%26,d=(i-l)/26,p=67108863>>>26-l<<26-l,w;if(l!==0){var x=0;for(w=0;w<this.length;w++){var E=this.words[w]&p,m=(this.words[w]|0)-E<<l;this.words[w]=m|x,x=E>>>26-l}x&&(this.words[w]=x,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this._strip()},n.prototype.ishln=function(i){return r(this.negative===0),this.iushln(i)},n.prototype.iushrn=function(i,l,d){r(typeof i=="number"&&i>=0);var p;l?p=(l-l%26)/26:p=0;var w=i%26,x=Math.min((i-w)/26,this.length),E=67108863^67108863>>>w<<w,m=d;if(p-=x,p=Math.max(0,p),m){for(var a=0;a<x;a++)m.words[a]=this.words[a];m.length=x}if(x!==0)if(this.length>x)for(this.length-=x,a=0;a<this.length;a++)this.words[a]=this.words[a+x];else this.words[0]=0,this.length=1;var b=0;for(a=this.length-1;a>=0&&(b!==0||a>=p);a--){var N=this.words[a]|0;this.words[a]=b<<26-w|N>>>w,b=N&E}return m&&b!==0&&(m.words[m.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(i,l,d){return r(this.negative===0),this.iushrn(i,l,d)},n.prototype.shln=function(i){return this.clone().ishln(i)},n.prototype.ushln=function(i){return this.clone().iushln(i)},n.prototype.shrn=function(i){return this.clone().ishrn(i)},n.prototype.ushrn=function(i){return this.clone().iushrn(i)},n.prototype.testn=function(i){r(typeof i=="number"&&i>=0);var l=i%26,d=(i-l)/26,p=1<<l;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(i){r(typeof i=="number"&&i>=0);var l=i%26,d=(i-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(l!==0&&d++,this.length=Math.min(d,this.length),l!==0){var p=67108863^67108863>>>l<<l;this.words[this.length-1]&=p}return this._strip()},n.prototype.maskn=function(i){return this.clone().imaskn(i)},n.prototype.iaddn=function(i){return r(typeof i=="number"),r(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},n.prototype._iaddn=function(i){this.words[0]+=i;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},n.prototype.isubn=function(i){if(r(typeof i=="number"),r(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},n.prototype.addn=function(i){return this.clone().iaddn(i)},n.prototype.subn=function(i){return this.clone().isubn(i)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(i,l,d){var p=i.length+d,w;this._expand(p);var x,E=0;for(w=0;w<i.length;w++){x=(this.words[w+d]|0)+E;var m=(i.words[w]|0)*l;x-=m&67108863,E=(x>>26)-(m/67108864|0),this.words[w+d]=x&67108863}for(;w<this.length-d;w++)x=(this.words[w+d]|0)+E,E=x>>26,this.words[w+d]=x&67108863;if(E===0)return this._strip();for(r(E===-1),E=0,w=0;w<this.length;w++)x=-(this.words[w]|0)+E,E=x>>26,this.words[w]=x&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(i,l){var d=this.length-i.length,p=this.clone(),w=i,x=w.words[w.length-1]|0,E=this._countBits(x);d=26-E,d!==0&&(w=w.ushln(d),p.iushln(d),x=w.words[w.length-1]|0);var m=p.length-w.length,a;if(l!=="mod"){a=new n(null),a.length=m+1,a.words=new Array(a.length);for(var b=0;b<a.length;b++)a.words[b]=0}var N=p.clone()._ishlnsubmul(w,1,m);N.negative===0&&(p=N,a&&(a.words[m]=1));for(var K=m-1;K>=0;K--){var q=(p.words[w.length+K]|0)*67108864+(p.words[w.length+K-1]|0);for(q=Math.min(q/x|0,67108863),p._ishlnsubmul(w,q,K);p.negative!==0;)q--,p.negative=0,p._ishlnsubmul(w,1,K),p.isZero()||(p.negative^=1);a&&(a.words[K]=q)}return a&&a._strip(),p._strip(),l!=="div"&&d!==0&&p.iushrn(d),{div:a||null,mod:p}},n.prototype.divmod=function(i,l,d){if(r(!i.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,x;return this.negative!==0&&i.negative===0?(x=this.neg().divmod(i,l),l!=="mod"&&(p=x.div.neg()),l!=="div"&&(w=x.mod.neg(),d&&w.negative!==0&&w.iadd(i)),{div:p,mod:w}):this.negative===0&&i.negative!==0?(x=this.divmod(i.neg(),l),l!=="mod"&&(p=x.div.neg()),{div:p,mod:x.mod}):(this.negative&i.negative)!==0?(x=this.neg().divmod(i.neg(),l),l!=="div"&&(w=x.mod.neg(),d&&w.negative!==0&&w.isub(i)),{div:x.div,mod:w}):i.length>this.length||this.cmp(i)<0?{div:new n(0),mod:this}:i.length===1?l==="div"?{div:this.divn(i.words[0]),mod:null}:l==="mod"?{div:null,mod:new n(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new n(this.modrn(i.words[0]))}:this._wordDiv(i,l)},n.prototype.div=function(i){return this.divmod(i,"div",!1).div},n.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},n.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},n.prototype.divRound=function(i){var l=this.divmod(i);if(l.mod.isZero())return l.div;var d=l.div.negative!==0?l.mod.isub(i):l.mod,p=i.ushrn(1),w=i.andln(1),x=d.cmp(p);return x<0||w===1&&x===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},n.prototype.modrn=function(i){var l=i<0;l&&(i=-i),r(i<=67108863);for(var d=(1<<26)%i,p=0,w=this.length-1;w>=0;w--)p=(d*p+(this.words[w]|0))%i;return l?-p:p},n.prototype.modn=function(i){return this.modrn(i)},n.prototype.idivn=function(i){var l=i<0;l&&(i=-i),r(i<=67108863);for(var d=0,p=this.length-1;p>=0;p--){var w=(this.words[p]|0)+d*67108864;this.words[p]=w/i|0,d=w%i}return this._strip(),l?this.ineg():this},n.prototype.divn=function(i){return this.clone().idivn(i)},n.prototype.egcd=function(i){r(i.negative===0),r(!i.isZero());var l=this,d=i.clone();l.negative!==0?l=l.umod(i):l=l.clone();for(var p=new n(1),w=new n(0),x=new n(0),E=new n(1),m=0;l.isEven()&&d.isEven();)l.iushrn(1),d.iushrn(1),++m;for(var a=d.clone(),b=l.clone();!l.isZero();){for(var N=0,K=1;(l.words[0]&K)===0&&N<26;++N,K<<=1);if(N>0)for(l.iushrn(N);N-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(a),w.isub(b)),p.iushrn(1),w.iushrn(1);for(var q=0,W=1;(d.words[0]&W)===0&&q<26;++q,W<<=1);if(q>0)for(d.iushrn(q);q-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(a),E.isub(b)),x.iushrn(1),E.iushrn(1);l.cmp(d)>=0?(l.isub(d),p.isub(x),w.isub(E)):(d.isub(l),x.isub(p),E.isub(w))}return{a:x,b:E,gcd:d.iushln(m)}},n.prototype._invmp=function(i){r(i.negative===0),r(!i.isZero());var l=this,d=i.clone();l.negative!==0?l=l.umod(i):l=l.clone();for(var p=new n(1),w=new n(0),x=d.clone();l.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,m=1;(l.words[0]&m)===0&&E<26;++E,m<<=1);if(E>0)for(l.iushrn(E);E-- >0;)p.isOdd()&&p.iadd(x),p.iushrn(1);for(var a=0,b=1;(d.words[0]&b)===0&&a<26;++a,b<<=1);if(a>0)for(d.iushrn(a);a-- >0;)w.isOdd()&&w.iadd(x),w.iushrn(1);l.cmp(d)>=0?(l.isub(d),p.isub(w)):(d.isub(l),w.isub(p))}var N;return l.cmpn(1)===0?N=p:N=w,N.cmpn(0)<0&&N.iadd(i),N},n.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var l=this.clone(),d=i.clone();l.negative=0,d.negative=0;for(var p=0;l.isEven()&&d.isEven();p++)l.iushrn(1),d.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=l.cmp(d);if(w<0){var x=l;l=d,d=x}else if(w===0||d.cmpn(1)===0)break;l.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(i){return this.egcd(i).a.umod(i)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(i){return this.words[0]&i},n.prototype.bincn=function(i){r(typeof i=="number");var l=i%26,d=(i-l)/26,p=1<<l;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,x=d;w!==0&&x<this.length;x++){var E=this.words[x]|0;E+=w,w=E>>>26,E&=67108863,this.words[x]=E}return w!==0&&(this.words[x]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(i){var l=i<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var d;if(this.length>1)d=1;else{l&&(i=-i),r(i<=67108863,"Number is too big");var p=this.words[0]|0;d=p===i?0:p<i?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var l=this.ucmp(i);return this.negative!==0?-l|0:l},n.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var l=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=i.words[d]|0;if(p!==w){p<w?l=-1:p>w&&(l=1);break}}return l},n.prototype.gtn=function(i){return this.cmpn(i)===1},n.prototype.gt=function(i){return this.cmp(i)===1},n.prototype.gten=function(i){return this.cmpn(i)>=0},n.prototype.gte=function(i){return this.cmp(i)>=0},n.prototype.ltn=function(i){return this.cmpn(i)===-1},n.prototype.lt=function(i){return this.cmp(i)===-1},n.prototype.lten=function(i){return this.cmpn(i)<=0},n.prototype.lte=function(i){return this.cmp(i)<=0},n.prototype.eqn=function(i){return this.cmpn(i)===0},n.prototype.eq=function(i){return this.cmp(i)===0},n.red=function(i){return new it(i)},n.prototype.toRed=function(i){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(i){return this.red=i,this},n.prototype.forceRed=function(i){return r(!this.red,"Already a number in reduction context"),this._forceRed(i)},n.prototype.redAdd=function(i){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},n.prototype.redIAdd=function(i){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},n.prototype.redSub=function(i){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},n.prototype.redISub=function(i){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},n.prototype.redShl=function(i){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},n.prototype.redMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},n.prototype.redIMul=function(i){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(i){return r(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var j={k256:null,p224:null,p192:null,p25519:null};function nt(M,i){this.name=M,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}nt.prototype._tmp=function(){var i=new n(null);return i.words=new Array(Math.ceil(this.n/13)),i},nt.prototype.ireduce=function(i){var l=i,d;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),d=l.bitLength();while(d>this.n);var p=d<this.n?-1:l.ucmp(this.p);return p===0?(l.words[0]=0,l.length=1):p>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},nt.prototype.split=function(i,l){i.iushrn(this.n,0,l)},nt.prototype.imulK=function(i){return i.imul(this.k)};function at(){nt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(at,nt),at.prototype.split=function(i,l){for(var d=4194303,p=Math.min(i.length,9),w=0;w<p;w++)l.words[w]=i.words[w];if(l.length=p,i.length<=9){i.words[0]=0,i.length=1;return}var x=i.words[9];for(l.words[l.length++]=x&d,w=10;w<i.length;w++){var E=i.words[w]|0;i.words[w-10]=(E&d)<<4|x>>>22,x=E}x>>>=22,i.words[w-10]=x,x===0&&i.length>10?i.length-=10:i.length-=9},at.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var l=0,d=0;d<i.length;d++){var p=i.words[d]|0;l+=p*977,i.words[d]=l&67108863,l=p*64+(l/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function st(){nt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(st,nt);function ft(){nt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(ft,nt);function Ut(){nt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Ut,nt),Ut.prototype.imulK=function(i){for(var l=0,d=0;d<i.length;d++){var p=(i.words[d]|0)*19+l,w=p&67108863;p>>>=26,i.words[d]=w,l=p}return l!==0&&(i.words[i.length++]=l),i},n._prime=function(i){if(j[i])return j[i];var l;if(i==="k256")l=new at;else if(i==="p224")l=new st;else if(i==="p192")l=new ft;else if(i==="p25519")l=new Ut;else throw new Error("Unknown prime "+i);return j[i]=l,l};function it(M){if(typeof M=="string"){var i=n._prime(M);this.m=i.p,this.prime=i}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}it.prototype._verify1=function(i){r(i.negative===0,"red works only with positives"),r(i.red,"red works only with red numbers")},it.prototype._verify2=function(i,l){r((i.negative|l.negative)===0,"red works only with positives"),r(i.red&&i.red===l.red,"red works only with red numbers")},it.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(A(i,i.umod(this.m)._forceRed(this)),i)},it.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},it.prototype.add=function(i,l){this._verify2(i,l);var d=i.add(l);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},it.prototype.iadd=function(i,l){this._verify2(i,l);var d=i.iadd(l);return d.cmp(this.m)>=0&&d.isub(this.m),d},it.prototype.sub=function(i,l){this._verify2(i,l);var d=i.sub(l);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},it.prototype.isub=function(i,l){this._verify2(i,l);var d=i.isub(l);return d.cmpn(0)<0&&d.iadd(this.m),d},it.prototype.shl=function(i,l){return this._verify1(i),this.imod(i.ushln(l))},it.prototype.imul=function(i,l){return this._verify2(i,l),this.imod(i.imul(l))},it.prototype.mul=function(i,l){return this._verify2(i,l),this.imod(i.mul(l))},it.prototype.isqr=function(i){return this.imul(i,i.clone())},it.prototype.sqr=function(i){return this.mul(i,i)},it.prototype.sqrt=function(i){if(i.isZero())return i.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(i,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);r(!p.isZero());var x=new n(1).toRed(this),E=x.redNeg(),m=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new n(2*a*a).toRed(this);this.pow(a,m).cmp(E)!==0;)a.redIAdd(E);for(var b=this.pow(a,p),N=this.pow(i,p.addn(1).iushrn(1)),K=this.pow(i,p),q=w;K.cmp(x)!==0;){for(var W=K,$=0;W.cmp(x)!==0;$++)W=W.redSqr();r($<q);var Y=this.pow(b,new n(1).iushln(q-$-1));N=N.redMul(Y),b=Y.redSqr(),K=K.redMul(b),q=$}return N},it.prototype.invm=function(i){var l=i._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},it.prototype.pow=function(i,l){if(l.isZero())return new n(1).toRed(this);if(l.cmpn(1)===0)return i.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=i;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],i);var x=p[0],E=0,m=0,a=l.bitLength()%26;for(a===0&&(a=26),w=l.length-1;w>=0;w--){for(var b=l.words[w],N=a-1;N>=0;N--){var K=b>>N&1;if(x!==p[0]&&(x=this.sqr(x)),K===0&&E===0){m=0;continue}E<<=1,E|=K,m++,!(m!==d&&(w!==0||N!==0))&&(x=this.mul(x,p[E]),m=0,E=0)}a=26}return x},it.prototype.convertTo=function(i){var l=i.umod(this.m);return l===i?l.clone():l},it.prototype.convertFrom=function(i){var l=i.clone();return l.red=null,l},n.mont=function(i){return new Bt(i)};function Bt(M){it.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Bt,it),Bt.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},Bt.prototype.convertFrom=function(i){var l=this.imod(i.mul(this.rinv));return l.red=null,l},Bt.prototype.imul=function(i,l){if(i.isZero()||l.isZero())return i.words[0]=0,i.length=1,i;var d=i.imul(l),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},Bt.prototype.mul=function(i,l){if(i.isZero()||l.isZero())return new n(0)._forceRed(this);var d=i.mul(l),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},Bt.prototype.invm=function(i){var l=this.imod(i._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof Go>"u"||Go,pa)});var wa=xr((jo,ya)=>{F();P();H();var mn=(rn(),Gi(yo)),_e=mn.Buffer;function ma(t,e){for(var r in t)e[r]=t[r]}_e.from&&_e.alloc&&_e.allocUnsafe&&_e.allocUnsafeSlow?ya.exports=mn:(ma(mn,jo),jo.Buffer=lr);function lr(t,e,r){return _e(t,e,r)}lr.prototype=Object.create(_e.prototype);ma(_e,lr);lr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return _e(t,e,r)};lr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var o=_e(t);return e!==void 0?typeof r=="string"?o.fill(e,r):o.fill(e):o.fill(0),o};lr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return _e(t)};lr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return mn.SlowBuffer(t)}});var ba=xr((Zh,xa)=>{"use strict";F();P();H();var yn=wa().Buffer;function Cf(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var o=0;o<t.length;o++){var n=t.charAt(o),c=n.charCodeAt(0);if(e[c]!==255)throw new TypeError(n+" is ambiguous");e[c]=o}var u=t.length,y=t.charAt(0),h=Math.log(u)/Math.log(256),A=Math.log(256)/Math.log(u);function B(U){if((Array.isArray(U)||U instanceof Uint8Array)&&(U=yn.from(U)),!yn.isBuffer(U))throw new TypeError("Expected Buffer");if(U.length===0)return"";for(var k=0,L=0,R=0,z=U.length;R!==z&&U[R]===0;)R++,k++;for(var Z=(z-R)*A+1>>>0,O=new Uint8Array(Z);R!==z;){for(var D=U[R],j=0,nt=Z-1;(D!==0||j<L)&&nt!==-1;nt--,j++)D+=256*O[nt]>>>0,O[nt]=D%u>>>0,D=D/u>>>0;if(D!==0)throw new Error("Non-zero carry");L=j,R++}for(var at=Z-L;at!==Z&&O[at]===0;)at++;for(var st=y.repeat(k);at<Z;++at)st+=t.charAt(O[at]);return st}function _(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return yn.alloc(0);for(var k=0,L=0,R=0;U[k]===y;)L++,k++;for(var z=(U.length-k)*h+1>>>0,Z=new Uint8Array(z);k<U.length;){var O=U.charCodeAt(k);if(O>255)return;var D=e[O];if(D===255)return;for(var j=0,nt=z-1;(D!==0||j<R)&&nt!==-1;nt--,j++)D+=u*Z[nt]>>>0,Z[nt]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");R=j,k++}for(var at=z-R;at!==z&&Z[at]===0;)at++;var st=yn.allocUnsafe(L+(z-at));st.fill(0,0,L);for(var ft=L;at!==z;)st[ft++]=Z[at++];return st}function S(U){var k=_(U);if(k)return k;throw new Error("Non-base"+u+" character")}return{encode:B,decodeUnsafe:_,decode:S}}xa.exports=Cf});var Ea=xr((Yh,va)=>{F();P();H();var Rf=ba(),Of="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";va.exports=Rf(Of)});var Ba=xr(Xo=>{"use strict";F();P();H();function Ce(t,e,r){return e<=t&&t<=r}function En(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Nf(t){for(var e=String(t),r=e.length,o=0,n=[];o<r;){var c=e.charCodeAt(o);if(c<55296||c>57343)n.push(c);else if(56320<=c&&c<=57343)n.push(65533);else if(55296<=c&&c<=56319)if(o===r-1)n.push(65533);else{var u=t.charCodeAt(o+1);if(56320<=u&&u<=57343){var y=c&1023,h=u&1023;n.push(65536+(y<<10)+h),o+=1}else n.push(65533)}o+=1}return n}function Df(t){for(var e="",r=0;r<t.length;++r){var o=t[r];o<=65535?e+=String.fromCharCode(o):(o-=65536,e+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return e}var wn=-1;function Jo(t){this.tokens=[].slice.call(t)}Jo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():wn},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Sr=-1;function Yo(t,e){if(t)throw TypeError("Decoder error");return e||65533}var xn="utf-8";function bn(t,e){if(!(this instanceof bn))return new bn(t,e);if(t=t!==void 0?String(t).toLowerCase():xn,t!==xn)throw new Error("Encoding not supported. Only utf-8 is supported");e=En(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bn.prototype={decode:function(e,r){var o;typeof e=="object"&&e instanceof ArrayBuffer?o=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):o=new Uint8Array(0),r=En(r),this._streaming||(this._decoder=new Ff({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var n=new Jo(o),c=[],u;!n.endOfStream()&&(u=this._decoder.handler(n,n.read()),u!==Sr);)u!==null&&(Array.isArray(u)?c.push.apply(c,u):c.push(u));if(!this._streaming){do{if(u=this._decoder.handler(n,n.read()),u===Sr)break;u!==null&&(Array.isArray(u)?c.push.apply(c,u):c.push(u))}while(!n.endOfStream());this._decoder=null}return c.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(c[0]===65279?(this._BOMseen=!0,c.shift()):this._BOMseen=!0),Df(c)}};function vn(t,e){if(!(this instanceof vn))return new vn(t,e);if(t=t!==void 0?String(t).toLowerCase():xn,t!==xn)throw new Error("Encoding not supported. Only utf-8 is supported");e=En(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vn.prototype={encode:function(e,r){e=e?String(e):"",r=En(r),this._streaming||(this._encoder=new Hf(this._options)),this._streaming=!!r.stream;for(var o=[],n=new Jo(Nf(e)),c;!n.endOfStream()&&(c=this._encoder.handler(n,n.read()),c!==Sr);)Array.isArray(c)?o.push.apply(o,c):o.push(c);if(!this._streaming){for(;c=this._encoder.handler(n,n.read()),c!==Sr;)Array.isArray(c)?o.push.apply(o,c):o.push(c);this._encoder=null}return new Uint8Array(o)}};function Ff(t){var e=t.fatal,r=0,o=0,n=0,c=128,u=191;this.handler=function(y,h){if(h===wn&&n!==0)return n=0,Yo(e);if(h===wn)return Sr;if(n===0){if(Ce(h,0,127))return h;if(Ce(h,194,223))n=1,r=h-192;else if(Ce(h,224,239))h===224&&(c=160),h===237&&(u=159),n=2,r=h-224;else if(Ce(h,240,244))h===240&&(c=144),h===244&&(u=143),n=3,r=h-240;else return Yo(e);return r=r<<6*n,null}if(!Ce(h,c,u))return r=n=o=0,c=128,u=191,y.prepend(h),Yo(e);if(c=128,u=191,o+=1,r+=h-128<<6*(n-o),o!==n)return null;var A=r;return r=n=o=0,A}}function Hf(t){var e=t.fatal;this.handler=function(r,o){if(o===wn)return Sr;if(Ce(o,0,127))return o;var n,c;Ce(o,128,2047)?(n=1,c=192):Ce(o,2048,65535)?(n=2,c=224):Ce(o,65536,1114111)&&(n=3,c=240);for(var u=[(o>>6*n)+c];n>0;){var y=o>>6*(n-1);u.push(128|y&63),n-=1}return u}}Xo.TextEncoder=vn;Xo.TextDecoder=bn});var ei=xr(yt=>{"use strict";F();P();H();var Pf=yt&&yt.__createBinding||(Object.create?function(t,e,r,o){o===void 0&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){o===void 0&&(o=r),t[o]=e[r]}),Kf=yt&&yt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Me=yt&&yt.__decorate||function(t,e,r,o){var n=arguments.length,c=n<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,r,o);else for(var y=t.length-1;y>=0;y--)(u=t[y])&&(c=(n<3?u(c):n>3?u(e,r,c):u(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},qf=yt&&yt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Pf(e,t,r);return Kf(e,t),e},Aa=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.deserializeUnchecked=yt.deserialize=yt.serialize=yt.BinaryReader=yt.BinaryWriter=yt.BorshError=yt.baseDecode=yt.baseEncode=void 0;var We=Aa(ga()),_a=Aa(Ea()),zf=qf(Ba()),Wf=typeof TextDecoder!="function"?zf.TextDecoder:TextDecoder,Vf=new Wf("utf-8",{fatal:!0});function Zf(t){return typeof t=="string"&&(t=V.from(t,"utf8")),_a.default.encode(V.from(t))}yt.baseEncode=Zf;function $f(t){return V.from(_a.default.decode(t))}yt.baseDecode=$f;var Qo=1024,Qt=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};yt.BorshError=Qt;var Bn=class{constructor(){this.buf=V.alloc(Qo),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=V.concat([this.buf,V.alloc(Qo)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(V.from(new We.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(V.from(new We.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(V.from(new We.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(V.from(new We.default(e).toArray("le",64)))}writeBuffer(e){this.buf=V.concat([V.from(this.buf.subarray(0,this.length)),e,V.alloc(Qo)]),this.length+=e.length}writeString(e){this.maybeResize();let r=V.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(V.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(let o of e)this.maybeResize(),r(o)}toArray(){return this.buf.subarray(0,this.length)}};yt.BinaryWriter=Bn;function Ie(t,e,r){let o=r.value;r.value=function(...n){try{return o.apply(this,n)}catch(c){if(c instanceof RangeError){let u=c.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new Qt("Reached the end of buffer when deserializing")}throw c}}}var ne=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new We.default(e,"le")}readU128(){let e=this.readBuffer(16);return new We.default(e,"le")}readU256(){let e=this.readBuffer(32);return new We.default(e,"le")}readU512(){let e=this.readBuffer(64);return new We.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Qt(`Expected buffer length ${e} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){let e=this.readU32(),r=this.readBuffer(e);try{return Vf.decode(r)}catch(o){throw new Qt(`Error decoding UTF-8 string: ${o}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let r=this.readU32(),o=Array();for(let n=0;n<r;++n)o.push(e());return o}};Me([Ie],ne.prototype,"readU8",null);Me([Ie],ne.prototype,"readU16",null);Me([Ie],ne.prototype,"readU32",null);Me([Ie],ne.prototype,"readU64",null);Me([Ie],ne.prototype,"readU128",null);Me([Ie],ne.prototype,"readU256",null);Me([Ie],ne.prototype,"readU512",null);Me([Ie],ne.prototype,"readString",null);Me([Ie],ne.prototype,"readFixedArray",null);Me([Ie],ne.prototype,"readArray",null);yt.BinaryReader=ne;function Ma(t){return t.charAt(0).toUpperCase()+t.slice(1)}function hr(t,e,r,o,n){try{if(typeof o=="string")n[`write${Ma(o)}`](r);else if(o instanceof Array)if(typeof o[0]=="number"){if(r.length!==o[0])throw new Qt(`Expecting byte array of length ${o[0]}, but got ${r.length} bytes`);n.writeFixedArray(r)}else if(o.length===2&&typeof o[1]=="number"){if(r.length!==o[1])throw new Qt(`Expecting byte array of length ${o[1]}, but got ${r.length} bytes`);for(let c=0;c<o[1];c++)hr(t,null,r[c],o[0],n)}else n.writeArray(r,c=>{hr(t,e,c,o[0],n)});else if(o.kind!==void 0)switch(o.kind){case"option":{r==null?n.writeU8(0):(n.writeU8(1),hr(t,e,r,o.type,n));break}case"map":{n.writeU32(r.size),r.forEach((c,u)=>{hr(t,e,u,o.key,n),hr(t,e,c,o.value,n)});break}default:throw new Qt(`FieldType ${o} unrecognized`)}else Ia(t,r,n)}catch(c){throw c instanceof Qt&&c.addToFieldPath(e),c}}function Ia(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}let o=t.get(e.constructor);if(!o)throw new Qt(`Class ${e.constructor.name} is missing in schema`);if(o.kind==="struct")o.fields.map(([n,c])=>{hr(t,n,e[n],c,r)});else if(o.kind==="enum"){let n=e[o.field];for(let c=0;c<o.values.length;++c){let[u,y]=o.values[c];if(u===n){r.writeU8(c),hr(t,u,e[u],y,r);break}}}else throw new Qt(`Unexpected schema kind: ${o.kind} for ${e.constructor.name}`)}function Gf(t,e,r=Bn){let o=new r;return Ia(t,e,o),o.toArray()}yt.serialize=Gf;function dr(t,e,r,o){try{if(typeof r=="string")return o[`read${Ma(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return o.readFixedArray(r[0]);if(typeof r[1]=="number"){let n=[];for(let c=0;c<r[1];c++)n.push(dr(t,null,r[0],o));return n}else return o.readArray(()=>dr(t,e,r[0],o))}if(r.kind==="option")return o.readU8()?dr(t,e,r.type,o):void 0;if(r.kind==="map"){let n=new Map,c=o.readU32();for(let u=0;u<c;u++){let y=dr(t,e,r.key,o),h=dr(t,e,r.value,o);n.set(y,h)}return n}return ti(t,r,o)}catch(n){throw n instanceof Qt&&n.addToFieldPath(e),n}}function ti(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);let o=t.get(e);if(!o)throw new Qt(`Class ${e.name} is missing in schema`);if(o.kind==="struct"){let n={};for(let[c,u]of t.get(e).fields)n[c]=dr(t,c,u,r);return new e(n)}if(o.kind==="enum"){let n=r.readU8();if(n>=o.values.length)throw new Qt(`Enum index: ${n} is out of range`);let[c,u]=o.values[n],y=dr(t,c,u,r);return new e({[c]:y})}throw new Qt(`Unexpected schema kind: ${o.kind} for ${e.constructor.name}`)}function jf(t,e,r,o=ne){let n=new o(r),c=ti(t,e,n);if(n.offset<r.length)throw new Qt(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return c}yt.deserialize=jf;function Yf(t,e,r,o=ne){let n=new o(r);return ti(t,e,n)}yt.deserializeUnchecked=Yf});F();P();H();F();P();H();Object.defineProperty(window,"localStorage",{value:sandboxedLocalStorage});Object.defineProperty(window,"open",{value:function(t,e,r){return console.log("open",t),window.selector.open(t,e,r)}});F();P();H();var Sn={};tn(Sn,{LsPrefix:()=>dn,SCHEMA:()=>ai,base64ToBytes:()=>Zr,bytesToBase64:()=>zo,canSignWithLAK:()=>Zo,convertUnit:()=>la,createDefaultStorage:()=>ca,deepCopy:()=>ha,exp:()=>In,fromBase58:()=>Jt,fromBase64:()=>gn,fromHex:()=>ua,keyFromString:()=>ze,keyToString:()=>$o,lsGet:()=>qe,lsSet:()=>ue,mapAction:()=>_n,mapTransaction:()=>An,memoryStore:()=>Vr,parseJsonFromBytes:()=>Vo,privateKeyFromRandom:()=>Ir,publicKeyFromPrivate:()=>jt,serializeSignedTransaction:()=>si,serializeTransaction:()=>ii,sha256:()=>_o,signBytes:()=>da,signHash:()=>ke,storage:()=>pn,toBase58:()=>sr,toBase64:()=>Wo,toHex:()=>fa,tryParseJson:()=>_r,txToJson:()=>La,txToJsonStringified:()=>Qf});F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();var er=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Lc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function on(t,...e){if(!Lc(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ns(t,e){on(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function rr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function sn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function de(t,e){return t<<32-e|t>>>e}function os(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function xo(t){return typeof t=="string"&&(t=os(t)),on(t),t}var nn=class{};function bo(t){let e=o=>t().update(xo(o)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function is(t=32){if(er&&typeof er.getRandomValues=="function")return er.getRandomValues(new Uint8Array(t));if(er&&typeof er.randomBytes=="function")return Uint8Array.from(er.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Tc(t,e,r,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,o);let n=BigInt(32),c=BigInt(4294967295),u=Number(r>>n&c),y=Number(r&c),h=o?4:0,A=o?0:4;t.setUint32(e+h,u,o),t.setUint32(e+A,y,o)}function ss(t,e,r){return t&e^~t&r}function as(t,e,r){return t&e^t&r^e&r}var Dr=class extends nn{constructor(e,r,o,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=o,this.isLE=n,this.buffer=new Uint8Array(e),this.view=sn(this.buffer)}update(e){wo(this),e=xo(e),on(e);let{view:r,buffer:o,blockLen:n}=this,c=e.length;for(let u=0;u<c;){let y=Math.min(n-this.pos,c-u);if(y===n){let h=sn(e);for(;n<=c-u;u+=n)this.process(h,u);continue}o.set(e.subarray(u,u+y),this.pos),this.pos+=y,u+=y,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wo(this),ns(e,this),this.finished=!0;let{buffer:r,view:o,blockLen:n,isLE:c}=this,{pos:u}=this;r[u++]=128,rr(this.buffer.subarray(u)),this.padOffset>n-u&&(this.process(o,0),u=0);for(let _=u;_<n;_++)r[_]=0;Tc(o,n-8,BigInt(this.length*8),c),this.process(o,0);let y=sn(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=h/4,B=this.get();if(A>B.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<A;_++)y.setUint32(4*_,B[_],c)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:o,length:n,finished:c,destroyed:u,pos:y}=this;return e.destroyed=u,e.finished=c,e.length=n,e.pos=y,n%r&&e.buffer.set(o),e}clone(){return this._cloneInto()}},Le=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var Yt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);F();P();H();var an=BigInt(4294967295),cs=BigInt(32);function kc(t,e=!1){return e?{h:Number(t&an),l:Number(t>>cs&an)}:{h:Number(t>>cs&an)|0,l:Number(t&an)|0}}function fs(t,e=!1){let r=t.length,o=new Uint32Array(r),n=new Uint32Array(r);for(let c=0;c<r;c++){let{h:u,l:y}=kc(t[c],e);[o[c],n[c]]=[u,y]}return[o,n]}var vo=(t,e,r)=>t>>>r,Eo=(t,e,r)=>t<<32-r|e>>>r,nr=(t,e,r)=>t>>>r|e<<32-r,or=(t,e,r)=>t<<32-r|e>>>r,Fr=(t,e,r)=>t<<64-r|e>>>r-32,Hr=(t,e,r)=>t>>>r-32|e<<64-r;function ve(t,e,r,o){let n=(e>>>0)+(o>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var us=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),ls=(t,e,r,o)=>e+r+o+(t/2**32|0)|0,hs=(t,e,r,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),ds=(t,e,r,o,n)=>e+r+o+n+(t/2**32|0)|0,ps=(t,e,r,o,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0)+(n>>>0),gs=(t,e,r,o,n,c)=>e+r+o+n+c+(t/2**32|0)|0;var Rc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fe=new Uint32Array(64),Bo=class extends Dr{constructor(e=32){super(64,e,8,!1),this.A=Le[0]|0,this.B=Le[1]|0,this.C=Le[2]|0,this.D=Le[3]|0,this.E=Le[4]|0,this.F=Le[5]|0,this.G=Le[6]|0,this.H=Le[7]|0}get(){let{A:e,B:r,C:o,D:n,E:c,F:u,G:y,H:h}=this;return[e,r,o,n,c,u,y,h]}set(e,r,o,n,c,u,y,h){this.A=e|0,this.B=r|0,this.C=o|0,this.D=n|0,this.E=c|0,this.F=u|0,this.G=y|0,this.H=h|0}process(e,r){for(let _=0;_<16;_++,r+=4)Fe[_]=e.getUint32(r,!1);for(let _=16;_<64;_++){let S=Fe[_-15],U=Fe[_-2],k=de(S,7)^de(S,18)^S>>>3,L=de(U,17)^de(U,19)^U>>>10;Fe[_]=L+Fe[_-7]+k+Fe[_-16]|0}let{A:o,B:n,C:c,D:u,E:y,F:h,G:A,H:B}=this;for(let _=0;_<64;_++){let S=de(y,6)^de(y,11)^de(y,25),U=B+S+ss(y,h,A)+Rc[_]+Fe[_]|0,L=(de(o,2)^de(o,13)^de(o,22))+as(o,n,c)|0;B=A,A=h,h=y,y=u+U|0,u=c,c=n,n=o,o=U+L|0}o=o+this.A|0,n=n+this.B|0,c=c+this.C|0,u=u+this.D|0,y=y+this.E|0,h=h+this.F|0,A=A+this.G|0,B=B+this.H|0,this.set(o,n,c,u,y,h,A,B)}roundClean(){rr(Fe)}destroy(){this.set(0,0,0,0,0,0,0,0),rr(this.buffer)}};var ms=fs(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Oc=ms[0],Nc=ms[1],He=new Uint32Array(80),Pe=new Uint32Array(80),Ao=class extends Dr{constructor(e=64){super(128,e,16,!1),this.Ah=Yt[0]|0,this.Al=Yt[1]|0,this.Bh=Yt[2]|0,this.Bl=Yt[3]|0,this.Ch=Yt[4]|0,this.Cl=Yt[5]|0,this.Dh=Yt[6]|0,this.Dl=Yt[7]|0,this.Eh=Yt[8]|0,this.El=Yt[9]|0,this.Fh=Yt[10]|0,this.Fl=Yt[11]|0,this.Gh=Yt[12]|0,this.Gl=Yt[13]|0,this.Hh=Yt[14]|0,this.Hl=Yt[15]|0}get(){let{Ah:e,Al:r,Bh:o,Bl:n,Ch:c,Cl:u,Dh:y,Dl:h,Eh:A,El:B,Fh:_,Fl:S,Gh:U,Gl:k,Hh:L,Hl:R}=this;return[e,r,o,n,c,u,y,h,A,B,_,S,U,k,L,R]}set(e,r,o,n,c,u,y,h,A,B,_,S,U,k,L,R){this.Ah=e|0,this.Al=r|0,this.Bh=o|0,this.Bl=n|0,this.Ch=c|0,this.Cl=u|0,this.Dh=y|0,this.Dl=h|0,this.Eh=A|0,this.El=B|0,this.Fh=_|0,this.Fl=S|0,this.Gh=U|0,this.Gl=k|0,this.Hh=L|0,this.Hl=R|0}process(e,r){for(let O=0;O<16;O++,r+=4)He[O]=e.getUint32(r),Pe[O]=e.getUint32(r+=4);for(let O=16;O<80;O++){let D=He[O-15]|0,j=Pe[O-15]|0,nt=nr(D,j,1)^nr(D,j,8)^vo(D,j,7),at=or(D,j,1)^or(D,j,8)^Eo(D,j,7),st=He[O-2]|0,ft=Pe[O-2]|0,Ut=nr(st,ft,19)^Fr(st,ft,61)^vo(st,ft,6),it=or(st,ft,19)^Hr(st,ft,61)^Eo(st,ft,6),Bt=hs(at,it,Pe[O-7],Pe[O-16]),M=ds(Bt,nt,Ut,He[O-7],He[O-16]);He[O]=M|0,Pe[O]=Bt|0}let{Ah:o,Al:n,Bh:c,Bl:u,Ch:y,Cl:h,Dh:A,Dl:B,Eh:_,El:S,Fh:U,Fl:k,Gh:L,Gl:R,Hh:z,Hl:Z}=this;for(let O=0;O<80;O++){let D=nr(_,S,14)^nr(_,S,18)^Fr(_,S,41),j=or(_,S,14)^or(_,S,18)^Hr(_,S,41),nt=_&U^~_&L,at=S&k^~S&R,st=ps(Z,j,at,Nc[O],Pe[O]),ft=gs(st,z,D,nt,Oc[O],He[O]),Ut=st|0,it=nr(o,n,28)^Fr(o,n,34)^Fr(o,n,39),Bt=or(o,n,28)^Hr(o,n,34)^Hr(o,n,39),M=o&c^o&y^c&y,i=n&u^n&h^u&h;z=L|0,Z=R|0,L=U|0,R=k|0,U=_|0,k=S|0,{h:_,l:S}=ve(A|0,B|0,ft|0,Ut|0),A=y|0,B=h|0,y=c|0,h=u|0,c=o|0,u=n|0;let l=us(Ut,Bt,i);o=ls(l,ft,it,M),n=l|0}({h:o,l:n}=ve(this.Ah|0,this.Al|0,o|0,n|0)),{h:c,l:u}=ve(this.Bh|0,this.Bl|0,c|0,u|0),{h:y,l:h}=ve(this.Ch|0,this.Cl|0,y|0,h|0),{h:A,l:B}=ve(this.Dh|0,this.Dl|0,A|0,B|0),{h:_,l:S}=ve(this.Eh|0,this.El|0,_|0,S|0),{h:U,l:k}=ve(this.Fh|0,this.Fl|0,U|0,k|0),{h:L,l:R}=ve(this.Gh|0,this.Gl|0,L|0,R|0),{h:z,l:Z}=ve(this.Hh|0,this.Hl|0,z|0,Z|0),this.set(o,n,c,u,y,h,A,B,_,S,U,k,L,R,z,Z)}roundClean(){rr(He,Pe)}destroy(){rr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var _o=bo(()=>new Bo);var ys=bo(()=>new Ao);F();P();H();F();P();H();F();P();H();var So=BigInt(0),Io=BigInt(1);function Uo(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lo(t){if(!Uo(t))throw new Error("Uint8Array expected")}function cn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function xs(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?So:BigInt("0x"+t)}var bs=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Dc=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fn(t){if(Lo(t),bs)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Dc[t[r]];return e}var Te={_0:48,_9:57,A:65,F:70,a:97,f:102};function ws(t){if(t>=Te._0&&t<=Te._9)return t-Te._0;if(t>=Te.A&&t<=Te.F)return t-(Te.A-10);if(t>=Te.a&&t<=Te.f)return t-(Te.a-10)}function vs(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(bs)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let o=new Uint8Array(r);for(let n=0,c=0;n<r;n++,c+=2){let u=ws(t.charCodeAt(c)),y=ws(t.charCodeAt(c+1));if(u===void 0||y===void 0){let h=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+c)}o[n]=u*16+y}return o}function Es(t){return xs(fn(t))}function br(t){return Lo(t),xs(fn(Uint8Array.from(t).reverse()))}function To(t,e){return vs(t.toString(16).padStart(e*2,"0"))}function Pr(t,e){return To(t,e).reverse()}function pe(t,e,r){let o;if(typeof e=="string")try{o=vs(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(Uo(e))o=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let n=o.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return o}function ko(...t){let e=0;for(let o=0;o<t.length;o++){let n=t[o];Lo(n),e+=n.length}let r=new Uint8Array(e);for(let o=0,n=0;o<t.length;o++){let c=t[o];r.set(c,n),n+=c.length}return r}var Mo=t=>typeof t=="bigint"&&So<=t;function Fc(t,e,r){return Mo(t)&&Mo(e)&&Mo(r)&&e<=t&&t<r}function vr(t,e,r,o){if(!Fc(e,r,o))throw new Error("expected valid "+t+": "+r+" <= n < "+o+", got "+e)}function Bs(t){let e;for(e=0;t>So;t>>=Io,e+=1);return e}var Kr=t=>(Io<<BigInt(t))-Io;var Hc={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Uo(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Er(t,e,r={}){let o=(n,c,u)=>{let y=Hc[c];if(typeof y!="function")throw new Error("invalid validator function");let h=t[n];if(!(u&&h===void 0)&&!y(h,t))throw new Error("param "+String(n)+" is invalid. Expected "+c+", got "+h)};for(let[n,c]of Object.entries(e))o(n,c,!1);for(let[n,c]of Object.entries(r))o(n,c,!0);return t}function Co(t){let e=new WeakMap;return(r,...o)=>{let n=e.get(r);if(n!==void 0)return n;let c=t(r,...o);return e.set(r,c),c}}var ee=BigInt(0),te=BigInt(1),ir=BigInt(2),Pc=BigInt(3),Ms=BigInt(4),Is=BigInt(5),Ss=BigInt(8);function Mt(t,e){let r=t%e;return r>=ee?r:e+r}function ge(t,e,r){let o=t;for(;e-- >ee;)o*=o,o%=r;return o}function As(t,e){if(t===ee)throw new Error("invert: expected non-zero number");if(e<=ee)throw new Error("invert: expected positive modulus, got "+e);let r=Mt(t,e),o=e,n=ee,c=te,u=te,y=ee;for(;r!==ee;){let A=o/r,B=o%r,_=n-u*A,S=c-y*A;o=r,r=B,n=u,c=y,u=_,y=S}if(o!==te)throw new Error("invert: does not exist");return Mt(n,e)}function Us(t,e){let r=(t.ORDER+te)/Ms,o=t.pow(e,r);if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function Kc(t,e){let r=(t.ORDER-Is)/Ss,o=t.mul(e,ir),n=t.pow(o,r),c=t.mul(e,n),u=t.mul(t.mul(c,ir),n),y=t.mul(c,t.sub(u,t.ONE));if(!t.eql(t.sqr(y),e))throw new Error("Cannot find square root");return y}function qc(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-te,r=0;for(;e%ir===ee;)e/=ir,r++;let o=ir,n=qr(t);for(;_s(n,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Us;let c=n.pow(o,e),u=(e+te)/ir;return function(h,A){if(h.is0(A))return A;if(_s(h,A)!==1)throw new Error("Cannot find square root");let B=r,_=h.mul(h.ONE,c),S=h.pow(A,e),U=h.pow(A,u);for(;!h.eql(S,h.ONE);){if(h.is0(S))return h.ZERO;let k=1,L=h.sqr(S);for(;!h.eql(L,h.ONE);)if(k++,L=h.sqr(L),k===B)throw new Error("Cannot find square root");let R=te<<BigInt(B-k-1),z=h.pow(_,R);B=k,_=h.sqr(z),S=h.mul(S,_),U=h.mul(U,z)}return U}}function zc(t){return t%Ms===Pc?Us:t%Ss===Is?Kc:qc(t)}var Ls=(t,e)=>(Mt(t,e)&te)===te,Wc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ts(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Wc.reduce((o,n)=>(o[n]="function",o),e);return Er(t,r)}function Vc(t,e,r){if(r<ee)throw new Error("invalid exponent, negatives unsupported");if(r===ee)return t.ONE;if(r===te)return e;let o=t.ONE,n=e;for(;r>ee;)r&te&&(o=t.mul(o,n)),n=t.sqr(n),r>>=te;return o}function un(t,e,r=!1){let o=new Array(e.length).fill(r?t.ZERO:void 0),n=e.reduce((u,y,h)=>t.is0(y)?u:(o[h]=u,t.mul(u,y)),t.ONE),c=t.inv(n);return e.reduceRight((u,y,h)=>t.is0(y)?u:(o[h]=t.mul(u,o[h]),t.mul(u,y)),c),o}function _s(t,e){let r=(t.ORDER-te)/ir,o=t.pow(e,r),n=t.eql(o,t.ONE),c=t.eql(o,t.ZERO),u=t.eql(o,t.neg(t.ONE));if(!n&&!c&&!u)throw new Error("invalid Legendre symbol result");return n?1:c?0:-1}function Ro(t,e){e!==void 0&&rs(e);let r=e!==void 0?e:t.toString(2).length,o=Math.ceil(r/8);return{nBitLength:r,nByteLength:o}}function qr(t,e,r=!1,o={}){if(t<=ee)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:n,nByteLength:c}=Ro(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u,y=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:c,MASK:Kr(n),ZERO:ee,ONE:te,create:h=>Mt(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return ee<=h&&h<t},is0:h=>h===ee,isOdd:h=>(h&te)===te,neg:h=>Mt(-h,t),eql:(h,A)=>h===A,sqr:h=>Mt(h*h,t),add:(h,A)=>Mt(h+A,t),sub:(h,A)=>Mt(h-A,t),mul:(h,A)=>Mt(h*A,t),pow:(h,A)=>Vc(y,h,A),div:(h,A)=>Mt(h*As(A,t),t),sqrN:h=>h*h,addN:(h,A)=>h+A,subN:(h,A)=>h-A,mulN:(h,A)=>h*A,inv:h=>As(h,t),sqrt:o.sqrt||(h=>(u||(u=zc(t)),u(y,h))),toBytes:h=>r?Pr(h,c):To(h,c),fromBytes:h=>{if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);return r?br(h):Es(h)},invertBatch:h=>un(y,h),cmov:(h,A,B)=>B?A:h});return Object.freeze(y)}var ks=BigInt(0),Ho=BigInt(1);function Oo(t,e){let r=e.negate();return t?r:e}function Rs(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function No(t,e){Rs(t,e);let r=Math.ceil(e/t)+1,o=2**(t-1),n=2**t,c=Kr(t),u=BigInt(t);return{windows:r,windowSize:o,mask:c,maxNumber:n,shiftBy:u}}function Cs(t,e,r){let{windowSize:o,mask:n,maxNumber:c,shiftBy:u}=r,y=Number(t&n),h=t>>u;y>o&&(y-=c,h+=Ho);let A=e*o,B=A+Math.abs(y)-1,_=y===0,S=y<0,U=e%2!==0;return{nextN:h,offset:B,isZero:_,isNeg:S,isNegF:U,offsetF:A}}function Zc(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,o)=>{if(!(r instanceof e))throw new Error("invalid point at index "+o)})}function $c(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,o)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+o)})}var Do=new WeakMap,Os=new WeakMap;function Fo(t){return Os.get(t)||1}function Ns(t,e){return{constTimeNegate:Oo,hasPrecomputes(r){return Fo(r)!==1},unsafeLadder(r,o,n=t.ZERO){let c=r;for(;o>ks;)o&Ho&&(n=n.add(c)),c=c.double(),o>>=Ho;return n},precomputeWindow(r,o){let{windows:n,windowSize:c}=No(o,e),u=[],y=r,h=y;for(let A=0;A<n;A++){h=y,u.push(h);for(let B=1;B<c;B++)h=h.add(y),u.push(h);y=h.double()}return u},wNAF(r,o,n){let c=t.ZERO,u=t.BASE,y=No(r,e);for(let h=0;h<y.windows;h++){let{nextN:A,offset:B,isZero:_,isNeg:S,isNegF:U,offsetF:k}=Cs(n,h,y);n=A,_?u=u.add(Oo(U,o[k])):c=c.add(Oo(S,o[B]))}return{p:c,f:u}},wNAFUnsafe(r,o,n,c=t.ZERO){let u=No(r,e);for(let y=0;y<u.windows&&n!==ks;y++){let{nextN:h,offset:A,isZero:B,isNeg:_}=Cs(n,y,u);if(n=h,!B){let S=o[A];c=c.add(_?S.negate():S)}}return c},getPrecomputes(r,o,n){let c=Do.get(o);return c||(c=this.precomputeWindow(o,r),r!==1&&Do.set(o,n(c))),c},wNAFCached(r,o,n){let c=Fo(r);return this.wNAF(c,this.getPrecomputes(c,r,n),o)},wNAFCachedUnsafe(r,o,n,c){let u=Fo(r);return u===1?this.unsafeLadder(r,o,c):this.wNAFUnsafe(u,this.getPrecomputes(u,r,n),o,c)},setWindowSize(r,o){Rs(o,e),Os.set(r,o),Do.delete(r)}}}function Ds(t,e,r,o){Zc(r,t),$c(o,e);let n=r.length,c=o.length;if(n!==c)throw new Error("arrays of points and scalars must have equal length");let u=t.ZERO,y=Bs(BigInt(n)),h=1;y>12?h=y-3:y>4?h=y-2:y>0&&(h=2);let A=Kr(h),B=new Array(Number(A)+1).fill(u),_=Math.floor((e.BITS-1)/h)*h,S=u;for(let U=_;U>=0;U-=h){B.fill(u);for(let L=0;L<c;L++){let R=o[L],z=Number(R>>BigInt(U)&A);B[z]=B[z].add(r[L])}let k=u;for(let L=B.length-1,R=u;L>0;L--)R=R.add(B[L]),k=k.add(R);if(S=S.add(k),U!==0)for(let L=0;L<h;L++)S=S.double()}return S}function Fs(t){return Ts(t.Fp),Er(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ro(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}F();P();H();var Ee=BigInt(0),re=BigInt(1),Hs=BigInt(2),Gc=BigInt(8),jc={zip215:!0};function Yc(t){let e=Fs(t);return Er(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ps(t){let e=Yc(t),{Fp:r,n:o,prehash:n,hash:c,randomBytes:u,nByteLength:y,h}=e,A=Hs<<BigInt(y*8)-re,B=r.create,_=qr(e.n,e.nBitLength);function S(w,x){let E=r.sqr(w),m=r.sqr(x),a=r.add(r.mul(e.a,E),m),b=r.add(r.ONE,r.mul(e.d,r.mul(E,m)));return r.eql(a,b)}if(!S(e.Gx,e.Gy))throw new Error("bad curve params: generator point");let U=e.uvRatio||((w,x)=>{try{return{isValid:!0,value:r.sqrt(w*r.inv(x))}}catch{return{isValid:!1,value:Ee}}}),k=e.adjustScalarBytes||(w=>w),L=e.domain||((w,x,E)=>{if(cn("phflag",E),x.length||E)throw new Error("Contexts/pre-hash are not supported");return w});function R(w,x,E=!1){let m=E?re:Ee;vr("coordinate "+w,x,m,A)}function z(w){if(!(w instanceof D))throw new Error("ExtendedPoint expected")}let Z=Co((w,x)=>{let{ex:E,ey:m,ez:a}=w,b=w.is0();x==null&&(x=b?Gc:r.inv(a));let N=B(E*x),K=B(m*x),q=B(a*x);if(b)return{x:Ee,y:re};if(q!==re)throw new Error("invZ was invalid");return{x:N,y:K}}),O=Co(w=>{let{a:x,d:E}=e;if(w.is0())throw new Error("bad point: ZERO");let{ex:m,ey:a,ez:b,et:N}=w,K=B(m*m),q=B(a*a),W=B(b*b),$=B(W*W),Y=B(K*x),ut=B(W*B(Y+q)),tt=B($+B(E*B(K*q)));if(ut!==tt)throw new Error("bad point: equation left != right (1)");let X=B(m*a),At=B(b*N);if(X!==At)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(x,E,m,a){R("x",x),R("y",E),R("z",m,!0),R("t",a),this.ex=x,this.ey=E,this.ez=m,this.et=a,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof D)throw new Error("extended point not allowed");let{x:E,y:m}=x||{};return R("x",E),R("y",m),new D(E,m,re,B(E*m))}static normalizeZ(x){let E=un(r,x.map(m=>m.ez));return x.map((m,a)=>m.toAffine(E[a])).map(D.fromAffine)}static msm(x,E){return Ds(D,_,x,E)}_setWindowSize(x){at.setWindowSize(this,x)}assertValidity(){O(this)}equals(x){z(x);let{ex:E,ey:m,ez:a}=this,{ex:b,ey:N,ez:K}=x,q=B(E*K),W=B(b*a),$=B(m*K),Y=B(N*a);return q===W&&$===Y}is0(){return this.equals(D.ZERO)}negate(){return new D(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){let{a:x}=e,{ex:E,ey:m,ez:a}=this,b=B(E*E),N=B(m*m),K=B(Hs*B(a*a)),q=B(x*b),W=E+m,$=B(B(W*W)-b-N),Y=q+N,ut=Y-K,tt=q-N,X=B($*ut),At=B(Y*tt),lt=B($*tt),dt=B(ut*Y);return new D(X,At,dt,lt)}add(x){z(x);let{a:E,d:m}=e,{ex:a,ey:b,ez:N,et:K}=this,{ex:q,ey:W,ez:$,et:Y}=x,ut=B(a*q),tt=B(b*W),X=B(K*m*Y),At=B(N*$),lt=B((a+b)*(q+W)-ut-tt),dt=At-X,he=At+X,wt=B(tt-E*ut),bt=B(lt*dt),Ue=B(he*wt),pt=B(lt*wt),ct=B(dt*he);return new D(bt,Ue,ct,pt)}subtract(x){return this.add(x.negate())}wNAF(x){return at.wNAFCached(this,x,D.normalizeZ)}multiply(x){let E=x;vr("scalar",E,re,o);let{p:m,f:a}=this.wNAF(E);return D.normalizeZ([m,a])[0]}multiplyUnsafe(x,E=D.ZERO){let m=x;return vr("scalar",m,Ee,o),m===Ee?nt:this.is0()||m===re?this:at.wNAFCachedUnsafe(this,m,D.normalizeZ,E)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return at.unsafeLadder(this,o).is0()}toAffine(x){return Z(this,x)}clearCofactor(){let{h:x}=e;return x===re?this:this.multiplyUnsafe(x)}static fromHex(x,E=!1){let{d:m,a}=e,b=r.BYTES;x=pe("pointHex",x,b),cn("zip215",E);let N=x.slice(),K=x[b-1];N[b-1]=K&-129;let q=br(N),W=E?A:r.ORDER;vr("pointHex.y",q,Ee,W);let $=B(q*q),Y=B($-re),ut=B(m*$-a),{isValid:tt,value:X}=U(Y,ut);if(!tt)throw new Error("Point.fromHex: invalid y coordinate");let At=(X&re)===re,lt=(K&128)!==0;if(!E&&X===Ee&&lt)throw new Error("Point.fromHex: x=0 and x_0=1");return lt!==At&&(X=B(-X)),D.fromAffine({x:X,y:q})}static fromPrivateKey(x){let{scalar:E}=Ut(x);return j.multiply(E)}toRawBytes(){let{x,y:E}=this.toAffine(),m=Pr(E,r.BYTES);return m[m.length-1]|=x&re?128:0,m}toHex(){return fn(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,re,B(e.Gx*e.Gy)),D.ZERO=new D(Ee,re,re,Ee);let{BASE:j,ZERO:nt}=D,at=Ns(D,y*8);function st(w){return Mt(w,o)}function ft(w){return st(br(w))}function Ut(w){let x=r.BYTES;w=pe("private key",w,x);let E=pe("hashed private key",c(w),2*x),m=k(E.slice(0,x)),a=E.slice(x,2*x),b=ft(m);return{head:m,prefix:a,scalar:b}}function it(w){let{head:x,prefix:E,scalar:m}=Ut(w),a=j.multiply(m),b=a.toRawBytes();return{head:x,prefix:E,scalar:m,point:a,pointBytes:b}}function Bt(w){return it(w).pointBytes}function M(w=Uint8Array.of(),...x){let E=ko(...x);return ft(c(L(E,pe("context",w),!!n)))}function i(w,x,E={}){w=pe("message",w),n&&(w=n(w));let{prefix:m,scalar:a,pointBytes:b}=it(x),N=M(E.context,m,w),K=j.multiply(N).toRawBytes(),q=M(E.context,K,b,w),W=st(N+q*a);vr("signature.s",W,Ee,o);let $=ko(K,Pr(W,r.BYTES));return pe("result",$,r.BYTES*2)}let l=jc;function d(w,x,E,m=l){let{context:a,zip215:b}=m,N=r.BYTES;w=pe("signature",w,2*N),x=pe("message",x),E=pe("publicKey",E,N),b!==void 0&&cn("zip215",b),n&&(x=n(x));let K=br(w.slice(N,2*N)),q,W,$;try{q=D.fromHex(E,b),W=D.fromHex(w.slice(0,N),b),$=j.multiplyUnsafe(K)}catch{return!1}if(!b&&q.isSmallOrder())return!1;let Y=M(a,W.toRawBytes(),q.toRawBytes(),x);return W.add(q.multiplyUnsafe(Y)).subtract($).clearCofactor().equals(D.ZERO)}return j._setWindowSize(8),{CURVE:e,getPublicKey:Bt,sign:i,verify:d,ExtendedPoint:D,utils:{getExtendedPublicKey:it,randomPrivateKey:()=>u(r.BYTES),precompute(w=8,x=D.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}}}}var Po=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ks=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Ol=BigInt(0),Jc=BigInt(1),qs=BigInt(2),Nl=BigInt(3),Xc=BigInt(5),Qc=BigInt(8);function tf(t){let e=BigInt(10),r=BigInt(20),o=BigInt(40),n=BigInt(80),c=Po,y=t*t%c*t%c,h=ge(y,qs,c)*y%c,A=ge(h,Jc,c)*t%c,B=ge(A,Xc,c)*A%c,_=ge(B,e,c)*B%c,S=ge(_,r,c)*_%c,U=ge(S,o,c)*S%c,k=ge(U,n,c)*U%c,L=ge(k,n,c)*U%c,R=ge(L,e,c)*B%c;return{pow_p_5_8:ge(R,qs,c)*t%c,b2:y}}function ef(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function rf(t,e){let r=Po,o=Mt(e*e*e,r),n=Mt(o*o*e,r),c=tf(t*n).pow_p_5_8,u=Mt(t*o*c,r),y=Mt(e*u*u,r),h=u,A=Mt(u*Ks,r),B=y===t,_=y===Mt(-t,r),S=y===Mt(-t*Ks,r);return B&&(u=h),(_||S)&&(u=A),Ls(u,r)&&(u=Mt(-u,r)),{isValid:B||_,value:u}}var zs=qr(Po,void 0,!0),nf={a:zs.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:zs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Qc,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ys,randomBytes:is,adjustScalarBytes:ef,uvRatio:rf},Ko=Ps(nf);F();P();H();F();P();H();F();P();H();F();P();H();var of="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ke=of;function sf(t){if(!t||typeof t!="string")throw new Error(`Expected base58 string but got \u201C${t}\u201D`);if(t.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character \u201C${t.match(/[IOl0]/gmu)}\u201D`);let e=t.match(/^1+/gmu),r=e?e[0].length:0,o=(t.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(r),...t.match(/.{1}/gmu).map(n=>Ke.indexOf(n)).reduce((n,c)=>(n=n.map(u=>{let y=u*58+c;return c=y>>8,y}),n),new Uint8Array(o)).reverse().filter((n=>c=>n=n||c)(!1))])}var Jt=sf;F();P();H();F();P();H();var af=()=>{let t=Array(256).fill(-1);for(let e=0;e<Ke.length;++e)t[Ke.charCodeAt(e)]=e;return t},Ws=af;var cf=Ws();function ff(t){let e=[];for(let r of t){let o=r;for(let n=0;n<e.length;++n){let c=(cf[e[n]]<<8)+o;e[n]=Ke.charCodeAt(c%58),o=c/58|0}for(;o;)e.push(Ke.charCodeAt(o%58)),o=o/58|0}for(let r of t){if(r)break;e.push(49)}return e.reverse(),String.fromCharCode(...e)}var sr=ff;F();P();H();var uf=20,lf=1,ar=1e6,Vs=1e6,hf=-7,df=21,pf=!1,zr="[big.js] ",cr=zr+"Invalid ",ln=cr+"decimal places",gf=cr+"rounding mode",Zs=zr+"Division by zero",mt={},Be=void 0,mf=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function $s(){function t(e){var r=this;if(!(r instanceof t))return e===Be?$s():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(cr+"value");e=e===0&&1/e<0?"-0":String(e)}yf(r,e)}r.constructor=t}return t.prototype=mt,t.DP=uf,t.RM=lf,t.NE=hf,t.PE=df,t.strict=pf,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function yf(t,e){var r,o,n;if(!mf.test(e))throw Error(cr+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),n=e.length,o=0;o<n&&e.charAt(o)=="0";)++o;if(o==n)t.c=[t.e=0];else{for(;n>0&&e.charAt(--n)=="0";);for(t.e=r-o-1,t.c=[],r=0;o<=n;)t.c[r++]=+e.charAt(o++)}return t}function fr(t,e,r,o){var n=t.c;if(r===Be&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(gf);if(e<1)o=r===3&&(o||!!n[0])||e===0&&(r===1&&n[0]>=5||r===2&&(n[0]>5||n[0]===5&&(o||n[1]!==Be))),n.length=1,o?(t.e=t.e-e+1,n[0]=1):n[0]=t.e=0;else if(e<n.length){if(o=r===1&&n[e]>=5||r===2&&(n[e]>5||n[e]===5&&(o||n[e+1]!==Be||n[e-1]&1))||r===3&&(o||!!n[0]),n.length=e,o){for(;++n[--e]>9;)if(n[e]=0,e===0){++t.e,n.unshift(1);break}}for(e=n.length;!n[--e];)n.pop()}return t}function ur(t,e,r){var o=t.e,n=t.c.join(""),c=n.length;if(e)n=n.charAt(0)+(c>1?"."+n.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)n="0"+n;n="0."+n}else if(o>0)if(++o>c)for(o-=c;o--;)n+="0";else o<c&&(n=n.slice(0,o)+"."+n.slice(o));else c>1&&(n=n.charAt(0)+"."+n.slice(1));return t.s<0&&r?"-"+n:n}mt.abs=function(){var t=new this.constructor(this);return t.s=1,t};mt.cmp=function(t){var e,r=this,o=r.c,n=(t=new r.constructor(t)).c,c=r.s,u=t.s,y=r.e,h=t.e;if(!o[0]||!n[0])return o[0]?c:n[0]?-u:0;if(c!=u)return c;if(e=c<0,y!=h)return y>h^e?1:-1;for(u=(y=o.length)<(h=n.length)?y:h,c=-1;++c<u;)if(o[c]!=n[c])return o[c]>n[c]^e?1:-1;return y==h?0:y>h^e?1:-1};mt.div=function(t){var e=this,r=e.constructor,o=e.c,n=(t=new r(t)).c,c=e.s==t.s?1:-1,u=r.DP;if(u!==~~u||u<0||u>ar)throw Error(ln);if(!n[0])throw Error(Zs);if(!o[0])return t.s=c,t.c=[t.e=0],t;var y,h,A,B,_,S=n.slice(),U=y=n.length,k=o.length,L=o.slice(0,y),R=L.length,z=t,Z=z.c=[],O=0,D=u+(z.e=e.e-t.e)+1;for(z.s=c,c=D<0?0:D,S.unshift(0);R++<y;)L.push(0);do{for(A=0;A<10;A++){if(y!=(R=L.length))B=y>R?1:-1;else for(_=-1,B=0;++_<y;)if(n[_]!=L[_]){B=n[_]>L[_]?1:-1;break}if(B<0){for(h=R==y?n:S;R;){if(L[--R]<h[R]){for(_=R;_&&!L[--_];)L[_]=9;--L[_],L[R]+=10}L[R]-=h[R]}for(;!L[0];)L.shift()}else break}Z[O++]=B?A:++A,L[0]&&B?L[R]=o[U]||0:L=[o[U]]}while((U++<k||L[0]!==Be)&&c--);return!Z[0]&&O!=1&&(Z.shift(),z.e--,D--),O>D&&fr(z,D,r.RM,L[0]!==Be),z};mt.eq=function(t){return this.cmp(t)===0};mt.gt=function(t){return this.cmp(t)>0};mt.gte=function(t){return this.cmp(t)>-1};mt.lt=function(t){return this.cmp(t)<0};mt.lte=function(t){return this.cmp(t)<1};mt.minus=mt.sub=function(t){var e,r,o,n,c=this,u=c.constructor,y=c.s,h=(t=new u(t)).s;if(y!=h)return t.s=-h,c.plus(t);var A=c.c.slice(),B=c.e,_=t.c,S=t.e;if(!A[0]||!_[0])return _[0]?t.s=-h:A[0]?t=new u(c):t.s=1,t;if(y=B-S){for((n=y<0)?(y=-y,o=A):(S=B,o=_),o.reverse(),h=y;h--;)o.push(0);o.reverse()}else for(r=((n=A.length<_.length)?A:_).length,y=h=0;h<r;h++)if(A[h]!=_[h]){n=A[h]<_[h];break}if(n&&(o=A,A=_,_=o,t.s=-t.s),(h=(r=_.length)-(e=A.length))>0)for(;h--;)A[e++]=0;for(h=e;r>y;){if(A[--r]<_[r]){for(e=r;e&&!A[--e];)A[e]=9;--A[e],A[r]+=10}A[r]-=_[r]}for(;A[--h]===0;)A.pop();for(;A[0]===0;)A.shift(),--S;return A[0]||(t.s=1,A=[S=0]),t.c=A,t.e=S,t};mt.mod=function(t){var e,r=this,o=r.constructor,n=r.s,c=(t=new o(t)).s;if(!t.c[0])throw Error(Zs);return r.s=t.s=1,e=t.cmp(r)==1,r.s=n,t.s=c,e?new o(r):(n=o.DP,c=o.RM,o.DP=o.RM=0,r=r.div(t),o.DP=n,o.RM=c,this.minus(r.times(t)))};mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};mt.plus=mt.add=function(t){var e,r,o,n=this,c=n.constructor;if(t=new c(t),n.s!=t.s)return t.s=-t.s,n.minus(t);var u=n.e,y=n.c,h=t.e,A=t.c;if(!y[0]||!A[0])return A[0]||(y[0]?t=new c(n):t.s=n.s),t;if(y=y.slice(),e=u-h){for(e>0?(h=u,o=A):(e=-e,o=y),o.reverse();e--;)o.push(0);o.reverse()}for(y.length-A.length<0&&(o=A,A=y,y=o),e=A.length,r=0;e;y[e]%=10)r=(y[--e]=y[e]+A[e]+r)/10|0;for(r&&(y.unshift(r),++h),e=y.length;y[--e]===0;)y.pop();return t.c=y,t.e=h,t};mt.pow=function(t){var e=this,r=new e.constructor("1"),o=r,n=t<0;if(t!==~~t||t<-Vs||t>Vs)throw Error(cr+"exponent");for(n&&(t=-t);t&1&&(o=o.times(e)),t>>=1,!!t;)e=e.times(e);return n?r.div(o):o};mt.prec=function(t,e){if(t!==~~t||t<1||t>ar)throw Error(cr+"precision");return fr(new this.constructor(this),t,e)};mt.round=function(t,e){if(t===Be)t=0;else if(t!==~~t||t<-ar||t>ar)throw Error(ln);return fr(new this.constructor(this),t+this.e+1,e)};mt.sqrt=function(){var t,e,r,o=this,n=o.constructor,c=o.s,u=o.e,y=new n("0.5");if(!o.c[0])return new n(o);if(c<0)throw Error(zr+"No square root");c=Math.sqrt(+ur(o,!0,!0)),c===0||c===1/0?(e=o.c.join(""),e.length+u&1||(e+="0"),c=Math.sqrt(e),u=((u+1)/2|0)-(u<0||u&1),t=new n((c==1/0?"5e":(c=c.toExponential()).slice(0,c.indexOf("e")+1))+u)):t=new n(c+""),u=t.e+(n.DP+=4);do r=t,t=y.times(r.plus(o.div(r)));while(r.c.slice(0,u).join("")!==t.c.slice(0,u).join(""));return fr(t,(n.DP-=4)+t.e+1,n.RM)};mt.times=mt.mul=function(t){var e,r=this,o=r.constructor,n=r.c,c=(t=new o(t)).c,u=n.length,y=c.length,h=r.e,A=t.e;if(t.s=r.s==t.s?1:-1,!n[0]||!c[0])return t.c=[t.e=0],t;for(t.e=h+A,u<y&&(e=n,n=c,c=e,A=u,u=y,y=A),e=new Array(A=u+y);A--;)e[A]=0;for(h=y;h--;){for(y=0,A=u+h;A>h;)y=e[A]+c[h]*n[A-h-1]+y,e[A--]=y%10,y=y/10|0;e[A]=y}for(y?++t.e:e.shift(),h=e.length;!e[--h];)e.pop();return t.c=e,t};mt.toExponential=function(t,e){var r=this,o=r.c[0];if(t!==Be){if(t!==~~t||t<0||t>ar)throw Error(ln);for(r=fr(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return ur(r,!0,!!o)};mt.toFixed=function(t,e){var r=this,o=r.c[0];if(t!==Be){if(t!==~~t||t<0||t>ar)throw Error(ln);for(r=fr(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return ur(r,!1,!!o)};mt[Symbol.for("nodejs.util.inspect.custom")]=mt.toJSON=mt.toString=function(){var t=this,e=t.constructor;return ur(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};mt.toNumber=function(){var t=+ur(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(zr+"Imprecise conversion");return t};mt.toPrecision=function(t,e){var r=this,o=r.constructor,n=r.c[0];if(t!==Be){if(t!==~~t||t<1||t>ar)throw Error(cr+"precision");for(r=fr(new o(r),t,e);r.c.length<t;)r.c.push(0)}return ur(r,t<=r.e||r.e<=o.NE||r.e>=o.PE,!!n)};mt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(zr+"valueOf disallowed");return ur(t,t.e<=e.NE||t.e>=e.PE,!0)};var wf=$s(),se=wf;F();P();H();var Br=typeof V=="function",Gs=typeof TextDecoder=="function"?new TextDecoder:void 0,js=typeof TextEncoder=="function"?new TextEncoder:void 0,xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Wr=Array.prototype.slice.call(xf),hn=(t=>{let e={};return t.forEach((r,o)=>e[r]=o),e})(Wr),bf=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Xt=String.fromCharCode.bind(String),Ys=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Xs=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Qs=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),vf=t=>{let e,r,o,n,c="",u=t.length%3;for(let y=0;y<t.length;){if((r=t.charCodeAt(y++))>255||(o=t.charCodeAt(y++))>255||(n=t.charCodeAt(y++))>255)throw new TypeError("invalid character found");e=r<<16|o<<8|n,c+=Wr[e>>18&63]+Wr[e>>12&63]+Wr[e>>6&63]+Wr[e&63]}return u?c.slice(0,u-3)+"===".substring(u):c},ta=typeof btoa=="function"?t=>btoa(t):Br?t=>V.from(t,"binary").toString("base64"):vf,qo=Br?t=>V.from(t).toString("base64"):t=>{let r=[];for(let o=0,n=t.length;o<n;o+=4096)r.push(Xt.apply(null,t.subarray(o,o+4096)));return ta(r.join(""))},ea=(t,e=!1)=>e?Xs(qo(t)):qo(t),Ef=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?Xt(192|e>>>6)+Xt(128|e&63):Xt(224|e>>>12&15)+Xt(128|e>>>6&63)+Xt(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return Xt(240|e>>>18&7)+Xt(128|e>>>12&63)+Xt(128|e>>>6&63)+Xt(128|e&63)}},Bf=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Af=t=>t.replace(Bf,Ef),Js=Br?t=>V.from(t,"utf8").toString("base64"):js?t=>qo(js.encode(t)):t=>ta(Af(t)),ra=(t,e=!1)=>e?Xs(Js(t)):Js(t);var _f=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Mf=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return Xt((r>>>10)+55296)+Xt((r&1023)+56320);case 3:return Xt((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Xt((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},If=t=>t.replace(_f,Mf),Sf=t=>{if(t=t.replace(/\s+/g,""),!bf.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r,o,n=[];for(let c=0;c<t.length;)e=hn[t.charAt(c++)]<<18|hn[t.charAt(c++)]<<12|(r=hn[t.charAt(c++)])<<6|(o=hn[t.charAt(c++)]),r===64?n.push(Xt(e>>16&255)):o===64?n.push(Xt(e>>16&255,e>>8&255)):n.push(Xt(e>>16&255,e>>8&255,e&255));return n.join("")},na=typeof atob=="function"?t=>atob(Qs(t)):Br?t=>V.from(t,"base64").toString("binary"):Sf,oa=Br?t=>Ys(V.from(t,"base64")):t=>Ys(na(t).split("").map(e=>e.charCodeAt(0))),ia=t=>oa(sa(t)),Uf=Br?t=>V.from(t,"base64").toString("utf8"):Gs?t=>Gs.decode(oa(t)):t=>If(na(t)),sa=t=>Qs(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),aa=t=>Uf(sa(t));F();P();H();var Lf=Object.defineProperty,Ae=(t,e)=>Lf(t,"name",{value:e,configurable:!0}),dn="__fastnear_",ca=Ae(()=>typeof localStorage<"u"?localStorage:{getItem:Ae(t=>Vr.get(t)||null,"getItem"),setItem:Ae((t,e)=>Vr.set(t,e),"setItem"),removeItem:Ae(t=>Vr.delete(t),"removeItem"),clear:Ae(()=>Vr.clear(),"clear")},"createDefaultStorage"),Vr=new Map,Ar=ca(),pn={setBackend:Ae(t=>{Ar=t},"setBackend"),set:Ae((t,e)=>{e==null?Ar.removeItem(dn+t):Ar.setItem(dn+t,JSON.stringify(e))},"set"),get:Ae(t=>{let e=Ar.getItem(dn+t);if(e===null)return null;try{return JSON.parse(e)}catch{return e}},"get"),remove:Ae(t=>Ar.removeItem(t),"remove"),clear:Ae(()=>Ar.clear(),"clear")};var Tf=Object.defineProperty,ae=(t,e)=>Tf(t,"name",{value:e,configurable:!0});function fa(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}ae(fa,"toHex");function ua(t){if(t.length%2)throw new Error("Hex string must be even length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return e}ae(ua,"fromHex");function Zr(t){return ia(t)}ae(Zr,"base64ToBytes");function zo(t){return ea(t)}ae(zo,"bytesToBase64");function Wo(t){try{return ra(t)}catch(e){return console.error("Issue base64 encoding",e),null}}ae(Wo,"toBase64");function gn(t){try{return aa(t)}catch(e){return console.error("Issue base64 decoding",e),null}}ae(gn,"fromBase64");function la(t,...e){if(Array.isArray(t)&&(t=t.reduce((r,o,n)=>r+(e[n-1]??"")+o)),typeof t=="string"){let r=t.match(/([0-9.,_]+)\s*([a-zA-Z]+)?/);if(r){let o=r[1].replace(/[_,]/g,""),n=r[2];if(n)switch(n.toLowerCase()){case"near":return se(o).mul(se(10).pow(24)).toFixed(0);case"tgas":return se(o).mul(se(10).pow(12)).toFixed(0);case"ggas":return se(o).mul(se(10).pow(9)).toFixed(0);case"gas":case"yoctonear":return se(o).toFixed(0);default:throw new Error(`Unknown unit: ${n}`)}else return se(o).toFixed(0)}}return se(`${t}`).toFixed(0)}ae(la,"convertUnit");function ue(t,e){pn.set(t,e)}ae(ue,"lsSet");function qe(t){return pn.get(t)}ae(qe,"lsGet");function ha(t){return JSON.parse(JSON.stringify(t))}ae(ha,"deepCopy");function _r(...t){try{return JSON.parse(t[0])}catch{return t.length>1?t[1]:t[0]}}ae(_r,"tryParseJson");function Vo(t){try{let e=new TextDecoder;return JSON.parse(e.decode(t instanceof Uint8Array?t:new Uint8Array(t)))}catch{try{return t instanceof Uint8Array?t:new Uint8Array(t)}catch{return t}}}ae(Vo,"parseJsonFromBytes");function Zo(t){return t.length===1&&t[0].type==="FunctionCall"&&se(t[0]?.deposit??"0").eq(0)}ae(Zo,"canSignWithLAK");var kf=Object.defineProperty,Mr=(t,e)=>kf(t,"name",{value:e,configurable:!0}),ze=Mr(t=>Jt(t.includes(":")?(()=>{let[e,r]=t.split(":");if(e!=="ed25519")throw new Error(`Unsupported curve: ${e}`);return r})():t),"keyFromString"),$o=Mr(t=>`ed25519:${sr(t)}`,"keyToString");function jt(t){let e=ze(t).slice(0,32),r=Ko.getPublicKey(e);return $o(r)}Mr(jt,"publicKeyFromPrivate");function Ir(){let t=crypto.getRandomValues(new Uint8Array(64));return $o(t)}Mr(Ir,"privateKeyFromRandom");function ke(t,e,r){let o=ze(e).slice(0,32),n=Ko.sign(t,o);return r?.returnBase58?sr(n):n}Mr(ke,"signHash");function da(t,e){let r=_o(t);return ke(r,e)}Mr(da,"signBytes");F();P();H();var oi=$i(ei(),1);var ni={};tn(ni,{getBorshSchema:()=>ri,nearChainSchema:()=>Ua});F();P();H();var Jf=Object.defineProperty,Sa=(t,e)=>Jf(t,"name",{value:e,configurable:!0}),Ua=new class{static{Sa(this,"BorshSchema")}Ed25519Signature={struct:{data:{array:{type:"u8",len:64}}}};Secp256k1Signature={struct:{data:{array:{type:"u8",len:65}}}};Signature={enum:[{struct:{ed25519Signature:this.Ed25519Signature}},{struct:{secp256k1Signature:this.Secp256k1Signature}}]};Ed25519Data={struct:{data:{array:{type:"u8",len:32}}}};Secp256k1Data={struct:{data:{array:{type:"u8",len:64}}}};PublicKey={enum:[{struct:{ed25519Key:this.Ed25519Data}},{struct:{secp256k1Key:this.Secp256k1Data}}]};FunctionCallPermission={struct:{allowance:{option:"u128"},receiverId:"string",methodNames:{array:{type:"string"}}}};FullAccessPermission={struct:{}};AccessKeyPermission={enum:[{struct:{functionCall:this.FunctionCallPermission}},{struct:{fullAccess:this.FullAccessPermission}}]};AccessKey={struct:{nonce:"u64",permission:this.AccessKeyPermission}};CreateAccount={struct:{}};DeployContract={struct:{code:{array:{type:"u8"}}}};FunctionCall={struct:{methodName:"string",args:{array:{type:"u8"}},gas:"u64",deposit:"u128"}};Transfer={struct:{deposit:"u128"}};Stake={struct:{stake:"u128",publicKey:this.PublicKey}};AddKey={struct:{publicKey:this.PublicKey,accessKey:this.AccessKey}};DeleteKey={struct:{publicKey:this.PublicKey}};DeleteAccount={struct:{beneficiaryId:"string"}};ClassicAction={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}}]};DelegateAction={struct:{senderId:"string",receiverId:"string",actions:{array:{type:this.ClassicAction}},nonce:"u64",maxBlockHeight:"u64",publicKey:this.PublicKey}};SignedDelegate={struct:{delegateAction:this.DelegateAction,signature:this.Signature}};Action={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}},{struct:{signedDelegate:this.SignedDelegate}}]};Transaction={struct:{signerId:"string",publicKey:this.PublicKey,nonce:"u64",receiverId:"string",blockHash:{array:{type:"u8",len:32}},actions:{array:{type:this.Action}}}};SignedTransaction={struct:{transaction:this.Transaction,signature:this.Signature}}},ri=Sa(()=>Ua,"getBorshSchema");var Xf=Object.defineProperty,Ur=(t,e)=>Xf(t,"name",{value:e,configurable:!0}),La=Ur(t=>JSON.parse(JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString():r)),"txToJson"),Qf=Ur(t=>JSON.stringify(La(t)),"txToJsonStringified");function An(t){return{signerId:t.signerId,publicKey:{ed25519Key:{data:ze(t.publicKey)}},nonce:BigInt(t.nonce),receiverId:t.receiverId,blockHash:Jt(t.blockHash),actions:t.actions.map(_n)}}Ur(An,"mapTransaction");function ii(t){console.log("fastnear: serializing transaction");let e=An(t);return console.log("fastnear: mapped transaction for borsh:",e),(0,oi.serialize)(ai.Transaction,e)}Ur(ii,"serializeTransaction");function si(t,e){console.log("fastnear: Serializing Signed Transaction",t),console.log("fastnear: signature",e),console.log("fastnear: signature length",Jt(e).length);let r=An(t);console.log("fastnear: mapped (for borsh schema) signed transaction",r);let o={transaction:r,signature:{ed25519Signature:{data:Jt(e)}}},n=(0,oi.serialize)(ai.SignedTransaction,o,!0);return console.log("fastnear: borsh-serialized signed transaction:",n),n}Ur(si,"serializeSignedTransaction");function _n(t){switch(t.type){case"CreateAccount":return{createAccount:{}};case"DeployContract":return{deployContract:{code:Zr(t.codeBase64)}};case"FunctionCall":return{functionCall:{methodName:t.methodName,args:t.argsBase64!==null&&t.argsBase64!==void 0?Zr(t.argsBase64):new TextEncoder().encode(JSON.stringify(t.args)),gas:BigInt(t.gas??"300000000000000"),deposit:BigInt(t.deposit??"0")}};case"Transfer":return{transfer:{deposit:BigInt(t.deposit)}};case"Stake":return{stake:{stake:BigInt(t.stake),publicKey:{ed25519Key:{data:ze(t.publicKey)}}}};case"AddKey":return{addKey:{publicKey:{ed25519Key:{data:ze(t.publicKey)}},accessKey:{nonce:BigInt(t.accessKey.nonce),permission:t.accessKey.permission==="FullAccess"?{fullAccess:{}}:{functionCall:{allowance:t.accessKey.allowance?BigInt(t.accessKey.allowance):null,receiverId:t.accessKey.receiverId,methodNames:t.accessKey.methodNames}}}}};case"DeleteKey":return{deleteKey:{publicKey:{ed25519Key:{data:ze(t.publicKey)}}}};case"DeleteAccount":return{deleteAccount:{beneficiaryId:t.beneficiaryId}};case"SignedDelegate":return{signedDelegate:{delegateAction:_n(t.delegateAction),signature:{ed25519Signature:Jt(t.signature)}}};default:throw new Error("Not implemented action: "+t.type)}}Ur(_n,"mapAction");var ai=ri();var Mn=$i(ei(),1);var In={borsh:{serialize:Mn.serialize,deserialize:Mn.deserialize},borshSchema:ni};var Zn={};tn(Zn,{DEFAULT_NETWORK_ID:()=>hc,NETWORKS:()=>Xr,WIDGET_URL:()=>lc,_adapter:()=>mr,_config:()=>Jr,_state:()=>xt,_txHistory:()=>je,_unbroadcastedEvents:()=>Ne,events:()=>ce,getConfig:()=>yr,getTxHistory:()=>Ri,getWalletAdapterState:()=>pc,onAdapterStateUpdate:()=>dc,resetTxHistory:()=>Oi,setConfig:()=>Vn,update:()=>Se,updateTxHistory:()=>Ye});F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();F();P();H();function t0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ci(t,...e){if(!t0(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ta(t,e){ci(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}F();P();H();F();P();H();var pr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ln=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function ka(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ui(t){return typeof t=="string"&&(t=ka(t)),ci(t),t}var Un=class{clone(){return this._cloneInto()}};function Ca(t){let e=o=>t().update(ui(o)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ra(t=32){if(pr&&typeof pr.getRandomValues=="function")return pr.getRandomValues(new Uint8Array(t));if(pr&&typeof pr.randomBytes=="function")return pr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function e0(t,e,r,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,o);let n=BigInt(32),c=BigInt(4294967295),u=Number(r>>n&c),y=Number(r&c),h=o?4:0,A=o?0:4;t.setUint32(e+h,u,o),t.setUint32(e+A,y,o)}var Tn=class extends Un{constructor(e,r,o,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=o,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ln(this.buffer)}update(e){fi(this);let{view:r,buffer:o,blockLen:n}=this;e=ui(e);let c=e.length;for(let u=0;u<c;){let y=Math.min(n-this.pos,c-u);if(y===n){let h=Ln(e);for(;n<=c-u;u+=n)this.process(h,u);continue}o.set(e.subarray(u,u+y),this.pos),this.pos+=y,u+=y,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fi(this),Ta(e,this),this.finished=!0;let{buffer:r,view:o,blockLen:n,isLE:c}=this,{pos:u}=this;r[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>n-u&&(this.process(o,0),u=0);for(let _=u;_<n;_++)r[_]=0;e0(o,n-8,BigInt(this.length*8),c),this.process(o,0);let y=Ln(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=h/4,B=this.get();if(A>B.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<A;_++)y.setUint32(4*_,B[_],c)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:o,length:n,finished:c,destroyed:u,pos:y}=this;return e.length=n,e.pos=y,e.finished=c,e.destroyed=u,n%r&&e.buffer.set(o),e}};F();P();H();var kn=BigInt(4294967295),li=BigInt(32);function Oa(t,e=!1){return e?{h:Number(t&kn),l:Number(t>>li&kn)}:{h:Number(t>>li&kn)|0,l:Number(t&kn)|0}}function r0(t,e=!1){let r=new Uint32Array(t.length),o=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:c,l:u}=Oa(t[n],e);[r[n],o[n]]=[c,u]}return[r,o]}var n0=(t,e)=>BigInt(t>>>0)<<li|BigInt(e>>>0),o0=(t,e,r)=>t>>>r,i0=(t,e,r)=>t<<32-r|e>>>r,s0=(t,e,r)=>t>>>r|e<<32-r,a0=(t,e,r)=>t<<32-r|e>>>r,c0=(t,e,r)=>t<<64-r|e>>>r-32,f0=(t,e,r)=>t>>>r-32|e<<64-r,u0=(t,e)=>e,l0=(t,e)=>t,h0=(t,e,r)=>t<<r|e>>>32-r,d0=(t,e,r)=>e<<r|t>>>32-r,p0=(t,e,r)=>e<<r-32|t>>>64-r,g0=(t,e,r)=>t<<r-32|e>>>64-r;function m0(t,e,r,o){let n=(e>>>0)+(o>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var y0=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),w0=(t,e,r,o)=>e+r+o+(t/2**32|0)|0,x0=(t,e,r,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),b0=(t,e,r,o,n)=>e+r+o+n+(t/2**32|0)|0,v0=(t,e,r,o,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0)+(n>>>0),E0=(t,e,r,o,n,c)=>e+r+o+n+c+(t/2**32|0)|0;var B0={fromBig:Oa,split:r0,toBig:n0,shrSH:o0,shrSL:i0,rotrSH:s0,rotrSL:a0,rotrBH:c0,rotrBL:f0,rotr32H:u0,rotr32L:l0,rotlSH:h0,rotlSL:d0,rotlBH:p0,rotlBL:g0,add:m0,add3L:y0,add3H:w0,add4L:x0,add4H:b0,add5H:E0,add5L:v0},ot=B0;var[A0,_0]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ve=new Uint32Array(80),Ze=new Uint32Array(80),hi=class extends Tn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:o,Bl:n,Ch:c,Cl:u,Dh:y,Dl:h,Eh:A,El:B,Fh:_,Fl:S,Gh:U,Gl:k,Hh:L,Hl:R}=this;return[e,r,o,n,c,u,y,h,A,B,_,S,U,k,L,R]}set(e,r,o,n,c,u,y,h,A,B,_,S,U,k,L,R){this.Ah=e|0,this.Al=r|0,this.Bh=o|0,this.Bl=n|0,this.Ch=c|0,this.Cl=u|0,this.Dh=y|0,this.Dl=h|0,this.Eh=A|0,this.El=B|0,this.Fh=_|0,this.Fl=S|0,this.Gh=U|0,this.Gl=k|0,this.Hh=L|0,this.Hl=R|0}process(e,r){for(let O=0;O<16;O++,r+=4)Ve[O]=e.getUint32(r),Ze[O]=e.getUint32(r+=4);for(let O=16;O<80;O++){let D=Ve[O-15]|0,j=Ze[O-15]|0,nt=ot.rotrSH(D,j,1)^ot.rotrSH(D,j,8)^ot.shrSH(D,j,7),at=ot.rotrSL(D,j,1)^ot.rotrSL(D,j,8)^ot.shrSL(D,j,7),st=Ve[O-2]|0,ft=Ze[O-2]|0,Ut=ot.rotrSH(st,ft,19)^ot.rotrBH(st,ft,61)^ot.shrSH(st,ft,6),it=ot.rotrSL(st,ft,19)^ot.rotrBL(st,ft,61)^ot.shrSL(st,ft,6),Bt=ot.add4L(at,it,Ze[O-7],Ze[O-16]),M=ot.add4H(Bt,nt,Ut,Ve[O-7],Ve[O-16]);Ve[O]=M|0,Ze[O]=Bt|0}let{Ah:o,Al:n,Bh:c,Bl:u,Ch:y,Cl:h,Dh:A,Dl:B,Eh:_,El:S,Fh:U,Fl:k,Gh:L,Gl:R,Hh:z,Hl:Z}=this;for(let O=0;O<80;O++){let D=ot.rotrSH(_,S,14)^ot.rotrSH(_,S,18)^ot.rotrBH(_,S,41),j=ot.rotrSL(_,S,14)^ot.rotrSL(_,S,18)^ot.rotrBL(_,S,41),nt=_&U^~_&L,at=S&k^~S&R,st=ot.add5L(Z,j,at,_0[O],Ze[O]),ft=ot.add5H(st,z,D,nt,A0[O],Ve[O]),Ut=st|0,it=ot.rotrSH(o,n,28)^ot.rotrBH(o,n,34)^ot.rotrBH(o,n,39),Bt=ot.rotrSL(o,n,28)^ot.rotrBL(o,n,34)^ot.rotrBL(o,n,39),M=o&c^o&y^c&y,i=n&u^n&h^u&h;z=L|0,Z=R|0,L=U|0,R=k|0,U=_|0,k=S|0,{h:_,l:S}=ot.add(A|0,B|0,ft|0,Ut|0),A=y|0,B=h|0,y=c|0,h=u|0,c=o|0,u=n|0;let l=ot.add3L(Ut,Bt,i);o=ot.add3H(l,ft,it,M),n=l|0}({h:o,l:n}=ot.add(this.Ah|0,this.Al|0,o|0,n|0)),{h:c,l:u}=ot.add(this.Bh|0,this.Bl|0,c|0,u|0),{h:y,l:h}=ot.add(this.Ch|0,this.Cl|0,y|0,h|0),{h:A,l:B}=ot.add(this.Dh|0,this.Dl|0,A|0,B|0),{h:_,l:S}=ot.add(this.Eh|0,this.El|0,_|0,S|0),{h:U,l:k}=ot.add(this.Fh|0,this.Fl|0,U|0,k|0),{h:L,l:R}=ot.add(this.Gh|0,this.Gl|0,L|0,R|0),{h:z,l:Z}=ot.add(this.Hh|0,this.Hl|0,z|0,Z|0),this.set(o,n,c,u,y,h,A,B,_,S,U,k,L,R,z,Z)}roundClean(){Ve.fill(0),Ze.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Na=Ca(()=>new hi);F();P();H();F();P();H();F();P();H();F();P();H();var pi=BigInt(0),Fa=BigInt(1),M0=BigInt(2);function gi(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mi(t){if(!gi(t))throw new Error("Uint8Array expected")}function Cn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}var I0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Rn(t){mi(t);let e="";for(let r=0;r<t.length;r++)e+=I0[t[r]];return e}function Ha(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?pi:BigInt("0x"+t)}var Re={_0:48,_9:57,A:65,F:70,a:97,f:102};function Da(t){if(t>=Re._0&&t<=Re._9)return t-Re._0;if(t>=Re.A&&t<=Re.F)return t-(Re.A-10);if(t>=Re.a&&t<=Re.f)return t-(Re.a-10)}function Pa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let o=new Uint8Array(r);for(let n=0,c=0;n<r;n++,c+=2){let u=Da(t.charCodeAt(c)),y=Da(t.charCodeAt(c+1));if(u===void 0||y===void 0){let h=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+c)}o[n]=u*16+y}return o}function Ka(t){return Ha(Rn(t))}function Lr(t){return mi(t),Ha(Rn(Uint8Array.from(t).reverse()))}function yi(t,e){return Pa(t.toString(16).padStart(e*2,"0"))}function $r(t,e){return yi(t,e).reverse()}function me(t,e,r){let o;if(typeof e=="string")try{o=Pa(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(gi(e))o=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let n=o.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return o}function wi(...t){let e=0;for(let o=0;o<t.length;o++){let n=t[o];mi(n),e+=n.length}let r=new Uint8Array(e);for(let o=0,n=0;o<t.length;o++){let c=t[o];r.set(c,n),n+=c.length}return r}var di=t=>typeof t=="bigint"&&pi<=t;function S0(t,e,r){return di(t)&&di(e)&&di(r)&&e<=t&&t<r}function Tr(t,e,r,o){if(!S0(e,r,o))throw new Error("expected valid "+t+": "+r+" <= n < "+o+", got "+e)}function qa(t){let e;for(e=0;t>pi;t>>=Fa,e+=1);return e}var za=t=>(M0<<BigInt(t-1))-Fa;var U0={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||gi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function kr(t,e,r={}){let o=(n,c,u)=>{let y=U0[c];if(typeof y!="function")throw new Error("invalid validator function");let h=t[n];if(!(u&&h===void 0)&&!y(h,t))throw new Error("param "+String(n)+" is invalid. Expected "+c+", got "+h)};for(let[n,c]of Object.entries(e))o(n,c,!1);for(let[n,c]of Object.entries(r))o(n,c,!0);return t}function xi(t){let e=new WeakMap;return(r,...o)=>{let n=e.get(r);if(n!==void 0)return n;let c=t(r,...o);return e.set(r,c),c}}var Gt=BigInt(0),_t=BigInt(1),gr=BigInt(2),T0=BigInt(3),bi=BigInt(4),Wa=BigInt(5),Va=BigInt(8),k0=BigInt(9),C0=BigInt(16);function It(t,e){let r=t%e;return r>=Gt?r:e+r}function R0(t,e,r){if(e<Gt)throw new Error("invalid exponent, negatives unsupported");if(r<=Gt)throw new Error("invalid modulus");if(r===_t)return Gt;let o=_t;for(;e>Gt;)e&_t&&(o=o*t%r),t=t*t%r,e>>=_t;return o}function ye(t,e,r){let o=t;for(;e-- >Gt;)o*=o,o%=r;return o}function Za(t,e){if(t===Gt)throw new Error("invert: expected non-zero number");if(e<=Gt)throw new Error("invert: expected positive modulus, got "+e);let r=It(t,e),o=e,n=Gt,c=_t,u=_t,y=Gt;for(;r!==Gt;){let A=o/r,B=o%r,_=n-u*A,S=c-y*A;o=r,r=B,n=u,c=y,u=_,y=S}if(o!==_t)throw new Error("invert: does not exist");return It(n,e)}function O0(t){let e=(t-_t)/gr,r,o,n;for(r=t-_t,o=0;r%gr===Gt;r/=gr,o++);for(n=gr;n<t&&R0(n,e,t)!==t-_t;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(o===1){let u=(t+_t)/bi;return function(h,A){let B=h.pow(A,u);if(!h.eql(h.sqr(B),A))throw new Error("Cannot find square root");return B}}let c=(r+_t)/gr;return function(y,h){if(y.pow(h,e)===y.neg(y.ONE))throw new Error("Cannot find square root");let A=o,B=y.pow(y.mul(y.ONE,n),r),_=y.pow(h,c),S=y.pow(h,r);for(;!y.eql(S,y.ONE);){if(y.eql(S,y.ZERO))return y.ZERO;let U=1;for(let L=y.sqr(S);U<A&&!y.eql(L,y.ONE);U++)L=y.sqr(L);let k=y.pow(B,_t<<BigInt(A-U-1));B=y.sqr(k),_=y.mul(_,k),S=y.mul(S,B),A=U}return _}}function N0(t){if(t%bi===T0){let e=(t+_t)/bi;return function(o,n){let c=o.pow(n,e);if(!o.eql(o.sqr(c),n))throw new Error("Cannot find square root");return c}}if(t%Va===Wa){let e=(t-Wa)/Va;return function(o,n){let c=o.mul(n,gr),u=o.pow(c,e),y=o.mul(n,u),h=o.mul(o.mul(y,gr),u),A=o.mul(y,o.sub(h,o.ONE));if(!o.eql(o.sqr(A),n))throw new Error("Cannot find square root");return A}}return t%C0,O0(t)}var $a=(t,e)=>(It(t,e)&_t)===_t,D0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ga(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=D0.reduce((o,n)=>(o[n]="function",o),e);return kr(t,r)}function F0(t,e,r){if(r<Gt)throw new Error("invalid exponent, negatives unsupported");if(r===Gt)return t.ONE;if(r===_t)return e;let o=t.ONE,n=e;for(;r>Gt;)r&_t&&(o=t.mul(o,n)),n=t.sqr(n),r>>=_t;return o}function H0(t,e){let r=new Array(e.length),o=e.reduce((c,u,y)=>t.is0(u)?c:(r[y]=c,t.mul(c,u)),t.ONE),n=t.inv(o);return e.reduceRight((c,u,y)=>t.is0(u)?c:(r[y]=t.mul(c,r[y]),t.mul(c,u)),n),r}function vi(t,e){let r=e!==void 0?e:t.toString(2).length,o=Math.ceil(r/8);return{nBitLength:r,nByteLength:o}}function On(t,e,r=!1,o={}){if(t<=Gt)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:n,nByteLength:c}=vi(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u,y=Object.freeze({ORDER:t,BITS:n,BYTES:c,MASK:za(n),ZERO:Gt,ONE:_t,create:h=>It(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Gt<=h&&h<t},is0:h=>h===Gt,isOdd:h=>(h&_t)===_t,neg:h=>It(-h,t),eql:(h,A)=>h===A,sqr:h=>It(h*h,t),add:(h,A)=>It(h+A,t),sub:(h,A)=>It(h-A,t),mul:(h,A)=>It(h*A,t),pow:(h,A)=>F0(y,h,A),div:(h,A)=>It(h*Za(A,t),t),sqrN:h=>h*h,addN:(h,A)=>h+A,subN:(h,A)=>h-A,mulN:(h,A)=>h*A,inv:h=>Za(h,t),sqrt:o.sqrt||(h=>(u||(u=N0(t)),u(y,h))),invertBatch:h=>H0(y,h),cmov:(h,A,B)=>B?A:h,toBytes:h=>r?$r(h,c):yi(h,c),fromBytes:h=>{if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);return r?Lr(h):Ka(h)}});return Object.freeze(y)}var ja=BigInt(0),Nn=BigInt(1);function Ei(t,e){let r=e.negate();return t?r:e}function Ya(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Bi(t,e){Ya(t,e);let r=Math.ceil(e/t)+1,o=2**(t-1);return{windows:r,windowSize:o}}function P0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,o)=>{if(!(r instanceof e))throw new Error("invalid point at index "+o)})}function K0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,o)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+o)})}var Ai=new WeakMap,Ja=new WeakMap;function _i(t){return Ja.get(t)||1}function Xa(t,e){return{constTimeNegate:Ei,hasPrecomputes(r){return _i(r)!==1},unsafeLadder(r,o,n=t.ZERO){let c=r;for(;o>ja;)o&Nn&&(n=n.add(c)),c=c.double(),o>>=Nn;return n},precomputeWindow(r,o){let{windows:n,windowSize:c}=Bi(o,e),u=[],y=r,h=y;for(let A=0;A<n;A++){h=y,u.push(h);for(let B=1;B<c;B++)h=h.add(y),u.push(h);y=h.double()}return u},wNAF(r,o,n){let{windows:c,windowSize:u}=Bi(r,e),y=t.ZERO,h=t.BASE,A=BigInt(2**r-1),B=2**r,_=BigInt(r);for(let S=0;S<c;S++){let U=S*u,k=Number(n&A);n>>=_,k>u&&(k-=B,n+=Nn);let L=U,R=U+Math.abs(k)-1,z=S%2!==0,Z=k<0;k===0?h=h.add(Ei(z,o[L])):y=y.add(Ei(Z,o[R]))}return{p:y,f:h}},wNAFUnsafe(r,o,n,c=t.ZERO){let{windows:u,windowSize:y}=Bi(r,e),h=BigInt(2**r-1),A=2**r,B=BigInt(r);for(let _=0;_<u;_++){let S=_*y;if(n===ja)break;let U=Number(n&h);if(n>>=B,U>y&&(U-=A,n+=Nn),U===0)continue;let k=o[S+Math.abs(U)-1];U<0&&(k=k.negate()),c=c.add(k)}return c},getPrecomputes(r,o,n){let c=Ai.get(o);return c||(c=this.precomputeWindow(o,r),r!==1&&Ai.set(o,n(c))),c},wNAFCached(r,o,n){let c=_i(r);return this.wNAF(c,this.getPrecomputes(c,r,n),o)},wNAFCachedUnsafe(r,o,n,c){let u=_i(r);return u===1?this.unsafeLadder(r,o,c):this.wNAFUnsafe(u,this.getPrecomputes(u,r,n),o,c)},setWindowSize(r,o){Ya(o,e),Ja.set(r,o),Ai.delete(r)}}}function Qa(t,e,r,o){if(P0(r,t),K0(o,e),r.length!==o.length)throw new Error("arrays of points and scalars must have equal length");let n=t.ZERO,c=qa(BigInt(r.length)),u=c>12?c-3:c>4?c-2:c?2:1,y=(1<<u)-1,h=new Array(y+1).fill(n),A=Math.floor((e.BITS-1)/u)*u,B=n;for(let _=A;_>=0;_-=u){h.fill(n);for(let U=0;U<o.length;U++){let k=o[U],L=Number(k>>BigInt(_)&BigInt(y));h[L]=h[L].add(r[U])}let S=n;for(let U=h.length-1,k=n;U>0;U--)k=k.add(h[U]),S=S.add(k);if(B=B.add(S),_!==0)for(let U=0;U<u;U++)B=B.double()}return B}function tc(t){return Ga(t.Fp),kr(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var we=BigInt(0),oe=BigInt(1),Dn=BigInt(2),q0=BigInt(8),z0={zip215:!0};function W0(t){let e=tc(t);return kr(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ec(t){let e=W0(t),{Fp:r,n:o,prehash:n,hash:c,randomBytes:u,nByteLength:y,h}=e,A=Dn<<BigInt(y*8)-oe,B=r.create,_=On(e.n,e.nBitLength),S=e.uvRatio||((d,p)=>{try{return{isValid:!0,value:r.sqrt(d*r.inv(p))}}catch{return{isValid:!1,value:we}}}),U=e.adjustScalarBytes||(d=>d),k=e.domain||((d,p,w)=>{if(Cn("phflag",w),p.length||w)throw new Error("Contexts/pre-hash are not supported");return d});function L(d,p){Tr("coordinate "+d,p,we,A)}function R(d){if(!(d instanceof O))throw new Error("ExtendedPoint expected")}let z=xi((d,p)=>{let{ex:w,ey:x,ez:E}=d,m=d.is0();p==null&&(p=m?q0:r.inv(E));let a=B(w*p),b=B(x*p),N=B(E*p);if(m)return{x:we,y:oe};if(N!==oe)throw new Error("invZ was invalid");return{x:a,y:b}}),Z=xi(d=>{let{a:p,d:w}=e;if(d.is0())throw new Error("bad point: ZERO");let{ex:x,ey:E,ez:m,et:a}=d,b=B(x*x),N=B(E*E),K=B(m*m),q=B(K*K),W=B(b*p),$=B(K*B(W+N)),Y=B(q+B(w*B(b*N)));if($!==Y)throw new Error("bad point: equation left != right (1)");let ut=B(x*E),tt=B(m*a);if(ut!==tt)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(p,w,x,E){this.ex=p,this.ey=w,this.ez=x,this.et=E,L("x",p),L("y",w),L("z",x),L("t",E),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof O)throw new Error("extended point not allowed");let{x:w,y:x}=p||{};return L("x",w),L("y",x),new O(w,x,oe,B(w*x))}static normalizeZ(p){let w=r.invertBatch(p.map(x=>x.ez));return p.map((x,E)=>x.toAffine(w[E])).map(O.fromAffine)}static msm(p,w){return Qa(O,_,p,w)}_setWindowSize(p){nt.setWindowSize(this,p)}assertValidity(){Z(this)}equals(p){R(p);let{ex:w,ey:x,ez:E}=this,{ex:m,ey:a,ez:b}=p,N=B(w*b),K=B(m*E),q=B(x*b),W=B(a*E);return N===K&&q===W}is0(){return this.equals(O.ZERO)}negate(){return new O(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){let{a:p}=e,{ex:w,ey:x,ez:E}=this,m=B(w*w),a=B(x*x),b=B(Dn*B(E*E)),N=B(p*m),K=w+x,q=B(B(K*K)-m-a),W=N+a,$=W-b,Y=N-a,ut=B(q*$),tt=B(W*Y),X=B(q*Y),At=B($*W);return new O(ut,tt,At,X)}add(p){R(p);let{a:w,d:x}=e,{ex:E,ey:m,ez:a,et:b}=this,{ex:N,ey:K,ez:q,et:W}=p;if(w===BigInt(-1)){let pt=B((m-E)*(K+N)),ct=B((m+E)*(K-N)),be=B(ct-pt);if(be===we)return this.double();let vt=B(a*Dn*W),ht=B(b*Dn*q),Xe=ht+vt,g=ct+pt,s=ht-vt,f=B(Xe*be),v=B(g*s),I=B(Xe*s),T=B(be*g);return new O(f,v,T,I)}let $=B(E*N),Y=B(m*K),ut=B(b*x*W),tt=B(a*q),X=B((E+m)*(N+K)-$-Y),At=tt-ut,lt=tt+ut,dt=B(Y-w*$),he=B(X*At),wt=B(lt*dt),bt=B(X*dt),Ue=B(At*lt);return new O(he,wt,Ue,bt)}subtract(p){return this.add(p.negate())}wNAF(p){return nt.wNAFCached(this,p,O.normalizeZ)}multiply(p){let w=p;Tr("scalar",w,oe,o);let{p:x,f:E}=this.wNAF(w);return O.normalizeZ([x,E])[0]}multiplyUnsafe(p,w=O.ZERO){let x=p;return Tr("scalar",x,we,o),x===we?j:this.is0()||x===oe?this:nt.wNAFCachedUnsafe(this,x,O.normalizeZ,w)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return nt.unsafeLadder(this,o).is0()}toAffine(p){return z(this,p)}clearCofactor(){let{h:p}=e;return p===oe?this:this.multiplyUnsafe(p)}static fromHex(p,w=!1){let{d:x,a:E}=e,m=r.BYTES;p=me("pointHex",p,m),Cn("zip215",w);let a=p.slice(),b=p[m-1];a[m-1]=b&-129;let N=Lr(a),K=w?A:r.ORDER;Tr("pointHex.y",N,we,K);let q=B(N*N),W=B(q-oe),$=B(x*q-E),{isValid:Y,value:ut}=S(W,$);if(!Y)throw new Error("Point.fromHex: invalid y coordinate");let tt=(ut&oe)===oe,X=(b&128)!==0;if(!w&&ut===we&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==tt&&(ut=B(-ut)),O.fromAffine({x:ut,y:N})}static fromPrivateKey(p){return ft(p).point}toRawBytes(){let{x:p,y:w}=this.toAffine(),x=$r(w,r.BYTES);return x[x.length-1]|=p&oe?128:0,x}toHex(){return Rn(this.toRawBytes())}}O.BASE=new O(e.Gx,e.Gy,oe,B(e.Gx*e.Gy)),O.ZERO=new O(we,oe,oe,we);let{BASE:D,ZERO:j}=O,nt=Xa(O,y*8);function at(d){return It(d,o)}function st(d){return at(Lr(d))}function ft(d){let p=r.BYTES;d=me("private key",d,p);let w=me("hashed private key",c(d),2*p),x=U(w.slice(0,p)),E=w.slice(p,2*p),m=st(x),a=D.multiply(m),b=a.toRawBytes();return{head:x,prefix:E,scalar:m,point:a,pointBytes:b}}function Ut(d){return ft(d).pointBytes}function it(d=new Uint8Array,...p){let w=wi(...p);return st(c(k(w,me("context",d),!!n)))}function Bt(d,p,w={}){d=me("message",d),n&&(d=n(d));let{prefix:x,scalar:E,pointBytes:m}=ft(p),a=it(w.context,x,d),b=D.multiply(a).toRawBytes(),N=it(w.context,b,m,d),K=at(a+N*E);Tr("signature.s",K,we,o);let q=wi(b,$r(K,r.BYTES));return me("result",q,r.BYTES*2)}let M=z0;function i(d,p,w,x=M){let{context:E,zip215:m}=x,a=r.BYTES;d=me("signature",d,2*a),p=me("message",p),w=me("publicKey",w,a),m!==void 0&&Cn("zip215",m),n&&(p=n(p));let b=Lr(d.slice(a,2*a)),N,K,q;try{N=O.fromHex(w,m),K=O.fromHex(d.slice(0,a),m),q=D.multiplyUnsafe(b)}catch{return!1}if(!m&&N.isSmallOrder())return!1;let W=it(E,K.toRawBytes(),N.toRawBytes(),p);return K.add(N.multiplyUnsafe(W)).subtract(q).clearCofactor().equals(O.ZERO)}return D._setWindowSize(8),{CURVE:e,getPublicKey:Ut,sign:Bt,verify:i,ExtendedPoint:O,utils:{getExtendedPublicKey:ft,randomPrivateKey:()=>u(r.BYTES),precompute(d=8,p=O.BASE){return p._setWindowSize(d),p.multiply(BigInt(3)),p}}}}var Mi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Lp=BigInt(0),V0=BigInt(1),nc=BigInt(2),Tp=BigInt(3),Z0=BigInt(5),$0=BigInt(8);function G0(t){let e=BigInt(10),r=BigInt(20),o=BigInt(40),n=BigInt(80),c=Mi,y=t*t%c*t%c,h=ye(y,nc,c)*y%c,A=ye(h,V0,c)*t%c,B=ye(A,Z0,c)*A%c,_=ye(B,e,c)*B%c,S=ye(_,r,c)*_%c,U=ye(S,o,c)*S%c,k=ye(U,n,c)*U%c,L=ye(k,n,c)*U%c,R=ye(L,e,c)*B%c;return{pow_p_5_8:ye(R,nc,c)*t%c,b2:y}}function j0(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Y0(t,e){let r=Mi,o=It(e*e*e,r),n=It(o*o*e,r),c=G0(t*n).pow_p_5_8,u=It(t*o*c,r),y=It(e*u*u,r),h=u,A=It(u*rc,r),B=y===t,_=y===It(-t,r),S=y===It(-t*rc,r);return B&&(u=h),(_||S)&&(u=A),$a(u,r)&&(u=It(-u,r)),{isValid:B||_,value:u}}var J0=On(Mi,void 0,!0),X0={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:J0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Na,randomBytes:Ra,adjustScalarBytes:j0,uvRatio:Y0},Ii=ec(X0);F();P();H();F();P();H();F();P();H();F();P();H();function Q0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Si(t,...e){if(!Q0(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ui(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function oc(t,e){Si(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}F();P();H();var Hn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xe=(t,e)=>t<<32-e|t>>>e;function tu(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Li(t){return typeof t=="string"&&(t=tu(t)),Si(t),t}var Fn=class{clone(){return this._cloneInto()}};function ic(t){let e=o=>t().update(Li(o)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function eu(t,e,r,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,o);let n=BigInt(32),c=BigInt(4294967295),u=Number(r>>n&c),y=Number(r&c),h=o?4:0,A=o?0:4;t.setUint32(e+h,u,o),t.setUint32(e+A,y,o)}var sc=(t,e,r)=>t&e^~t&r,ac=(t,e,r)=>t&e^t&r^e&r,Pn=class extends Fn{constructor(e,r,o,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=o,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Hn(this.buffer)}update(e){Ui(this);let{view:r,buffer:o,blockLen:n}=this;e=Li(e);let c=e.length;for(let u=0;u<c;){let y=Math.min(n-this.pos,c-u);if(y===n){let h=Hn(e);for(;n<=c-u;u+=n)this.process(h,u);continue}o.set(e.subarray(u,u+y),this.pos),this.pos+=y,u+=y,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ui(this),oc(e,this),this.finished=!0;let{buffer:r,view:o,blockLen:n,isLE:c}=this,{pos:u}=this;r[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>n-u&&(this.process(o,0),u=0);for(let _=u;_<n;_++)r[_]=0;eu(o,n-8,BigInt(this.length*8),c),this.process(o,0);let y=Hn(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=h/4,B=this.get();if(A>B.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<A;_++)y.setUint32(4*_,B[_],c)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:o,length:n,finished:c,destroyed:u,pos:y}=this;return e.length=n,e.pos=y,e.finished=c,e.destroyed=u,n%r&&e.buffer.set(o),e}};var ru=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ge=new Uint32Array(64),Ti=class extends Pn{constructor(){super(64,32,8,!1),this.A=$e[0]|0,this.B=$e[1]|0,this.C=$e[2]|0,this.D=$e[3]|0,this.E=$e[4]|0,this.F=$e[5]|0,this.G=$e[6]|0,this.H=$e[7]|0}get(){let{A:e,B:r,C:o,D:n,E:c,F:u,G:y,H:h}=this;return[e,r,o,n,c,u,y,h]}set(e,r,o,n,c,u,y,h){this.A=e|0,this.B=r|0,this.C=o|0,this.D=n|0,this.E=c|0,this.F=u|0,this.G=y|0,this.H=h|0}process(e,r){for(let _=0;_<16;_++,r+=4)Ge[_]=e.getUint32(r,!1);for(let _=16;_<64;_++){let S=Ge[_-15],U=Ge[_-2],k=xe(S,7)^xe(S,18)^S>>>3,L=xe(U,17)^xe(U,19)^U>>>10;Ge[_]=L+Ge[_-7]+k+Ge[_-16]|0}let{A:o,B:n,C:c,D:u,E:y,F:h,G:A,H:B}=this;for(let _=0;_<64;_++){let S=xe(y,6)^xe(y,11)^xe(y,25),U=B+S+sc(y,h,A)+ru[_]+Ge[_]|0,L=(xe(o,2)^xe(o,13)^xe(o,22))+ac(o,n,c)|0;B=A,A=h,h=y,y=u+U|0,u=c,c=n,n=o,o=U+L|0}o=o+this.A|0,n=n+this.B|0,c=c+this.C|0,u=u+this.D|0,y=y+this.E|0,h=h+this.F|0,A=A+this.G|0,B=B+this.H|0,this.set(o,n,c,u,y,h,A,B)}roundClean(){Ge.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Kn=ic(()=>new Ti);var nu=Object.defineProperty,le=(t,e)=>nu(t,"name",{value:e,configurable:!0}),ou="https://wallet.intear.tech",iu="https://logout-bridge-service.intear.tech",Yr="_intear_wallet_connected_account",cc="width=400,height=700",fc=!1,Gr=null,ki=!1,St=class extends Error{constructor(e,r){super(e),this.cause=r,this.name="IntearAdapterError",r&&(this.stack+=`
Caused by: ${r instanceof Error?r.stack:String(r)}`)}static{le(this,"IntearAdapterError")}},Oe=class t{static{le(this,"LogoutWebSocket")}static instance=null;ws=null;network;accountId;appPrivateKey;userLogoutPublicKey;logoutBridgeServiceUrl;intentionallyClosed=!1;reconnectAttempts=0;maxReconnectAttempts=3;logger;constructor(e,r,o,n,c,u){this.network=e,this.accountId=r,this.appPrivateKey=o,this.userLogoutPublicKey=n,this.logoutBridgeServiceUrl=c,this.logger=u,this.connect()}async connect(){try{let e=this.logoutBridgeServiceUrl.replace("https://","wss://").replace("http://","ws://");this.ws=new WebSocket(`${e}/api/subscribe`),this.ws.onopen=async()=>{if(!this.ws)return;let r=Date.now(),o=`subscribe|${r}`,n=new TextEncoder().encode(o),c=jt(this.appPrivateKey),y=`ed25519:${ke(n,this.appPrivateKey,{returnBase58:!0})}`,h={Auth:{network:this.network,account_id:this.accountId,app_public_key:c,nonce:r,signature:y}};this.ws.send(JSON.stringify(h))},this.ws.onmessage=async r=>{let o=JSON.parse(r.data);if("Success"in o)this.logger.log("LogoutWebSocket:",o.Success.message),this.reconnectAttempts=0;else if("Error"in o)this.logger.error("LogoutWebSocket error:",o.Error.message),this.ws?.close();else if("LoggedOut"in o){let{logout_info:n}=o.LoggedOut;if(this.logger.log("LogoutWebSocket: Received logout notification:",n),n.nonce>Date.now()||n.nonce<Date.now()-1e3*60*5){this.logger.error("LogoutWebSocket: Invalid logout nonce:",n.nonce);return}let c=jt(this.appPrivateKey),u=`logout|${n.nonce}|${this.accountId}|${c}`,y=new TextEncoder().encode(u),h=n.signature.split(":");if(h.length!==2||h[0]!=="ed25519"&&h[0]!=="secp256k1"){this.logger.error("LogoutWebSocket: Invalid signature format:",n.signature);return}let A=h[1],B=Jt(A),_;if(n.caused_by==="User")_=this.userLogoutPublicKey;else if(n.caused_by==="App")_=c;else{this.logger.error("LogoutWebSocket: Unknown logout cause:",n.caused_by);return}let S,U=_.substring(8);if(S=Jt(U),!Ii.verify(B,y,S)){this.logger.error("LogoutWebSocket: Invalid logout signature");return}this.logger.log("LogoutWebSocket: Valid logout message received. Calling signOut and reloading."),Wn(),this.intentionallyClosed=!0,this.close(),window.location.reload()}},this.ws.onclose=()=>{this.logger.log("LogoutWebSocket: Connection closed."),this.intentionallyClosed?t.instance===this&&(t.instance=null):this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.logger.log(`LogoutWebSocket: Attempting to reconnect in 500ms... (Attempt ${this.reconnectAttempts} of ${this.maxReconnectAttempts})`),setTimeout(()=>this.connect(),500)):(this.logger.warn(`LogoutWebSocket: Maximum reconnection attempts (${this.maxReconnectAttempts}) reached. Giving up.`),t.instance===this&&(t.instance=null))},this.ws.onerror=r=>{this.logger.warn("LogoutWebSocket: Error:",r),this.intentionallyClosed?t.instance=null:this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.logger.log(`LogoutWebSocket: Attempting to reconnect in 500ms... (Attempt ${this.reconnectAttempts} of ${this.maxReconnectAttempts})`),setTimeout(()=>this.connect(),500)):(this.logger.warn(`LogoutWebSocket: Maximum reconnection attempts (${this.maxReconnectAttempts}) reached. Giving up.`),t.instance===this&&(t.instance=null))}}catch(e){this.logger.warn("LogoutWebSocket: Error creating WebSocket connection:",e)}}static initialize(e,r,o,n,c,u){try{return t.instance||(t.instance=new t(e,r,o,n,c,u)),t.instance}catch(y){return u.warn("LogoutWebSocket: Failed to initialize:",y),null}}static getInstance(){return t.instance}close(){this.ws&&(this.intentionallyClosed=!0,this.ws.close()),t.instance=null}};async function Cr(t,e,r){let o=r.toString()+"|"+e,n=new TextEncoder().encode(o),c=Kn(n);return`ed25519:${ke(c,t,{returnBase58:!0})}`}le(Cr,"generateAuthSignature");function qn(){if(typeof window>"u")throw new St("Cannot access localStorage in this environment.");let t=window.localStorage.getItem(Yr);if(!t)throw new St("Not signed in (no data found)");try{let e=JSON.parse(t);if(!e||!e.accounts||e.accounts.length===0||!e.key)throw new Error("Invalid saved data structure");return e}catch(e){throw console.error("Error parsing saved login data, clearing storage.",e),window.localStorage.removeItem(Yr),new St("Failed to parse login data, please sign in again.",e)}}le(qn,"assertLoggedIn");function jr(){try{return qn()}catch{return null}}le(jr,"getSavedData");function uc(t,e,r,o){try{let n=`logout|${t.nonce}|${e}|${r}`,c=t.signature.split(":");if(c.length!==2||c[0]!=="ed25519"&&c[0]!=="secp256k1")return console.error("WalletAdapter: Invalid signature format:",t.signature),!1;let u=c[1],y=Jt(u),h;if(t.caused_by==="User")h=o;else if(t.caused_by==="App")h=r;else return console.error("WalletAdapter: Unknown logout cause:",t.caused_by),!1;let A=h.substring(8),B=Jt(A);return Ii.verify(y,new TextEncoder().encode(n),B)}catch(n){return console.error("WalletAdapter: Error verifying logout signature:",n),!1}}le(uc,"verifyLogoutSignature");async function Ci(t,e,r){try{let o=t.accounts[0],n=t.networkId,c=t.key,u=jt(c);Oe.initialize(n,o.accountId,c,t.logoutKey,e,console);let y=Date.now(),h=`check|${y}`,A=new TextEncoder().encode(h),_=`ed25519:${ke(A,c,{returnBase58:!0})}`,S=await fetch(`${e}/api/check_logout/${n}/${o.accountId}/${u}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({nonce:y,signature:_})});if(!S.ok)return console.warn("WalletAdapter: Failed to check logout status:",await S.text()),{isActive:!0,accounts:t.accounts};let U=await S.json();if(console.debug("WalletAdapter: Logout check response:",U),U==="Active")return{isActive:!0,accounts:t.accounts};{let k=U.LoggedOut;return console.debug("WalletAdapter: User was logged out:",k),uc(k,o.accountId,u,t.logoutKey)?(console.debug("WalletAdapter: Valid remote logout. Clearing local session."),window.localStorage.removeItem(Yr),Oe.getInstance()?.close(),r?.({accountId:null,networkId:null,publicKey:null}),{isActive:!1,accounts:[]}):(console.error("WalletAdapter: Invalid logout signature"),{isActive:!0,accounts:t.accounts})}}catch(o){return console.error("WalletAdapter: Error verifying session status:",o),{isActive:!0,accounts:t.accounts}}}le(Ci,"verifySessionStatus");var zn=class{static{le(this,"WalletAdapter")}#t;#e;#r;constructor({walletUrl:e=ou,targetOrigin:r,onStateUpdate:o,lastState:n,callbackUrl:c,logoutBridgeService:u=iu}){this.#t=e,this.#e=u,this.#r=o,console.debug("Intear Popup WalletAdapter initialized. URL:",this.#t),typeof window<"u"&&this.initializeSession().catch(y=>{console.error("Error during initial session initialization:",y)})}async signIn({contractId:e,methodNames:r,networkId:o,callbacks:n}){console.debug("WalletAdapter: signIn",{contractId:e,methodNames:r,networkId:o});let{onPending:c,onError:u,timeout:y=6e4}=n||{},h=Ir();return new Promise((A,B)=>{c?.({step:"popup_opening",networkId:o,contractId:e});let _=new Promise(L=>{let R=null,z=setInterval(()=>{R&&(clearInterval(z),L(R))},100),Z=le(O=>{O.data.origin&&(R=O.data.origin,window.removeEventListener("message",Z))},"listener");window.addEventListener("message",Z)}),S=document.createElement("iframe");S.src=`${this.#t}/hot-wallet-connector-iframe.html`,S.style.position="fixed",S.style.inset="0",S.style.width="100vw",S.style.height="100vh",S.style.border="none",S.style.zIndex="100000",document.body.appendChild(S),S.onload=()=>{_.then(L=>{S.contentWindow?.postMessage({type:"hotConnectorData",origin:L,location:window.selector.location},"*")})};let U=null,k=le(async L=>{if(L.data.status){S.contentWindow?.postMessage(L.data,"*");return}switch(console.debug("Message from connect popup",L.data),L.data.type){case"ready":{let R=location.origin||"file://local-html-file",z=JSON.stringify({origin:R}),Z=Date.now(),O=await Cr(h,z,Z),D=jt(h);S.contentWindow?.postMessage({type:"signIn",data:{contractId:e,methodNames:r,publicKey:D,networkId:o,nonce:Z,message:z,signature:O,version:"V2"}},"*");break}case"connected":{c?.({step:"processing_result",networkId:o,contractId:e});let R=L.data.accounts;if(!R||R.length===0){let nt={type:"wallet_error",message:"No accounts returned from wallet",retryable:!0,suggestedAction:"retry",timestamp:Date.now()};return u?.(nt),B(new St("No accounts returned from wallet"))}let z=L.data.functionCallKeyAdded,Z=L.data.logoutKey,O=L.data.useBridge,D={accounts:R,key:h,contractId:z&&e?e:"",methodNames:z?r??[]:[],logoutKey:Z,networkId:o,walletUrl:L.data.walletUrl,useBridge:O};console.log("dataToSave",D,"event.data",L.data),window.localStorage.setItem(Yr,JSON.stringify(D)),U={accountId:R[0].accountId,accounts:R,privateKey:D.key,publicKey:jt(D.key)},S.contentWindow?.postMessage({type:"close"},"*");let j={accountId:R[0].accountId,networkId:o,privateKey:D.key,publicKey:jt(D.key)};this.#r?.(j),Oe.getInstance()?.close(),Oe.initialize(D.networkId,D.accounts[0].accountId,D.key,D.logoutKey,this.#e,console);break}case"error":{console.error("Error from connect popup",L.data.message),S.contentWindow?.postMessage({type:"close",message:L.data.message},this.#t);break}case"close":{window.removeEventListener("message",k),setTimeout(()=>{if(S.remove(),L.data.message){let R=L.data.message||"Unknown error from wallet popup",z={type:"wallet_error",message:R,retryable:!0,suggestedAction:"contact_support",originalError:L.data,timestamp:Date.now()};u?.(z),B(new St(R))}else U?A(U):(console.error("No result and no error"),B(new St("No result and no error")))},100);break}}},"listener");window.addEventListener("message",k),c?.({step:"waiting_for_user",networkId:o,contractId:e})})}async signOut(){console.debug("WalletAdapter: signOut");let e=jr();if(Oe.getInstance()?.close(),e)try{let r=e.accounts[0].accountId,o=e.key,n=jt(o),c=e.networkId,u=Date.now(),y=`logout|${u}|${r}|${n}`,h=new TextEncoder().encode(y),A=Kn(h),_=`ed25519:${ke(A,o,{returnBase58:!0})}`,S=await fetch(`${this.#e}/api/logout_app/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_id:r,app_public_key:n,nonce:u,signature:_})});S.ok?console.debug("WalletAdapter: Successfully notified bridge service of logout"):console.error("WalletAdapter: Failed to notify bridge service of logout:",await S.text())}catch(r){console.error("WalletAdapter: Error during bridge service logout notification:",r)}window.localStorage.removeItem(Yr),this.#r?.({accountId:null,networkId:null,publicKey:null})}async initializeSession(){if(!ki){ki=!0;try{let e=jr();if(!e){Oe.getInstance()?.close();return}await Ci(e,this.#e,this.#r)}catch(e){console.error("WalletAdapter: Unexpected error during session initialization:",e),Oe.getInstance()?.close()}finally{ki=!1}}}getState(){let e=jr();return e?{accountId:e.accounts[0].accountId,networkId:e.networkId,publicKey:jt(e.key)}:{accountId:null,networkId:null,publicKey:null}}setState(e){this.#r?.(e)}async getAccounts(){console.debug("WalletAdapter: getAccounts");let e=jr();return e?fc?(console.debug("WalletAdapter: Accounts:",e.accounts),e.accounts):Gr?await Gr:(Gr=new Promise(async r=>{try{let o=await Ci(e,this.#e,this.#r);r(o.accounts)}catch(o){console.error("WalletAdapter: Error in getAccounts:",o),r(e.accounts)}}).finally(()=>{Gr=null,fc=!0}),await Gr):[]}async sendTransactions({transactions:e}){console.debug("WalletAdapter: sendTransactions",{transactions:e});let r=qn(),o=r.key,n=r.accounts[0].accountId;if(r.useBridge)return new Promise((u,y)=>{let h=this.#e.replace("https://","wss://").replace("http://","ws://"),A=new WebSocket(`${h}/api/session/create`);A.onopen=async()=>{console.debug("WebSocket connected for transactions");let _=JSON.stringify(e),S=Date.now(),U=await Cr(r.key,_,S);A.send(JSON.stringify({type:"signAndSendTransactions",data:{transactions:_,accountId:r.accounts[0].accountId,publicKey:jt(r.key),nonce:S,signature:U}}))};let B=null;A.onmessage=_=>{try{let S=JSON.parse(_.data);if(S.session_id)B=S.session_id,console.debug("Received session ID for send-transactions:",B);else if(console.debug("Received send-transactions response:",S),A.close(),S.type==="error"){let U=S.message||"Unknown error from wallet popup";y(new St(U))}else u({outcomes:S.outcomes})}catch(S){console.error("Error parsing WebSocket message:",S),y(new St("Error parsing WebSocket message",S))}},A.onerror=_=>{console.error("WebSocket error:",_),y(new St("WebSocket error",_))},A.onclose=()=>{console.debug("WebSocket closed for send-transactions")},(async()=>{let S=`intear://send-transactions?session_id=${await new Promise(U=>{setInterval(()=>{B&&U(B)},100)})}`;console.debug("Opening wallet with URL:",S),window.selector.openNativeApp(S)})()});let c=window.open(`${r.walletUrl??this.#t}/send-transactions`,"_blank",cc);if(!c)throw new St("Popup was blocked");return new Promise(async(u,y)=>{let h=!1,A=le(async _=>{if(!(!_.data||!_.data.type))switch(console.debug("Message from send-transactions popup",_.data),_.data.type){case"ready":{let S=JSON.stringify(e),U=Date.now(),k=await Cr(o,S,U),L=jt(o);c.postMessage({type:"signAndSendTransactions",data:{transactions:S,accountId:n,publicKey:L,nonce:U,signature:k}},r.walletUrl??this.#t);break}case"sent":{h=!0,c.close(),window.removeEventListener("message",A),u({outcomes:_.data.outcomes});break}case"error":{h=!0,c.close(),window.removeEventListener("message",A),y(new St(_.data.message||"Unknown error from send-transactions popup"));break}}},"listener");window.addEventListener("message",A);let B=setInterval(()=>{c.closed&&(window.removeEventListener("message",A),clearInterval(B),h||y(new St("Transaction canceled - popup closed by user")))},100)})}async signMessage({message:e,nonce:r,recipient:o,callbackUrl:n,state:c}){console.debug("WalletAdapter: signMessage",{message:e,nonce:r,recipient:o});let u=qn(),y=u.key,h=u.accounts[0].accountId;if(u.useBridge)return new Promise((B,_)=>{let S=this.#e.replace("https://","wss://").replace("http://","ws://"),U=new WebSocket(`${S}/api/session/create`);U.onopen=async()=>{console.debug("WebSocket connected for sign-message");let L=JSON.stringify({message:e,recipient:o,nonce:Array.from(r),callbackUrl:n,state:c}),R=Date.now(),z=await Cr(y,L,R);U.send(JSON.stringify({type:"signMessage",data:{message:L,accountId:u.accounts[0].accountId,publicKey:jt(y),nonce:R,signature:z}}))};let k=null;U.onmessage=L=>{try{let R=JSON.parse(L.data);if(R.session_id)k=R.session_id,console.debug("Received session ID for sign-message:",k);else if(console.debug("Received sign-message response:",R),U.close(),R.type==="error")_(new Error(R.message));else{console.log(JSON.stringify(R));let z=R.signature;try{B({accountId:z.accountId,publicKey:z.publicKey,signature:btoa(Array.from(Jt(z.signature.split(":")[1]),Z=>String.fromCharCode(Z)).join(""))})}catch(Z){_(new St("Failed to process signature from wallet",Z))}}}catch(R){console.error("Error parsing WebSocket message:",R),_(new St("Error parsing WebSocket message",R))}},U.onerror=L=>{console.error("WebSocket error:",L),_(new St("WebSocket error",L))},U.onclose=()=>{console.debug("WebSocket closed for sign-message")},(async()=>{let R=`intear://sign-message?session_id=${await new Promise(z=>{setInterval(()=>{k&&z(k)},100)})}`;console.debug("Opening wallet with URL:",R),window.selector.openNativeApp(R)})()});let A=window.open(`${u.walletUrl??this.#t}/sign-message`,"_blank",cc);if(!A)throw new St("Popup was blocked");return new Promise(async(B,_)=>{let S=!1,U=le(async L=>{if(!(!L.data||!L.data.type))switch(console.debug("Message from sign-message popup",L.data),L.data.type){case"ready":{let R=JSON.stringify({message:e,recipient:o,nonce:Array.from(r),callbackUrl:n,state:c}),z=Date.now(),Z=await Cr(y,R,z),O=jt(y);A.postMessage({type:"signMessage",data:{message:R,accountId:h,publicKey:O,nonce:z,signature:Z}},u.walletUrl??this.#t);break}case"signed":{S=!0,A.close(),window.removeEventListener("message",U);let R=L.data.signature;try{B({accountId:R.accountId,publicKey:R.publicKey,signature:btoa(Array.from(Jt(R.signature.split(":")[1]),z=>String.fromCharCode(z)).join(""))})}catch(z){_(new St("Failed to process signature from wallet",z))}break}case"error":{S=!0,A.close(),window.removeEventListener("message",U),_(new St(L.data.message||"Unknown error from sign-message popup"));break}}},"listener");window.addEventListener("message",U);let k=setInterval(()=>{A.closed&&(window.removeEventListener("message",U),clearInterval(k),S||_(new St("Message signing canceled - popup closed by user")))},100)})}destroy(){console.debug("Intear Popup WalletAdapter destroyed.")}};var su=Object.defineProperty,ie=(t,e)=>su(t,"name",{value:e,configurable:!0}),lc="https://wallet.intear.tech",hc="mainnet",Xr={testnet:{networkId:"testnet",nodeUrl:"https://rpc.testnet.fastnear.com/"},mainnet:{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.fastnear.com/"}},Jr=qe("config")||{...Xr[hc]},xt=qe("state")||{},dc=ie(t=>{let{accountId:e,lastWalletId:r,privateKey:o}=t,n=e||null;n!==xt.accountId&&Se({accountId:n,lastWalletId:r||void 0,...o?{privateKey:o}:{}})},"onAdapterStateUpdate"),pc=ie(()=>({publicKey:xt.publicKey,accountId:xt.accountId,lastWalletId:xt.lastWalletId,networkId:Jr.networkId}),"getWalletAdapterState"),mr=new zn({onStateUpdate:dc,walletUrl:lc});try{xt.publicKey=xt.privateKey?jt(xt.privateKey):null}catch(t){console.error("Error parsing private key:",t),xt.privateKey=null,ue("nonce",null)}var je=qe("txHistory")||{},Ne={account:[],tx:[]},ce={_eventListeners:{account:new Set,tx:new Set},notifyAccountListeners:ie(t=>{if(ce._eventListeners.account.size===0){Ne.account.push(t);return}ce._eventListeners.account.forEach(e=>{try{e(t)}catch(r){console.error(r)}})},"notifyAccountListeners"),notifyTxListeners:ie(t=>{if(ce._eventListeners.tx.size===0){Ne.tx.push(t);return}ce._eventListeners.tx.forEach(e=>{try{e(t)}catch(r){console.error(r)}})},"notifyTxListeners"),onAccount:ie(t=>{if(ce._eventListeners.account.add(t),Ne.account.length>0){let e=Ne.account;Ne.account=[],e.forEach(ce.notifyAccountListeners)}return t},"onAccount"),onTx:ie(t=>{if(ce._eventListeners.tx.add(t),Ne.tx.length>0){let e=Ne.tx;Ne.tx=[],e.forEach(ce.notifyTxListeners)}return t},"onTx"),offAccount:ie(t=>{ce._eventListeners.account.delete(t)},"offAccount"),offTx:ie(t=>{ce._eventListeners.tx.delete(t)},"offTx")},Se=ie(t=>{let e=xt;xt={...xt,...t},ue("state",{accountId:xt.accountId,privateKey:xt.privateKey,lastWalletId:xt.lastWalletId,accessKeyContractId:xt.accessKeyContractId}),t.hasOwnProperty("privateKey")&&t.privateKey!==e.privateKey&&(xt.publicKey=t.privateKey?jt(t.privateKey):null,ue("nonce",null)),t.hasOwnProperty("accountId")&&t.accountId!==e.accountId&&ce.notifyAccountListeners(t.accountId),(t.hasOwnProperty("lastWalletId")&&t.lastWalletId!==e.lastWalletId||t.hasOwnProperty("accountId")&&t.accountId!==e.accountId||t.hasOwnProperty("privateKey")&&t.privateKey!==e.privateKey)&&mr.setState(pc())},"update"),Ye=ie(t=>{let e=t.txId;je[e]={...je[e]||{},...t,updateTimestamp:Date.now()},ue("txHistory",je),ce.notifyTxListeners(je[e])},"updateTxHistory"),yr=ie(()=>Jr,"getConfig"),Ri=ie(()=>je,"getTxHistory"),Vn=ie(t=>{Jr={...Xr[t.networkId],...t},ue("config",Jr)},"setConfig"),Oi=ie(()=>{je={},ue("txHistory",je)},"resetTxHistory");var au=Object.defineProperty,fe=(t,e)=>au(t,"name",{value:e,configurable:!0});se.DP=27;var _g=1e3*60*60*6;function cu(t,e){return e==="final"||e==="optimistic"?{...t,finality:e}:e?{...t,block_id:e}:{...t,finality:"optimistic"}}fe(cu,"withBlockId");async function Ni(t,e){let r=yr();if(!r?.nodeUrl)throw new Error("fastnear: getConfig() returned invalid config: missing nodeUrl.");let n=await(await fetch(r.nodeUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:`fastnear-${Date.now()}`,method:t,params:e})})).json();if(n.error)throw new Error(JSON.stringify(n.error));return n}fe(Ni,"sendRpc");function Di(t){let e=Ri();Ni("tx",{tx_hash:e[t]?.txHash,sender_account_id:e[t]?.tx?.signerId,wait_until:"EXECUTED_OPTIMISTIC"}).then(r=>{let o=r?.result?.status?.SuccessValue;Ye({txId:t,status:"Executed",result:r,successValue:o?_r(gn(o)):void 0,finalState:!0})}).catch(r=>{Ye({txId:t,status:"ErrorAfterIncluded",error:_r(r.message)??r.message,finalState:!0})})}fe(Di,"afterTxSent");async function fu(t,e,r){e=e||"INCLUDED";try{let o=await Ni("send_tx",{signed_tx_base64:t,wait_until:e});return Ye({txId:r,status:"Included",finalState:!1}),Di(r),o}catch(o){let n=o instanceof Error?o.message:"Unknown error";throw Ye({txId:r,status:"Error",error:_r(n)??n,finalState:!1}),new Error(n)}}fe(fu,"sendTxToRpc");function uu(){let t=crypto.getRandomValues(new Uint32Array(2)).join("");return`tx-${Date.now()}-${parseInt(t,10).toString(36)}`}fe(uu,"generateTxId");var gc=0,lu=6e4,Rr=fe(()=>{let t=Date.now();return xt.accountId&&t-gc>lu&&(gc=t,mr.getAccounts().then(e=>{e.length===0&&xt.accountId&&Se({accountId:null,privateKey:null,lastWalletId:null})}).catch(e=>{console.error("Error checking account status:",e)})),xt.accountId},"accountId"),$n=fe(()=>xt.publicKey,"publicKey"),Je=fe(t=>{let e=yr();return t&&(t.networkId&&e.networkId!==t.networkId&&(Vn({...Xr[t.networkId],networkId:t.networkId}),Se({accountId:null,privateKey:null,lastWalletId:null}),ue("block",null),Oi()),Vn({...yr(),...t})),yr()},"config"),mc=fe(()=>xt.accountId?"SignedIn":"SignedOut","authStatus");var yc=fe(async(t={},e={})=>{let{contractId:r,methodNames:o}=t,{onSuccess:n,onError:c,timeout:u=6e4}=e,y=yr().networkId,h=qe("lastSignedInAccount"),A=!!h&&h!==xt.accountId,B=Ir();Se({accessKeyContractId:r,privateKey:B});try{let _=await mr.signIn({networkId:y,contractId:r,methodNames:o,callbacks:{onError:c?S=>{c(S)}:void 0,timeout:u}});if(_.error){let S={type:"wallet_error",message:_.error,retryable:!0,suggestedAction:"contact_support",originalError:_.error,timestamp:Date.now()};throw c?.(S),new Error(`Wallet error: ${_.error}`)}if(_.accountId){ue("lastSignedInAccount",_.accountId),Se({accountId:_.accountId,privateKey:_.privateKey,publicKey:_.publicKey,accessKeyContractId:r});let S={accountId:_.accountId,publicKey:_.publicKey,networkId:y,contractId:r,methodNames:o,accounts:_.accounts||[{accountId:_.accountId,publicKey:_.publicKey}],isReconnection:A};return n?.(S),S}else{console.warn("@fastnear: signIn resolved without accountId or error."),Se({accountId:null,privateKey:null,publicKey:null,accessKeyContractId:null});let S={type:"unknown",message:"Sign-in completed but no account information was returned",retryable:!0,suggestedAction:"retry",originalError:null,timestamp:Date.now()};throw c?.(S),new Error("Sign-in completed but no account information was returned")}}catch(_){let S={type:"unknown",message:_ instanceof Error?_.message:"Unknown error occurred",retryable:!0,suggestedAction:"contact_support",originalError:_,timestamp:Date.now()};throw c?.(S),_}},"requestSignIn");var Wn=fe(async()=>{await mr.signOut(),Se({accountId:null,privateKey:null,accessKeyContractId:null,lastWalletId:null})},"signOut"),wc=fe(async({message:t,recipient:e,nonce:r,callbackUrl:o,state:n})=>{if(!xt.accountId)throw new Error("Must sign in");let u=r||crypto.getRandomValues(new Uint8Array(32));try{let y=await mr.signMessage({message:t,recipient:e,nonce:u,callbackUrl:o,state:n});return{accountId:y.accountId,publicKey:y.publicKey,signature:y.signature}}catch(y){throw console.error("fastnear: error signing message using adapter:",y),y}},"signMessage");function hu(t){for(let e of t)if((e.type==="FunctionCall"||e.type==="Transfer")&&e.params.deposit&&e.params.deposit!=="0")return!0;return!1}fe(hu,"hasNonZeroDeposit");var xc={utils:{},borsh:In.borsh,borshSchema:In.borshSchema.getBorshSchema()};for(let t in Sn)xc.utils[t]=Sn[t];var Mg=xc.utils,Or={};for(let t in Zn)Or[t]=Zn[t];var Ig=Or.events;delete Or.events;try{if(typeof window<"u"){let t=new URL(window.location.href),e=t.searchParams.get("account_id"),r=t.searchParams.get("public_key"),o=t.searchParams.get("errorCode"),n=t.searchParams.get("errorMessage"),c=n?decodeURIComponent(n):null,u=t.searchParams.get("transactionHashes"),y=t.searchParams.get("txIds");if((o||n)&&console.warn(new Error(`Wallet raises:
code: ${o}
message: ${c}`)),e&&r&&(r===xt.publicKey?Se({accountId:e}):(mc()==="SignedIn"&&console.warn("Public key mismatch from wallet redirect",r,xt.publicKey),t.searchParams.delete("public_key"))),u||y){let h=u?u.split(","):[],A=y?y.split(","):[];A.length>h.length?A.forEach(B=>{Ye({txId:B,status:"RejectedByUser",finalState:!0})}):A.length===h.length?A.forEach((B,_)=>{Ye({txId:B,status:"PendingGotTxHash",txHash:h[_],finalState:!1}),Di(B)}):console.error(new Error("Transaction hash mismatch from wallet redirect"),A,h)}t.searchParams.delete("txIds"),mc()==="SignedOut"&&(t.searchParams.delete("errorCode"),t.searchParams.delete("errorMessage"))}}catch(t){console.error("Error handling wallet redirect:",t)}function Gn(t){return t instanceof Map?Object.fromEntries(Array.from(t,([e,r])=>[e,r instanceof Map?Gn(r):Array.isArray(r)?r.map(o=>o instanceof Map?Gn(o):o):r])):t}async function du(){return{async signIn({network:t,contractId:e,methodNames:r,successUrl:o,failureUrl:n}){Je({networkId:t}),window.selector.ui.showIframe();let c=await yc({contractId:e,methodNames:r});if(Rr()&&$n())return c.accounts;throw new Error("Connection failed")},async signOut({network:t}){console.log("signOut"),Je().networkId===t&&Wn()},async getAccounts({network:t}){if(console.log("getAccounts"),Je().networkId&&Je().networkId!==t)throw new Error("Network mismatch");if(localStorage.getItem("_intear_wallet_connected_account"))try{return JSON.parse(localStorage.getItem("_intear_wallet_connected_account")).accounts}catch{}return Rr()&&$n()?[{accountId:Rr(),publicKey:$n()}]:[]},async signMessage({network:t,message:e,nonce:r,recipient:o}){if(console.log("signMessage"),Je().networkId!==t)throw new Error("Network mismatch");return await wc({message:e,nonce:r,recipient:o})},async signAndSendTransaction({network:t,signerId:e,receiverId:r,actions:o}){if(console.log("signAndSendTransaction"),Je().networkId!==t)throw new Error("Network mismatch");e=e??Rr();let n=await Or._adapter.sendTransactions({transactions:[{signerId:e,receiverId:r,actions:o}]});return Gn(n.outcomes[0])},async signAndSendTransactions({network:t,transactions:e}){if(console.log("signAndSendTransactions"),Je().networkId!==t)throw new Error("Network mismatch");return e=e.map(o=>({signerId:o.signerId??Rr(),receiverId:o.receiverId,actions:o.actions})),(await Or._adapter.sendTransactions({transactions:e})).outcomes.map(Gn)}}}du().then(t=>{window.selector.ready(t)});
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
@noble/hashes/esm/utils.js:
@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
