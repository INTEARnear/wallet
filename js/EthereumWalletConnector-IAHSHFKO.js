import{a as Jt,b as Xt,c as nt,d as Ie,e as er,f as it,g as tr,h as Q,i as rr,j as at,k as or,l as Se,m as ct,n as lt,o as sr,p as nr,q as ir,r as ar,s as cr,t as lr,u as pr,w as ur,x as dr}from"./chunk-EHAE3UOH.js";import{a as $t}from"./chunk-T7S7YTW4.js";import"./chunk-RRN7SHYG.js";import"./chunk-XEUUDCWO.js";import"./chunk-MNNC6HL4.js";import"./chunk-KG5GTMNR.js";import{a as ke,b as Gt}from"./chunk-T4OAGIV2.js";import{a as O,b as j,c as be,d as k,e as Vt,f as L,g as v}from"./chunk-NAWDSJ2N.js";import{$ as Zt,A as de,B as M,C as b,H as et,I as tt,J as jt,L as D,M as se,O as l,P as st,Q as y,R as ne,S as zt,V as Te,_ as Yt,a as Rt,b as Ut,c as _t,d as Mt,e as Dt,f as Xe,h as Ft,j as m,k as Z,p as K,q as Wt,r as I,s as A,t as N,u as d,w as Lt,x as S,y as J,z as oe}from"./chunk-SGMZUJCA.js";import{d as Qt,h as qt}from"./chunk-QQ2U7YUK.js";import"./chunk-OIFNSKKM.js";import{C as Ht,F as Kt}from"./chunk-KBZLPVCS.js";import"./chunk-4XVQLAVT.js";import{a as W}from"./chunk-AMYL42KT.js";import"./chunk-V7H3HPRQ.js";import"./chunk-EAWY7VYO.js";import"./chunk-2LXNZIUV.js";import{B as Ee,P as Bt,pa as Ne,q as rt,s as ot,ua as fe}from"./chunk-NIKCAVDA.js";import"./chunk-URLXKBQX.js";import"./chunk-FFQJ55XB.js";import"./chunk-6IYG3UUA.js";import"./chunk-WGWCH7J2.js";import{c as Ae,f as _}from"./chunk-57YRCRKT.js";var hr=Ae(fr=>{"use strict";var ie=W();function io(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var ao=typeof Object.is=="function"?Object.is:io,co=ie.useState,lo=ie.useEffect,po=ie.useLayoutEffect,uo=ie.useDebugValue;function fo(r,e){var t=e(),o=co({inst:{value:t,getSnapshot:e}}),s=o[0].inst,n=o[1];return po(function(){s.value=t,s.getSnapshot=e,pt(s)&&n({inst:s})},[r,t,e]),lo(function(){return pt(s)&&n({inst:s}),r(function(){pt(s)&&n({inst:s})})},[r]),uo(t),t}function pt(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!ao(r,t)}catch{return!0}}function ho(r,e){return e()}var mo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ho:fo;fr.useSyncExternalStore=ie.useSyncExternalStore!==void 0?ie.useSyncExternalStore:mo});var Cr=Ae((Wo,mr)=>{"use strict";mr.exports=hr()});var $r=Ae(Ge=>{"use strict";var So=Symbol.for("react.transitional.element"),Po=Symbol.for("react.fragment");function Gr(r,e,t){var o=null;if(t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),"key"in e){t={};for(var s in e)s!=="key"&&(t[s]=e[s])}else t=e;return e=t.ref,{$$typeof:So,type:r,key:o,ref:e!==void 0?e:null,props:t}}Ge.Fragment=Po;Ge.jsx=Gr;Ge.jsxs=Gr});var Zr=Ae((Ta,Yr)=>{"use strict";Yr.exports=$r()});var re=_(W(),1);var R=_(W(),1);var yr=_(Cr(),1);var{use:gr}=R.default,{useSyncExternalStore:Co}=yr.default,go=(r,e)=>{let t=(0,R.useRef)();(0,R.useEffect)(()=>{t.current=_t(r,e,!0)}),(0,R.useDebugValue)(t.current)},yo=new WeakMap;function wr(r,e){let t=e?.sync,o=(0,R.useRef)(),s=(0,R.useRef)(),n=!0,i=Co((0,R.useCallback)(p=>{let h=Dt(r,p,t);return p(),h},[r,t]),()=>{let p=Xe(r,gr);try{if(!n&&o.current&&s.current&&!Ut(o.current,p,s.current,new WeakMap))return o.current}catch{}return p},()=>Xe(r,gr));n=!1;let a=new WeakMap;(0,R.useEffect)(()=>{o.current=i,s.current=a}),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&go(i,a);let c=(0,R.useMemo)(()=>new WeakMap,[]);return Rt(i,a,c,yo)}function ut(r){let e=wr(l.state),t=r?.namespace||e.activeChain;if(!t)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};let o=e.chains.get(t)?.accountState,s=b.getAuthConnector(t),n=A.getConnectedConnectorId(t);return{allAccounts:o?.allAccounts||[],caipAddress:o?.caipAddress,address:N.getPlainAddress(o?.caipAddress),isConnected:!!o?.caipAddress,status:o?.status,embeddedWalletInfo:s&&n===m.CONNECTOR_ID.AUTH?{user:o?.user?{...o.user,username:A.getConnectedSocialUsername()}:void 0,authProvider:o?.socialProvider||"email",accountType:o?.preferredAccountTypes?.[t],isSmartAccountDeployed:!!o?.smartAccountDeployed}:void 0}}var X=class r{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n}){return r.instance||(r.instance=new Gt({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n})),r.instance}};var ee={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};var Pe=Ht({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function z(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}var dt=z({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});var ft=z({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});var ds=z({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});var ws=z({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),xs=z({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var wo={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},V={getMethodsByChainNamespace(r){return wo[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};let t={...r},o=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>o.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>o.add(s)),e.events&&Object.keys(e.events).forEach(s=>o.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{let[n]=s.split(":");n&&o.add(n)}),o.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,n])=>{t[s]&&(t[s].methods=n)}),e.chains&&Object.entries(e.chains).forEach(([s,n])=>{t[s]&&(t[s].chains=n)}),e.events&&Object.entries(e.events).forEach(([s,n])=>{t[s]&&(t[s].events=n)}),e.rpcMap){let s=new Set;Object.entries(e.rpcMap).forEach(([n,i])=>{let[a,c]=n.split(":");!a||!c||!t[a]||(t[a].rpcMap||(t[a].rpcMap={}),s.has(a)||(t[a].rpcMap={},s.add(a)),t[a].rpcMap[c]=i)})}return t},createNamespaces(r,e){let t=r.reduce((o,s)=>{let{id:n,chainNamespace:i,rpcUrls:a}=s,c=a.default.http[0];o[i]||(o[i]=this.createDefaultNamespace(i));let p=`${i}:${n}`,h=o[i];switch(h.chains.push(p),p){case dt.caipNetworkId:h.chains.push(dt.deprecatedCaipNetworkId);break;case ft.caipNetworkId:h.chains.push(ft.deprecatedCaipNetworkId);break;default:}return h?.rpcMap&&c&&(h.rpcMap[n]=c),o},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{let e=await Te.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{let t=e.chains||[],o=e.accounts.map(s=>{let[n,i]=s.split(":");return`${n}:${i}`});return Array.from(new Set([...t,...o]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null},isOriginAllowed(r,e,t){for(let o of[...e,...t])if(o.includes("*")){let n=`^${o.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(n,"u").test(r))return!0}else if(o===r)return!0;return!1}};var Y=class{constructor({provider:e,namespace:t}){this.id=m.CONNECTOR_ID.WALLET_CONNECT,this.name=j.ConnectorNamesMap[m.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=j.ConnectorImageIds[m.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=l.getCaipNetworks.bind(l),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let t=this.getCaipNetworks(),o=d.state.universalProviderConfigOverride,s=V.createNamespaces(t,o);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(t=>t.caipNetworkId);return jt.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xo})}},xo=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var te=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=t=>l.getCaipNetworks(t),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:m.CONNECTOR_ID.AUTH,type:"AUTH",name:m.CONNECTOR_NAMES.AUTH,provider:e,imageId:j.ConnectorImageIds[m.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(o=>t.has(o.id)?!1:(t.add(o.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){y.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let o=this.eventListeners.get(e);o&&o.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let o=this.eventListeners.get(e);o&&o.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:o}=e;if(!e.provider)return;let s="provider"in e.provider?e.provider.provider:e.provider;if(o==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&o==="AUTH"){let n=s,i=y.state.preferredAccountTypes?.[t.chainNamespace];await n.switchNetwork(t.caipNetworkId);let a=await n.getUser({chainId:t.caipNetworkId,preferredAccountType:i});this.emit("switchNetwork",a)}}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof Y);if(!e)throw new Error("WalletConnectConnector not found");return e}};var Oe=class extends te{setUniversalProvider(e){this.addConnector(new Y({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let o=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{let[,,n]=s.split(":");return n}).filter((s,n,i)=>i.indexOf(s)===n)||[];return Promise.resolve({accounts:o.map(s=>N.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&I.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(y.state.balanceLoading&&e.chainId===l.state.activeCaipNetwork?.id)return{balance:y.state.balance||"0.00",symbol:y.state.balanceSymbol||""};let s=(await y.fetchTokenBalance()).find(n=>n.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&n.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:o,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let n="";return l.state.activeCaipNetwork?.chainNamespace===m.CHAIN.SOLANA?n=(await t.request({method:"solana_signMessage",params:{message:Qt.encode(new TextEncoder().encode(o)),pubkey:s}},l.state.activeCaipNetwork?.caipNetworkId)).signature:n=await t.request({method:"personal_sign",params:[o,s]},l.state.activeCaipNetwork?.caipNetworkId),{signature:n}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,o=this.getWalletConnectConnector();if(t.chainNamespace===m.CHAIN.EVM)try{await o.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:rt(t.id)}]})}catch(s){if(s.code===ee.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===ee.ERROR_INVALID_CHAIN_ID||s.code===ee.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===ee.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await o.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:rt(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}o.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(o=>o.type==="WALLET_CONNECT")?.provider}};var vo=["email","socials","swaps","onramp","activity","reownBranding"],Re={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return!!r.isEnabled&&e.includes("email")},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.email:!!r},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.socials:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.socials:!1:r},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.swaps:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.swaps:!1:r},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.onramp:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.onramp:!1:r},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.activity:!!r},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.reownBranding:!!r}},xr={localSettingsOverridden:new Set,getApiConfig(r,e){return e?.find(t=>t.id===r)},addWarning(r,e){if(r!==void 0){let t=Re[e],o=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(o)}},processFeature(r,e,t,o){let s=Re[r],n=e[s.localFeatureName];if(o){let i=this.getApiConfig(s.apiFeatureName,t);return i?.config===null?this.processFallbackFeature(r,n):i?.config?(n!==void 0&&this.addWarning(n,r),this.processApiFeature(r,i)):!1}return this.processFallbackFeature(r,n)},processApiFeature(r,e){return Re[r].processApi(e)},processFallbackFeature(r,e){return Re[r].processFallback(e)},async fetchRemoteFeatures(r){let e=r.features||{};this.localSettingsOverridden.clear();let t=null,o=!1;try{t=await oe.fetchProjectConfig(),o=t!=null}catch(n){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",n)}let s=o?I.DEFAULT_REMOTE_FEATURES:I.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let n of vo){let i=this.processFeature(n,e,t,o);Object.assign(s,{[n]:i})}}catch(n){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",n),I.DEFAULT_REMOTE_FEATURES}if(o&&this.localSettingsOverridden.size>0){let n=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;S.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${n}`},"warning")}return s}};var Ue=class{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,o)=>{if(t){let s=l.getNetworkData(t)?.requestedCaipNetworks?.find(a=>a.id===o);if(s)return s;let n=l.getNetworkData(t)?.caipNetwork;return n||l.getRequestedCaipNetworks(t).filter(a=>a.chainNamespace===t)?.[0]}return l.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>l.getCaipNetworks(t),this.getActiveChainNamespace=()=>l.state.activeChain,this.setRequestedCaipNetworks=(t,o)=>{l.setRequestedCaipNetworks(t,o)},this.getApprovedCaipNetworkIds=()=>l.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>l.state.activeChain===t||!t?l.state.activeCaipAddress:l.getAccountProp("caipAddress",t),this.setClientId=t=>{st.setClientId(t)},this.getProvider=t=>v.getProvider(t),this.getProviderType=t=>v.getProviderId(t),this.getPreferredAccountType=t=>y.state.preferredAccountTypes?.[t],this.setCaipAddress=(t,o)=>{y.setCaipAddress(t,o),t&&d.state.enableEmbedded&&this.close()},this.setBalance=(t,o,s)=>{y.setBalance(t,o,s)},this.setProfileName=(t,o)=>{y.setProfileName(t,o)},this.setProfileImage=(t,o)=>{y.setProfileImage(t,o)},this.setUser=(t,o)=>{y.setUser(t,o)},this.resetAccount=t=>{y.resetAccount(t)},this.setCaipNetwork=t=>{l.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,o)=>{l.setChainNetworkData(o,{caipNetwork:t})},this.setAllAccounts=(t,o)=>{y.setAllAccounts(t,o),d.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,o)=>{y.setStatus(t,o),b.isConnected()?A.setConnectionStatus("connected"):A.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>l.getAccountProp("address",t),this.setConnectors=t=>{let o=[...b.state.allConnectors,...t];b.setConnectors(o)},this.setConnections=(t,o)=>{D.setConnections(t,o)},this.fetchIdentity=t=>st.fetchIdentity(t),this.getReownName=t=>Te.getNamesForAddress(t),this.getConnectors=()=>b.getConnectors(),this.getConnectorImage=t=>Lt.getConnectorImage(t),this.setConnectedWalletInfo=(t,o)=>{let s=v.getProviderId(o),n=t?{...t,type:s}:void 0;y.setConnectedWalletInfo(n,o)},this.getIsConnectedState=()=>!!l.state.activeCaipAddress,this.addAddressLabel=(t,o,s)=>{y.addAddressLabel(t,o,s)},this.removeAddressLabel=(t,o)=>{y.removeAddressLabel(t,o)},this.getAddress=t=>l.state.activeChain===t||!t?y.state.address:l.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>l.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{l.resetNetwork(t)},this.addConnector=t=>{b.addConnector(t)},this.resetWcConnection=()=>{D.resetWcConnection()},this.setAddressExplorerUrl=(t,o)=>{y.setAddressExplorerUrl(t,o)},this.setSmartAccountDeployed=(t,o)=>{y.setSmartAccountDeployed(t,o)},this.setSmartAccountEnabledNetworks=(t,o)=>{l.setSmartAccountEnabledNetworks(t,o)},this.setPreferredAccountType=(t,o)=>{y.setPreferredAccountType(t,o)},this.setEIP6963Enabled=t=>{d.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let o=e?.map(n=>n.namespace).filter(n=>!!n);if(o?.length)return[...new Set(o)];let s=t?.map(n=>n.chainNamespace);return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await xr.fetchRemoteFeatures(e),d.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&zt.setOnrampProviders(this.remoteFeatures.onramp),(d.state.remoteFeatures?.email||Array.isArray(d.state.remoteFeatures?.socials)&&d.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){let e=await oe.fetchAllowedOrigins();if(e&&N.isClient()){let t=window.location.origin;V.isOriginAllowed(t,e,ee.DEFAULT_ALLOWED_ANCESTORS)||S.open(k.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else S.open(k.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,J.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(o=>o.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&M.setThemeMode(e.themeMode),e.themeVariables&&M.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");l.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&l.setActiveCaipNetwork(t)}initializeConnectionController(e){D.setWcBasic(e.basic??!1)}initializeConnectorController(){b.initialize(this.chainNamespaces)}initializeProjectSettings(e){d.setProjectId(e.projectId),d.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){d.setDebug(e.debug!==!1),d.setEnableWalletConnect(e.enableWalletConnect!==!1),d.setEnableWalletGuide(e.enableWalletGuide!==!1),d.setEnableWallets(e.enableWallets!==!1),d.setEIP6963Enabled(e.enableEIP6963!==!1),d.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),d.setEnableAuthLogger(e.enableAuthLogger!==!1),d.setCustomRpcUrls(e.customRpcUrls),d.setEnableEmbedded(e.enableEmbedded),d.setAllWallets(e.allWallets),d.setIncludeWalletIds(e.includeWalletIds),d.setExcludeWalletIds(e.excludeWalletIds),d.setFeaturedWalletIds(e.featuredWalletIds),d.setTokens(e.tokens),d.setTermsConditionsUrl(e.termsConditionsUrl),d.setPrivacyPolicyUrl(e.privacyPolicyUrl),d.setCustomWallets(e.customWallets),d.setFeatures(e.features),d.setAllowUnsupportedChain(e.allowUnsupportedChain),d.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),d.setPreferUniversalLinks(e.experimental_preferUniversalLinks),d.setDefaultAccountTypes(e.defaultAccountTypes);let t=A.getPreferredAccountTypes()||{},o={...d.state.defaultAccountTypes,...t};y.setPreferredAccountTypes(o);let s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),d.setMetadata(e.metadata),d.setDisableAppend(e.disableAppend),d.setEnableEmbedded(e.enableEmbedded),d.setSIWX(e.siwx),!e.projectId){S.open(k.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===m.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");d.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return N.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let o=L.getUnsupportedNetwork(`${t}:${e}`);l.setActiveCaipNetwork(o)}}getDefaultNetwork(){return L.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return L.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return L.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(s=>s.id===e.defaultNetwork?.id);return t?L.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=l.state.activeChain,t=this.getAdapter(e),o=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");let s=await t.connectWalletConnect(o);this.close(),this.setClientId(s?.clientId||null),A.setConnectedNamespaces([...l.state.chains.keys()]),this.chainNamespaces.forEach(n=>{b.setConnectorId(O.CONNECTOR_TYPE_WALLET_CONNECT,n)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:o,provider:s,chain:n,caipNetwork:i,socialUri:a})=>{let c=l.state.activeChain,p=n||c,h=this.getAdapter(p);if(n&&n!==c&&!i){let w=this.getCaipNetworks().find(E=>E.chainNamespace===n);w&&this.setCaipNetwork(w)}if(!h)throw new Error("Adapter not found");let u=this.getCaipNetwork(p),f=await h.connect({id:e,info:t,type:o,provider:s,socialUri:a,chainId:i?.id||u?.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]||u?.rpcUrls?.default?.http?.[0]});if(!f)return;A.addConnectedNamespace(p),this.syncProvider({...f,chainNamespace:p});let g=y.state.allAccounts,{accounts:C}=g?.length>0?{accounts:[...g]}:await h.getAccounts({namespace:p,id:e});this.setAllAccounts(C,p),this.setStatus("connected",p),this.syncConnectedWalletInfo(p)},reconnectExternal:async({id:e,info:t,type:o,provider:s})=>{let n=l.state.activeChain,i=this.getAdapter(n);i?.reconnect&&(await i?.reconnect({id:e,info:t,type:o,provider:s,chainId:this.getCaipNetwork()?.id}),A.addConnectedNamespace(n),this.syncConnectedWalletInfo(n))},disconnect:async e=>{let t=e||l.state.activeChain,o=this.getAdapter(t),s=v.getProvider(t),n=v.getProviderId(t);await o?.disconnect({provider:s,providerType:n}),A.removeConnectedNamespace(t),v.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(l.state.activeChain)?.signMessage({message:e,address:y.state.address,provider:v.getProvider(l.state.activeChain)}))?.signature||"",sendTransaction:async e=>{let t=e.chainNamespace;if(I.SEND_SUPPORTED_NAMESPACES.includes(t)){let o=this.getAdapter(l.state.activeChain),s=v.getProvider(t);return(await o?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===m.CHAIN.EVM){let t=this.getAdapter(l.state.activeChain),o=v.getProvider(l.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:o,caipNetwork:s}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:y.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:l.state.activeChain}),y.state.profileImage||!1),getEnsAddress:async e=>await V.resolveReownName(e),writeContract:async e=>{let t=this.getAdapter(l.state.activeChain),o=this.getCaipNetwork(),s=this.getCaipAddress(),n=v.getProvider(l.state.activeChain);if(!o||!s)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:o,provider:n,caipAddress:s}))?.hash},parseUnits:(e,t)=>this.getAdapter(l.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(l.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(l.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(l.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{let t=this.getAdapter(l.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(l.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{let t=this.getCaipNetwork(e);!t||!y.state.address||this.updateNativeBalance(y.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},D.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(v.getProviderId(l.state.activeChain)===O.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let s=v.getProvider(t),n=v.getProviderId(t);if(e.chainNamespace===l.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:s,providerType:n});else if(this.setCaipNetwork(e),n===O.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let o=t.chains||[],s=t.accounts.map(n=>{let{chainId:i,chainNamespace:a}=K.parseCaipAddress(n);return`${a}:${i}`});return Array.from(new Set([...o,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,o)=>{let s=e?.find(n=>n.namespace===o);return s?(s.construct({namespace:o,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[o]=s):t[o]=new Oe({namespace:o,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let o=A.getConnectionStatus();o==="connected"?this.setStatus("connecting",e):o==="disconnected"?(A.clearAddressCache(),this.setStatus(o,e)):this.setStatus(o,e),t.on("switchNetwork",({address:s,chainId:n})=>{let i=this.getCaipNetworks().find(p=>p.id===n||p.caipNetworkId===n),a=l.state.activeChain===e,c=l.getAccountProp("address",e);if(i){let p=a&&s?s:c;p&&this.syncAccount({address:p,chainId:i.id,chainNamespace:e})}else this.setUnsupportedNetwork(n)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{let s=y.state.address,n=l.state.activeCaipNetwork;!s||!n?.id||this.updateNativeBalance(s,n.id,n.chainNamespace)}),t.on("accountChanged",({address:s,chainId:n})=>{let i=l.state.activeChain===e;i&&n?this.syncAccount({address:s,chainId:n,chainNamespace:e}):i&&l.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:l.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,n,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=b.getConnectorId(e);switch(this.setStatus("connecting",e),t){case m.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case m.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),o=b.getConnectorId(e),s=this.getCaipNetwork(e),n=b.getConnectors(e).find(i=>i.id===o);try{if(!t||!n)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");let i=await t?.syncConnection({namespace:e,id:n.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});if(i){let a=await t?.getAccounts({namespace:e,id:n.id});a&&a.accounts.length>0?this.setAllAccounts(a.accounts,e):this.setAllAccounts([N.createAccount(e,i.address,"eoa")],e),this.syncProvider({...i,chainNamespace:e}),await this.syncAccount({...i,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async t=>{let o=this.getAdapter(t),s=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],n=l.state.activeCaipNetwork?.id,i=s.find(a=>{let{chainId:c}=K.parseCaipAddress(a);return c===n?.toString()})||s[0];if(i){let a=K.validateCaipAddress(i),{chainId:c,address:p}=K.parseCaipAddress(a);if(v.setProviderId(t,O.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&l.state.activeCaipNetwork&&o?.namespace!==m.CHAIN.EVM){let h=o?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:l.state.activeCaipNetwork});v.setProvider(t,h)}else v.setProvider(t,this.universalProvider);b.setConnectorId(m.CONNECTOR_ID.WALLET_CONNECT,t),A.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:p,chainId:c,chainNamespace:t})}else this.setStatus("disconnected",t);this.syncConnectedWalletInfo(t),await l.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(o=>{let{address:s}=K.parseCaipAddress(o);return s}).filter((o,s,n)=>n.indexOf(o)===s);t&&this.setAllAccounts(t.map(o=>N.createAccount(e,o,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:o,chainNamespace:s}){v.setProviderId(s,e),v.setProvider(s,t),b.setConnectorId(o,s)}async syncAllAccounts(e){let t=b.getConnectorId(e);if(!t)return;let s=await this.getAdapter(e)?.getAccounts({namespace:e,id:t});s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){let t=e.chainNamespace===l.state.activeChain,o=l.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:n,chainNamespace:i}=e,{chainId:a}=A.getActiveNetworkProps(),c=n||a,p=l.state.activeCaipNetwork?.name===m.UNSUPPORTED_NETWORK_NAME,h=l.getNetworkProp("supportsAllNetworks",i);if(this.setStatus("connected",i),!(p&&!h)&&c){let u=this.getCaipNetworks().find(C=>C.id.toString()===c.toString()),f=this.getCaipNetworks().find(C=>C.chainNamespace===i);if(!h&&!u&&!f){let C=this.getApprovedCaipNetworkIds()||[],w=C.find(x=>K.parseCaipNetworkId(x)?.chainId===c.toString()),E=C.find(x=>K.parseCaipNetworkId(x)?.chainNamespace===i);u=this.getCaipNetworks().find(x=>x.caipNetworkId===w),f=this.getCaipNetworks().find(x=>x.caipNetworkId===E||"deprecatedCaipNetworkId"in x&&x.deprecatedCaipNetworkId===E)}let g=u||f;g?.chainNamespace===l.state.activeChain?d.state.enableNetworkSwitch&&!d.state.allowUnsupportedChain&&l.state.activeCaipNetwork?.name===m.UNSUPPORTED_NETWORK_NAME?l.showUnsupportedChainUI():this.setCaipNetwork(g):t||o&&this.setCaipNetworkOfNamespace(o,i),this.syncConnectedWalletInfo(i),be.isLowerCaseMatch(s,y.state.address)||this.syncAccountInfo(s,g?.id,i),t?await this.syncBalance({address:s,chainId:g?.id,chainNamespace:i}):await this.syncBalance({address:s,chainId:o?.id,chainNamespace:i})}}async syncAccountInfo(e,t,o){let s=this.getCaipAddress(o),n=t||s?.split(":")[1];if(!n)return;let i=`${o}:${n}:${e}`;this.setCaipAddress(i,o),await this.syncIdentity({address:e,chainId:n,chainNamespace:o})}async syncReownName(e,t){try{let o=await this.getReownName(e);if(o[0]){let s=o[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=b.getConnectorId(e),o=v.getProviderId(e);if(o===O.CONNECTOR_TYPE_ANNOUNCED||o===O.CONNECTOR_TYPE_INJECTED){if(t){let s=this.getConnectors().find(n=>n.id===t);if(s){let{info:n,name:i,imageUrl:a}=s,c=a||this.getConnectorImage(s);this.setConnectedWalletInfo({name:i,icon:c,...n},e)}}}else if(o===O.CONNECTOR_TYPE_WALLET_CONNECT){let s=v.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(t&&t===m.CONNECTOR_ID.COINBASE){let s=this.getConnectors().find(n=>n.id===m.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}}async syncBalance(e){!Z.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(o=>o.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,o){let s=this.getAdapter(o),n=l.getCaipNetworkByNamespace(o,t);if(s){let i=await s.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});return this.setBalance(i.balance,i.symbol,o),i}}async initializeUniversalAdapter(){let e=Vt.createLogger((o,...s)=>{o&&this.handleAlertError(o),console.error(...s)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};d.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await qt.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{D.setUri(e)}),this.universalProvider.on("connect",D.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),D.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(s=>s.id==e),o=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}o?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(V.isSessionEventData(e)){let{name:t,data:o}=e.params.event;t==="accountsChanged"&&Array.isArray(o)&&N.isCaipAddress(o[0])&&this.syncAccount(K.parseCaipAddress(o[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&N.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){J.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let t=Object.entries(k.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[o,s]=t??[],{message:n,alertErrorKey:i}=s??{};if(o&&n&&!this.reportedAlertErrors[o]){let a=k.ALERT_ERRORS[i];a&&(S.open(a,"error"),this.reportedAlertErrors[o]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let o=e;o.namespace=t,o.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=o)}async open(e){if(await this.injectModalUi(),e?.uri&&D.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return ne.open({...e,data:{swap:e.arguments}});default:}return ne.open(e)}async close(){await this.injectModalUi(),ne.close()}setLoading(e,t){ne.setLoading(e,t)}async disconnect(e){await D.disconnect(e)}getSIWX(){return d.state.siwx}getError(){return""}getChainId(){return l.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(o=>o.id===e.id);if(!t){S.open(k.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await l.switchActiveNetwork(t)}getWalletProvider(){return l.state.activeChain?v.state.providers[l.state.activeChain]:null}getWalletProviderType(){return v.getProviderId(l.state.activeChain)}subscribeProviders(e){return v.subscribeProviders(e)}getThemeMode(){return M.state.themeMode}getThemeVariables(){return M.state.themeVariables}setThemeMode(e){M.setThemeMode(e),Yt(M.state.themeMode)}setTermsConditionsUrl(e){d.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){d.setPrivacyPolicyUrl(e)}setThemeVariables(e){M.setThemeVariables(e),Zt(M.state.themeVariables)}subscribeTheme(e){return M.subscribe(e)}getWalletInfo(){return y.state.connectedWalletInfo}getAccount(e){let t=b.getAuthConnector(e),o=l.getAccountData(e),s=l.state.activeChain,n=A.getConnectedConnectorId(e);if(o)return{allAccounts:o.allAccounts,caipAddress:o.caipAddress,address:N.getPlainAddress(o.caipAddress),isConnected:!!o.caipAddress,status:o.status,embeddedWalletInfo:t&&n===m.CONNECTOR_ID.AUTH?{user:o.user?{...o.user,username:A.getConnectedSocialUsername()}:void 0,authProvider:o.socialProvider||"email",accountType:o.preferredAccountTypes?.[e||s],isSmartAccountDeployed:!!o.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let o=()=>{let s=this.getAccount(t);s&&e(s)};t?l.subscribeChainProp("accountState",o,t):l.subscribe(o),b.subscribe(o)}subscribeNetwork(e){return l.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return y.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){y.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){l.subscribeKey("activeCaipNetwork",e)}getState(){return se.state}subscribeState(e){return se.subscribe(e)}showErrorMessage(e){tt.showError(e)}showSuccessMessage(e){tt.showSuccess(e)}getEvent(){return{...J.state}}subscribeEvents(e){return J.subscribe(e)}replace(e){de.replace(e)}redirect(e){de.push(e)}popTransactionStack(e){de.popTransactionStack(e)}isOpen(){return ne.state.open}isTransactionStackEmpty(){return de.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){d.setFeatures(e)}updateRemoteFeatures(e){d.setRemoteFeatures(e)}updateOptions(e){let o={...d.state||{},...e};d.setOptions(o)}setConnectMethodsOrder(e){d.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){d.setWalletFeaturesOrder(e)}setCollapseWallets(e){d.setCollapseWallets(e)}setSocialsOrder(e){d.setSocialsOrder(e)}getConnectMethodsOrder(){return $t.getConnectOrderMethod(d.state.features,b.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let o=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===o.id)||l.addNetwork(o)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&l.removeNetwork(e,t)}};var vr=!1,he=class extends Ue{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{ke.checkIfRequestExists(t)?ke.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(et.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(et.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,o)=>{let s=ke.checkIfRequestIsSafe(o),n=y.state.address,i=l.state.activeCaipNetwork;s||(n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{let t=l.state.activeChain;b.getConnectorId(t)===m.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(t=>{let o=l.state.activeChain,s=o===m.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,n=d.state.defaultAccountTypes[o],i=y.state.preferredAccountTypes?.[o],a=t.preferredAccountType||i||n;be.isLowerCaseMatch(t.address,y.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:o}),this.setCaipAddress(s,o),this.setUser({...y.state.user||{},...t},o),this.setSmartAccountDeployed(!!t.smartAccountDeployed,o),this.setPreferredAccountType(a,o);let c=t.accounts?.map(p=>N.createAccount(o,p.address,p.type||i||n));this.setAllAccounts(c||[N.createAccount(o,t.address,t.preferredAccountType||a)],o),this.setLoading(!1,o)}),e.onSocialConnected(({userName:t})=>{this.setUser({...y.state.user||{},username:t},l.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,l.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:o})=>{t&&this.setPreferredAccountType(o,l.state.activeChain)})}async syncAuthConnector(e,t){let o=m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!o)return;this.setLoading(!0,t);let s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);let n=e.getEmail(),i=e.getUsername();this.setUser({...y.state?.user||{},username:i,email:n},l.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:a}=await e.isConnected(),c=M.getSnapshot(),p=d.getSnapshot();await Promise.all([e.syncDappData({metadata:p.metadata,sdkVersion:p.sdkVersion,projectId:p.projectId,sdkType:p.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Wt(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),t&&o&&(a&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:m.CONNECTOR_ID.AUTH,info:{name:m.CONNECTOR_ID.AUTH},type:O.CONNECTOR_TYPE_AUTH,provider:e,chainId:l.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):b.getConnectorId(t)===m.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),A.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!N.isTelegram())return;let t=A.getTelegramSocialProvider();if(!t||!N.isClient())return;let s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;y.setSocialProvider(t,e),await this.authProvider?.init();let n=b.getAuthConnector();t&&n&&(this.setLoading(!0,e),await D.connectExternal({id:n.id,type:n.type,socialUri:s},n.chain),A.setConnectedSocialProvider(t),A.removeTelegramSocialProvider(),J.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let o=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,n=o||s;!this.authProvider&&this.options?.projectId&&n&&(this.authProvider=X.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:k.EmbeddedWalletAbortController,onTimeout:i=>{i==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):i==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):i==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),se.subscribeOpen(i=>{!i&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&oe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=l.state.activeChain,o=e.chainNamespace,s=this.getAddressByChainNamespace(o);if(o===t&&s){let i=this.getAdapter(o),a=v.getProvider(o),c=v.getProviderId(o);await i?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{let a=v.getProviderId(t)===O.CONNECTOR_TYPE_AUTH,c=v.getProviderId(o),p=c===O.CONNECTOR_TYPE_AUTH,h=m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(o);if((a&&c===void 0||p)&&h)try{l.state.activeChain=e.chainNamespace,s?await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:m.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:o,chainId:e.id,type:O.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else c===O.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:o}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t),this.chainAdapters?.[t].syncConnectors(this.options,this)}),await this.injectModalUi(),se.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:o}){let s=`${o}:${t}`,n=this.caipNetworks?.find(i=>i.caipNetworkId===s);if(o!==m.CHAIN.EVM||n?.testnet){this.setProfileName(null,o),this.setProfileImage(null,o);return}try{let{name:i,avatar:a}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(i,o),this.setProfileImage(a,o)}catch{await this.syncReownName(e,o),t!==1&&this.setProfileImage(null,o)}}syncConnectedWalletInfo(e){let t=v.getProviderId(e);if(t===O.CONNECTOR_TYPE_AUTH){let o=this.authProvider;if(o){let s=A.getConnectedSocialProvider()??"email",n=o.getEmail()??o.getUsername();this.setConnectedWalletInfo({name:t,identifier:n,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(N.isClient()&&!vr)try{let e={...I.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),N.isClient()&&!document.querySelector("w3m-modal")){let s=document.createElement("w3m-modal");!d.state.disableAppend&&!d.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}vr=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!N.isClient())return;let o=[];(t.email||t.socials&&t.socials.length>0)&&o.push(import("./embedded-wallet-F7SBYATN.js")),t.email&&o.push(import("./email-S7RH4J5X.js")),t.socials&&o.push(import("./socials-REPFUPJR.js")),t.swaps&&t.swaps.length>0&&o.push(import("./swaps-UTOZVTWG.js")),e.send&&o.push(import("./send-YEACM4X4.js")),e.receive&&o.push(import("./receive-XCFNYEGR.js")),t.onramp&&t.onramp.length>0&&o.push(import("./onramp-KKCORU3Q.js")),t.activity&&o.push(import("./transactions-P3LOP6EQ.js")),e.pay&&o.push(import("./exports-4E3YLAIP.js")),await Promise.all([...o,import("./exports-IUQ75R37.js"),import("./w3m-modal-U4PUARBF.js")])}};var ht=_(W(),1);var _e;function Ar(r){r&&(_e=r)}function Er(){if(!_e)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function r(t){await _e?.open(t)}async function e(){await _e?.close()}return{open:r,close:e}}var mt="1.7.7";var Me;function Nr(r){return Me||(Me=new he({...r,sdkVersion:N.generateSdkVersion(r.adapters??[],"react",mt)}),Ar(Me)),Me}var me=_(W(),1);var De=_(W(),1);function Tr(r){let{children:e,config:t,initialState:o,reconnectOnMount:s=!0}=r,{onMount:n}=dr(t,{initialState:o,reconnectOnMount:s});t._internal.ssr||n();let i=(0,De.useRef)(!0);return(0,De.useEffect)(()=>{if(i.current&&t._internal.ssr)return n(),()=>{i.current=!1}},[]),e}var Ce=(0,me.createContext)(void 0);function Fe(r){let{children:e,config:t}=r,o={value:t};return(0,me.createElement)(Tr,r,(0,me.createElement)(Ce.Provider,o,e))}var br="2.15.4";var kr=()=>`wagmi@${br}`;var We=class extends Jt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return kr()}};var Le=class extends We{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}};var Ir=_(W(),1);function ae(r={}){let e=r.config??(0,Ir.useContext)(Ce);if(!e)throw new Le;return e}var B=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var G=typeof window>"u"||"Deno"in globalThis;function P(){}function Or(r,e){return typeof r=="function"?r(e):r}function Rr(r){return typeof r=="number"&&r>=0&&r!==1/0}function Ur(r,e){return Math.max(r+(e||0)-Date.now(),0)}function ge(r,e){return typeof r=="function"?r(e):r}function _r(r,e){return typeof r=="function"?r(e):r}function Qe(r,e){let{type:t="all",exact:o,fetchStatus:s,predicate:n,queryKey:i,stale:a}=r;if(i){if(o){if(e.queryHash!==ye(i,e.options))return!1}else if(!ce(e.queryKey,i))return!1}if(t!=="all"){let c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||n&&!n(e))}function qe(r,e){let{exact:t,status:o,predicate:s,mutationKey:n}=r;if(n){if(!e.options.mutationKey)return!1;if(t){if(H(e.options.mutationKey)!==H(n))return!1}else if(!ce(e.options.mutationKey,n))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function ye(r,e){return(e?.queryKeyHashFn||H)(r)}function H(r){return JSON.stringify(r,(e,t)=>Ct(t)?Object.keys(t).sort().reduce((o,s)=>(o[s]=t[s],o),{}):t)}function ce(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ce(r[t],e[t])):!1}function gt(r,e){if(r===e)return r;let t=Sr(r)&&Sr(e);if(t||Ct(r)&&Ct(e)){let o=t?r:Object.keys(r),s=o.length,n=t?e:Object.keys(e),i=n.length,a=t?[]:{},c=0;for(let p=0;p<i;p++){let h=t?p:n[p];(!t&&o.includes(h)||t)&&r[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=gt(r[h],e[h]),a[h]===r[h]&&r[h]!==void 0&&c++)}return s===i&&c===s?r:a}return e}function Mr(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}function Sr(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Ct(r){if(!Pr(r))return!1;let e=r.constructor;if(e===void 0)return!0;let t=e.prototype;return!(!Pr(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Pr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Dr(r){return new Promise(e=>{setTimeout(e,r)})}function Fr(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?gt(r,e):e}function Wr(r,e,t=0){let o=[...r,e];return t&&o.length>t?o.slice(1):o}function Lr(r,e,t=0){let o=[e,...r];return t&&o.length>t?o.slice(0,-1):o}var le=Symbol();function je(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===le?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function yt(r,e){return typeof r=="function"?r(...e):!!r}var Ao=class extends B{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!G&&window.addEventListener){let e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){let r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Be=new Ao;var Eo=class extends B{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!G&&window.addEventListener){let e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},pe=new Eo;function Qr(){let r,e,t=new Promise((s,n)=>{r=s,e=n});t.status="pending",t.catch(()=>{});function o(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{o({status:"fulfilled",value:s}),r(s)},t.reject=s=>{o({status:"rejected",reason:s}),e(s)},t}function No(r){return Math.min(1e3*2**r,3e4)}function wt(r){return(r??"online")==="online"?pe.isOnline():!0}var qr=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function He(r){return r instanceof qr}function Ke(r){let e=!1,t=0,o=!1,s,n=Qr(),i=w=>{o||(f(new qr(w)),r.abort?.())},a=()=>{e=!0},c=()=>{e=!1},p=()=>Be.isFocused()&&(r.networkMode==="always"||pe.isOnline())&&r.canRun(),h=()=>wt(r.networkMode)&&r.canRun(),u=w=>{o||(o=!0,r.onSuccess?.(w),s?.(),n.resolve(w))},f=w=>{o||(o=!0,r.onError?.(w),s?.(),n.reject(w))},g=()=>new Promise(w=>{s=E=>{(o||p())&&w(E)},r.onPause?.()}).then(()=>{s=void 0,o||r.onContinue?.()}),C=()=>{if(o)return;let w,E=t===0?r.initialPromise:void 0;try{w=E??r.fn()}catch(x){w=Promise.reject(x)}Promise.resolve(w).then(u).catch(x=>{if(o)return;let U=r.retry??(G?0:3),q=r.retryDelay??No,F=typeof q=="function"?q(t,x):q,Ze=U===!0||typeof U=="number"&&t<U||typeof U=="function"&&U(t,x);if(e||!Ze){f(x);return}t++,r.onFail?.(t,x),Dr(F).then(()=>p()?void 0:g()).then(()=>{e?f(x):C()})})};return{promise:n,cancel:i,continue:()=>(s?.(),n),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?C():g().then(C),n)}}var jr=r=>setTimeout(r,0);function To(){let r=[],e=0,t=a=>{a()},o=a=>{a()},s=jr,n=a=>{e?r.push(a):s(()=>{t(a)})},i=()=>{let a=r;r=[],a.length&&s(()=>{o(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||i()}return c},batchCalls:a=>(...c)=>{n(()=>{a(...c)})},schedule:n,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{o=a},setScheduler:a=>{s=a}}}var T=To();var ze=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rr(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(G?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var Br=class extends ze{#e;#t;#r;#o;#s;#i;#a;constructor(r){super(),this.#a=!1,this.#i=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#o=r.client,this.#r=this.#o.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=ko(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(r){this.options={...this.#i,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){let t=Fr(this.state.data,r,this.options);return this.#n({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#n({type:"setState",state:r,setStateOptions:e})}cancel(r){let e=this.#s?.promise;return this.#s?.cancel(r),e?e.then(P).catch(P):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>_r(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===le||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>ge(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Ur(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(r&&this.setOptions(r),!this.options.queryFn){let a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}let t=new AbortController,o=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},s=()=>{let a=je(this.options,e),c={client:this.#o,queryKey:this.queryKey,meta:this.meta};return o(c),this.#a=!1,this.options.persister?this.options.persister(a,c,this):a(c)},n={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:s};o(n),this.options.behavior?.onFetch(n,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==n.fetchOptions?.meta)&&this.#n({type:"fetch",meta:n.fetchOptions?.meta});let i=a=>{He(a)&&a.silent||this.#n({type:"error",error:a}),He(a)||(this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#s=Ke({initialPromise:e?.initialPromise,fn:n.fetchFn,abort:t.abort.bind(t),onSuccess:a=>{if(a===void 0){i(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(c){i(c);return}this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:i,onFail:(a,c)=>{this.#n({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0}),this.#s.start()}#n(r){let e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...bo(t.data,this.options),fetchMeta:r.meta??null};case"success":return{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let o=r.error;return He(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),T.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function bo(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wt(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ko(r){let e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,o=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Hr=class extends B{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){let o=e.queryKey,s=e.queryHash??ye(o,e),n=this.get(s);return n||(n=new Br({client:r,queryKey:o,queryHash:s,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(o)}),this.add(n)),n}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){let e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){T.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Qe(e,t))}findAll(r={}){let e=this.getAll();return Object.keys(r).length>0?e.filter(t=>Qe(r,t)):e}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){T.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}};var Kr=class extends ze{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||xt(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){let e=()=>{this.#o({type:"continue"})};this.#r=Ke({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(s,n)=>{this.#o({type:"failed",failureCount:s,error:n})},onPause:()=>{this.#o({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t=this.state.status==="pending",o=!this.#r.canStart();try{if(t)e();else{this.#o({type:"pending",variables:r,isPaused:o}),await this.#t.config.onMutate?.(r,this);let n=await this.options.onMutate?.(r);n!==this.state.context&&this.#o({type:"pending",context:n,variables:r,isPaused:o})}let s=await this.#r.start();return await this.#t.config.onSuccess?.(s,r,this.state.context,this),await this.options.onSuccess?.(s,r,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,r,this.state.context),this.#o({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,r,this.state.context,this),await this.options.onError?.(s,r,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,r,this.state.context),s}finally{this.#o({type:"error",error:s})}}finally{this.#t.runNext(this)}}#o(r){let e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),T.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function xt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zr=class extends B{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){let o=new Kr({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(o),o}add(r){this.#e.add(r);let e=Ve(r);if(typeof e=="string"){let t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){let e=Ve(r);if(typeof e=="string"){let t=this.#t.get(e);if(t)if(t.length>1){let o=t.indexOf(r);o!==-1&&t.splice(o,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){let e=Ve(r);if(typeof e=="string"){let o=this.#t.get(e)?.find(s=>s.state.status==="pending");return!o||o===r}else return!0}runNext(r){let e=Ve(r);return typeof e=="string"?this.#t.get(e)?.find(o=>o!==r&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){T.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){let e={exact:!0,...r};return this.getAll().find(t=>qe(e,t))}findAll(r={}){return this.getAll().filter(e=>qe(r,e))}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){let r=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(r.map(e=>e.continue().catch(P))))}};function Ve(r){return r.options.scope?.id}function vt(r){return{onFetch:(e,t)=>{let o=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],i=e.state.data?.pageParams||[],a={pages:[],pageParams:[]},c=0,p=async()=>{let h=!1,u=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},f=je(e.options,e.fetchOptions),g=async(C,w,E)=>{if(h)return Promise.reject();if(w==null&&C.pages.length)return Promise.resolve(C);let x={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};u(x);let U=await f(x),{maxPages:q}=e.options,F=E?Lr:Wr;return{pages:F(C.pages,U,q),pageParams:F(C.pageParams,w,q)}};if(s&&n.length){let C=s==="backward",w=C?Io:Vr,E={pages:n,pageParams:i},x=w(o,E);a=await g(E,x,C)}else{let C=r??n.length;do{let w=c===0?i[0]??o.initialPageParam:Vr(o,a);if(c>0&&w==null)break;a=await g(a,w),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function Vr(r,{pages:e,pageParams:t}){let o=e.length-1;return e.length>0?r.getNextPageParam(e[o],e,t[o],t):void 0}function Io(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var At=class{#e;#t;#r;#o;#s;#i;#a;#n;constructor(r={}){this.#e=r.queryCache||new Hr,this.#t=r.mutationCache||new zr,this.#r=r.defaultOptions||{},this.#o=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=Be.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=pe.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(r){return this.#e.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#t.findAll({...r,status:"pending"}).length}getQueryData(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(r){let e=this.defaultQueryOptions(r),t=this.#e.build(this,e),o=t.state.data;return o===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(ge(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(r){return this.#e.findAll(r).map(({queryKey:e,state:t})=>{let o=t.data;return[e,o]})}setQueryData(r,e,t){let o=this.defaultQueryOptions({queryKey:r}),n=this.#e.get(o.queryHash)?.state.data,i=Or(e,n);if(i!==void 0)return this.#e.build(this,o).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return T.batch(()=>this.#e.findAll(r).map(({queryKey:o})=>[o,this.setQueryData(o,e,t)]))}getQueryState(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state}removeQueries(r){let e=this.#e;T.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){let t=this.#e;return T.batch(()=>(t.findAll(r).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){let t={revert:!0,...e},o=T.batch(()=>this.#e.findAll(r).map(s=>s.cancel(t)));return Promise.all(o).then(P).catch(P)}invalidateQueries(r,e={}){return T.batch(()=>(this.#e.findAll(r).forEach(t=>{t.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},e)))}refetchQueries(r,e={}){let t={...e,cancelRefetch:e.cancelRefetch??!0},o=T.batch(()=>this.#e.findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let n=s.fetch(void 0,t);return t.throwOnError||(n=n.catch(P)),s.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(o).then(P)}fetchQuery(r){let e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);let t=this.#e.build(this,e);return t.isStaleByTime(ge(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(P).catch(P)}fetchInfiniteQuery(r){return r.behavior=vt(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(P).catch(P)}ensureInfiniteQueryData(r){return r.behavior=vt(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return pe.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(r){this.#r=r}setQueryDefaults(r,e){this.#o.set(H(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){let e=[...this.#o.values()],t={};return e.forEach(o=>{ce(r,o.queryKey)&&Object.assign(t,o.defaultOptions)}),t}setMutationDefaults(r,e){this.#s.set(H(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){let e=[...this.#s.values()],t={};return e.forEach(o=>{ce(r,o.mutationKey)&&Object.assign(t,o.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;let e={...this.#r.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=ye(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===le&&(e.enabled=!1),e}defaultMutationOptions(r){return r?._defaulted?r:{...this.#r.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};var Et=class extends B{#e;#t=void 0;#r;#o;constructor(r,e){super(),this.#e=r,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){let e=this.options;this.options=this.#e.defaultMutationOptions(r),Mr(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&H(e.mutationKey)!==H(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#s(),this.#i(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(r,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#s(){let r=this.#r?.state??xt();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#i(r){T.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#t.variables,t=this.#t.context;r?.type==="success"?(this.#o.onSuccess?.(r.data,e,t),this.#o.onSettled?.(r.data,null,e,t)):r?.type==="error"&&(this.#o.onError?.(r.error,e,t),this.#o.onSettled?.(void 0,r.error,e,t))}this.listeners.forEach(e=>{e(this.#t)})})}};function Nt(r){return{mutationFn(e){return Ie(r,e)},mutationKey:["disconnect"]}}function Tt(r){return{mutationFn(e){return Se(r,e)},mutationKey:["signMessage"]}}var ue=_(W(),1),Jr=_(Zr(),1),bt=ue.createContext(void 0),kt=r=>{let e=ue.useContext(bt);if(r)return r;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},It=({client:r,children:e})=>(ue.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),(0,Jr.jsx)(bt.Provider,{value:r,children:e}));var $=_(W(),1);function we(r,e){let t=kt(e),[o]=$.useState(()=>new Et(t,r));$.useEffect(()=>{o.setOptions(r)},[o,r]);let s=$.useSyncExternalStore($.useCallback(i=>o.subscribe(T.batchCalls(i)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),n=$.useCallback((i,a)=>{o.mutate(i,a).catch(P)},[o]);if(s.error&&yt(o.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:n,mutateAsync:s.mutate}}var Xr=_(W(),1);function eo(r={}){let e=ae(r);return(0,Xr.useSyncExternalStore)(t=>nr(e,{onChange:t}),()=>Q(e),()=>Q(e))}function St(r={}){let{mutation:e}=r,t=ae(r),o=Nt(t),{mutate:s,mutateAsync:n,...i}=we({...e,...o});return{...i,connectors:eo({config:t}).map(a=>a.connector),disconnect:s,disconnectAsync:n}}function Pt(r={}){let{mutation:e}=r,t=ae(r),o=Tt(t),{mutate:s,mutateAsync:n,...i}=we({...e,...o});return{...i,signMessage:s,signMessageAsync:n}}function to(r){let e=[],t,o;function s(a){return Z.parseEvmChainId(a)||1}function n(){return t||(t=X.getInstance({projectId:r.options.projectId,chainId:l.getActiveCaipNetwork()?.caipNetworkId,enableLogger:r.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:k.EmbeddedWalletAbortController})),t}async function i(a={}){let c=n(),p=a.chainId;if(a.isReconnecting){let w=Z.parseEvmChainId(c.getLastUsedChainId()||""),E=r.chains?.[0].id;if(p=w||E,!p)throw new Error("ChainId not found in provider")}let h=y.state.preferredAccountTypes?.eip155,{address:u,chainId:f,accounts:g}=await c.connect({chainId:p,preferredAccountType:h,socialUri:a.socialUri});e=g?.map(w=>w.address)||[u];let C=s(f);return{accounts:e,account:u,chainId:C,chain:{id:C,unsuported:!1}}}return a=>({id:m.CONNECTOR_ID.AUTH,name:m.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:m.CHAIN.EVM,async connect(c={}){if(o)return o;o||(o=new Promise(h=>{h(i(c))}));let p=await o;return o=void 0,p},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=X.getInstance({projectId:r.options.projectId,chainId:l.getActiveCaipNetwork()?.caipNetworkId,enableLogger:r.options.enableAuthLogger,abortController:k.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){let c=await this.getProvider(),{chainId:p}=await c.getChainId();return s(p)},async isAuthorized(){let c=await this.getProvider();return Promise.resolve(c.getLoginEmailUsed())},async switchChain({chainId:c}){try{let p=a.chains.find(g=>g.id===c);if(!p)throw new fe(new Error("chain not found on connector."));let h=await this.getProvider(),u=y.state.preferredAccountTypes?.eip155,f=await h.connect({chainId:c,preferredAccountType:u});return e=f?.accounts?.map(g=>g.address)||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),p}catch(p){throw p instanceof Error?new fe(p):p}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ee)})},onChainChanged(c){let p=Number(c);a.emitter.emit("change",{chainId:p})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}$e.type="walletConnect";function $e(r,e){let t=r.isNewChainsStale??!0,o,s,n,i,a,c,p;return h=>({id:"walletConnect",name:"WalletConnect",type:$e.type,async setup(){let u=await this.getProvider().catch(()=>null);u&&(i||(i=this.onConnect.bind(this),u.on("connect",i)),c||(c=this.onSessionDelete.bind(this),u.on("session_delete",c)))},async connect({...u}={}){try{let f=l.getCaipNetworks(),g=await this.getProvider();if(!g)throw new ct;a||(a=this.onDisplayUri,g.on("display_uri",a));let C=await this.isChainsStale();g.session&&C&&await g.disconnect();let w=d.state.universalProviderConfigOverride;if(!g.session||C){let Je=V.createNamespaces(f,w);await g.connect({optionalNamespaces:Je,..."pairingTopic"in u?{pairingTopic:u.pairingTopic}:{}}),this.setRequestedChainsIds(f.map(no=>Number(no.id)))}let E=await this.getAccounts(),x=await this.getChainId(),U=g.session?.namespaces?.eip155?.chains,q=U?.some(Je=>Number(Je.split(":")[1])===x),F=1;q?F=x:U?.[0]&&(F=Number(U[0].split(":")[1])),a&&(g.removeListener("display_uri",a),a=void 0),i&&(g.removeListener("connect",i),i=void 0),s||(s=this.onAccountsChanged.bind(this),g.on("accountsChanged",s)),n||(n=this.onChainChanged.bind(this),g.on("chainChanged",n)),p||(p=this.onDisconnect.bind(this),g.on("disconnect",p)),c||(c=this.onSessionDelete.bind(this),g.on("session_delete",c));let Ze=w?.defaultChain;return g.setDefaultChain(Ze??`eip155:${F}`),{accounts:E,chainId:F}}catch(f){throw/(user rejected|connection request reset)/i.test(f?.message)?new Ne(f):f}},async disconnect(){let u=await this.getProvider();try{await u?.disconnect()}catch(f){if(!/No matching key/i.test(f.message))throw f}finally{n&&(u?.removeListener("chainChanged",n),n=void 0),p&&(u?.removeListener("disconnect",p),p=void 0),i||(i=this.onConnect.bind(this),u?.on("connect",i)),s&&(u?.removeListener("accountsChanged",s),s=void 0),c&&(u?.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){let u=await this.getProvider();return u?.session?.namespaces?u?.session?.namespaces[m.CHAIN.EVM]?.accounts?.map(C=>C.split(":")[2])??[]:[]},async getProvider({chainId:u}={}){o||(o=await e.getUniversalProvider(),o?.events.setMaxListeners(Number.POSITIVE_INFINITY));let f=A.getActiveNamespace(),g=e.getCaipNetwork()?.id;if(u&&g!==u&&f){let C=A.getStoredActiveCaipNetworkId(),E=e.getCaipNetworks(f)?.find(x=>x.id===C);E&&E.chainNamespace===m.CHAIN.EVM&&await this.switchChain?.({chainId:Number(E.id)})}return o},async getChainId(){let u=e.getCaipNetwork(m.CHAIN.EVM)?.id;if(u)return u;let g=(await this.getProvider()).session?.namespaces[m.CHAIN.EVM]?.chains?.[0];return l.getCaipNetworks().find(w=>w.id===g)?.id},async isAuthorized(){try{let[u,f]=await Promise.all([this.getAccounts(),this.getProvider()]);return u.length?await this.isChainsStale()&&f.session?(await f.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:f}){let g=await this.getProvider();if(!g)throw new ct;let C=l.getCaipNetworks().find(w=>w.id===f);if(!C)throw new fe(new Xt);try{await g.request({method:"wallet_switchEthereumChain",params:[{chainId:ot(f)}]}),C?.caipNetworkId&&g.setDefaultChain(C?.caipNetworkId),h.emitter.emit("change",{chainId:Number(f)});let w=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...w,f]),{...C,id:C.id}}catch(w){let E=w;if(/(?:user rejected)/iu.test(E.message))throw new Ne(E);try{let x;u?.blockExplorerUrls?x=u.blockExplorerUrls:x=C.blockExplorers?.default.url?[C.blockExplorers?.default.url]:[];let U=C.rpcUrls?.chainDefault?.http||[],q={blockExplorerUrls:x,chainId:ot(f),chainName:C.name,iconUrls:u?.iconUrls,nativeCurrency:C.nativeCurrency,rpcUrls:U};await g.request({method:"wallet_addEthereumChain",params:[q]});let F=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...F,f]),{...C,id:C.id}}catch(x){throw new Ne(x)}}},onAccountsChanged(u){u.length===0?this.onDisconnect():h.emitter.emit("change",{accounts:u.map(f=>Ee(f))})},onChainChanged(u){let f=Number(u);h.emitter.emit("change",{chainId:f})},onConnect(u){this.setRequestedChainsIds(l.getCaipNetworks().map(f=>Number(f.id)))},async onDisconnect(u){this.setRequestedChainsIds([]),h.emitter.emit("disconnect");let f=await this.getProvider();s&&(f.removeListener("accountsChanged",s),s=void 0),n&&(f.removeListener("chainChanged",n),n=void 0),p&&(f.removeListener("disconnect",p),p=void 0),c&&(f.removeListener("session_delete",c),c=void 0),i||(i=this.onConnect.bind(this),f.on("connect",i))},onDisplayUri(u){h.emitter.emit("message",{type:"display_uri",data:u})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return o?.session?.namespaces?o?.session?.namespaces[m.CHAIN.EVM]?.accounts?.map(g=>Number.parseInt(g.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){let u=await h.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(u)]},async isChainsStale(){if(!t)return!1;let u=h.chains.map(C=>C.id),f=this.getNamespaceChainsIds();if(f.length&&!f.some(C=>u.includes(C)))return!1;let g=await this.getRequestedChainsIds();return!u.every(C=>g.includes(Number(C)))},async setRequestedChainsIds(u){await h.storage?.setItem(this.requestedChainsStorageKey,u)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}var xe=Mt({pendingTransactions:0}),Ot={state:xe,subscribeKey(r,e){return Ft(xe,r,e)},increase(r){xe[r]+=1},decrease(r){xe[r]-=1},reset(r){xe[r]=0}};function ro(r){try{return JSON.parse(r)}catch{throw new Error("Error parsing wallet capabilities")}}var Oo={enable:!1,pollingInterval:3e4},ve=class extends te{constructor(e){let t=L.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=m.CHAIN.EVM,this.adapterType=m.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Oo,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:t})}construct(e){this.setupWatchers()}async getAccounts(e){let t=this.getWagmiConnector(e.id);if(!t)return{accounts:[]};if(t.id===m.CONNECTOR_ID.AUTH){let n=await t.getProvider();if(!n?.user)return{accounts:[]};let{address:i,accounts:a}=n.user;return Promise.resolve({accounts:(a||[{address:i,type:"eoa"}]).map(c=>N.createAccount("eip155",c.address,c.type))})}let{addresses:o,address:s}=it(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(o||[s])].map(n=>N.createAccount("eip155",n||"","eoa"))})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(t=>t.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===m.CHAIN.EVM);let t={},o=[...e.connectors??[]];this.wagmiChains.forEach(s=>{let n=e.transports?.[s.id],i=L.getCaipNetworkId(s);n?t[s.id]=L.extendWagmiTransports(s,e.projectId,n):t[s.id]=L.getViemTransport(s,e.projectId,e.customRpcUrls?.[i])}),this.wagmiConfig=ur({...e,chains:this.wagmiChains,connectors:o,transports:t})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=ar(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Ot.increase("pendingTransactions")}});let e=Ot.subscribeKey("pendingTransactions",t=>{t>=m.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){sr(this.wagmiConfig,{onChange:(e,t)=>{e.status==="disconnected"&&t.address&&this.emit("disconnect"),e.status==="connected"&&((e.address!==t?.address||t.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId})),e.chainId!==t?.chainId&&this.emit("switchNetwork",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){let t=[];if(e.enableCoinbase!==!1)try{let{coinbaseWallet:o}=await import("./exports-EVE2RZNA.js");o&&t.push(o({version:"4",appName:e.metadata?.name??"Unknown",appLogoUrl:e.metadata?.icons[0]??"Unknown",preference:e.coinbasePreference??"all"}))}catch(o){console.error("Failed to import Coinbase Wallet SDK:",o)}t.forEach(o=>{let s=this.wagmiConfig._internal.connectors.setup(o);this.wagmiConfig._internal.connectors.setState(n=>[...n,s])})}addWagmiConnectors(e,t){let o=[];e.enableWalletConnect!==!1&&o.push($e(e,t)),e.enableInjected!==!1&&o.push(pr({shimDisconnect:!0}));let s=t?.remoteFeatures?.email??!0,n=Array.isArray(t?.remoteFeatures?.socials)&&t?.remoteFeatures?.socials?.length>0;(s||n)&&o.push(to({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),o.forEach(i=>{let a=this.wagmiConfig._internal.connectors.setup(i);this.wagmiConfig._internal.connectors.setState(c=>[...c,a])})}async signMessage(e){try{return{signature:await Se(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){let{chainId:t,address:o}=it(this.wagmiConfig),s={account:o,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:t,type:"legacy",parameters:["nonce"]};await rr(this.wagmiConfig,s);let n=await or(this.wagmiConfig,s);return await cr(this.wagmiConfig,{hash:n,timeout:25e3}),{hash:n}}async writeContract(e){let{caipNetwork:t,...o}=e,s=Number(Z.caipNetworkIdToNumber(t.caipNetworkId));return{hash:await lr(this.wagmiConfig,{chain:this.wagmiChains?.[s],chainId:s,address:o.tokenAddress,account:o.fromAddress,abi:o.abi,functionName:o.method,args:o.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await er(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Kt(e.value,e.decimals)}formatUnits(e){return Bt(e.value,e.decimals)}async addWagmiConnector(e,t){if(e.id===m.CONNECTOR_ID.AUTH||e.id===m.CONNECTOR_ID.WALLET_CONNECT)return;let o=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:j.ConnectorExplorerIds[e.id],imageUrl:t?.connectorImages?.[e.id]??e.icon,name:j.ConnectorNamesMap[e.id]??e.name,imageId:j.ConnectorImageIds[e.id],type:j.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===m.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:o,chain:this.namespace,chains:[]})}async syncConnectors(e,t){ir(this.wagmiConfig,{onChange:o=>{o.forEach(s=>this.addWagmiConnector(s,e))}}),await Promise.all(this.wagmiConfig.connectors.map(o=>this.addWagmiConnector(o,e))),this.addWagmiConnectors(e,t),await this.addThirdPartyConnectors(e)}async syncConnection(e){let{id:t}=e,s=Q(this.wagmiConfig).find(a=>a.connector.id===t),i=await this.getWagmiConnector(t)?.getProvider();return{chainId:Number(s?.chainId),address:s?.accounts[0],provider:i,type:s?.connector.type?.toUpperCase(),id:s?.connector.id}}async connectWalletConnect(e){let t=this.getWalletConnectConnector();await t.authenticate();let o=this.getWagmiConnector("walletConnect");if(!o)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");let s=await nt(this.wagmiConfig,{connector:o,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await lt(this.wagmiConfig,{chainId:s.chainId}),{clientId:await t.provider.client.core.crypto.getClientId()}}async connect(e){let{id:t,provider:o,type:s,info:n,chainId:i,socialUri:a}=e,c=this.getWagmiConnector(t);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(o&&n&&c.id===m.CONNECTOR_ID.EIP6963&&c.setEip6963Wallet?.({provider:o,info:n}),c.uid===this.wagmiConfig?.state?.current){let h=this.wagmiConfig.state?.connections?.get(c.uid);if(h)return{address:h?.accounts[0],chainId:h?.chainId,provider:o,type:s,id:t}}let p=await nt(this.wagmiConfig,{connector:c,chainId:i?Number(i):void 0,socialUri:a});return{address:p.accounts[0],chainId:p.chainId,provider:o,type:s,id:t}}async reconnect(e){let{id:t}=e,o=this.getWagmiConnector(t);if(!o)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await at(this.wagmiConfig,{connectors:[o]})}async getBalance(e){let t=e.address,o=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(o&&this.wagmiConfig){let s=`${o.caipNetworkId}:${e.address}`,n=this.balancePromises[s];if(n)return n;let i=A.getNativeBalanceCacheForCaipAddress(s);return i?{balance:i.balance,symbol:i.symbol}:(this.balancePromises[s]=new Promise(async a=>{try{let c=Number(e.chainId),p=await tr(this.wagmiConfig,{address:e.address,chainId:c,token:e.tokens?.[o.caipNetworkId]?.address});A.updateNativeBalanceCache({caipAddress:s,balance:p.formatted,symbol:p.symbol,timestamp:Date.now()}),a({balance:p.formatted,symbol:p.symbol})}catch(c){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",c),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(){let e=Q(this.wagmiConfig);await Promise.allSettled(e.map(async t=>{let o=this.getWagmiConnector(t.connector.id);o&&await Ie(this.wagmiConfig,{connector:o})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){await lt(this.wagmiConfig,{chainId:e.caipNetwork.id}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],s=o?this.getWagmiConnector(o.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");let n=await s.getProvider();if(!n)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");let i=n.session?.sessionProperties?.capabilities;if(i){let c=ro(i)[e];if(c)return c}return await n.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],s=o?this.getWagmiConnector(o.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");let n=await s.getProvider();if(!n)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return n.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],s=o?this.getWagmiConnector(o.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");let n=await s.getProvider();if(!n)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return n.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],s=o?this.getWagmiConnector(o.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");let n=await s.getProvider();if(!n)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return n.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{let t=Q(this.wagmiConfig),o=this.getWagmiConnector("walletConnect");o&&!t.find(s=>s.connector.id===o.id)&&at(this.wagmiConfig,{connectors:[o]})}),this.addConnector(new Y({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}};var Ye=_(W(),1);var Ro=new At,oo="939345e3a30974b284f27b6a7918736f",Uo={name:"Intear Wallet",description:"Intear Wallet",url:"https://wallet.intear.tech",icons:["/favicon.svg"]},so=new ve({networks:[Pe],projectId:oo,ssr:!1});Nr({adapters:[so],networks:[Pe],projectId:oo,metadata:Uo,features:{analytics:!1,socials:!1},themeMode:"dark"});function _o({children:r}){return re.default.createElement(Fe,{config:so.wagmiConfig},re.default.createElement(It,{client:Ro},r))}function Mo({messageToSign:r,onSignature:e}){let t=ut({namespace:"eip155"}),{open:o}=Er(),{signMessage:s,data:n,error:i}=Pt(),{disconnect:a}=St();(0,Ye.useEffect)(()=>{n&&(e(n,r),a())},[n,e,a]),(0,Ye.useEffect)(()=>{i&&(console.error("Signing error:",i),e(null,r),a())},[i,e]);let c=async()=>{try{await s({message:r})}catch(p){console.error("Failed to sign message:",p),e(null,r)}};return(0,Ye.useEffect)(()=>{if(t.isConnected&&r&&c().catch(p=>{console.error("Failed to sign message:",p),e(null,r),a()}),!t.isConnected&&r){o({view:"Connect",namespace:"eip155"});let p=!1,h=setInterval(()=>{let u=document.getElementsByTagName("w3m-modal")[0];u&&u.className==="open"?p=!0:p&&(clearInterval(h),e(null,r))},50);return()=>clearInterval(h)}},[t.isConnected,r]),re.default.createElement(re.default.Fragment,null)}function Do({messageToSign:r,onSignature:e}){return re.default.createElement(_o,null,re.default.createElement(Mo,{messageToSign:r,onSignature:e}))}export{Do as default};
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
