import{a as mt}from"./chunk-HG3QHOOL.js";import{a as ye,b as ht}from"./chunk-GYTDKIFP.js";import{a as O,b as ue,c as xe,d as q,e as ft,f as te,g as w}from"./chunk-FS4YWWYV.js";import{A as We,B as pt,D as W,E as X,G as u,H as je,I as y,J as ee,K as dt,N as Ce,S as Ct,T as xt,b as v,c as nt,h as Q,i as it,j as P,k as b,l as S,m as f,o as at,p as F,q as G,r as J,s as pe,t as L,u as N,z as Le}from"./chunk-UDTBWQKV.js";import{a as tt,b as rt,c as ot,e as st,f as Fe}from"./chunk-ETAVA44A.js";import{a as ct,e as lt}from"./chunk-KIG3ADHQ.js";import{C as ut}from"./chunk-COAJKL54.js";import{a as le}from"./chunk-E3J3KTZS.js";import{q as qe}from"./chunk-OZZRRPYE.js";import{c as me,f as Z,h as c,j as l,n as p}from"./chunk-KGCAX4NX.js";var gt=me(yt=>{"use strict";c();p();l();var re=le();function Xt(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var er=typeof Object.is=="function"?Object.is:Xt,tr=re.useState,rr=re.useEffect,or=re.useLayoutEffect,sr=re.useDebugValue;function nr(r,e){var t=e(),o=tr({inst:{value:t,getSnapshot:e}}),s=o[0].inst,n=o[1];return or(function(){s.value=t,s.getSnapshot=e,Be(s)&&n({inst:s})},[r,t,e]),rr(function(){return Be(s)&&n({inst:s}),r(function(){Be(s)&&n({inst:s})})},[r]),sr(t),t}function Be(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!er(r,t)}catch{return!0}}function ir(r,e){return e()}var ar=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ir:nr;yt.useSyncExternalStore=re.useSyncExternalStore!==void 0?re.useSyncExternalStore:ar});var wt=me((Ur,vt)=>{"use strict";c();p();l();vt.exports=gt()});var Gt=me(De=>{"use strict";c();p();l();var Er=Symbol.for("react.transitional.element"),Nr=Symbol.for("react.fragment");function Vt(r,e,t){var o=null;if(t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),"key"in e){t={};for(var s in e)s!=="key"&&(t[s]=e[s])}else t=e;return e=t.ref,{$$typeof:Er,type:r,key:o,ref:e!==void 0?e:null,props:t}}De.Fragment=Nr;De.jsx=Vt;De.jsxs=Vt});var Yt=me((Ic,$t)=>{"use strict";c();p();l();$t.exports=Gt()});c();p();l();c();p();l();var U=Z(le(),1);var Tt=Z(wt(),1);var{use:At}=U.default,{useSyncExternalStore:cr}=Tt.default,lr=(r,e)=>{let t=(0,U.useRef)();(0,U.useEffect)(()=>{t.current=ot(r,e,!0)}),(0,U.useDebugValue)(t.current)},pr=new WeakMap;function ge(r,e){let t=e?.sync,o=(0,U.useRef)(),s=(0,U.useRef)(),n=!0,i=cr((0,U.useCallback)(x=>{let g=st(r,x,t);return x(),g},[r,t]),()=>{let x=Fe(r,At);try{if(!n&&o.current&&s.current&&!rt(o.current,x,s.current,new WeakMap))return o.current}catch{}return x},()=>Fe(r,At));n=!1;let a=new WeakMap;(0,U.useEffect)(()=>{o.current=i,s.current=a}),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&lr(i,a);let d=(0,U.useMemo)(()=>new WeakMap,[]);return tt(i,a,d,pr)}function ur(r){let e=ge(u.state),t=r?.namespace||e.activeChain;if(!t)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};let o=e.chains.get(t)?.accountState,s=N.getAuthConnector(t),n=b.getConnectedConnectorId(t);return{allAccounts:o?.allAccounts||[],caipAddress:o?.caipAddress,address:S.getPlainAddress(o?.caipAddress),isConnected:!!o?.caipAddress,status:o?.status,embeddedWalletInfo:s&&n===v.CONNECTOR_ID.AUTH?{user:o?.user?{...o.user,username:b.getConnectedSocialUsername()}:void 0,authProvider:o?.socialProvider||"email",accountType:o?.preferredAccountTypes?.[t],isSmartAccountDeployed:!!o?.smartAccountDeployed}:void 0}}c();p();l();var dr=ut({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});c();p();l();c();p();l();c();p();l();function H(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}var Qe=H({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});c();p();l();var He=Z(le(),1);var ve;function Et(r){r&&(ve=r)}function vo(r){let{providers:e,providerIds:t}=ge(w.state),o=e[r],s=t[r];return{walletProvider:o,walletProviderType:s}}function wo(){if(!ve)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function r(t){await ve?.open(t)}async function e(){await ve?.close()}return{open:r,close:e}}c();p();l();c();p();l();c();p();l();var we=class r{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n}){return r.instance||(r.instance=new ht({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n})),r.instance}};c();p();l();c();p();l();c();p();l();c();p();l();c();p();l();c();p();l();c();p();l();var $={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};c();p();l();c();p();l();c();p();l();c();p();l();var ze=H({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});c();p();l();var $o=H({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});c();p();l();var cs=H({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),ls=H({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var fr={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},oe={getMethodsByChainNamespace(r){return fr[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};let t={...r},o=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>o.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>o.add(s)),e.events&&Object.keys(e.events).forEach(s=>o.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{let[n]=s.split(":");n&&o.add(n)}),o.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,n])=>{t[s]&&(t[s].methods=n)}),e.chains&&Object.entries(e.chains).forEach(([s,n])=>{t[s]&&(t[s].chains=n)}),e.events&&Object.entries(e.events).forEach(([s,n])=>{t[s]&&(t[s].events=n)}),e.rpcMap){let s=new Set;Object.entries(e.rpcMap).forEach(([n,i])=>{let[a,d]=n.split(":");!a||!d||!t[a]||(t[a].rpcMap||(t[a].rpcMap={}),s.has(a)||(t[a].rpcMap={},s.add(a)),t[a].rpcMap[d]=i)})}return t},createNamespaces(r,e){let t=r.reduce((o,s)=>{let{id:n,chainNamespace:i,rpcUrls:a}=s,d=a.default.http[0];o[i]||(o[i]=this.createDefaultNamespace(i));let x=`${i}:${n}`,g=o[i];switch(g.chains.push(x),x){case Qe.caipNetworkId:g.chains.push(Qe.deprecatedCaipNetworkId);break;case ze.caipNetworkId:g.chains.push(ze.deprecatedCaipNetworkId);break;default:}return g?.rpcMap&&d&&(g.rpcMap[n]=d),o},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{let e=await Ce.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{let t=e.chains||[],o=e.accounts.map(s=>{let[n,i]=s.split(":");return`${n}:${i}`});return Array.from(new Set([...t,...o]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null},isOriginAllowed(r,e,t){for(let o of[...e,...t])if(o.includes("*")){let n=`^${o.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(n,"u").test(r))return!0}else if(o===r)return!0;return!1}};c();p();l();var se=class{constructor({provider:e,namespace:t}){this.id=v.CONNECTOR_ID.WALLET_CONNECT,this.name=ue.ConnectorNamesMap[v.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ue.ConnectorImageIds[v.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=u.getCaipNetworks.bind(u),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let t=this.getCaipNetworks(),o=f.state.universalProviderConfigOverride,s=oe.createNamespaces(t,o);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(t=>t.caipNetworkId);return pt.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:hr})}},hr=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var Ae=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=t=>u.getCaipNetworks(t),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:v.CONNECTOR_ID.AUTH,type:"AUTH",name:v.CONNECTOR_NAMES.AUTH,provider:e,imageId:ue.ConnectorImageIds[v.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(o=>t.has(o.id)?!1:(t.add(o.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){y.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let o=this.eventListeners.get(e);o&&o.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let o=this.eventListeners.get(e);o&&o.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:o}=e;if(!e.provider)return;let s="provider"in e.provider?e.provider.provider:e.provider;if(o==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&o==="AUTH"){let n=s,i=y.state.preferredAccountTypes?.[t.chainNamespace];await n.switchNetwork(t.caipNetworkId);let a=await n.getUser({chainId:t.caipNetworkId,preferredAccountType:i});this.emit("switchNetwork",a)}}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof se);if(!e)throw new Error("WalletConnectConnector not found");return e}};var Te=class extends Ae{setUniversalProvider(e){this.addConnector(new se({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let o=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{let[,,n]=s.split(":");return n}).filter((s,n,i)=>i.indexOf(s)===n)||[];return Promise.resolve({accounts:o.map(s=>S.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&P.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(y.state.balanceLoading&&e.chainId===u.state.activeCaipNetwork?.id)return{balance:y.state.balance||"0.00",symbol:y.state.balanceSymbol||""};let s=(await y.fetchTokenBalance()).find(n=>n.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&n.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:o,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let n="";return u.state.activeCaipNetwork?.chainNamespace===v.CHAIN.SOLANA?n=(await t.request({method:"solana_signMessage",params:{message:ct.encode(new TextEncoder().encode(o)),pubkey:s}},u.state.activeCaipNetwork?.caipNetworkId)).signature:n=await t.request({method:"personal_sign",params:[o,s]},u.state.activeCaipNetwork?.caipNetworkId),{signature:n}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,o=this.getWalletConnectConnector();if(t.chainNamespace===v.CHAIN.EVM)try{await o.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:qe(t.id)}]})}catch(s){if(s.code===$.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===$.ERROR_INVALID_CHAIN_ID||s.code===$.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===$.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await o.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:qe(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}o.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(o=>o.type==="WALLET_CONNECT")?.provider}};c();p();l();var mr=["email","socials","swaps","onramp","activity","reownBranding"],Ee={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return!!r.isEnabled&&e.includes("email")},processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.email:!!r},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.socials:typeof r=="boolean"?r?P.DEFAULT_REMOTE_FEATURES.socials:!1:r},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.swaps:typeof r=="boolean"?r?P.DEFAULT_REMOTE_FEATURES.swaps:!1:r},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.onramp:typeof r=="boolean"?r?P.DEFAULT_REMOTE_FEATURES.onramp:!1:r},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.activity:!!r},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?P.DEFAULT_REMOTE_FEATURES.reownBranding:!!r}},Nt={localSettingsOverridden:new Set,getApiConfig(r,e){return e?.find(t=>t.id===r)},addWarning(r,e){if(r!==void 0){let t=Ee[e],o=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(o)}},processFeature(r,e,t,o){let s=Ee[r],n=e[s.localFeatureName];if(o){let i=this.getApiConfig(s.apiFeatureName,t);return i?.config===null?this.processFallbackFeature(r,n):i?.config?(n!==void 0&&this.addWarning(n,r),this.processApiFeature(r,i)):!1}return this.processFallbackFeature(r,n)},processApiFeature(r,e){return Ee[r].processApi(e)},processFallbackFeature(r,e){return Ee[r].processFallback(e)},async fetchRemoteFeatures(r){let e=r.features||{};this.localSettingsOverridden.clear();let t=null,o=!1;try{t=await J.fetchProjectConfig(),o=t!=null}catch(n){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",n)}let s=o?P.DEFAULT_REMOTE_FEATURES:P.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let n of mr){let i=this.processFeature(n,e,t,o);Object.assign(s,{[n]:i})}}catch(n){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",n),P.DEFAULT_REMOTE_FEATURES}if(o&&this.localSettingsOverridden.size>0){let n=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;F.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${n}`},"warning")}return s}};var Ne=class{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,o)=>{if(t){let s=u.getNetworkData(t)?.requestedCaipNetworks?.find(a=>a.id===o);if(s)return s;let n=u.getNetworkData(t)?.caipNetwork;return n||u.getRequestedCaipNetworks(t).filter(a=>a.chainNamespace===t)?.[0]}return u.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>u.getCaipNetworks(t),this.getActiveChainNamespace=()=>u.state.activeChain,this.setRequestedCaipNetworks=(t,o)=>{u.setRequestedCaipNetworks(t,o)},this.getApprovedCaipNetworkIds=()=>u.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>u.state.activeChain===t||!t?u.state.activeCaipAddress:u.getAccountProp("caipAddress",t),this.setClientId=t=>{je.setClientId(t)},this.getProvider=t=>w.getProvider(t),this.getProviderType=t=>w.getProviderId(t),this.getPreferredAccountType=t=>y.state.preferredAccountTypes?.[t],this.setCaipAddress=(t,o)=>{y.setCaipAddress(t,o),t&&f.state.enableEmbedded&&this.close()},this.setBalance=(t,o,s)=>{y.setBalance(t,o,s)},this.setProfileName=(t,o)=>{y.setProfileName(t,o)},this.setProfileImage=(t,o)=>{y.setProfileImage(t,o)},this.setUser=(t,o)=>{y.setUser(t,o)},this.resetAccount=t=>{y.resetAccount(t)},this.setCaipNetwork=t=>{u.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,o)=>{u.setChainNetworkData(o,{caipNetwork:t})},this.setAllAccounts=(t,o)=>{y.setAllAccounts(t,o),f.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,o)=>{y.setStatus(t,o),N.isConnected()?b.setConnectionStatus("connected"):b.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>u.getAccountProp("address",t),this.setConnectors=t=>{let o=[...N.state.allConnectors,...t];N.setConnectors(o)},this.setConnections=(t,o)=>{W.setConnections(t,o)},this.fetchIdentity=t=>je.fetchIdentity(t),this.getReownName=t=>Ce.getNamesForAddress(t),this.getConnectors=()=>N.getConnectors(),this.getConnectorImage=t=>at.getConnectorImage(t),this.setConnectedWalletInfo=(t,o)=>{let s=w.getProviderId(o),n=t?{...t,type:s}:void 0;y.setConnectedWalletInfo(n,o)},this.getIsConnectedState=()=>!!u.state.activeCaipAddress,this.addAddressLabel=(t,o,s)=>{y.addAddressLabel(t,o,s)},this.removeAddressLabel=(t,o)=>{y.removeAddressLabel(t,o)},this.getAddress=t=>u.state.activeChain===t||!t?y.state.address:u.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>u.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{u.resetNetwork(t)},this.addConnector=t=>{N.addConnector(t)},this.resetWcConnection=()=>{W.resetWcConnection()},this.setAddressExplorerUrl=(t,o)=>{y.setAddressExplorerUrl(t,o)},this.setSmartAccountDeployed=(t,o)=>{y.setSmartAccountDeployed(t,o)},this.setSmartAccountEnabledNetworks=(t,o)=>{u.setSmartAccountEnabledNetworks(t,o)},this.setPreferredAccountType=(t,o)=>{y.setPreferredAccountType(t,o)},this.setEIP6963Enabled=t=>{f.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let o=e?.map(n=>n.namespace).filter(n=>!!n);if(o?.length)return[...new Set(o)];let s=t?.map(n=>n.chainNamespace);return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Nt.fetchRemoteFeatures(e),f.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&dt.setOnrampProviders(this.remoteFeatures.onramp),(f.state.remoteFeatures?.email||Array.isArray(f.state.remoteFeatures?.socials)&&f.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){let e=await J.fetchAllowedOrigins();if(e&&S.isClient()){let t=window.location.origin;oe.isOriginAllowed(t,e,$.DEFAULT_ALLOWED_ANCESTORS)||F.open(q.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else F.open(q.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,G.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(o=>o.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&L.setThemeMode(e.themeMode),e.themeVariables&&L.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");u.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&u.setActiveCaipNetwork(t)}initializeConnectionController(e){W.setWcBasic(e.basic??!1)}initializeConnectorController(){N.initialize(this.chainNamespaces)}initializeProjectSettings(e){f.setProjectId(e.projectId),f.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){f.setDebug(e.debug!==!1),f.setEnableWalletConnect(e.enableWalletConnect!==!1),f.setEnableWalletGuide(e.enableWalletGuide!==!1),f.setEnableWallets(e.enableWallets!==!1),f.setEIP6963Enabled(e.enableEIP6963!==!1),f.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),f.setEnableAuthLogger(e.enableAuthLogger!==!1),f.setCustomRpcUrls(e.customRpcUrls),f.setEnableEmbedded(e.enableEmbedded),f.setAllWallets(e.allWallets),f.setIncludeWalletIds(e.includeWalletIds),f.setExcludeWalletIds(e.excludeWalletIds),f.setFeaturedWalletIds(e.featuredWalletIds),f.setTokens(e.tokens),f.setTermsConditionsUrl(e.termsConditionsUrl),f.setPrivacyPolicyUrl(e.privacyPolicyUrl),f.setCustomWallets(e.customWallets),f.setFeatures(e.features),f.setAllowUnsupportedChain(e.allowUnsupportedChain),f.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),f.setPreferUniversalLinks(e.experimental_preferUniversalLinks),f.setDefaultAccountTypes(e.defaultAccountTypes);let t=b.getPreferredAccountTypes()||{},o={...f.state.defaultAccountTypes,...t};y.setPreferredAccountTypes(o);let s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),f.setMetadata(e.metadata),f.setDisableAppend(e.disableAppend),f.setEnableEmbedded(e.enableEmbedded),f.setSIWX(e.siwx),!e.projectId){F.open(q.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===v.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");f.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return S.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let o=te.getUnsupportedNetwork(`${t}:${e}`);u.setActiveCaipNetwork(o)}}getDefaultNetwork(){return te.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return te.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return te.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(s=>s.id===e.defaultNetwork?.id);return t?te.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=u.state.activeChain,t=this.getAdapter(e),o=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");let s=await t.connectWalletConnect(o);this.close(),this.setClientId(s?.clientId||null),b.setConnectedNamespaces([...u.state.chains.keys()]),this.chainNamespaces.forEach(n=>{N.setConnectorId(O.CONNECTOR_TYPE_WALLET_CONNECT,n)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:o,provider:s,chain:n,caipNetwork:i,socialUri:a})=>{let d=u.state.activeChain,x=n||d,g=this.getAdapter(x);if(n&&n!==d&&!i){let A=this.getCaipNetworks().find(R=>R.chainNamespace===n);A&&this.setCaipNetwork(A)}if(!g)throw new Error("Adapter not found");let D=this.getCaipNetwork(x),_=await g.connect({id:e,info:t,type:o,provider:s,socialUri:a,chainId:i?.id||D?.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]||D?.rpcUrls?.default?.http?.[0]});if(!_)return;b.addConnectedNamespace(x),this.syncProvider({..._,chainNamespace:x});let M=y.state.allAccounts,{accounts:E}=M?.length>0?{accounts:[...M]}:await g.getAccounts({namespace:x,id:e});this.setAllAccounts(E,x),this.setStatus("connected",x),this.syncConnectedWalletInfo(x)},reconnectExternal:async({id:e,info:t,type:o,provider:s})=>{let n=u.state.activeChain,i=this.getAdapter(n);i?.reconnect&&(await i?.reconnect({id:e,info:t,type:o,provider:s,chainId:this.getCaipNetwork()?.id}),b.addConnectedNamespace(n),this.syncConnectedWalletInfo(n))},disconnect:async e=>{let t=e||u.state.activeChain,o=this.getAdapter(t),s=w.getProvider(t),n=w.getProviderId(t);await o?.disconnect({provider:s,providerType:n}),b.removeConnectedNamespace(t),w.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(u.state.activeChain)?.signMessage({message:e,address:y.state.address,provider:w.getProvider(u.state.activeChain)}))?.signature||"",sendTransaction:async e=>{let t=e.chainNamespace;if(P.SEND_SUPPORTED_NAMESPACES.includes(t)){let o=this.getAdapter(u.state.activeChain),s=w.getProvider(t);return(await o?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===v.CHAIN.EVM){let t=this.getAdapter(u.state.activeChain),o=w.getProvider(u.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:o,caipNetwork:s}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:y.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:u.state.activeChain}),y.state.profileImage||!1),getEnsAddress:async e=>await oe.resolveReownName(e),writeContract:async e=>{let t=this.getAdapter(u.state.activeChain),o=this.getCaipNetwork(),s=this.getCaipAddress(),n=w.getProvider(u.state.activeChain);if(!o||!s)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:o,provider:n,caipAddress:s}))?.hash},parseUnits:(e,t)=>this.getAdapter(u.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(u.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(u.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(u.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{let t=this.getAdapter(u.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(u.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{let t=this.getCaipNetwork(e);!t||!y.state.address||this.updateNativeBalance(y.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},W.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(w.getProviderId(u.state.activeChain)===O.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let s=w.getProvider(t),n=w.getProviderId(t);if(e.chainNamespace===u.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:s,providerType:n});else if(this.setCaipNetwork(e),n===O.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let o=t.chains||[],s=t.accounts.map(n=>{let{chainId:i,chainNamespace:a}=Q.parseCaipAddress(n);return`${a}:${i}`});return Array.from(new Set([...o,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,o)=>{let s=e?.find(n=>n.namespace===o);return s?(s.construct({namespace:o,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[o]=s):t[o]=new Te({namespace:o,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let o=b.getConnectionStatus();o==="connected"?this.setStatus("connecting",e):o==="disconnected"?(b.clearAddressCache(),this.setStatus(o,e)):this.setStatus(o,e),t.on("switchNetwork",({address:s,chainId:n})=>{let i=this.getCaipNetworks().find(x=>x.id===n||x.caipNetworkId===n),a=u.state.activeChain===e,d=u.getAccountProp("address",e);if(i){let x=a&&s?s:d;x&&this.syncAccount({address:x,chainId:i.id,chainNamespace:e})}else this.setUnsupportedNetwork(n)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{let s=y.state.address,n=u.state.activeCaipNetwork;!s||!n?.id||this.updateNativeBalance(s,n.id,n.chainNamespace)}),t.on("accountChanged",({address:s,chainId:n})=>{let i=u.state.activeChain===e;i&&n?this.syncAccount({address:s,chainId:n,chainNamespace:e}):i&&u.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:u.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,n,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=N.getConnectorId(e);switch(this.setStatus("connecting",e),t){case v.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case v.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),o=N.getConnectorId(e),s=this.getCaipNetwork(e),n=N.getConnectors(e).find(i=>i.id===o);try{if(!t||!n)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");let i=await t?.syncConnection({namespace:e,id:n.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});if(i){let a=await t?.getAccounts({namespace:e,id:n.id});a&&a.accounts.length>0?this.setAllAccounts(a.accounts,e):this.setAllAccounts([S.createAccount(e,i.address,"eoa")],e),this.syncProvider({...i,chainNamespace:e}),await this.syncAccount({...i,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async t=>{let o=this.getAdapter(t),s=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],n=u.state.activeCaipNetwork?.id,i=s.find(a=>{let{chainId:d}=Q.parseCaipAddress(a);return d===n?.toString()})||s[0];if(i){let a=Q.validateCaipAddress(i),{chainId:d,address:x}=Q.parseCaipAddress(a);if(w.setProviderId(t,O.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&u.state.activeCaipNetwork&&o?.namespace!==v.CHAIN.EVM){let g=o?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:u.state.activeCaipNetwork});w.setProvider(t,g)}else w.setProvider(t,this.universalProvider);N.setConnectorId(v.CONNECTOR_ID.WALLET_CONNECT,t),b.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:x,chainId:d,chainNamespace:t})}else this.setStatus("disconnected",t);this.syncConnectedWalletInfo(t),await u.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(o=>{let{address:s}=Q.parseCaipAddress(o);return s}).filter((o,s,n)=>n.indexOf(o)===s);t&&this.setAllAccounts(t.map(o=>S.createAccount(e,o,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:o,chainNamespace:s}){w.setProviderId(s,e),w.setProvider(s,t),N.setConnectorId(o,s)}async syncAllAccounts(e){let t=N.getConnectorId(e);if(!t)return;let s=await this.getAdapter(e)?.getAccounts({namespace:e,id:t});s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){let t=e.chainNamespace===u.state.activeChain,o=u.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:n,chainNamespace:i}=e,{chainId:a}=b.getActiveNetworkProps(),d=n||a,x=u.state.activeCaipNetwork?.name===v.UNSUPPORTED_NETWORK_NAME,g=u.getNetworkProp("supportsAllNetworks",i);if(this.setStatus("connected",i),!(x&&!g)&&d){let D=this.getCaipNetworks().find(E=>E.id.toString()===d.toString()),_=this.getCaipNetworks().find(E=>E.chainNamespace===i);if(!g&&!D&&!_){let E=this.getApprovedCaipNetworkIds()||[],A=E.find(k=>Q.parseCaipNetworkId(k)?.chainId===d.toString()),R=E.find(k=>Q.parseCaipNetworkId(k)?.chainNamespace===i);D=this.getCaipNetworks().find(k=>k.caipNetworkId===A),_=this.getCaipNetworks().find(k=>k.caipNetworkId===R||"deprecatedCaipNetworkId"in k&&k.deprecatedCaipNetworkId===R)}let M=D||_;M?.chainNamespace===u.state.activeChain?f.state.enableNetworkSwitch&&!f.state.allowUnsupportedChain&&u.state.activeCaipNetwork?.name===v.UNSUPPORTED_NETWORK_NAME?u.showUnsupportedChainUI():this.setCaipNetwork(M):t||o&&this.setCaipNetworkOfNamespace(o,i),this.syncConnectedWalletInfo(i),xe.isLowerCaseMatch(s,y.state.address)||this.syncAccountInfo(s,M?.id,i),t?await this.syncBalance({address:s,chainId:M?.id,chainNamespace:i}):await this.syncBalance({address:s,chainId:o?.id,chainNamespace:i})}}async syncAccountInfo(e,t,o){let s=this.getCaipAddress(o),n=t||s?.split(":")[1];if(!n)return;let i=`${o}:${n}:${e}`;this.setCaipAddress(i,o),await this.syncIdentity({address:e,chainId:n,chainNamespace:o})}async syncReownName(e,t){try{let o=await this.getReownName(e);if(o[0]){let s=o[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=N.getConnectorId(e),o=w.getProviderId(e);if(o===O.CONNECTOR_TYPE_ANNOUNCED||o===O.CONNECTOR_TYPE_INJECTED){if(t){let s=this.getConnectors().find(n=>n.id===t);if(s){let{info:n,name:i,imageUrl:a}=s,d=a||this.getConnectorImage(s);this.setConnectedWalletInfo({name:i,icon:d,...n},e)}}}else if(o===O.CONNECTOR_TYPE_WALLET_CONNECT){let s=w.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(t&&t===v.CONNECTOR_ID.COINBASE){let s=this.getConnectors().find(n=>n.id===v.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}}async syncBalance(e){!nt.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(o=>o.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,o){let s=this.getAdapter(o),n=u.getCaipNetworkByNamespace(o,t);if(s){let i=await s.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});return this.setBalance(i.balance,i.symbol,o),i}}async initializeUniversalAdapter(){let e=ft.createLogger((o,...s)=>{o&&this.handleAlertError(o),console.error(...s)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};f.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await lt.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{W.setUri(e)}),this.universalProvider.on("connect",W.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),W.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(s=>s.id==e),o=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}o?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(oe.isSessionEventData(e)){let{name:t,data:o}=e.params.event;t==="accountsChanged"&&Array.isArray(o)&&S.isCaipAddress(o[0])&&this.syncAccount(Q.parseCaipAddress(o[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&S.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){G.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let t=Object.entries(q.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[o,s]=t??[],{message:n,alertErrorKey:i}=s??{};if(o&&n&&!this.reportedAlertErrors[o]){let a=q.ALERT_ERRORS[i];a&&(F.open(a,"error"),this.reportedAlertErrors[o]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let o=e;o.namespace=t,o.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=o)}async open(e){if(await this.injectModalUi(),e?.uri&&W.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return ee.open({...e,data:{swap:e.arguments}});default:}return ee.open(e)}async close(){await this.injectModalUi(),ee.close()}setLoading(e,t){ee.setLoading(e,t)}async disconnect(e){await W.disconnect(e)}getSIWX(){return f.state.siwx}getError(){return""}getChainId(){return u.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(o=>o.id===e.id);if(!t){F.open(q.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await u.switchActiveNetwork(t)}getWalletProvider(){return u.state.activeChain?w.state.providers[u.state.activeChain]:null}getWalletProviderType(){return w.getProviderId(u.state.activeChain)}subscribeProviders(e){return w.subscribeProviders(e)}getThemeMode(){return L.state.themeMode}getThemeVariables(){return L.state.themeVariables}setThemeMode(e){L.setThemeMode(e),Ct(L.state.themeMode)}setTermsConditionsUrl(e){f.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){f.setPrivacyPolicyUrl(e)}setThemeVariables(e){L.setThemeVariables(e),xt(L.state.themeVariables)}subscribeTheme(e){return L.subscribe(e)}getWalletInfo(){return y.state.connectedWalletInfo}getAccount(e){let t=N.getAuthConnector(e),o=u.getAccountData(e),s=u.state.activeChain,n=b.getConnectedConnectorId(e);if(o)return{allAccounts:o.allAccounts,caipAddress:o.caipAddress,address:S.getPlainAddress(o.caipAddress),isConnected:!!o.caipAddress,status:o.status,embeddedWalletInfo:t&&n===v.CONNECTOR_ID.AUTH?{user:o.user?{...o.user,username:b.getConnectedSocialUsername()}:void 0,authProvider:o.socialProvider||"email",accountType:o.preferredAccountTypes?.[e||s],isSmartAccountDeployed:!!o.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let o=()=>{let s=this.getAccount(t);s&&e(s)};t?u.subscribeChainProp("accountState",o,t):u.subscribe(o),N.subscribe(o)}subscribeNetwork(e){return u.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return y.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){y.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){u.subscribeKey("activeCaipNetwork",e)}getState(){return X.state}subscribeState(e){return X.subscribe(e)}showErrorMessage(e){We.showError(e)}showSuccessMessage(e){We.showSuccess(e)}getEvent(){return{...G.state}}subscribeEvents(e){return G.subscribe(e)}replace(e){pe.replace(e)}redirect(e){pe.push(e)}popTransactionStack(e){pe.popTransactionStack(e)}isOpen(){return ee.state.open}isTransactionStackEmpty(){return pe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){f.setFeatures(e)}updateRemoteFeatures(e){f.setRemoteFeatures(e)}updateOptions(e){let o={...f.state||{},...e};f.setOptions(o)}setConnectMethodsOrder(e){f.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){f.setWalletFeaturesOrder(e)}setCollapseWallets(e){f.setCollapseWallets(e)}setSocialsOrder(e){f.setSocialsOrder(e)}getConnectMethodsOrder(){return mt.getConnectOrderMethod(f.state.features,N.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let o=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===o.id)||u.addNetwork(o)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&u.removeNetwork(e,t)}};var bt=!1,be=class extends Ne{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{ye.checkIfRequestExists(t)?ye.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Le.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Le.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,o)=>{let s=ye.checkIfRequestIsSafe(o),n=y.state.address,i=u.state.activeCaipNetwork;s||(n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{let t=u.state.activeChain;N.getConnectorId(t)===v.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(t=>{let o=u.state.activeChain,s=o===v.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,n=f.state.defaultAccountTypes[o],i=y.state.preferredAccountTypes?.[o],a=t.preferredAccountType||i||n;xe.isLowerCaseMatch(t.address,y.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:o}),this.setCaipAddress(s,o),this.setUser({...y.state.user||{},...t},o),this.setSmartAccountDeployed(!!t.smartAccountDeployed,o),this.setPreferredAccountType(a,o);let d=t.accounts?.map(x=>S.createAccount(o,x.address,x.type||i||n));this.setAllAccounts(d||[S.createAccount(o,t.address,t.preferredAccountType||a)],o),this.setLoading(!1,o)}),e.onSocialConnected(({userName:t})=>{this.setUser({...y.state.user||{},username:t},u.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,u.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:o})=>{t&&this.setPreferredAccountType(o,u.state.activeChain)})}async syncAuthConnector(e,t){let o=v.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!o)return;this.setLoading(!0,t);let s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);let n=e.getEmail(),i=e.getUsername();this.setUser({...y.state?.user||{},username:i,email:n},u.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:a}=await e.isConnected(),d=L.getSnapshot(),x=f.getSnapshot();await Promise.all([e.syncDappData({metadata:x.metadata,sdkVersion:x.sdkVersion,projectId:x.projectId,sdkType:x.sdkType}),e.syncTheme({themeMode:d.themeMode,themeVariables:d.themeVariables,w3mThemeVariables:it(d.themeVariables,d.themeMode)})]),await e.getSmartAccountEnabledNetworks(),t&&o&&(a&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:v.CONNECTOR_ID.AUTH,info:{name:v.CONNECTOR_ID.AUTH},type:O.CONNECTOR_TYPE_AUTH,provider:e,chainId:u.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):N.getConnectorId(t)===v.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),b.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!S.isTelegram())return;let t=b.getTelegramSocialProvider();if(!t||!S.isClient())return;let s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;y.setSocialProvider(t,e),await this.authProvider?.init();let n=N.getAuthConnector();t&&n&&(this.setLoading(!0,e),await W.connectExternal({id:n.id,type:n.type,socialUri:s},n.chain),b.setConnectedSocialProvider(t),b.removeTelegramSocialProvider(),G.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!v.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let o=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,n=o||s;!this.authProvider&&this.options?.projectId&&n&&(this.authProvider=we.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:q.EmbeddedWalletAbortController,onTimeout:i=>{i==="iframe_load_failed"?F.open(q.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):i==="iframe_request_timeout"?F.open(q.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):i==="unverified_domain"&&F.open(q.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),X.subscribeOpen(i=>{!i&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&J.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=u.state.activeChain,o=e.chainNamespace,s=this.getAddressByChainNamespace(o);if(o===t&&s){let i=this.getAdapter(o),a=w.getProvider(o),d=w.getProviderId(o);await i?.switchNetwork({caipNetwork:e,provider:a,providerType:d}),this.setCaipNetwork(e)}else{let a=w.getProviderId(t)===O.CONNECTOR_TYPE_AUTH,d=w.getProviderId(o),x=d===O.CONNECTOR_TYPE_AUTH,g=v.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(o);if((a&&d===void 0||x)&&g)try{u.state.activeChain=e.chainNamespace,s?await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:d}):await this.connectionControllerClient?.connectExternal?.({id:v.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:o,chainId:e.id,type:O.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:d})}else d===O.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:o}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t),this.chainAdapters?.[t].syncConnectors(this.options,this)}),await this.injectModalUi(),X.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:o}){let s=`${o}:${t}`,n=this.caipNetworks?.find(i=>i.caipNetworkId===s);if(o!==v.CHAIN.EVM||n?.testnet){this.setProfileName(null,o),this.setProfileImage(null,o);return}try{let{name:i,avatar:a}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(i,o),this.setProfileImage(a,o)}catch{await this.syncReownName(e,o),t!==1&&this.setProfileImage(null,o)}}syncConnectedWalletInfo(e){let t=w.getProviderId(e);if(t===O.CONNECTOR_TYPE_AUTH){let o=this.authProvider;if(o){let s=b.getConnectedSocialProvider()??"email",n=o.getEmail()??o.getUsername();this.setConnectedWalletInfo({name:t,identifier:n,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(S.isClient()&&!bt)try{let e={...P.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),S.isClient()&&!document.querySelector("w3m-modal")){let s=document.createElement("w3m-modal");!f.state.disableAppend&&!f.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}bt=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!S.isClient())return;let o=[];(t.email||t.socials&&t.socials.length>0)&&o.push(import("./embedded-wallet-U5MMAK26.js")),t.email&&o.push(import("./email-5MRMXHNL.js")),t.socials&&o.push(import("./socials-PRJJCSFI.js")),t.swaps&&t.swaps.length>0&&o.push(import("./swaps-ECQQS6GX.js")),e.send&&o.push(import("./send-I5NFLY7B.js")),e.receive&&o.push(import("./receive-4G6LU23S.js")),t.onramp&&t.onramp.length>0&&o.push(import("./onramp-VKO2FXQB.js")),t.activity&&o.push(import("./transactions-ENPBOEFZ.js")),e.pay&&o.push(import("./exports-BWYDBIKU.js")),await Promise.all([...o,import("./exports-KOR2TUBG.js"),import("./w3m-modal-4H2XFNUY.js")])}};c();p();l();c();p();l();var kt="1.7.7";var ke;function ci(r){return ke||(ke=new be({...r,sdkVersion:S.generateSdkVersion(r.adapters??[],"react",kt)}),Et(ke)),ke}c();p();l();c();p();l();var z=typeof window>"u"||"Deno"in globalThis;function I(){}function It(r,e){return typeof r=="function"?r(e):r}function Ot(r){return typeof r=="number"&&r>=0&&r!==1/0}function Ut(r,e){return Math.max(r+(e||0)-Date.now(),0)}function de(r,e){return typeof r=="function"?r(e):r}function Rt(r,e){return typeof r=="function"?r(e):r}function Se(r,e){let{type:t="all",exact:o,fetchStatus:s,predicate:n,queryKey:i,stale:a}=r;if(i){if(o){if(e.queryHash!==fe(i,e.options))return!1}else if(!ne(e.queryKey,i))return!1}if(t!=="all"){let d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||n&&!n(e))}function Pe(r,e){let{exact:t,status:o,predicate:s,mutationKey:n}=r;if(n){if(!e.options.mutationKey)return!1;if(t){if(j(e.options.mutationKey)!==j(n))return!1}else if(!ne(e.options.mutationKey,n))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function fe(r,e){return(e?.queryKeyHashFn||j)(r)}function j(r){return JSON.stringify(r,(e,t)=>Ke(t)?Object.keys(t).sort().reduce((o,s)=>(o[s]=t[s],o),{}):t)}function ne(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ne(r[t],e[t])):!1}function Ve(r,e){if(r===e)return r;let t=St(r)&&St(e);if(t||Ke(r)&&Ke(e)){let o=t?r:Object.keys(r),s=o.length,n=t?e:Object.keys(e),i=n.length,a=t?[]:{},d=0;for(let x=0;x<i;x++){let g=t?x:n[x];(!t&&o.includes(g)||t)&&r[g]===void 0&&e[g]===void 0?(a[g]=void 0,d++):(a[g]=Ve(r[g],e[g]),a[g]===r[g]&&r[g]!==void 0&&d++)}return s===i&&d===s?r:a}return e}function _t(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}function St(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Ke(r){if(!Pt(r))return!1;let e=r.constructor;if(e===void 0)return!0;let t=e.prototype;return!(!Pt(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Pt(r){return Object.prototype.toString.call(r)==="[object Object]"}function Mt(r){return new Promise(e=>{setTimeout(e,r)})}function Dt(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Ve(r,e):e}function Ft(r,e,t=0){let o=[...r,e];return t&&o.length>t?o.slice(1):o}function Lt(r,e,t=0){let o=[e,...r];return t&&o.length>t?o.slice(0,-1):o}var ie=Symbol();function Ie(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===ie?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Ge(r,e){return typeof r=="function"?r(...e):!!r}c();p();l();c();p();l();c();p();l();var Wt=r=>setTimeout(r,0);function Cr(){let r=[],e=0,t=a=>{a()},o=a=>{a()},s=Wt,n=a=>{e?r.push(a):s(()=>{t(a)})},i=()=>{let a=r;r=[],a.length&&s(()=>{o(()=>{a.forEach(d=>{t(d)})})})};return{batch:a=>{let d;e++;try{d=a()}finally{e--,e||i()}return d},batchCalls:a=>(...d)=>{n(()=>{a(...d)})},schedule:n,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{o=a},setScheduler:a=>{s=a}}}var T=Cr();c();p();l();c();p();l();c();p();l();var B=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var xr=class extends B{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!z&&window.addEventListener){let e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){let r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Oe=new xr;c();p();l();var yr=class extends B{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!z&&window.addEventListener){let e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},ae=new yr;c();p();l();function qt(){let r,e,t=new Promise((s,n)=>{r=s,e=n});t.status="pending",t.catch(()=>{});function o(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{o({status:"fulfilled",value:s}),r(s)},t.reject=s=>{o({status:"rejected",reason:s}),e(s)},t}function gr(r){return Math.min(1e3*2**r,3e4)}function $e(r){return(r??"online")==="online"?ae.isOnline():!0}var jt=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function Ue(r){return r instanceof jt}function Re(r){let e=!1,t=0,o=!1,s,n=qt(),i=A=>{o||(_(new jt(A)),r.abort?.())},a=()=>{e=!0},d=()=>{e=!1},x=()=>Oe.isFocused()&&(r.networkMode==="always"||ae.isOnline())&&r.canRun(),g=()=>$e(r.networkMode)&&r.canRun(),D=A=>{o||(o=!0,r.onSuccess?.(A),s?.(),n.resolve(A))},_=A=>{o||(o=!0,r.onError?.(A),s?.(),n.reject(A))},M=()=>new Promise(A=>{s=R=>{(o||x())&&A(R)},r.onPause?.()}).then(()=>{s=void 0,o||r.onContinue?.()}),E=()=>{if(o)return;let A,R=t===0?r.initialPromise:void 0;try{A=R??r.fn()}catch(k){A=Promise.reject(k)}Promise.resolve(A).then(D).catch(k=>{if(o)return;let V=r.retry??(z?0:3),Y=r.retryDelay??gr,he=typeof Y=="function"?Y(t,k):Y,Jt=V===!0||typeof V=="number"&&t<V||typeof V=="function"&&V(t,k);if(e||!Jt){_(k);return}t++,r.onFail?.(t,k),Mt(he).then(()=>x()?void 0:M()).then(()=>{e?_(k):E()})})};return{promise:n,cancel:i,continue:()=>(s?.(),n),cancelRetry:a,continueRetry:d,canStart:g,start:()=>(g()?E():M().then(E),n)}}c();p();l();var _e=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ot(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(z?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var Bt=class extends _e{#e;#t;#r;#o;#s;#i;#a;constructor(r){super(),this.#a=!1,this.#i=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#o=r.client,this.#r=this.#o.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=wr(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(r){this.options={...this.#i,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){let t=Dt(this.state.data,r,this.options);return this.#n({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#n({type:"setState",state:r,setStateOptions:e})}cancel(r){let e=this.#s?.promise;return this.#s?.cancel(r),e?e.then(I).catch(I):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>Rt(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ie||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>de(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Ut(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(r&&this.setOptions(r),!this.options.queryFn){let a=this.observers.find(d=>d.options.queryFn);a&&this.setOptions(a.options)}let t=new AbortController,o=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},s=()=>{let a=Ie(this.options,e),d={client:this.#o,queryKey:this.queryKey,meta:this.meta};return o(d),this.#a=!1,this.options.persister?this.options.persister(a,d,this):a(d)},n={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:s};o(n),this.options.behavior?.onFetch(n,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==n.fetchOptions?.meta)&&this.#n({type:"fetch",meta:n.fetchOptions?.meta});let i=a=>{Ue(a)&&a.silent||this.#n({type:"error",error:a}),Ue(a)||(this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#s=Re({initialPromise:e?.initialPromise,fn:n.fetchFn,abort:t.abort.bind(t),onSuccess:a=>{if(a===void 0){i(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(d){i(d);return}this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:i,onFail:(a,d)=>{this.#n({type:"failed",failureCount:a,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0}),this.#s.start()}#n(r){let e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...vr(t.data,this.options),fetchMeta:r.meta??null};case"success":return{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let o=r.error;return Ue(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),T.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function vr(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$e(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function wr(r){let e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,o=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Qt=class extends B{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){let o=e.queryKey,s=e.queryHash??fe(o,e),n=this.get(s);return n||(n=new Bt({client:r,queryKey:o,queryHash:s,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(o)}),this.add(n)),n}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){let e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){T.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Se(e,t))}findAll(r={}){let e=this.getAll();return Object.keys(r).length>0?e.filter(t=>Se(r,t)):e}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){T.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}};c();p();l();c();p();l();var Ht=class extends _e{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||Ye(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){let e=()=>{this.#o({type:"continue"})};this.#r=Re({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(s,n)=>{this.#o({type:"failed",failureCount:s,error:n})},onPause:()=>{this.#o({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t=this.state.status==="pending",o=!this.#r.canStart();try{if(t)e();else{this.#o({type:"pending",variables:r,isPaused:o}),await this.#t.config.onMutate?.(r,this);let n=await this.options.onMutate?.(r);n!==this.state.context&&this.#o({type:"pending",context:n,variables:r,isPaused:o})}let s=await this.#r.start();return await this.#t.config.onSuccess?.(s,r,this.state.context,this),await this.options.onSuccess?.(s,r,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,r,this.state.context),this.#o({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,r,this.state.context,this),await this.options.onError?.(s,r,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,r,this.state.context),s}finally{this.#o({type:"error",error:s})}}finally{this.#t.runNext(this)}}#o(r){let e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),T.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function Ye(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zt=class extends B{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){let o=new Ht({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(o),o}add(r){this.#e.add(r);let e=Me(r);if(typeof e=="string"){let t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){let e=Me(r);if(typeof e=="string"){let t=this.#t.get(e);if(t)if(t.length>1){let o=t.indexOf(r);o!==-1&&t.splice(o,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){let e=Me(r);if(typeof e=="string"){let o=this.#t.get(e)?.find(s=>s.state.status==="pending");return!o||o===r}else return!0}runNext(r){let e=Me(r);return typeof e=="string"?this.#t.get(e)?.find(o=>o!==r&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){T.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Pe(e,t))}findAll(r={}){return this.getAll().filter(e=>Pe(r,e))}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){let r=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(r.map(e=>e.continue().catch(I))))}};function Me(r){return r.options.scope?.id}c();p();l();function Ze(r){return{onFetch:(e,t)=>{let o=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],i=e.state.data?.pageParams||[],a={pages:[],pageParams:[]},d=0,x=async()=>{let g=!1,D=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=Ie(e.options,e.fetchOptions),M=async(E,A,R)=>{if(g)return Promise.reject();if(A==null&&E.pages.length)return Promise.resolve(E);let k={client:e.client,queryKey:e.queryKey,pageParam:A,direction:R?"backward":"forward",meta:e.options.meta};D(k);let V=await _(k),{maxPages:Y}=e.options,he=R?Lt:Ft;return{pages:he(E.pages,V,Y),pageParams:he(E.pageParams,A,Y)}};if(s&&n.length){let E=s==="backward",A=E?Ar:Kt,R={pages:n,pageParams:i},k=A(o,R);a=await M(R,k,E)}else{let E=r??n.length;do{let A=d===0?i[0]??o.initialPageParam:Kt(o,a);if(d>0&&A==null)break;a=await M(a,A),d++}while(d<E)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(x,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=x}}}function Kt(r,{pages:e,pageParams:t}){let o=e.length-1;return e.length>0?r.getNextPageParam(e[o],e,t[o],t):void 0}function Ar(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var Tr=class{#e;#t;#r;#o;#s;#i;#a;#n;constructor(r={}){this.#e=r.queryCache||new Qt,this.#t=r.mutationCache||new zt,this.#r=r.defaultOptions||{},this.#o=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=Oe.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=ae.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(r){return this.#e.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#t.findAll({...r,status:"pending"}).length}getQueryData(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(r){let e=this.defaultQueryOptions(r),t=this.#e.build(this,e),o=t.state.data;return o===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(de(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(r){return this.#e.findAll(r).map(({queryKey:e,state:t})=>{let o=t.data;return[e,o]})}setQueryData(r,e,t){let o=this.defaultQueryOptions({queryKey:r}),n=this.#e.get(o.queryHash)?.state.data,i=It(e,n);if(i!==void 0)return this.#e.build(this,o).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return T.batch(()=>this.#e.findAll(r).map(({queryKey:o})=>[o,this.setQueryData(o,e,t)]))}getQueryState(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state}removeQueries(r){let e=this.#e;T.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){let t=this.#e;return T.batch(()=>(t.findAll(r).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){let t={revert:!0,...e},o=T.batch(()=>this.#e.findAll(r).map(s=>s.cancel(t)));return Promise.all(o).then(I).catch(I)}invalidateQueries(r,e={}){return T.batch(()=>(this.#e.findAll(r).forEach(t=>{t.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},e)))}refetchQueries(r,e={}){let t={...e,cancelRefetch:e.cancelRefetch??!0},o=T.batch(()=>this.#e.findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let n=s.fetch(void 0,t);return t.throwOnError||(n=n.catch(I)),s.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(o).then(I)}fetchQuery(r){let e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);let t=this.#e.build(this,e);return t.isStaleByTime(de(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(I).catch(I)}fetchInfiniteQuery(r){return r.behavior=Ze(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(I).catch(I)}ensureInfiniteQueryData(r){return r.behavior=Ze(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return ae.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(r){this.#r=r}setQueryDefaults(r,e){this.#o.set(j(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){let e=[...this.#o.values()],t={};return e.forEach(o=>{ne(r,o.queryKey)&&Object.assign(t,o.defaultOptions)}),t}setMutationDefaults(r,e){this.#s.set(j(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){let e=[...this.#s.values()],t={};return e.forEach(o=>{ne(r,o.mutationKey)&&Object.assign(t,o.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;let e={...this.#r.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=fe(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ie&&(e.enabled=!1),e}defaultMutationOptions(r){return r?._defaulted?r:{...this.#r.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};c();p();l();c();p();l();var Je=class extends B{#e;#t=void 0;#r;#o;constructor(r,e){super(),this.#e=r,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){let e=this.options;this.options=this.#e.defaultMutationOptions(r),_t(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&j(e.mutationKey)!==j(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#s(),this.#i(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(r,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#s(){let r=this.#r?.state??Ye();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#i(r){T.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#t.variables,t=this.#t.context;r?.type==="success"?(this.#o.onSuccess?.(r.data,e,t),this.#o.onSettled?.(r.data,null,e,t)):r?.type==="error"&&(this.#o.onError?.(r.error,e,t),this.#o.onSettled?.(void 0,r.error,e,t))}this.listeners.forEach(e=>{e(this.#t)})})}};c();p();l();var ce=Z(le(),1),Zt=Z(Yt(),1),Xe=ce.createContext(void 0),et=r=>{let e=ce.useContext(Xe);if(r)return r;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},br=({client:r,children:e})=>(ce.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),(0,Zt.jsx)(Xe.Provider,{value:r,children:e}));c();p();l();c();p();l();var K=Z(le(),1);function kr(r,e){let t=et(e),[o]=K.useState(()=>new Je(t,r));K.useEffect(()=>{o.setOptions(r)},[o,r]);let s=K.useSyncExternalStore(K.useCallback(i=>o.subscribe(T.batchCalls(i)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),n=K.useCallback((i,a)=>{o.mutate(i,a).catch(I)},[o]);if(s.error&&Ge(o.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:n,mutateAsync:s.mutate}}c();p();l();export{ur as a,we as b,dr as c,Qe as d,oe as e,se as f,Ae as g,vo as h,wo as i,ci as j,Tr as k,br as l,kr as m};
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
