import{f as ws}from"./chunk-N2WXLAZF.js";import{a as Ct,b as Lr,c as dr,d as jt,e as bs,f as hr,g as be,h as Kt,i as ei,j as Zt,k as ti,l as Ft,m as pr}from"./chunk-BOTAV32Q.js";import{c as Jo,d as Qo}from"./chunk-EVEOQSJV.js";import{a as Rs}from"./chunk-NBB6K44E.js";import{a as ms}from"./chunk-BDUWLAUS.js";import{b as jo,c as Zo,e as Xo}from"./chunk-6ZQQ3XQO.js";import{a as _s}from"./chunk-MQMLE4BX.js";import{E as lr,F as Yo,H as kt,K as Zr,s as Go,t as Ho,u as Tr}from"./chunk-EDRI7XUL.js";import{d as vt,g as fr,h as Nr,i as ee,k as te,l as D,m as ys,n as kr,o as re}from"./chunk-JY5TIRRF.js";var ks=vt((wi,Ns)=>{ee();re();te();(function(n,e){"use strict";function t(y,i){if(!y)throw new Error(i||"Assertion failed")}function r(y,i){y.super_=i;var u=function(){};u.prototype=i.prototype,y.prototype=new u,y.prototype.constructor=y}function s(y,i,u){if(s.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(y||0,i||10,u||"be"))}typeof n=="object"?n.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=(kr(),Nr(ys)).Buffer}catch{}s.isBN=function(i){return i instanceof s?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===s.wordSize&&Array.isArray(i.words)},s.max=function(i,u){return i.cmp(u)>0?i:u},s.min=function(i,u){return i.cmp(u)<0?i:u},s.prototype._init=function(i,u,l){if(typeof i=="number")return this._initNumber(i,u,l);if(typeof i=="object")return this._initArray(i,u,l);u==="hex"&&(u=16),t(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var h=0;i[0]==="-"&&(h++,this.negative=1),h<i.length&&(u===16?this._parseHex(i,h,l):(this._parseBase(i,u,h),l==="le"&&this._initArray(this.toArray(),u,l)))},s.prototype._initNumber=function(i,u,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(t(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},s.prototype._initArray=function(i,u,l){if(t(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p,R,S=0;if(l==="be")for(h=i.length-1,p=0;h>=0;h-=3)R=i[h]|i[h-1]<<8|i[h-2]<<16,this.words[p]|=R<<S&67108863,this.words[p+1]=R>>>26-S&67108863,S+=24,S>=26&&(S-=26,p++);else if(l==="le")for(h=0,p=0;h<i.length;h+=3)R=i[h]|i[h+1]<<8|i[h+2]<<16,this.words[p]|=R<<S&67108863,this.words[p+1]=R>>>26-S&67108863,S+=24,S>=26&&(S-=26,p++);return this._strip()};function a(y,i){var u=y.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;t(!1,"Invalid character in "+y)}function f(y,i,u){var l=a(y,u);return u-1>=i&&(l|=a(y,u-1)<<4),l}s.prototype._parseHex=function(i,u,l){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p=0,R=0,S;if(l==="be")for(h=i.length-1;h>=u;h-=2)S=f(i,u,h)<<p,this.words[R]|=S&67108863,p>=18?(p-=18,R+=1,this.words[R]|=S>>>26):p+=8;else{var g=i.length-u;for(h=g%2===0?u+1:u;h<i.length;h+=2)S=f(i,u,h)<<p,this.words[R]|=S&67108863,p>=18?(p-=18,R+=1,this.words[R]|=S>>>26):p+=8}this._strip()};function d(y,i,u,l){for(var h=0,p=0,R=Math.min(y.length,u),S=i;S<R;S++){var g=y.charCodeAt(S)-48;h*=l,g>=49?p=g-49+10:g>=17?p=g-17+10:p=g,t(g>=0&&p<l,"Invalid character"),h+=p}return h}s.prototype._parseBase=function(i,u,l){this.words=[0],this.length=1;for(var h=0,p=1;p<=67108863;p*=u)h++;h--,p=p/u|0;for(var R=i.length-l,S=R%h,g=Math.min(R,R-S)+l,c=0,_=l;_<g;_+=h)c=d(i,_,_+h,u),this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(S!==0){var $=1;for(c=d(i,_,i.length,u),_=0;_<S;_++)$*=u;this.imuln($),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function w(y,i){y.words=i.words,y.length=i.length,y.negative=i.negative,y.red=i.red}if(s.prototype._move=function(i){w(i,this)},s.prototype.clone=function(){var i=new s(null);return this.copy(i),i},s.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(i,u){i=i||10,u=u|0||1;var l;if(i===16||i==="hex"){l="";for(var h=0,p=0,R=0;R<this.length;R++){var S=this.words[R],g=((S<<h|p)&16777215).toString(16);p=S>>>24-h&16777215,h+=2,h>=26&&(h-=26,R--),p!==0||R!==this.length-1?l=N[6-g.length]+g+l:l=g+l}for(p!==0&&(l=p.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(i===(i|0)&&i>=2&&i<=36){var c=B[i],_=E[i];l="";var $=this.clone();for($.negative=0;!$.isZero();){var F=$.modrn(_).toString(i);$=$.idivn(_),$.isZero()?l=F+l:l=N[c-F.length]+F+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(i,u){return this.toArrayLike(o,i,u)}),s.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var k=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};s.prototype.toArrayLike=function(i,u,l){this._strip();var h=this.byteLength(),p=l||Math.max(1,h);t(h<=p,"byte array longer than desired length"),t(p>0,"Requested array length <= 0");var R=k(i,p),S=u==="le"?"LE":"BE";return this["_toArrayLike"+S](R,h),R},s.prototype._toArrayLikeLE=function(i,u){for(var l=0,h=0,p=0,R=0;p<this.length;p++){var S=this.words[p]<<R|h;i[l++]=S&255,l<i.length&&(i[l++]=S>>8&255),l<i.length&&(i[l++]=S>>16&255),R===6?(l<i.length&&(i[l++]=S>>24&255),h=0,R=0):(h=S>>>24,R+=2)}if(l<i.length)for(i[l++]=h;l<i.length;)i[l++]=0},s.prototype._toArrayLikeBE=function(i,u){for(var l=i.length-1,h=0,p=0,R=0;p<this.length;p++){var S=this.words[p]<<R|h;i[l--]=S&255,l>=0&&(i[l--]=S>>8&255),l>=0&&(i[l--]=S>>16&255),R===6?(l>=0&&(i[l--]=S>>24&255),h=0,R=0):(h=S>>>24,R+=2)}if(l>=0)for(i[l--]=h;l>=0;)i[l--]=0},Math.clz32?s.prototype._countBits=function(i){return 32-Math.clz32(i)}:s.prototype._countBits=function(i){var u=i,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},s.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,l=0;return(u&8191)===0&&(l+=13,u>>>=13),(u&127)===0&&(l+=7,u>>>=7),(u&15)===0&&(l+=4,u>>>=4),(u&3)===0&&(l+=2,u>>>=2),(u&1)===0&&l++,l},s.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function O(y){for(var i=new Array(y.bitLength()),u=0;u<i.length;u++){var l=u/26|0,h=u%26;i[u]=y.words[l]>>>h&1}return i}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(i+=l,l!==26)break}return i},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},s.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},s.prototype.ior=function(i){return t((this.negative|i.negative)===0),this.iuor(i)},s.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},s.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},s.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=u.length,this._strip()},s.prototype.iand=function(i){return t((this.negative|i.negative)===0),this.iuand(i)},s.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},s.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},s.prototype.iuxor=function(i){var u,l;this.length>i.length?(u=this,l=i):(u=i,l=this);for(var h=0;h<l.length;h++)this.words[h]=u.words[h]^l.words[h];if(this!==u)for(;h<u.length;h++)this.words[h]=u.words[h];return this.length=u.length,this._strip()},s.prototype.ixor=function(i){return t((this.negative|i.negative)===0),this.iuxor(i)},s.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},s.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},s.prototype.inotn=function(i){t(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,l=i%26;this._expand(u),l>0&&u--;for(var h=0;h<u;h++)this.words[h]=~this.words[h]&67108863;return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this._strip()},s.prototype.notn=function(i){return this.clone().inotn(i)},s.prototype.setn=function(i,u){t(typeof i=="number"&&i>=0);var l=i/26|0,h=i%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<h:this.words[l]=this.words[l]&~(1<<h),this._strip()},s.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var l,h;this.length>i.length?(l=this,h=i):(l=i,h=this);for(var p=0,R=0;R<h.length;R++)u=(l.words[R]|0)+(h.words[R]|0)+p,this.words[R]=u&67108863,p=u>>>26;for(;p!==0&&R<l.length;R++)u=(l.words[R]|0)+p,this.words[R]=u&67108863,p=u>>>26;if(this.length=l.length,p!==0)this.words[this.length]=p,this.length++;else if(l!==this)for(;R<l.length;R++)this.words[R]=l.words[R];return this},s.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},s.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var l=this.cmp(i);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,p;l>0?(h=this,p=i):(h=i,p=this);for(var R=0,S=0;S<p.length;S++)u=(h.words[S]|0)-(p.words[S]|0)+R,R=u>>26,this.words[S]=u&67108863;for(;R!==0&&S<h.length;S++)u=(h.words[S]|0)+R,R=u>>26,this.words[S]=u&67108863;if(R===0&&S<h.length&&h!==this)for(;S<h.length;S++)this.words[S]=h.words[S];return this.length=Math.max(this.length,S),h!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(i){return this.clone().isub(i)};function A(y,i,u){u.negative=i.negative^y.negative;var l=y.length+i.length|0;u.length=l,l=l-1|0;var h=y.words[0]|0,p=i.words[0]|0,R=h*p,S=R&67108863,g=R/67108864|0;u.words[0]=S;for(var c=1;c<l;c++){for(var _=g>>>26,$=g&67108863,F=Math.min(c,i.length-1),j=Math.max(0,c-y.length+1);j<=F;j++){var se=c-j|0;h=y.words[se]|0,p=i.words[j]|0,R=h*p+$,_+=R/67108864|0,$=R&67108863}u.words[c]=$|0,g=_|0}return g!==0?u.words[c]=g|0:u.length--,u._strip()}var x=function(i,u,l){var h=i.words,p=u.words,R=l.words,S=0,g,c,_,$=h[0]|0,F=$&8191,j=$>>>13,se=h[1]|0,ie=se&8191,ue=se>>>13,St=h[2]|0,le=St&8191,Re=St>>>13,ko=h[3]|0,Ne=ko&8191,ke=ko>>>13,To=h[4]|0,Te=To&8191,Le=To>>>13,Lo=h[5]|0,xe=Lo&8191,Be=Lo>>>13,xo=h[6]|0,Ce=xo&8191,Me=xo>>>13,Bo=h[7]|0,Pe=Bo&8191,De=Bo>>>13,Co=h[8]|0,Ue=Co&8191,ze=Co>>>13,Mo=h[9]|0,Ke=Mo&8191,Fe=Mo>>>13,Po=p[0]|0,qe=Po&8191,We=Po>>>13,Do=p[1]|0,$e=Do&8191,Ve=Do>>>13,Uo=p[2]|0,Ge=Uo&8191,He=Uo>>>13,zo=p[3]|0,Ye=zo&8191,je=zo>>>13,Ko=p[4]|0,Ze=Ko&8191,Xe=Ko>>>13,Fo=p[5]|0,Je=Fo&8191,Qe=Fo>>>13,qo=p[6]|0,et=qo&8191,tt=qo>>>13,Wo=p[7]|0,rt=Wo&8191,nt=Wo>>>13,$o=p[8]|0,st=$o&8191,ot=$o>>>13,Vo=p[9]|0,it=Vo&8191,at=Vo>>>13;l.negative=i.negative^u.negative,l.length=19,g=Math.imul(F,qe),c=Math.imul(F,We),c=c+Math.imul(j,qe)|0,_=Math.imul(j,We);var Xn=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,g=Math.imul(ie,qe),c=Math.imul(ie,We),c=c+Math.imul(ue,qe)|0,_=Math.imul(ue,We),g=g+Math.imul(F,$e)|0,c=c+Math.imul(F,Ve)|0,c=c+Math.imul(j,$e)|0,_=_+Math.imul(j,Ve)|0;var Jn=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,g=Math.imul(le,qe),c=Math.imul(le,We),c=c+Math.imul(Re,qe)|0,_=Math.imul(Re,We),g=g+Math.imul(ie,$e)|0,c=c+Math.imul(ie,Ve)|0,c=c+Math.imul(ue,$e)|0,_=_+Math.imul(ue,Ve)|0,g=g+Math.imul(F,Ge)|0,c=c+Math.imul(F,He)|0,c=c+Math.imul(j,Ge)|0,_=_+Math.imul(j,He)|0;var Qn=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,g=Math.imul(Ne,qe),c=Math.imul(Ne,We),c=c+Math.imul(ke,qe)|0,_=Math.imul(ke,We),g=g+Math.imul(le,$e)|0,c=c+Math.imul(le,Ve)|0,c=c+Math.imul(Re,$e)|0,_=_+Math.imul(Re,Ve)|0,g=g+Math.imul(ie,Ge)|0,c=c+Math.imul(ie,He)|0,c=c+Math.imul(ue,Ge)|0,_=_+Math.imul(ue,He)|0,g=g+Math.imul(F,Ye)|0,c=c+Math.imul(F,je)|0,c=c+Math.imul(j,Ye)|0,_=_+Math.imul(j,je)|0;var es=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(es>>>26)|0,es&=67108863,g=Math.imul(Te,qe),c=Math.imul(Te,We),c=c+Math.imul(Le,qe)|0,_=Math.imul(Le,We),g=g+Math.imul(Ne,$e)|0,c=c+Math.imul(Ne,Ve)|0,c=c+Math.imul(ke,$e)|0,_=_+Math.imul(ke,Ve)|0,g=g+Math.imul(le,Ge)|0,c=c+Math.imul(le,He)|0,c=c+Math.imul(Re,Ge)|0,_=_+Math.imul(Re,He)|0,g=g+Math.imul(ie,Ye)|0,c=c+Math.imul(ie,je)|0,c=c+Math.imul(ue,Ye)|0,_=_+Math.imul(ue,je)|0,g=g+Math.imul(F,Ze)|0,c=c+Math.imul(F,Xe)|0,c=c+Math.imul(j,Ze)|0,_=_+Math.imul(j,Xe)|0;var ts=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ts>>>26)|0,ts&=67108863,g=Math.imul(xe,qe),c=Math.imul(xe,We),c=c+Math.imul(Be,qe)|0,_=Math.imul(Be,We),g=g+Math.imul(Te,$e)|0,c=c+Math.imul(Te,Ve)|0,c=c+Math.imul(Le,$e)|0,_=_+Math.imul(Le,Ve)|0,g=g+Math.imul(Ne,Ge)|0,c=c+Math.imul(Ne,He)|0,c=c+Math.imul(ke,Ge)|0,_=_+Math.imul(ke,He)|0,g=g+Math.imul(le,Ye)|0,c=c+Math.imul(le,je)|0,c=c+Math.imul(Re,Ye)|0,_=_+Math.imul(Re,je)|0,g=g+Math.imul(ie,Ze)|0,c=c+Math.imul(ie,Xe)|0,c=c+Math.imul(ue,Ze)|0,_=_+Math.imul(ue,Xe)|0,g=g+Math.imul(F,Je)|0,c=c+Math.imul(F,Qe)|0,c=c+Math.imul(j,Je)|0,_=_+Math.imul(j,Qe)|0;var rs=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(rs>>>26)|0,rs&=67108863,g=Math.imul(Ce,qe),c=Math.imul(Ce,We),c=c+Math.imul(Me,qe)|0,_=Math.imul(Me,We),g=g+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(Be,$e)|0,_=_+Math.imul(Be,Ve)|0,g=g+Math.imul(Te,Ge)|0,c=c+Math.imul(Te,He)|0,c=c+Math.imul(Le,Ge)|0,_=_+Math.imul(Le,He)|0,g=g+Math.imul(Ne,Ye)|0,c=c+Math.imul(Ne,je)|0,c=c+Math.imul(ke,Ye)|0,_=_+Math.imul(ke,je)|0,g=g+Math.imul(le,Ze)|0,c=c+Math.imul(le,Xe)|0,c=c+Math.imul(Re,Ze)|0,_=_+Math.imul(Re,Xe)|0,g=g+Math.imul(ie,Je)|0,c=c+Math.imul(ie,Qe)|0,c=c+Math.imul(ue,Je)|0,_=_+Math.imul(ue,Qe)|0,g=g+Math.imul(F,et)|0,c=c+Math.imul(F,tt)|0,c=c+Math.imul(j,et)|0,_=_+Math.imul(j,tt)|0;var ns=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ns>>>26)|0,ns&=67108863,g=Math.imul(Pe,qe),c=Math.imul(Pe,We),c=c+Math.imul(De,qe)|0,_=Math.imul(De,We),g=g+Math.imul(Ce,$e)|0,c=c+Math.imul(Ce,Ve)|0,c=c+Math.imul(Me,$e)|0,_=_+Math.imul(Me,Ve)|0,g=g+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(Be,Ge)|0,_=_+Math.imul(Be,He)|0,g=g+Math.imul(Te,Ye)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Le,Ye)|0,_=_+Math.imul(Le,je)|0,g=g+Math.imul(Ne,Ze)|0,c=c+Math.imul(Ne,Xe)|0,c=c+Math.imul(ke,Ze)|0,_=_+Math.imul(ke,Xe)|0,g=g+Math.imul(le,Je)|0,c=c+Math.imul(le,Qe)|0,c=c+Math.imul(Re,Je)|0,_=_+Math.imul(Re,Qe)|0,g=g+Math.imul(ie,et)|0,c=c+Math.imul(ie,tt)|0,c=c+Math.imul(ue,et)|0,_=_+Math.imul(ue,tt)|0,g=g+Math.imul(F,rt)|0,c=c+Math.imul(F,nt)|0,c=c+Math.imul(j,rt)|0,_=_+Math.imul(j,nt)|0;var ss=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ss>>>26)|0,ss&=67108863,g=Math.imul(Ue,qe),c=Math.imul(Ue,We),c=c+Math.imul(ze,qe)|0,_=Math.imul(ze,We),g=g+Math.imul(Pe,$e)|0,c=c+Math.imul(Pe,Ve)|0,c=c+Math.imul(De,$e)|0,_=_+Math.imul(De,Ve)|0,g=g+Math.imul(Ce,Ge)|0,c=c+Math.imul(Ce,He)|0,c=c+Math.imul(Me,Ge)|0,_=_+Math.imul(Me,He)|0,g=g+Math.imul(xe,Ye)|0,c=c+Math.imul(xe,je)|0,c=c+Math.imul(Be,Ye)|0,_=_+Math.imul(Be,je)|0,g=g+Math.imul(Te,Ze)|0,c=c+Math.imul(Te,Xe)|0,c=c+Math.imul(Le,Ze)|0,_=_+Math.imul(Le,Xe)|0,g=g+Math.imul(Ne,Je)|0,c=c+Math.imul(Ne,Qe)|0,c=c+Math.imul(ke,Je)|0,_=_+Math.imul(ke,Qe)|0,g=g+Math.imul(le,et)|0,c=c+Math.imul(le,tt)|0,c=c+Math.imul(Re,et)|0,_=_+Math.imul(Re,tt)|0,g=g+Math.imul(ie,rt)|0,c=c+Math.imul(ie,nt)|0,c=c+Math.imul(ue,rt)|0,_=_+Math.imul(ue,nt)|0,g=g+Math.imul(F,st)|0,c=c+Math.imul(F,ot)|0,c=c+Math.imul(j,st)|0,_=_+Math.imul(j,ot)|0;var os=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(os>>>26)|0,os&=67108863,g=Math.imul(Ke,qe),c=Math.imul(Ke,We),c=c+Math.imul(Fe,qe)|0,_=Math.imul(Fe,We),g=g+Math.imul(Ue,$e)|0,c=c+Math.imul(Ue,Ve)|0,c=c+Math.imul(ze,$e)|0,_=_+Math.imul(ze,Ve)|0,g=g+Math.imul(Pe,Ge)|0,c=c+Math.imul(Pe,He)|0,c=c+Math.imul(De,Ge)|0,_=_+Math.imul(De,He)|0,g=g+Math.imul(Ce,Ye)|0,c=c+Math.imul(Ce,je)|0,c=c+Math.imul(Me,Ye)|0,_=_+Math.imul(Me,je)|0,g=g+Math.imul(xe,Ze)|0,c=c+Math.imul(xe,Xe)|0,c=c+Math.imul(Be,Ze)|0,_=_+Math.imul(Be,Xe)|0,g=g+Math.imul(Te,Je)|0,c=c+Math.imul(Te,Qe)|0,c=c+Math.imul(Le,Je)|0,_=_+Math.imul(Le,Qe)|0,g=g+Math.imul(Ne,et)|0,c=c+Math.imul(Ne,tt)|0,c=c+Math.imul(ke,et)|0,_=_+Math.imul(ke,tt)|0,g=g+Math.imul(le,rt)|0,c=c+Math.imul(le,nt)|0,c=c+Math.imul(Re,rt)|0,_=_+Math.imul(Re,nt)|0,g=g+Math.imul(ie,st)|0,c=c+Math.imul(ie,ot)|0,c=c+Math.imul(ue,st)|0,_=_+Math.imul(ue,ot)|0,g=g+Math.imul(F,it)|0,c=c+Math.imul(F,at)|0,c=c+Math.imul(j,it)|0,_=_+Math.imul(j,at)|0;var is=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(is>>>26)|0,is&=67108863,g=Math.imul(Ke,$e),c=Math.imul(Ke,Ve),c=c+Math.imul(Fe,$e)|0,_=Math.imul(Fe,Ve),g=g+Math.imul(Ue,Ge)|0,c=c+Math.imul(Ue,He)|0,c=c+Math.imul(ze,Ge)|0,_=_+Math.imul(ze,He)|0,g=g+Math.imul(Pe,Ye)|0,c=c+Math.imul(Pe,je)|0,c=c+Math.imul(De,Ye)|0,_=_+Math.imul(De,je)|0,g=g+Math.imul(Ce,Ze)|0,c=c+Math.imul(Ce,Xe)|0,c=c+Math.imul(Me,Ze)|0,_=_+Math.imul(Me,Xe)|0,g=g+Math.imul(xe,Je)|0,c=c+Math.imul(xe,Qe)|0,c=c+Math.imul(Be,Je)|0,_=_+Math.imul(Be,Qe)|0,g=g+Math.imul(Te,et)|0,c=c+Math.imul(Te,tt)|0,c=c+Math.imul(Le,et)|0,_=_+Math.imul(Le,tt)|0,g=g+Math.imul(Ne,rt)|0,c=c+Math.imul(Ne,nt)|0,c=c+Math.imul(ke,rt)|0,_=_+Math.imul(ke,nt)|0,g=g+Math.imul(le,st)|0,c=c+Math.imul(le,ot)|0,c=c+Math.imul(Re,st)|0,_=_+Math.imul(Re,ot)|0,g=g+Math.imul(ie,it)|0,c=c+Math.imul(ie,at)|0,c=c+Math.imul(ue,it)|0,_=_+Math.imul(ue,at)|0;var as=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(as>>>26)|0,as&=67108863,g=Math.imul(Ke,Ge),c=Math.imul(Ke,He),c=c+Math.imul(Fe,Ge)|0,_=Math.imul(Fe,He),g=g+Math.imul(Ue,Ye)|0,c=c+Math.imul(Ue,je)|0,c=c+Math.imul(ze,Ye)|0,_=_+Math.imul(ze,je)|0,g=g+Math.imul(Pe,Ze)|0,c=c+Math.imul(Pe,Xe)|0,c=c+Math.imul(De,Ze)|0,_=_+Math.imul(De,Xe)|0,g=g+Math.imul(Ce,Je)|0,c=c+Math.imul(Ce,Qe)|0,c=c+Math.imul(Me,Je)|0,_=_+Math.imul(Me,Qe)|0,g=g+Math.imul(xe,et)|0,c=c+Math.imul(xe,tt)|0,c=c+Math.imul(Be,et)|0,_=_+Math.imul(Be,tt)|0,g=g+Math.imul(Te,rt)|0,c=c+Math.imul(Te,nt)|0,c=c+Math.imul(Le,rt)|0,_=_+Math.imul(Le,nt)|0,g=g+Math.imul(Ne,st)|0,c=c+Math.imul(Ne,ot)|0,c=c+Math.imul(ke,st)|0,_=_+Math.imul(ke,ot)|0,g=g+Math.imul(le,it)|0,c=c+Math.imul(le,at)|0,c=c+Math.imul(Re,it)|0,_=_+Math.imul(Re,at)|0;var cs=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(cs>>>26)|0,cs&=67108863,g=Math.imul(Ke,Ye),c=Math.imul(Ke,je),c=c+Math.imul(Fe,Ye)|0,_=Math.imul(Fe,je),g=g+Math.imul(Ue,Ze)|0,c=c+Math.imul(Ue,Xe)|0,c=c+Math.imul(ze,Ze)|0,_=_+Math.imul(ze,Xe)|0,g=g+Math.imul(Pe,Je)|0,c=c+Math.imul(Pe,Qe)|0,c=c+Math.imul(De,Je)|0,_=_+Math.imul(De,Qe)|0,g=g+Math.imul(Ce,et)|0,c=c+Math.imul(Ce,tt)|0,c=c+Math.imul(Me,et)|0,_=_+Math.imul(Me,tt)|0,g=g+Math.imul(xe,rt)|0,c=c+Math.imul(xe,nt)|0,c=c+Math.imul(Be,rt)|0,_=_+Math.imul(Be,nt)|0,g=g+Math.imul(Te,st)|0,c=c+Math.imul(Te,ot)|0,c=c+Math.imul(Le,st)|0,_=_+Math.imul(Le,ot)|0,g=g+Math.imul(Ne,it)|0,c=c+Math.imul(Ne,at)|0,c=c+Math.imul(ke,it)|0,_=_+Math.imul(ke,at)|0;var us=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(us>>>26)|0,us&=67108863,g=Math.imul(Ke,Ze),c=Math.imul(Ke,Xe),c=c+Math.imul(Fe,Ze)|0,_=Math.imul(Fe,Xe),g=g+Math.imul(Ue,Je)|0,c=c+Math.imul(Ue,Qe)|0,c=c+Math.imul(ze,Je)|0,_=_+Math.imul(ze,Qe)|0,g=g+Math.imul(Pe,et)|0,c=c+Math.imul(Pe,tt)|0,c=c+Math.imul(De,et)|0,_=_+Math.imul(De,tt)|0,g=g+Math.imul(Ce,rt)|0,c=c+Math.imul(Ce,nt)|0,c=c+Math.imul(Me,rt)|0,_=_+Math.imul(Me,nt)|0,g=g+Math.imul(xe,st)|0,c=c+Math.imul(xe,ot)|0,c=c+Math.imul(Be,st)|0,_=_+Math.imul(Be,ot)|0,g=g+Math.imul(Te,it)|0,c=c+Math.imul(Te,at)|0,c=c+Math.imul(Le,it)|0,_=_+Math.imul(Le,at)|0;var fs=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(fs>>>26)|0,fs&=67108863,g=Math.imul(Ke,Je),c=Math.imul(Ke,Qe),c=c+Math.imul(Fe,Je)|0,_=Math.imul(Fe,Qe),g=g+Math.imul(Ue,et)|0,c=c+Math.imul(Ue,tt)|0,c=c+Math.imul(ze,et)|0,_=_+Math.imul(ze,tt)|0,g=g+Math.imul(Pe,rt)|0,c=c+Math.imul(Pe,nt)|0,c=c+Math.imul(De,rt)|0,_=_+Math.imul(De,nt)|0,g=g+Math.imul(Ce,st)|0,c=c+Math.imul(Ce,ot)|0,c=c+Math.imul(Me,st)|0,_=_+Math.imul(Me,ot)|0,g=g+Math.imul(xe,it)|0,c=c+Math.imul(xe,at)|0,c=c+Math.imul(Be,it)|0,_=_+Math.imul(Be,at)|0;var ls=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ls>>>26)|0,ls&=67108863,g=Math.imul(Ke,et),c=Math.imul(Ke,tt),c=c+Math.imul(Fe,et)|0,_=Math.imul(Fe,tt),g=g+Math.imul(Ue,rt)|0,c=c+Math.imul(Ue,nt)|0,c=c+Math.imul(ze,rt)|0,_=_+Math.imul(ze,nt)|0,g=g+Math.imul(Pe,st)|0,c=c+Math.imul(Pe,ot)|0,c=c+Math.imul(De,st)|0,_=_+Math.imul(De,ot)|0,g=g+Math.imul(Ce,it)|0,c=c+Math.imul(Ce,at)|0,c=c+Math.imul(Me,it)|0,_=_+Math.imul(Me,at)|0;var ds=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ds>>>26)|0,ds&=67108863,g=Math.imul(Ke,rt),c=Math.imul(Ke,nt),c=c+Math.imul(Fe,rt)|0,_=Math.imul(Fe,nt),g=g+Math.imul(Ue,st)|0,c=c+Math.imul(Ue,ot)|0,c=c+Math.imul(ze,st)|0,_=_+Math.imul(ze,ot)|0,g=g+Math.imul(Pe,it)|0,c=c+Math.imul(Pe,at)|0,c=c+Math.imul(De,it)|0,_=_+Math.imul(De,at)|0;var hs=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(hs>>>26)|0,hs&=67108863,g=Math.imul(Ke,st),c=Math.imul(Ke,ot),c=c+Math.imul(Fe,st)|0,_=Math.imul(Fe,ot),g=g+Math.imul(Ue,it)|0,c=c+Math.imul(Ue,at)|0,c=c+Math.imul(ze,it)|0,_=_+Math.imul(ze,at)|0;var ps=(S+g|0)+((c&8191)<<13)|0;S=(_+(c>>>13)|0)+(ps>>>26)|0,ps&=67108863,g=Math.imul(Ke,it),c=Math.imul(Ke,at),c=c+Math.imul(Fe,it)|0,_=Math.imul(Fe,at);var gs=(S+g|0)+((c&8191)<<13)|0;return S=(_+(c>>>13)|0)+(gs>>>26)|0,gs&=67108863,R[0]=Xn,R[1]=Jn,R[2]=Qn,R[3]=es,R[4]=ts,R[5]=rs,R[6]=ns,R[7]=ss,R[8]=os,R[9]=is,R[10]=as,R[11]=cs,R[12]=us,R[13]=fs,R[14]=ls,R[15]=ds,R[16]=hs,R[17]=ps,R[18]=gs,S!==0&&(R[19]=S,l.length++),l};Math.imul||(x=A);function K(y,i,u){u.negative=i.negative^y.negative,u.length=y.length+i.length;for(var l=0,h=0,p=0;p<u.length-1;p++){var R=h;h=0;for(var S=l&67108863,g=Math.min(p,i.length-1),c=Math.max(0,p-y.length+1);c<=g;c++){var _=p-c,$=y.words[_]|0,F=i.words[c]|0,j=$*F,se=j&67108863;R=R+(j/67108864|0)|0,se=se+S|0,S=se&67108863,R=R+(se>>>26)|0,h+=R>>>26,R&=67108863}u.words[p]=S,l=R,R=h}return l!==0?u.words[p]=l:u.length--,u._strip()}function J(y,i,u){return K(y,i,u)}s.prototype.mulTo=function(i,u){var l,h=this.length+i.length;return this.length===10&&i.length===10?l=x(this,i,u):h<63?l=A(this,i,u):h<1024?l=K(this,i,u):l=J(this,i,u),l};function Y(y,i){this.x=y,this.y=i}Y.prototype.makeRBT=function(i){for(var u=new Array(i),l=s.prototype._countBits(i)-1,h=0;h<i;h++)u[h]=this.revBin(h,l,i);return u},Y.prototype.revBin=function(i,u,l){if(i===0||i===l-1)return i;for(var h=0,p=0;p<u;p++)h|=(i&1)<<u-p-1,i>>=1;return h},Y.prototype.permute=function(i,u,l,h,p,R){for(var S=0;S<R;S++)h[S]=u[i[S]],p[S]=l[i[S]]},Y.prototype.transform=function(i,u,l,h,p,R){this.permute(R,i,u,l,h,p);for(var S=1;S<p;S<<=1)for(var g=S<<1,c=Math.cos(2*Math.PI/g),_=Math.sin(2*Math.PI/g),$=0;$<p;$+=g)for(var F=c,j=_,se=0;se<S;se++){var ie=l[$+se],ue=h[$+se],St=l[$+se+S],le=h[$+se+S],Re=F*St-j*le;le=F*le+j*St,St=Re,l[$+se]=ie+St,h[$+se]=ue+le,l[$+se+S]=ie-St,h[$+se+S]=ue-le,se!==g&&(Re=c*F-_*j,j=c*j+_*F,F=Re)}},Y.prototype.guessLen13b=function(i,u){var l=Math.max(u,i)|1,h=l&1,p=0;for(l=l/2|0;l;l=l>>>1)p++;return 1<<p+1+h},Y.prototype.conjugate=function(i,u,l){if(!(l<=1))for(var h=0;h<l/2;h++){var p=i[h];i[h]=i[l-h-1],i[l-h-1]=p,p=u[h],u[h]=-u[l-h-1],u[l-h-1]=-p}},Y.prototype.normalize13b=function(i,u){for(var l=0,h=0;h<u/2;h++){var p=Math.round(i[2*h+1]/u)*8192+Math.round(i[2*h]/u)+l;i[h]=p&67108863,p<67108864?l=0:l=p/67108864|0}return i},Y.prototype.convert13b=function(i,u,l,h){for(var p=0,R=0;R<u;R++)p=p+(i[R]|0),l[2*R]=p&8191,p=p>>>13,l[2*R+1]=p&8191,p=p>>>13;for(R=2*u;R<h;++R)l[R]=0;t(p===0),t((p&-8192)===0)},Y.prototype.stub=function(i){for(var u=new Array(i),l=0;l<i;l++)u[l]=0;return u},Y.prototype.mulp=function(i,u,l){var h=2*this.guessLen13b(i.length,u.length),p=this.makeRBT(h),R=this.stub(h),S=new Array(h),g=new Array(h),c=new Array(h),_=new Array(h),$=new Array(h),F=new Array(h),j=l.words;j.length=h,this.convert13b(i.words,i.length,S,h),this.convert13b(u.words,u.length,_,h),this.transform(S,R,g,c,h,p),this.transform(_,R,$,F,h,p);for(var se=0;se<h;se++){var ie=g[se]*$[se]-c[se]*F[se];c[se]=g[se]*F[se]+c[se]*$[se],g[se]=ie}return this.conjugate(g,c,h),this.transform(g,c,j,R,h,p),this.conjugate(j,R,h),this.normalize13b(j,h),l.negative=i.negative^u.negative,l.length=i.length+u.length,l._strip()},s.prototype.mul=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},s.prototype.mulf=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),J(this,i,u)},s.prototype.imul=function(i){return this.clone().mulTo(i,this)},s.prototype.imuln=function(i){var u=i<0;u&&(i=-i),t(typeof i=="number"),t(i<67108864);for(var l=0,h=0;h<this.length;h++){var p=(this.words[h]|0)*i,R=(p&67108863)+(l&67108863);l>>=26,l+=p/67108864|0,l+=R>>>26,this.words[h]=R&67108863}return l!==0&&(this.words[h]=l,this.length++),u?this.ineg():this},s.prototype.muln=function(i){return this.clone().imuln(i)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(i){var u=O(i);if(u.length===0)return new s(1);for(var l=this,h=0;h<u.length&&u[h]===0;h++,l=l.sqr());if(++h<u.length)for(var p=l.sqr();h<u.length;h++,p=p.sqr())u[h]!==0&&(l=l.mul(p));return l},s.prototype.iushln=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,h=67108863>>>26-u<<26-u,p;if(u!==0){var R=0;for(p=0;p<this.length;p++){var S=this.words[p]&h,g=(this.words[p]|0)-S<<u;this.words[p]=g|R,R=S>>>26-u}R&&(this.words[p]=R,this.length++)}if(l!==0){for(p=this.length-1;p>=0;p--)this.words[p+l]=this.words[p];for(p=0;p<l;p++)this.words[p]=0;this.length+=l}return this._strip()},s.prototype.ishln=function(i){return t(this.negative===0),this.iushln(i)},s.prototype.iushrn=function(i,u,l){t(typeof i=="number"&&i>=0);var h;u?h=(u-u%26)/26:h=0;var p=i%26,R=Math.min((i-p)/26,this.length),S=67108863^67108863>>>p<<p,g=l;if(h-=R,h=Math.max(0,h),g){for(var c=0;c<R;c++)g.words[c]=this.words[c];g.length=R}if(R!==0)if(this.length>R)for(this.length-=R,c=0;c<this.length;c++)this.words[c]=this.words[c+R];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=h);c--){var $=this.words[c]|0;this.words[c]=_<<26-p|$>>>p,_=$&S}return g&&_!==0&&(g.words[g.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(i,u,l){return t(this.negative===0),this.iushrn(i,u,l)},s.prototype.shln=function(i){return this.clone().ishln(i)},s.prototype.ushln=function(i){return this.clone().iushln(i)},s.prototype.shrn=function(i){return this.clone().ishrn(i)},s.prototype.ushrn=function(i){return this.clone().iushrn(i)},s.prototype.testn=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,h=1<<u;if(this.length<=l)return!1;var p=this.words[l];return!!(p&h)},s.prototype.imaskn=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var h=67108863^67108863>>>u<<u;this.words[this.length-1]&=h}return this._strip()},s.prototype.maskn=function(i){return this.clone().imaskn(i)},s.prototype.iaddn=function(i){return t(typeof i=="number"),t(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},s.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(i){if(t(typeof i=="number"),t(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(i){return this.clone().iaddn(i)},s.prototype.subn=function(i){return this.clone().isubn(i)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(i,u,l){var h=i.length+l,p;this._expand(h);var R,S=0;for(p=0;p<i.length;p++){R=(this.words[p+l]|0)+S;var g=(i.words[p]|0)*u;R-=g&67108863,S=(R>>26)-(g/67108864|0),this.words[p+l]=R&67108863}for(;p<this.length-l;p++)R=(this.words[p+l]|0)+S,S=R>>26,this.words[p+l]=R&67108863;if(S===0)return this._strip();for(t(S===-1),S=0,p=0;p<this.length;p++)R=-(this.words[p]|0)+S,S=R>>26,this.words[p]=R&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(i,u){var l=this.length-i.length,h=this.clone(),p=i,R=p.words[p.length-1]|0,S=this._countBits(R);l=26-S,l!==0&&(p=p.ushln(l),h.iushln(l),R=p.words[p.length-1]|0);var g=h.length-p.length,c;if(u!=="mod"){c=new s(null),c.length=g+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var $=h.clone()._ishlnsubmul(p,1,g);$.negative===0&&(h=$,c&&(c.words[g]=1));for(var F=g-1;F>=0;F--){var j=(h.words[p.length+F]|0)*67108864+(h.words[p.length+F-1]|0);for(j=Math.min(j/R|0,67108863),h._ishlnsubmul(p,j,F);h.negative!==0;)j--,h.negative=0,h._ishlnsubmul(p,1,F),h.isZero()||(h.negative^=1);c&&(c.words[F]=j)}return c&&c._strip(),h._strip(),u!=="div"&&l!==0&&h.iushrn(l),{div:c||null,mod:h}},s.prototype.divmod=function(i,u,l){if(t(!i.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var h,p,R;return this.negative!==0&&i.negative===0?(R=this.neg().divmod(i,u),u!=="mod"&&(h=R.div.neg()),u!=="div"&&(p=R.mod.neg(),l&&p.negative!==0&&p.iadd(i)),{div:h,mod:p}):this.negative===0&&i.negative!==0?(R=this.divmod(i.neg(),u),u!=="mod"&&(h=R.div.neg()),{div:h,mod:R.mod}):(this.negative&i.negative)!==0?(R=this.neg().divmod(i.neg(),u),u!=="div"&&(p=R.mod.neg(),l&&p.negative!==0&&p.isub(i)),{div:R.div,mod:p}):i.length>this.length||this.cmp(i)<0?{div:new s(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new s(this.modrn(i.words[0]))}:this._wordDiv(i,u)},s.prototype.div=function(i){return this.divmod(i,"div",!1).div},s.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},s.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},s.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(i):u.mod,h=i.ushrn(1),p=i.andln(1),R=l.cmp(h);return R<0||p===1&&R===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(i){var u=i<0;u&&(i=-i),t(i<=67108863);for(var l=(1<<26)%i,h=0,p=this.length-1;p>=0;p--)h=(l*h+(this.words[p]|0))%i;return u?-h:h},s.prototype.modn=function(i){return this.modrn(i)},s.prototype.idivn=function(i){var u=i<0;u&&(i=-i),t(i<=67108863);for(var l=0,h=this.length-1;h>=0;h--){var p=(this.words[h]|0)+l*67108864;this.words[h]=p/i|0,l=p%i}return this._strip(),u?this.ineg():this},s.prototype.divn=function(i){return this.clone().idivn(i)},s.prototype.egcd=function(i){t(i.negative===0),t(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var h=new s(1),p=new s(0),R=new s(0),S=new s(1),g=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++g;for(var c=l.clone(),_=u.clone();!u.isZero();){for(var $=0,F=1;(u.words[0]&F)===0&&$<26;++$,F<<=1);if($>0)for(u.iushrn($);$-- >0;)(h.isOdd()||p.isOdd())&&(h.iadd(c),p.isub(_)),h.iushrn(1),p.iushrn(1);for(var j=0,se=1;(l.words[0]&se)===0&&j<26;++j,se<<=1);if(j>0)for(l.iushrn(j);j-- >0;)(R.isOdd()||S.isOdd())&&(R.iadd(c),S.isub(_)),R.iushrn(1),S.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(R),p.isub(S)):(l.isub(u),R.isub(h),S.isub(p))}return{a:R,b:S,gcd:l.iushln(g)}},s.prototype._invmp=function(i){t(i.negative===0),t(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var h=new s(1),p=new s(0),R=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var S=0,g=1;(u.words[0]&g)===0&&S<26;++S,g<<=1);if(S>0)for(u.iushrn(S);S-- >0;)h.isOdd()&&h.iadd(R),h.iushrn(1);for(var c=0,_=1;(l.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(l.iushrn(c);c-- >0;)p.isOdd()&&p.iadd(R),p.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(p)):(l.isub(u),p.isub(h))}var $;return u.cmpn(1)===0?$=h:$=p,$.cmpn(0)<0&&$.iadd(i),$},s.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),l=i.clone();u.negative=0,l.negative=0;for(var h=0;u.isEven()&&l.isEven();h++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var p=u.cmp(l);if(p<0){var R=u;u=l,l=R}else if(p===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(h)},s.prototype.invm=function(i){return this.egcd(i).a.umod(i)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(i){return this.words[0]&i},s.prototype.bincn=function(i){t(typeof i=="number");var u=i%26,l=(i-u)/26,h=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var p=h,R=l;p!==0&&R<this.length;R++){var S=this.words[R]|0;S+=p,p=S>>>26,S&=67108863,this.words[R]=S}return p!==0&&(this.words[R]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(i=-i),t(i<=67108863,"Number is too big");var h=this.words[0]|0;l=h===i?0:h<i?-1:1}return this.negative!==0?-l|0:l},s.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var h=this.words[l]|0,p=i.words[l]|0;if(h!==p){h<p?u=-1:h>p&&(u=1);break}}return u},s.prototype.gtn=function(i){return this.cmpn(i)===1},s.prototype.gt=function(i){return this.cmp(i)===1},s.prototype.gten=function(i){return this.cmpn(i)>=0},s.prototype.gte=function(i){return this.cmp(i)>=0},s.prototype.ltn=function(i){return this.cmpn(i)===-1},s.prototype.lt=function(i){return this.cmp(i)===-1},s.prototype.lten=function(i){return this.cmpn(i)<=0},s.prototype.lte=function(i){return this.cmp(i)<=0},s.prototype.eqn=function(i){return this.cmpn(i)===0},s.prototype.eq=function(i){return this.cmp(i)===0},s.red=function(i){return new T(i)},s.prototype.toRed=function(i){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},s.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(i){return this.red=i,this},s.prototype.forceRed=function(i){return t(!this.red,"Already a number in reduction context"),this._forceRed(i)},s.prototype.redAdd=function(i){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},s.prototype.redIAdd=function(i){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},s.prototype.redSub=function(i){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},s.prototype.redISub=function(i){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},s.prototype.redShl=function(i){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},s.prototype.redMul=function(i){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},s.prototype.redIMul=function(i){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},s.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(i){return t(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var C={k256:null,p224:null,p192:null,p25519:null};function W(y,i){this.name=y,this.p=new s(i,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var i=new s(null);return i.words=new Array(Math.ceil(this.n/13)),i},W.prototype.ireduce=function(i){var u=i,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var h=l<this.n?-1:u.ucmp(this.p);return h===0?(u.words[0]=0,u.length=1):h>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},W.prototype.split=function(i,u){i.iushrn(this.n,0,u)},W.prototype.imulK=function(i){return i.imul(this.k)};function V(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(V,W),V.prototype.split=function(i,u){for(var l=4194303,h=Math.min(i.length,9),p=0;p<h;p++)u.words[p]=i.words[p];if(u.length=h,i.length<=9){i.words[0]=0,i.length=1;return}var R=i.words[9];for(u.words[u.length++]=R&l,p=10;p<i.length;p++){var S=i.words[p]|0;i.words[p-10]=(S&l)<<4|R>>>22,R=S}R>>>=22,i.words[p-10]=R,R===0&&i.length>10?i.length-=10:i.length-=9},V.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,l=0;l<i.length;l++){var h=i.words[l]|0;u+=h*977,i.words[l]=u&67108863,u=h*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function Z(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Z,W);function L(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(L,W);function U(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(U,W),U.prototype.imulK=function(i){for(var u=0,l=0;l<i.length;l++){var h=(i.words[l]|0)*19+u,p=h&67108863;h>>>=26,i.words[l]=p,u=h}return u!==0&&(i.words[i.length++]=u),i},s._prime=function(i){if(C[i])return C[i];var u;if(i==="k256")u=new V;else if(i==="p224")u=new Z;else if(i==="p192")u=new L;else if(i==="p25519")u=new U;else throw new Error("Unknown prime "+i);return C[i]=u,u};function T(y){if(typeof y=="string"){var i=s._prime(y);this.m=i.p,this.prime=i}else t(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}T.prototype._verify1=function(i){t(i.negative===0,"red works only with positives"),t(i.red,"red works only with red numbers")},T.prototype._verify2=function(i,u){t((i.negative|u.negative)===0,"red works only with positives"),t(i.red&&i.red===u.red,"red works only with red numbers")},T.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(w(i,i.umod(this.m)._forceRed(this)),i)},T.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},T.prototype.add=function(i,u){this._verify2(i,u);var l=i.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},T.prototype.iadd=function(i,u){this._verify2(i,u);var l=i.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},T.prototype.sub=function(i,u){this._verify2(i,u);var l=i.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},T.prototype.isub=function(i,u){this._verify2(i,u);var l=i.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},T.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},T.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},T.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},T.prototype.isqr=function(i){return this.imul(i,i.clone())},T.prototype.sqr=function(i){return this.mul(i,i)},T.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(t(u%2===1),u===3){var l=this.m.add(new s(1)).iushrn(2);return this.pow(i,l)}for(var h=this.m.subn(1),p=0;!h.isZero()&&h.andln(1)===0;)p++,h.iushrn(1);t(!h.isZero());var R=new s(1).toRed(this),S=R.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);this.pow(c,g).cmp(S)!==0;)c.redIAdd(S);for(var _=this.pow(c,h),$=this.pow(i,h.addn(1).iushrn(1)),F=this.pow(i,h),j=p;F.cmp(R)!==0;){for(var se=F,ie=0;se.cmp(R)!==0;ie++)se=se.redSqr();t(ie<j);var ue=this.pow(_,new s(1).iushln(j-ie-1));$=$.redMul(ue),_=ue.redSqr(),F=F.redMul(_),j=ie}return $},T.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},T.prototype.pow=function(i,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var l=4,h=new Array(1<<l);h[0]=new s(1).toRed(this),h[1]=i;for(var p=2;p<h.length;p++)h[p]=this.mul(h[p-1],i);var R=h[0],S=0,g=0,c=u.bitLength()%26;for(c===0&&(c=26),p=u.length-1;p>=0;p--){for(var _=u.words[p],$=c-1;$>=0;$--){var F=_>>$&1;if(R!==h[0]&&(R=this.sqr(R)),F===0&&S===0){g=0;continue}S<<=1,S|=F,g++,!(g!==l&&(p!==0||$!==0))&&(R=this.mul(R,h[S]),g=0,S=0)}c=26}return R},T.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},T.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},s.mont=function(i){return new P(i)};function P(y){T.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(P,T),P.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},P.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},P.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=l.isub(h).iushrn(this.shift),R=p;return p.cmp(this.m)>=0?R=p.isub(this.m):p.cmpn(0)<0&&(R=p.iadd(this.m)),R._forceRed(this)},P.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new s(0)._forceRed(this);var l=i.mul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=l.isub(h).iushrn(this.shift),R=p;return p.cmp(this.m)>=0?R=p.isub(this.m):p.cmpn(0)<0&&(R=p.iadd(this.m)),R._forceRed(this)},P.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Ns>"u"||Ns,wi)});var Ls=vt((Ts,Ei)=>{ee();re();te();var rn=(kr(),Nr(ys)),Lt=rn.Buffer;function Si(n,e){for(var t in n)e[t]=n[t]}Lt.from&&Lt.alloc&&Lt.allocUnsafe&&Lt.allocUnsafeSlow?Ei.exports=rn:(Si(rn,Ts),Ts.Buffer=er);function er(n,e,t){return Lt(n,e,t)}er.prototype=Object.create(Lt.prototype);Si(Lt,er);er.from=function(n,e,t){if(typeof n=="number")throw new TypeError("Argument must not be a number");return Lt(n,e,t)};er.alloc=function(n,e,t){if(typeof n!="number")throw new TypeError("Argument must be a number");var r=Lt(n);return e!==void 0?typeof t=="string"?r.fill(e,t):r.fill(e):r.fill(0),r};er.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return Lt(n)};er.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return rn.SlowBuffer(n)}});var vi=vt((Wp,Ai)=>{"use strict";ee();re();te();var nn=Ls().Buffer;function Sc(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var a=n.length,f=n.charAt(0),d=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function b(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=nn.from(E)),!nn.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var k=0,O=0,A=0,x=E.length;A!==x&&E[A]===0;)A++,k++;for(var K=(x-A)*w+1>>>0,J=new Uint8Array(K);A!==x;){for(var Y=E[A],C=0,W=K-1;(Y!==0||C<O)&&W!==-1;W--,C++)Y+=256*J[W]>>>0,J[W]=Y%a>>>0,Y=Y/a>>>0;if(Y!==0)throw new Error("Non-zero carry");O=C,A++}for(var V=K-O;V!==K&&J[V]===0;)V++;for(var Z=f.repeat(k);V<K;++V)Z+=n.charAt(J[V]);return Z}function N(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return nn.alloc(0);for(var k=0,O=0,A=0;E[k]===f;)O++,k++;for(var x=(E.length-k)*d+1>>>0,K=new Uint8Array(x);k<E.length;){var J=E.charCodeAt(k);if(J>255)return;var Y=e[J];if(Y===255)return;for(var C=0,W=x-1;(Y!==0||C<A)&&W!==-1;W--,C++)Y+=a*K[W]>>>0,K[W]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");A=C,k++}for(var V=x-A;V!==x&&K[V]===0;)V++;var Z=nn.allocUnsafe(O+(x-V));Z.fill(0,0,O);for(var L=O;V!==x;)Z[L++]=K[V++];return Z}function B(E){var k=N(E);if(k)return k;throw new Error("Non-base"+a+" character")}return{encode:b,decodeUnsafe:N,decode:B}}Ai.exports=Sc});var Oi=vt((Hp,Ii)=>{ee();re();te();var Ec=vi(),Ac="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ii.exports=Ec(Ac)});var ki=vt((Xp,Ni)=>{"use strict";ee();re();te();var sn=Ls().Buffer;function vc(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var a=n.length,f=n.charAt(0),d=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function b(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=sn.from(E)),!sn.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var k=0,O=0,A=0,x=E.length;A!==x&&E[A]===0;)A++,k++;for(var K=(x-A)*w+1>>>0,J=new Uint8Array(K);A!==x;){for(var Y=E[A],C=0,W=K-1;(Y!==0||C<O)&&W!==-1;W--,C++)Y+=256*J[W]>>>0,J[W]=Y%a>>>0,Y=Y/a>>>0;if(Y!==0)throw new Error("Non-zero carry");O=C,A++}for(var V=K-O;V!==K&&J[V]===0;)V++;for(var Z=f.repeat(k);V<K;++V)Z+=n.charAt(J[V]);return Z}function N(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return sn.alloc(0);for(var k=0,O=0,A=0;E[k]===f;)O++,k++;for(var x=(E.length-k)*d+1>>>0,K=new Uint8Array(x);k<E.length;){var J=E.charCodeAt(k);if(J>255)return;var Y=e[J];if(Y===255)return;for(var C=0,W=x-1;(Y!==0||C<A)&&W!==-1;W--,C++)Y+=a*K[W]>>>0,K[W]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");A=C,k++}for(var V=x-A;V!==x&&K[V]===0;)V++;var Z=sn.allocUnsafe(O+(x-V));Z.fill(0,0,O);for(var L=O;V!==x;)Z[L++]=K[V++];return Z}function B(E){var k=N(E);if(k)return k;throw new Error("Non-base"+a+" character")}return{encode:b,decodeUnsafe:N,decode:B}}Ni.exports=vc});var Li=vt((tg,Ti)=>{ee();re();te();var Ic=ki(),Oc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ti.exports=Ic(Oc)});var xi=vt(Cs=>{"use strict";ee();re();te();function Mt(n,e,t){return e<=n&&n<=t}function fn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Nc(n){for(var e=String(n),t=e.length,r=0,s=[];r<t;){var o=e.charCodeAt(r);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(r===t-1)s.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var f=o&1023,d=a&1023;s.push(65536+(f<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function kc(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var on=-1;function Bs(n){this.tokens=[].slice.call(n)}Bs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():on},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var _r=-1;function xs(n,e){if(n)throw TypeError("Decoder error");return e||65533}var an="utf-8";function cn(n,e){if(!(this instanceof cn))return new cn(n,e);if(n=n!==void 0?String(n).toLowerCase():an,n!==an)throw new Error("Encoding not supported. Only utf-8 is supported");e=fn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}cn.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=fn(t),this._streaming||(this._decoder=new Tc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Bs(r),o=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==_r);)a!==null&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===_r)break;a!==null&&(Array.isArray(a)?o.push.apply(o,a):o.push(a))}while(!s.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),kc(o)}};function un(n,e){if(!(this instanceof un))return new un(n,e);if(n=n!==void 0?String(n).toLowerCase():an,n!==an)throw new Error("Encoding not supported. Only utf-8 is supported");e=fn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}un.prototype={encode:function(e,t){e=e?String(e):"",t=fn(t),this._streaming||(this._encoder=new Lc(this._options)),this._streaming=!!t.stream;for(var r=[],s=new Bs(Nc(e)),o;!s.endOfStream()&&(o=this._encoder.handler(s,s.read()),o!==_r);)Array.isArray(o)?r.push.apply(r,o):r.push(o);if(!this._streaming){for(;o=this._encoder.handler(s,s.read()),o!==_r;)Array.isArray(o)?r.push.apply(r,o):r.push(o);this._encoder=null}return new Uint8Array(r)}};function Tc(n){var e=n.fatal,t=0,r=0,s=0,o=128,a=191;this.handler=function(f,d){if(d===on&&s!==0)return s=0,xs(e);if(d===on)return _r;if(s===0){if(Mt(d,0,127))return d;if(Mt(d,194,223))s=1,t=d-192;else if(Mt(d,224,239))d===224&&(o=160),d===237&&(a=159),s=2,t=d-224;else if(Mt(d,240,244))d===240&&(o=144),d===244&&(a=143),s=3,t=d-240;else return xs(e);return t=t<<6*s,null}if(!Mt(d,o,a))return t=s=r=0,o=128,a=191,f.prepend(d),xs(e);if(o=128,a=191,r+=1,t+=d-128<<6*(s-r),r!==s)return null;var w=t;return t=s=r=0,w}}function Lc(n){var e=n.fatal;this.handler=function(t,r){if(r===on)return _r;if(Mt(r,0,127))return r;var s,o;Mt(r,128,2047)?(s=1,o=192):Mt(r,2048,65535)?(s=2,o=224):Mt(r,65536,1114111)&&(s=3,o=240);for(var a=[(r>>6*s)+o];s>0;){var f=r>>6*(s-1);a.push(128|f&63),s-=1}return a}}Cs.TextEncoder=un;Cs.TextDecoder=cn});var Di=vt(ye=>{"use strict";ee();re();te();var xc=ye&&ye.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Bc=ye&&ye.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),xt=ye&&ye.__decorate||function(n,e,t,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(o=(s<3?a(o):s>3?a(e,t,o):a(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Cc=ye&&ye.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&xc(e,n,t);return Bc(e,n),e},Bi=ye&&ye.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ye,"__esModule",{value:!0});ye.deserializeUnchecked=ye.deserialize=ye.serialize=ye.BinaryReader=ye.BinaryWriter=ye.BorshError=ye.baseDecode=ye.baseEncode=void 0;var qt=Bi(ks()),Ci=Bi(Li()),Mc=Cc(xi()),Pc=typeof TextDecoder!="function"?Mc.TextDecoder:TextDecoder,Dc=new Pc("utf-8",{fatal:!0});function Uc(n){return typeof n=="string"&&(n=D.from(n,"utf8")),Ci.default.encode(D.from(n))}ye.baseEncode=Uc;function zc(n){return D.from(Ci.default.decode(n))}ye.baseDecode=zc;var Ms=1024,ft=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};ye.BorshError=ft;var ln=class{constructor(){this.buf=D.alloc(Ms),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=D.concat([this.buf,D.alloc(Ms)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(D.from(new qt.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(D.from(new qt.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(D.from(new qt.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(D.from(new qt.default(e).toArray("le",64)))}writeBuffer(e){this.buf=D.concat([D.from(this.buf.subarray(0,this.length)),e,D.alloc(Ms)]),this.length+=e.length}writeString(e){this.maybeResize();let t=D.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(D.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}};ye.BinaryWriter=ln;function Bt(n,e,t){let r=t.value;t.value=function(...s){try{return r.apply(this,s)}catch(o){if(o instanceof RangeError){let a=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new ft("Reached the end of buffer when deserializing")}throw o}}}var gt=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new qt.default(e,"le")}readU128(){let e=this.readBuffer(16);return new qt.default(e,"le")}readU256(){let e=this.readBuffer(32);return new qt.default(e,"le")}readU512(){let e=this.readBuffer(64);return new qt.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new ft(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return Dc.decode(t)}catch(r){throw new ft(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=Array();for(let s=0;s<t;++s)r.push(e());return r}};xt([Bt],gt.prototype,"readU8",null);xt([Bt],gt.prototype,"readU16",null);xt([Bt],gt.prototype,"readU32",null);xt([Bt],gt.prototype,"readU64",null);xt([Bt],gt.prototype,"readU128",null);xt([Bt],gt.prototype,"readU256",null);xt([Bt],gt.prototype,"readU512",null);xt([Bt],gt.prototype,"readString",null);xt([Bt],gt.prototype,"readFixedArray",null);xt([Bt],gt.prototype,"readArray",null);ye.BinaryReader=gt;function Mi(n){return n.charAt(0).toUpperCase()+n.slice(1)}function tr(n,e,t,r,s){try{if(typeof r=="string")s[`write${Mi(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new ft(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new ft(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let o=0;o<r[1];o++)tr(n,null,t[o],r[0],s)}else s.writeArray(t,o=>{tr(n,e,o,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),tr(n,e,t,r.type,s));break}case"map":{s.writeU32(t.size),t.forEach((o,a)=>{tr(n,e,a,r.key,s),tr(n,e,o,r.value,s)});break}default:throw new ft(`FieldType ${r} unrecognized`)}else Pi(n,t,s)}catch(o){throw o instanceof ft&&o.addToFieldPath(e),o}}function Pi(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}let r=n.get(e.constructor);if(!r)throw new ft(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,o])=>{tr(n,s,e[s],o,t)});else if(r.kind==="enum"){let s=e[r.field];for(let o=0;o<r.values.length;++o){let[a,f]=r.values[o];if(a===s){t.writeU8(o),tr(n,a,e[a],f,t);break}}}else throw new ft(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Kc(n,e,t=ln){let r=new t;return Pi(n,e,r),r.toArray()}ye.serialize=Kc;function rr(n,e,t,r){try{if(typeof t=="string")return r[`read${Mi(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){let s=[];for(let o=0;o<t[1];o++)s.push(rr(n,null,t[0],r));return s}else return r.readArray(()=>rr(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?rr(n,e,t.type,r):void 0;if(t.kind==="map"){let s=new Map,o=r.readU32();for(let a=0;a<o;a++){let f=rr(n,e,t.key,r),d=rr(n,e,t.value,r);s.set(f,d)}return s}return Ps(n,t,r)}catch(s){throw s instanceof ft&&s.addToFieldPath(e),s}}function Ps(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);let r=n.get(e);if(!r)throw new ft(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){let s={};for(let[o,a]of n.get(e).fields)s[o]=rr(n,o,a,t);return new e(s)}if(r.kind==="enum"){let s=t.readU8();if(s>=r.values.length)throw new ft(`Enum index: ${s} is out of range`);let[o,a]=r.values[s],f=rr(n,o,a,t);return new e({[o]:f})}throw new ft(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Fc(n,e,t,r=gt){let s=new r(t),o=Ps(n,e,s);if(s.offset<t.length)throw new ft(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return o}ye.deserialize=Fc;function qc(n,e,t,r=gt){let s=new r(t);return Ps(n,e,s)}ye.deserializeUnchecked=qc});var Ks=vt(I=>{"use strict";ee();re();te();Object.defineProperty(I,"__esModule",{value:!0});I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=I.nu64=I.u48=I.u40=I.u32=I.u24=I.u16=I.u8=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=I.blob=I.unionLayoutDiscriminator=I.union=I.seq=I.bits=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;var Us=(kr(),Nr(ys));function br(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}I.checkUint8Array=br;function de(n){return br(n),Us.Buffer.from(n.buffer,n.byteOffset,n.length)}I.uint8ArrayToBuffer=de;var he=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};I.Layout=he;function zs(n,e){return e.property?n+"["+e.property+"]":n}I.nameWithProperty=zs;function Wc(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof he))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}I.bindConstructorLayout=Wc;var lt=class extends he{isCount(){throw new Error("ExternalLayout is abstract")}};I.ExternalLayout=lt;var dn=class extends lt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){br(e);let r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}};I.GreedyCount=dn;var Br=class extends lt{constructor(e,t=0,r){if(!(e instanceof he))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof _t||this.layout instanceof mt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}};I.OffsetLayout=Br;var _t=class extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return de(e).readUIntLE(t,this.span)}encode(e,t,r=0){return de(t).writeUIntLE(e,r,this.span),this.span}};I.UInt=_t;var mt=class extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return de(e).readUIntBE(t,this.span)}encode(e,t,r=0){return de(t).writeUIntBE(e,r,this.span),this.span}};I.UIntBE=mt;var Pt=class extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return de(e).readIntLE(t,this.span)}encode(e,t,r=0){return de(t).writeIntLE(e,r,this.span),this.span}};I.Int=Pt;var Wt=class extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return de(e).readIntBE(t,this.span)}encode(e,t,r=0){return de(t).writeIntBE(e,r,this.span),this.span}};I.IntBE=Wt;var Ds=Math.pow(2,32);function kn(n){let e=Math.floor(n/Ds),t=n-e*Ds;return{hi32:e,lo32:t}}function Tn(n,e){return n*Ds+e}var hn=class extends he{constructor(e){super(8,e)}decode(e,t=0){let r=de(e),s=r.readUInt32LE(t),o=r.readUInt32LE(t+4);return Tn(o,s)}encode(e,t,r=0){let s=kn(e),o=de(t);return o.writeUInt32LE(s.lo32,r),o.writeUInt32LE(s.hi32,r+4),8}};I.NearUInt64=hn;var pn=class extends he{constructor(e){super(8,e)}decode(e,t=0){let r=de(e),s=r.readUInt32BE(t),o=r.readUInt32BE(t+4);return Tn(s,o)}encode(e,t,r=0){let s=kn(e),o=de(t);return o.writeUInt32BE(s.hi32,r),o.writeUInt32BE(s.lo32,r+4),8}};I.NearUInt64BE=pn;var gn=class extends he{constructor(e){super(8,e)}decode(e,t=0){let r=de(e),s=r.readUInt32LE(t),o=r.readInt32LE(t+4);return Tn(o,s)}encode(e,t,r=0){let s=kn(e),o=de(t);return o.writeUInt32LE(s.lo32,r),o.writeInt32LE(s.hi32,r+4),8}};I.NearInt64=gn;var yn=class extends he{constructor(e){super(8,e)}decode(e,t=0){let r=de(e),s=r.readInt32BE(t),o=r.readUInt32BE(t+4);return Tn(s,o)}encode(e,t,r=0){let s=kn(e),o=de(t);return o.writeInt32BE(s.hi32,r),o.writeUInt32BE(s.lo32,r+4),8}};I.NearInt64BE=yn;var _n=class extends he{constructor(e){super(4,e)}decode(e,t=0){return de(e).readFloatLE(t)}encode(e,t,r=0){return de(t).writeFloatLE(e,r),4}};I.Float=_n;var mn=class extends he{constructor(e){super(4,e)}decode(e,t=0){return de(e).readFloatBE(t)}encode(e,t,r=0){return de(t).writeFloatBE(e,r),4}};I.FloatBE=mn;var Rn=class extends he{constructor(e){super(8,e)}decode(e,t=0){return de(e).readDoubleLE(t)}encode(e,t,r=0){return de(t).writeDoubleLE(e,r),8}};I.Double=Rn;var bn=class extends he{constructor(e){super(8,e)}decode(e,t=0){return de(e).readDoubleBE(t)}encode(e,t,r=0){return de(t).writeDoubleBE(e,r),8}};I.DoubleBE=bn;var wn=class extends he{constructor(e,t,r){if(!(e instanceof he))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof lt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof lt)&&0<e.span&&(s=t*e.span),super(s,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof lt&&(s=s.decode(e,t)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let o=0;for(;o<s;)r+=this.elementLayout.getSpan(e,t+r),++o}return r}decode(e,t=0){let r=[],s=0,o=this.count;for(o instanceof lt&&(o=o.decode(e,t));s<o;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return r}encode(e,t,r=0){let s=this.elementLayout,o=e.reduce((a,f)=>a+s.encode(f,t,r+a),0);return this.count instanceof lt&&this.count.encode(e.length,t,r),o}};I.Sequence=wn;var Sn=class extends he{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,a)=>o&&a instanceof he,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((o,a)=>o+a.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,o)=>{let a=o.getSpan(e,t);return t+=a,s+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){br(e);let r=this.makeDestinationObject();for(let s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let s=r,o=0,a=0;for(let f of this.fields){let d=f.span;if(a=0<d?d:0,f.property!==void 0){let w=e[f.property];w!==void 0&&(a=f.encode(w,t,r),0>d&&(d=f.getSpan(t,r)))}o=r,r+=d}return o+a-s}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}};I.Structure=Sn;var Cr=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}};I.UnionDiscriminator=Cr;var Rr=class extends Cr{constructor(e,t){if(!(e instanceof lt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}};I.UnionLayoutDiscriminator=Rr;var Mr=class extends he{constructor(e,t,r){let s;if(e instanceof _t||e instanceof mt)s=new Rr(new Br(e));else if(e instanceof lt&&e.isCount())s=new Rr(e);else if(e instanceof Cr)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof he))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof _t||e instanceof mt)&&(o+=s.layout.span)),super(o,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof _t||e instanceof mt,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return a(f)},this.configGetSourceVariant=function(f){a=f.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r,s=this.discriminator,o=s.decode(e,t),a=this.registry[o];if(a===void 0){let f=this.defaultLayout,d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=o,r[f.property]=f.decode(e,t+d)}else r=a.decode(e,t);return r}encode(e,t,r=0){let s=this.getSourceVariant(e);if(s===void 0){let o=this.discriminator,a=this.defaultLayout,f=0;return this.usesPrefixDiscriminator&&(f=o.layout.span),o.encode(e[o.property],t,r),f+a.encode(e[a.property],t,r+f)}return s.encode(e,t,r)}addVariant(e,t,r){let s=new En(this,e,t,r);return this.registry[e]=s,s}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}};I.Union=Mr;var En=class extends he{constructor(e,t,r,s){if(!(e instanceof Mr))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof he))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,s),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+r)),r+s}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=s;if(this.layout&&(this.layout.encode(e[this.property],t,r+s),o+=this.layout.getSpan(t,r+s),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};I.VariantLayout=En;function mr(n){return 0>n&&(n+=4294967296),n}var Pr=class extends he{constructor(e,t,r){if(!(e instanceof _t||e instanceof mt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(o){return s=mr(o),this},this._packedGetValue=function(){return s}}decode(e,t=0){let r=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(let o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(e));return r}encode(e,t,r=0){let s=this.word.decode(t,r);this._packedSetValue(s);for(let o of this.fields)if(o.property!==void 0){let a=e[o.property];a!==void 0&&o.encode(a)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new Dr(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new An(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};I.BitStructure=Pr;var Dr=class{constructor(e,t,r){if(!(e instanceof Pr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let s=8*e.span,o=e.fields.reduce((a,f)=>a+f.bits,0);if(t+o>s)throw new Error("bits too long for span remainder ("+(s-o)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=s-o-t),this.wordMask=mr(this.valueMask<<this.start),this.property=r}decode(e,t){let r=this.container._packedGetValue();return mr(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==mr(e&this.valueMask))throw new TypeError(zs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=mr(e<<this.start);this.container._packedSetValue(mr(t&~this.wordMask)|r)}};I.BitField=Dr;var An=class extends Dr{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};I.Boolean=An;var vn=class extends he{constructor(e,t){if(!(e instanceof lt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof lt||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),de(e).slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof lt&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(zs("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>t.length)throw new RangeError("encoding overruns Uint8Array");let o=de(e);return de(t).write(o.toString("hex"),r,s,"hex"),this.length instanceof lt&&this.length.encode(s,t,r),s}};I.Blob=vn;var In=class extends he{constructor(e){super(-1,e)}getSpan(e,t=0){br(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return de(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let s=Us.Buffer.from(e,"utf8"),o=s.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");let a=de(t);return s.copy(a,r),a[r+o]=0,o+1}};I.CString=In;var On=class extends he{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return br(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return de(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let s=Us.Buffer.from(e,"utf8"),o=s.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(de(t),r),o}};I.UTF8=On;var Nn=class extends he{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}};I.Constant=Nn;I.greedy=(n,e)=>new dn(n,e);I.offset=(n,e,t)=>new Br(n,e,t);I.u8=n=>new _t(1,n);I.u16=n=>new _t(2,n);I.u24=n=>new _t(3,n);I.u32=n=>new _t(4,n);I.u40=n=>new _t(5,n);I.u48=n=>new _t(6,n);I.nu64=n=>new hn(n);I.u16be=n=>new mt(2,n);I.u24be=n=>new mt(3,n);I.u32be=n=>new mt(4,n);I.u40be=n=>new mt(5,n);I.u48be=n=>new mt(6,n);I.nu64be=n=>new pn(n);I.s8=n=>new Pt(1,n);I.s16=n=>new Pt(2,n);I.s24=n=>new Pt(3,n);I.s32=n=>new Pt(4,n);I.s40=n=>new Pt(5,n);I.s48=n=>new Pt(6,n);I.ns64=n=>new gn(n);I.s16be=n=>new Wt(2,n);I.s24be=n=>new Wt(3,n);I.s32be=n=>new Wt(4,n);I.s40be=n=>new Wt(5,n);I.s48be=n=>new Wt(6,n);I.ns64be=n=>new yn(n);I.f32=n=>new _n(n);I.f32be=n=>new mn(n);I.f64=n=>new Rn(n);I.f64be=n=>new bn(n);I.struct=(n,e,t)=>new Sn(n,e,t);I.bits=(n,e,t)=>new Pr(n,e,t);I.seq=(n,e,t)=>new wn(n,e,t);I.union=(n,e,t)=>new Mr(n,e,t);I.unionLayoutDiscriminator=(n,e)=>new Rr(n,e);I.blob=(n,e)=>new vn(n,e);I.cstr=n=>new In(n);I.utf8=(n,e)=>new On(n,e);I.constant=(n,e)=>new Nn(n,e)});var na=vt((Ug,ra)=>{"use strict";ee();re();te();var rh=(Qo(),Nr(Jo)).v4,nh=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};let s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");let o={method:n};if(s===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){let a=typeof r.generator=="function"?r.generator:function(){return rh()};o.id=a(o,r)}else s===2&&t===null?r.notificationIdNull&&(o.id=null):o.id=t;return o};ra.exports=nh});var oa=vt((qg,sa)=>{"use strict";ee();re();te();var sh=(Qo(),Nr(Jo)).v4,oh=na(),Kr=function(n,e){if(!(this instanceof Kr))return new Kr(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return sh()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};sa.exports=Kr;Kr.prototype.request=function(n,e,t,r){let s=this,o=null,a=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&n&&typeof n=="object"&&typeof e=="function")r=e,o=n;else{typeof t=="function"&&(r=t,t=void 0);let w=typeof r=="function";try{o=oh(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(w)return r(b);throw b}if(!w)return o}let d;try{d=JSON.stringify(o,this.options.replacer)}catch(w){return r(w)}return this.callServer(d,function(w,b){s._parseResponse(w,b,r)}),o};Kr.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(r)){let s=function(a){return typeof a.error<"u"},o=function(a){return!s(a)};return t(null,r.filter(s),r.filter(o))}else return t(null,r.error,r.result);t(null,r)}});ee();re();te();kr();ee();re();te();ee();re();te();ee();re();te();var ht=BigInt(0),ct=BigInt(1),Xt=BigInt(2),Qa=BigInt(3),si=BigInt(4),oi=BigInt(5),ii=BigInt(8);function ve(n,e){let t=n%e;return t>=ht?t:e+t}function Ee(n,e,t){let r=n;for(;e-- >ht;)r*=r,r%=t;return r}function ri(n,e){if(n===ht)throw new Error("invert: expected non-zero number");if(e<=ht)throw new Error("invert: expected positive modulus, got "+e);let t=ve(n,e),r=e,s=ht,o=ct,a=ct,f=ht;for(;t!==ht;){let w=r/t,b=r%t,N=s-a*w,B=o-f*w;r=t,t=b,s=a,o=f,a=N,f=B}if(r!==ct)throw new Error("invert: does not exist");return ve(s,e)}function ai(n,e){let t=(n.ORDER+ct)/si,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function ec(n,e){let t=(n.ORDER-oi)/ii,r=n.mul(e,Xt),s=n.pow(r,t),o=n.mul(e,s),a=n.mul(n.mul(o,Xt),s),f=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(f),e))throw new Error("Cannot find square root");return f}function tc(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-ct,t=0;for(;e%Xt===ht;)e/=Xt,t++;let r=Xt,s=It(n);for(;ni(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return ai;let o=s.pow(r,e),a=(e+ct)/Xt;return function(d,w){if(d.is0(w))return w;if(ni(d,w)!==1)throw new Error("Cannot find square root");let b=t,N=d.mul(d.ONE,o),B=d.pow(w,e),E=d.pow(w,a);for(;!d.eql(B,d.ONE);){if(d.is0(B))return d.ZERO;let k=1,O=d.sqr(B);for(;!d.eql(O,d.ONE);)if(k++,O=d.sqr(O),k===b)throw new Error("Cannot find square root");let A=ct<<BigInt(b-k-1),x=d.pow(N,A);b=k,N=d.sqr(x),B=d.mul(B,N),E=d.mul(E,x)}return E}}function rc(n){return n%si===Qa?ai:n%ii===oi?ec:tc(n)}var ci=(n,e)=>(ve(n,e)&ct)===ct,nc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ss(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=nc.reduce((r,s)=>(r[s]="function",r),e);return Ft(n,t),n}function sc(n,e,t){if(t<ht)throw new Error("invalid exponent, negatives unsupported");if(t===ht)return n.ONE;if(t===ct)return e;let r=n.ONE,s=e;for(;t>ht;)t&ct&&(r=n.mul(r,s)),s=n.sqr(s),t>>=ct;return r}function xr(n,e,t=!1){let r=new Array(e.length).fill(t?n.ZERO:void 0),s=e.reduce((a,f,d)=>n.is0(f)?a:(r[d]=a,n.mul(a,f)),n.ONE),o=n.inv(s);return e.reduceRight((a,f,d)=>n.is0(f)?a:(r[d]=n.mul(a,r[d]),n.mul(a,f)),o),r}function ni(n,e){let t=(n.ORDER-ct)/Xt,r=n.pow(e,t),s=n.eql(r,n.ONE),o=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!s&&!o&&!a)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function ui(n,e){e!==void 0&&Ho(e);let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function It(n,e,t=!1,r={}){if(n<=ht)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,o;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");let b=e;b.BITS&&(s=b.BITS),b.sqrt&&(o=b.sqrt),typeof b.isLE=="boolean"&&(t=b.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(o=r.sqrt);let{nBitLength:a,nByteLength:f}=ui(n,s);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d,w=Object.freeze({ORDER:n,isLE:t,BITS:a,BYTES:f,MASK:Zt(a),ZERO:ht,ONE:ct,create:b=>ve(b,n),isValid:b=>{if(typeof b!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof b);return ht<=b&&b<n},is0:b=>b===ht,isValidNot0:b=>!w.is0(b)&&w.isValid(b),isOdd:b=>(b&ct)===ct,neg:b=>ve(-b,n),eql:(b,N)=>b===N,sqr:b=>ve(b*b,n),add:(b,N)=>ve(b+N,n),sub:(b,N)=>ve(b-N,n),mul:(b,N)=>ve(b*N,n),pow:(b,N)=>sc(w,b,N),div:(b,N)=>ve(b*ri(N,n),n),sqrN:b=>b*b,addN:(b,N)=>b+N,subN:(b,N)=>b-N,mulN:(b,N)=>b*N,inv:b=>ri(b,n),sqrt:o||(b=>(d||(d=rc(n)),d(w,b))),toBytes:b=>t?hr(b,f):bs(b,f),fromBytes:b=>{if(b.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+b.length);return t?jt(b):dr(b)},invertBatch:b=>xr(w,b),cmov:(b,N,B)=>B?N:b});return Object.freeze(w)}function fi(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function Es(n){let e=fi(n);return e+Math.ceil(e/2)}function li(n,e,t=!1){let r=n.length,s=fi(e),o=Es(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);let a=t?jt(n):dr(n),f=ve(a,e-ct)+ct;return t?hr(f,s):bs(f,s)}var yr=BigInt(0),Jt=BigInt(1);function gr(n,e){let t=e.negate();return n?t:e}function Xr(n,e,t){let r=e==="pz"?a=>a.pz:a=>a.ez,s=xr(n.Fp,t.map(r));return t.map((a,f)=>a.toAffine(s[f])).map(n.fromAffine)}function gi(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function As(n,e){gi(n,e);let t=Math.ceil(e/n)+1,r=2**(n-1),s=2**n,o=Zt(n),a=BigInt(n);return{windows:t,windowSize:r,mask:o,maxNumber:s,shiftBy:a}}function di(n,e,t){let{windowSize:r,mask:s,maxNumber:o,shiftBy:a}=t,f=Number(n&s),d=n>>a;f>r&&(f-=o,d+=Jt);let w=e*r,b=w+Math.abs(f)-1,N=f===0,B=f<0,E=e%2!==0;return{nextN:d,offset:b,isZero:N,isNeg:B,isNegF:E,offsetF:w}}function oc(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function ic(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}var vs=new WeakMap,yi=new WeakMap;function Is(n){return yi.get(n)||1}function hi(n){if(n!==yr)throw new Error("invalid wNAF")}function Jr(n,e){return{constTimeNegate:gr,hasPrecomputes(t){return Is(t)!==1},unsafeLadder(t,r,s=n.ZERO){let o=t;for(;r>yr;)r&Jt&&(s=s.add(o)),o=o.double(),r>>=Jt;return s},precomputeWindow(t,r){let{windows:s,windowSize:o}=As(r,e),a=[],f=t,d=f;for(let w=0;w<s;w++){d=f,a.push(d);for(let b=1;b<o;b++)d=d.add(f),a.push(d);f=d.double()}return a},wNAF(t,r,s){let o=n.ZERO,a=n.BASE,f=As(t,e);for(let d=0;d<f.windows;d++){let{nextN:w,offset:b,isZero:N,isNeg:B,isNegF:E,offsetF:k}=di(s,d,f);s=w,N?a=a.add(gr(E,r[k])):o=o.add(gr(B,r[b]))}return hi(s),{p:o,f:a}},wNAFUnsafe(t,r,s,o=n.ZERO){let a=As(t,e);for(let f=0;f<a.windows&&s!==yr;f++){let{nextN:d,offset:w,isZero:b,isNeg:N}=di(s,f,a);if(s=d,!b){let B=r[w];o=o.add(N?B.negate():B)}}return hi(s),o},getPrecomputes(t,r,s){let o=vs.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&(typeof s=="function"&&(o=s(o)),vs.set(r,o))),o},wNAFCached(t,r,s){let o=Is(t);return this.wNAF(o,this.getPrecomputes(o,t,s),r)},wNAFCachedUnsafe(t,r,s,o){let a=Is(t);return a===1?this.unsafeLadder(t,r,o):this.wNAFUnsafe(a,this.getPrecomputes(a,t,s),r,o)},setWindowSize(t,r){gi(r,e),yi.set(t,r),vs.delete(t)}}}function _i(n,e,t,r){let s=e,o=n.ZERO,a=n.ZERO;for(;t>yr||r>yr;)t&Jt&&(o=o.add(s)),r&Jt&&(a=a.add(s)),s=s.double(),t>>=Jt,r>>=Jt;return{p1:o,p2:a}}function Qr(n,e,t,r){oc(t,n),ic(r,e);let s=t.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");let a=n.ZERO,f=ei(BigInt(s)),d=1;f>12?d=f-3:f>4?d=f-2:f>0&&(d=2);let w=Zt(d),b=new Array(Number(w)+1).fill(a),N=Math.floor((e.BITS-1)/d)*d,B=a;for(let E=N;E>=0;E-=d){b.fill(a);for(let O=0;O<o;O++){let A=r[O],x=Number(A>>BigInt(E)&w);b[x]=b[x].add(t[O])}let k=a;for(let O=b.length-1,A=a;O>0;O--)A=A.add(b[O]),k=k.add(A);if(B=B.add(k),E!==0)for(let O=0;O<d;O++)B=B.double()}return B}function pi(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ss(e),e}else return It(n)}function en(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(let f of["p","n","h"]){let d=e[f];if(!(typeof d=="bigint"&&d>yr))throw new Error(`CURVE.${f} must be positive bigint`)}let r=pi(e.p,t.Fp),s=pi(e.n,t.Fn),a=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(let f of a)if(!r.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}ee();re();te();var Tt=BigInt(0),pt=BigInt(1),Os=BigInt(2),ac=BigInt(8),cc={zip215:!0};function uc(n,e,t,r){let s=n.sqr(t),o=n.sqr(r),a=n.add(n.mul(e.a,s),o),f=n.add(n.ONE,n.mul(e.d,n.mul(s,o)));return n.eql(a,f)}function fc(n,e={}){let{Fp:t,Fn:r}=en("edwards",n,e),{h:s,n:o}=n;Ft(e,{},{uvRatio:"function"});let a=Os<<BigInt(r.BYTES*8)-pt,f=O=>t.create(O),d=e.uvRatio||((O,A)=>{try{return{isValid:!0,value:t.sqrt(t.div(O,A))}}catch{return{isValid:!1,value:Tt}}});if(!uc(t,n,n.Gx,n.Gy))throw new Error("bad curve params: generator point");function w(O,A,x=!1){let K=x?pt:Tt;return Kt("coordinate "+O,A,K,a),A}function b(O){if(!(O instanceof E))throw new Error("ExtendedPoint expected")}let N=pr((O,A)=>{let{ex:x,ey:K,ez:J}=O,Y=O.is0();A==null&&(A=Y?ac:t.inv(J));let C=f(x*A),W=f(K*A),V=f(J*A);if(Y)return{x:Tt,y:pt};if(V!==pt)throw new Error("invZ was invalid");return{x:C,y:W}}),B=pr(O=>{let{a:A,d:x}=n;if(O.is0())throw new Error("bad point: ZERO");let{ex:K,ey:J,ez:Y,et:C}=O,W=f(K*K),V=f(J*J),Z=f(Y*Y),L=f(Z*Z),U=f(W*A),T=f(Z*f(U+V)),P=f(L+f(x*f(W*V)));if(T!==P)throw new Error("bad point: equation left != right (1)");let y=f(K*J),i=f(Y*C);if(y!==i)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(A,x,K,J){this.ex=w("x",A),this.ey=w("y",x),this.ez=w("z",K,!0),this.et=w("t",J),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof E)throw new Error("extended point not allowed");let{x,y:K}=A||{};return w("x",x),w("y",K),new E(x,K,pt,f(x*K))}static normalizeZ(A){return Xr(E,"ez",A)}static msm(A,x){return Qr(E,r,A,x)}_setWindowSize(A){this.precompute(A)}precompute(A=8,x=!0){return k.setWindowSize(this,A),x||this.multiply(Os),this}assertValidity(){B(this)}equals(A){b(A);let{ex:x,ey:K,ez:J}=this,{ex:Y,ey:C,ez:W}=A,V=f(x*W),Z=f(Y*J),L=f(K*W),U=f(C*J);return V===Z&&L===U}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:A}=n,{ex:x,ey:K,ez:J}=this,Y=f(x*x),C=f(K*K),W=f(Os*f(J*J)),V=f(A*Y),Z=x+K,L=f(f(Z*Z)-Y-C),U=V+C,T=U-W,P=V-C,y=f(L*T),i=f(U*P),u=f(L*P),l=f(T*U);return new E(y,i,l,u)}add(A){b(A);let{a:x,d:K}=n,{ex:J,ey:Y,ez:C,et:W}=this,{ex:V,ey:Z,ez:L,et:U}=A,T=f(J*V),P=f(Y*Z),y=f(W*K*U),i=f(C*L),u=f((J+Y)*(V+Z)-T-P),l=i-y,h=i+y,p=f(P-x*T),R=f(u*l),S=f(h*p),g=f(u*p),c=f(l*h);return new E(R,S,c,g)}subtract(A){return this.add(A.negate())}multiply(A){let x=A;Kt("scalar",x,pt,o);let{p:K,f:J}=k.wNAFCached(this,x,E.normalizeZ);return E.normalizeZ([K,J])[0]}multiplyUnsafe(A,x=E.ZERO){let K=A;return Kt("scalar",K,Tt,o),K===Tt?E.ZERO:this.is0()||K===pt?this:k.wNAFCachedUnsafe(this,K,E.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return k.wNAFCachedUnsafe(this,o).is0()}toAffine(A){return N(this,A)}clearCofactor(){return s===pt?this:this.multiplyUnsafe(s)}static fromBytes(A,x=!1){return Tr(A),this.fromHex(A,x)}static fromHex(A,x=!1){let{d:K,a:J}=n,Y=t.BYTES;A=be("pointHex",A,Y),Ct("zip215",x);let C=A.slice(),W=A[Y-1];C[Y-1]=W&-129;let V=jt(C),Z=x?a:t.ORDER;Kt("pointHex.y",V,Tt,Z);let L=f(V*V),U=f(L-pt),T=f(K*L-J),{isValid:P,value:y}=d(U,T);if(!P)throw new Error("Point.fromHex: invalid y coordinate");let i=(y&pt)===pt,u=(W&128)!==0;if(!x&&y===Tt&&u)throw new Error("Point.fromHex: x=0 and x_0=1");return u!==i&&(y=f(-y)),E.fromAffine({x:y,y:V})}static fromPrivateScalar(A){return E.BASE.multiply(A)}toBytes(){let{x:A,y:x}=this.toAffine(),K=hr(x,t.BYTES);return K[K.length-1]|=A&pt?128:0,K}toRawBytes(){return this.toBytes()}toHex(){return lr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(n.Gx,n.Gy,pt,f(n.Gx*n.Gy)),E.ZERO=new E(Tt,pt,pt,Tt),E.Fp=t,E.Fn=r;let k=Jr(E,r.BYTES*8);return E}function lc(n,e){Ft(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:t,hash:r}=e,{BASE:s,Fp:o,Fn:a}=n,f=a.ORDER,d=e.randomBytes||Zr,w=e.adjustScalarBytes||(C=>C),b=e.domain||((C,W,V)=>{if(Ct("phflag",V),W.length||V)throw new Error("Contexts/pre-hash are not supported");return C});function N(C){return a.create(C)}function B(C){return N(jt(C))}function E(C){let W=o.BYTES;C=be("private key",C,W);let V=be("hashed private key",r(C),2*W),Z=w(V.slice(0,W)),L=V.slice(W,2*W),U=B(Z);return{head:Z,prefix:L,scalar:U}}function k(C){let{head:W,prefix:V,scalar:Z}=E(C),L=s.multiply(Z),U=L.toBytes();return{head:W,prefix:V,scalar:Z,point:L,pointBytes:U}}function O(C){return k(C).pointBytes}function A(C=Uint8Array.of(),...W){let V=kt(...W);return B(r(b(V,be("context",C),!!t)))}function x(C,W,V={}){C=be("message",C),t&&(C=t(C));let{prefix:Z,scalar:L,pointBytes:U}=k(W),T=A(V.context,Z,C),P=s.multiply(T).toBytes(),y=A(V.context,P,U,C),i=N(T+y*L);Kt("signature.s",i,Tt,f);let u=o.BYTES,l=kt(P,hr(i,u));return be("result",l,u*2)}let K=cc;function J(C,W,V,Z=K){let{context:L,zip215:U}=Z,T=o.BYTES;C=be("signature",C,2*T),W=be("message",W),V=be("publicKey",V,T),U!==void 0&&Ct("zip215",U),t&&(W=t(W));let P=jt(C.slice(T,2*T)),y,i,u;try{y=n.fromHex(V,U),i=n.fromHex(C.slice(0,T),U),u=s.multiplyUnsafe(P)}catch{return!1}if(!U&&y.isSmallOrder())return!1;let l=A(L,i.toBytes(),y.toBytes(),W);return i.add(y.multiplyUnsafe(l)).subtract(u).clearCofactor().is0()}return s.precompute(8),{getPublicKey:O,sign:x,verify:J,utils:{getExtendedPublicKey:k,randomPrivateKey:()=>d(o.BYTES),precompute(C=8,W=n.BASE){return W.precompute(C,!1)}},Point:n}}function dc(n){let e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=It(e.n,n.nBitLength,!0),s={Fp:t,Fn:r,uvRatio:n.uvRatio},o={hash:n.hash,randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:o}}function hc(n,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:n})}function mi(n){let{CURVE:e,curveOpts:t,eddsaOpts:r}=dc(n),s=fc(e,t),o=lc(s,r);return hc(n,o)}var Lp=BigInt(0),pc=BigInt(1),Ri=BigInt(2),xp=BigInt(3),gc=BigInt(5),yc=BigInt(8),tn={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:yc,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function _c(n){let e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),o=tn.p,f=n*n%o*n%o,d=Ee(f,Ri,o)*f%o,w=Ee(d,pc,o)*n%o,b=Ee(w,gc,o)*w%o,N=Ee(b,e,o)*b%o,B=Ee(N,t,o)*N%o,E=Ee(B,r,o)*B%o,k=Ee(E,s,o)*E%o,O=Ee(k,s,o)*E%o,A=Ee(O,e,o)*b%o;return{pow_p_5_8:Ee(A,Ri,o)*n%o,b2:f}}function mc(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}var bi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Rc(n,e){let t=tn.p,r=ve(e*e*e,t),s=ve(r*r*e,t),o=_c(n*s).pow_p_5_8,a=ve(n*r*o,t),f=ve(e*a*a,t),d=a,w=ve(a*bi,t),b=f===n,N=f===ve(-n,t),B=f===ve(-n*bi,t);return b&&(a=d),(N||B)&&(a=w),ci(a,t)&&(a=ve(-a,t)),{isValid:b||N,value:a}}var bc=It(tn.p,void 0,!0),wc={...tn,Fp:bc,hash:Zo,adjustScalarBytes:mc,uvRatio:Rc},Qt=mi(wc);var co=fr(ks()),ut=fr(Oi());var Ir=fr(Di()),m=fr(Ks()),Ca=fr(Ks());ee();re();te();ee();re();te();var $c=1,Vc=2,Gc=3,Hc=4,Yc=5,jc=6,Zc=7,Xc=8,Jc=9,Qc=10,eu=-32700,tu=-32603,ru=-32602,nu=-32601,su=-32600,ou=-32016,iu=-32015,au=-32014,cu=-32013,uu=-32012,fu=-32011,lu=-32010,du=-32009,hu=-32008,pu=-32007,gu=-32006,yu=-32005,_u=-32004,mu=-32003,Ru=-32002,bu=-32001,wu=28e5,Su=2800001,Eu=2800002,Au=2800003,vu=2800004,Iu=2800005,Ou=2800006,Nu=2800007,ku=2800008,Tu=2800009,Lu=2800010,xu=323e4,Bu=32300001,Cu=3230002,Mu=3230003,Pu=3230004,Du=361e4,Uu=3610001,zu=3610002,Ku=3610003,Fu=3610004,qu=3610005,Wu=3610006,$u=3610007,Vu=3611e3,Gu=3704e3,Hu=3704001,Yu=3704002,ju=3704003,Zu=3704004,Xu=4128e3,Ju=4128001,Qu=4128002,ef=4615e3,tf=4615001,rf=4615002,nf=4615003,sf=4615004,of=4615005,af=4615006,cf=4615007,uf=4615008,ff=4615009,lf=4615010,df=4615011,hf=4615012,pf=4615013,gf=4615014,yf=4615015,_f=4615016,mf=4615017,Rf=4615018,bf=4615019,wf=4615020,Sf=4615021,Ef=4615022,Af=4615023,vf=4615024,If=4615025,Of=4615026,Nf=4615027,kf=4615028,Tf=4615029,Lf=4615030,xf=4615031,Bf=4615032,Cf=4615033,Mf=4615034,Pf=4615035,Df=4615036,Uf=4615037,zf=4615038,Kf=4615039,Ff=4615040,qf=4615041,Wf=4615042,$f=4615043,Vf=4615044,Gf=4615045,Hf=4615046,Yf=4615047,jf=4615048,Zf=4615049,Xf=4615050,Jf=4615051,Qf=4615052,el=4615053,tl=4615054,rl=5508e3,nl=5508001,sl=5508002,ol=5508003,il=5508004,al=5508005,cl=5508006,ul=5508007,fl=5508008,ll=5508009,dl=5508010,hl=5508011,pl=5663e3,gl=5663001,yl=5663002,_l=5663003,ml=5663004,Rl=5663005,bl=5663006,wl=5663007,Sl=5663008,El=5663009,Al=5663010,vl=5663011,Il=5663012,Ol=5663013,Nl=5663014,kl=5663015,Tl=5663016,Ll=5663017,xl=5663018,Bl=5663019,Cl=705e4,Ml=7050001,Pl=7050002,Dl=7050003,Ul=7050004,zl=7050005,Kl=7050006,Fl=7050007,ql=7050008,Wl=7050009,$l=7050010,Vl=7050011,Gl=7050012,Hl=7050013,Yl=7050014,jl=7050015,Zl=7050016,Xl=7050017,Jl=7050018,Ql=7050019,ed=7050020,td=7050021,rd=7050022,nd=7050023,sd=7050024,od=7050025,id=7050026,ad=7050027,cd=7050028,ud=7050029,fd=7050030,ld=7050031,dd=7050032,hd=7050033,pd=7050034,gd=7050035,yd=7050036,Fs=8078e3,qs=8078001,Ui=8078002,zi=8078003,Ws=8078004,$s=8078005,Vs=8078006,_d=8078007,md=8078008,Rd=8078009,bd=8078010,Gs=8078011,wd=8078012,Ki=8078013,Fi=8078014,Sd=8078015,Ed=8078016,Ad=8078017,vd=8078018,Id=8078019,qi=8078020,Wi=8078021,Od=8078022,Nd=81e5,kd=8100001,Td=8100002,Ld=8100003,xd=819e4,Bd=8190001,Cd=8190002,Md=8190003,Pd=8190004,Dd=99e5,Ud=9900001,zd=9900002,Kd=9900003,Fd=9900004;function $i(n){return Array.isArray(n)?"%5B"+n.map($i).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function qd([n,e]){return`${n}=${$i(e)}`}function Wd(n){let e=Object.entries(n).map(qd).join("&");return btoa(e)}var _g={[xu]:"Account not found at address: $address",[Pu]:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",[Mu]:"Expected decoded account at address: $address",[Cu]:"Failed to decode account data at address: $address",[Bu]:"Accounts not found at addresses: $addresses",[Tu]:"Unable to find a viable program address bump seed.",[Eu]:"$putativeAddress is not a base58-encoded address.",[wu]:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",[Au]:"The `CryptoKey` must be an `Ed25519` public key.",[ku]:"Invalid seeds; point must fall off the Ed25519 curve.",[vu]:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",[Ou]:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",[Nu]:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",[Iu]:"Expected program derived address bump to be in the range [0, 255], got: $bump.",[Lu]:"Program address cannot end with PDA marker.",[Su]:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",[Hc]:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",[$c]:"The network has progressed past the last block for which this transaction could have been committed.",[Fs]:"Codec [$codecDescription] cannot decode empty byte arrays.",[Od]:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",[qi]:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",[$s]:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",[Vs]:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",[Ws]:"Encoder and decoder must either both be fixed-size or variable-size.",[md]:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",[Ui]:"Expected a fixed-size codec, got a variable-size one.",[Ki]:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",[zi]:"Expected a variable-size codec, got a fixed-size one.",[Id]:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",[qs]:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",[vd]:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",[Rd]:"Invalid discriminated union variant. Expected one of [$variants], got $value.",[bd]:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",[Sd]:"Invalid literal union variant. Expected one of [$variants], got $value.",[_d]:"Expected [$codecDescription] to have $expected items, got $actual.",[wd]:"Invalid value $value for base $base with alphabet $alphabet.",[Ed]:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",[Gs]:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",[Fi]:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",[Wi]:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",[Ad]:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",[Vu]:"No random values implementation could be found.",[ff]:"instruction requires an uninitialized account",[Af]:"instruction tries to borrow reference for an account which is already borrowed",[vf]:"instruction left account with an outstanding borrowed reference",[Sf]:"program other than the account's owner changed the size of the account data",[of]:"account data too small for instruction",[Ef]:"instruction expected an executable account",[Hf]:"An account does not have enough lamports to be rent-exempt",[jf]:"Program arithmetic overflowed",[Gf]:"Failed to serialize or deserialize account data: $encodedData",[tl]:"Builtin programs must consume compute units",[Bf]:"Cross-program invocation call depth too deep",[zf]:"Computational budget exceeded",[Of]:"custom program error: #$code",[mf]:"instruction contains duplicate accounts",[If]:"instruction modifications of multiply-passed account differ",[Lf]:"executable accounts must be rent exempt",[kf]:"instruction changed executable accounts data",[Tf]:"instruction changed the balance of an executable account",[Rf]:"instruction changed executable bit of an account",[gf]:"instruction modified data of an account it does not own",[pf]:"instruction spent from the balance of an account it does not own",[tf]:"generic instruction error",[Xf]:"Provided owner is not allowed",[$f]:"Account is immutable",[Vf]:"Incorrect authority provided",[cf]:"incorrect program id for instruction",[af]:"insufficient funds for instruction",[sf]:"invalid account data for instruction",[Yf]:"Invalid account owner",[rf]:"invalid program argument",[Nf]:"program returned invalid error code",[nf]:"invalid instruction data",[Uf]:"Failed to reallocate account data",[Df]:"Provided seeds do not result in a valid address",[Jf]:"Accounts data allocations exceeded the maximum allowed per transaction",[Qf]:"Max accounts exceeded",[el]:"Max instruction trace length exceeded",[Pf]:"Length of the seed is too long for address generation",[Cf]:"An account required by the instruction is missing",[uf]:"missing required signature for instruction",[hf]:"instruction illegally modified the program id of an account",[wf]:"insufficient account keys for instruction",[Kf]:"Cross-program invocation with unauthorized signer or writable account",[Ff]:"Failed to create program execution environment",[Wf]:"Program failed to compile",[qf]:"Program failed to complete",[_f]:"instruction modified data of a read-only account",[yf]:"instruction changed the balance of a read-only account",[Mf]:"Cross-program invocation reentrancy not allowed for this instruction",[bf]:"instruction modified rent epoch of an account",[df]:"sum of account balances before and after instruction do not match",[lf]:"instruction requires an initialized account",[ef]:"",[xf]:"Unsupported program id",[Zf]:"Unsupported sysvar",[Xu]:"The instruction does not have any accounts.",[Ju]:"The instruction does not have any data.",[Qu]:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",[Yc]:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",[Vc]:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",[zd]:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[Fd]:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",[Ud]:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[Dd]:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[Kd]:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[tu]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[ru]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[su]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[nu]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[eu]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[uu]:"$__serverMessage",[bu]:"$__serverMessage",[_u]:"$__serverMessage",[au]:"$__serverMessage",[lu]:"$__serverMessage",[du]:"$__serverMessage",[ou]:"Minimum context slot has not been reached",[yu]:"Node is unhealthy; behind by $numSlotsBehind slots",[hu]:"No snapshot",[Ru]:"Transaction simulation failed",[pu]:"$__serverMessage",[fu]:"Transaction history is not available from this node",[gu]:"$__serverMessage",[cu]:"Transaction signature length mismatch",[mu]:"Transaction signature verification failure",[iu]:"$__serverMessage",[Gu]:"Key pair bytes must be of length 64, got $byteLength.",[Hu]:"Expected private key bytes with length 32. Actual length: $actualLength.",[Yu]:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",[Zu]:"The provided private key does not match the provided public key.",[ju]:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",[jc]:"Lamports value must be in the range [0, 2e64-1]",[Zc]:"`$value` cannot be parsed as a `BigInt`",[Qc]:"$message",[Xc]:"`$value` cannot be parsed as a `Number`",[Gc]:"No nonce account could be found at address `$nonceAccountAddress`",[xd]:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",[Cd]:"WebSocket was closed before payload could be added to the send buffer",[Md]:"WebSocket connection closed",[Pd]:"WebSocket failed to connect",[Bd]:"Failed to obtain a subscription id from the server",[Ld]:"Could not find an API plan for RPC method: `$method`",[Nd]:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",[Td]:"HTTP error ($statusCode): $message",[kd]:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",[rl]:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",[nl]:"The provided value does not implement the `KeyPairSigner` interface",[ol]:"The provided value does not implement the `MessageModifyingSigner` interface",[il]:"The provided value does not implement the `MessagePartialSigner` interface",[sl]:"The provided value does not implement any of the `MessageSigner` interfaces",[cl]:"The provided value does not implement the `TransactionModifyingSigner` interface",[ul]:"The provided value does not implement the `TransactionPartialSigner` interface",[fl]:"The provided value does not implement the `TransactionSendingSigner` interface",[al]:"The provided value does not implement any of the `TransactionSigner` interfaces",[ll]:"More than one `TransactionSendingSigner` was identified.",[dl]:"No `TransactionSendingSigner` was identified. Please provide a valid `ITransactionWithSingleSendingSigner` transaction.",[hl]:"Wallet account signers do not support signing multiple messages/transactions in a single operation",[$u]:"Cannot export a non-extractable key.",[Uu]:"No digest implementation could be found.",[Du]:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",[zu]:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,[Ku]:"No signature verification implementation could be found.",[Fu]:"No key generation implementation could be found.",[qu]:"No signing implementation could be found.",[Wu]:"No key export implementation could be found.",[Jc]:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",[Zl]:"Transaction processing left an account with an outstanding borrowed reference",[Ml]:"Account in use",[Pl]:"Account loaded twice",[Dl]:"Attempt to debit an account but found no record of a prior credit.",[nd]:"Transaction loads an address table account that doesn't exist",[Fl]:"This transaction has already been processed",[ql]:"Blockhash not found",[Wl]:"Loader call chain is too deep",[jl]:"Transactions are currently disabled due to cluster maintenance",[fd]:"Transaction contains a duplicate instruction ($index) that is not allowed",[zl]:"Insufficient funds for fee",[ld]:"Transaction results in an account ($accountIndex) with insufficient funds for rent",[Kl]:"This account may not be used to pay transaction fees",[Vl]:"Transaction contains an invalid account reference",[od]:"Transaction loads an address table account with invalid data",[id]:"Transaction address table lookup uses an invalid index",[sd]:"Transaction loads an address table account with an invalid owner",[hd]:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",[Hl]:"This program may not be used for executing instructions",[ad]:"Transaction leaves an account with a lower balance than rent-exempt minimum",[Ql]:"Transaction loads a writable account that cannot be written",[dd]:"Transaction exceeded max loaded accounts data size cap",[$l]:"Transaction requires a fee but has no signature present",[Ul]:"Attempt to load a program that does not exist",[gd]:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",[pd]:"ResanitizationNeeded",[Yl]:"Transaction failed to sanitize accounts offsets correctly",[Gl]:"Transaction did not pass signature verification",[rd]:"Transaction locked too many accounts",[yd]:"Sum of account balances before and after transaction do not match",[Cl]:"The transaction failed with the error `$errorName`",[Jl]:"Transaction version is unsupported",[td]:"Transaction would exceed account data limit within the block",[ud]:"Transaction would exceed total account data limit",[ed]:"Transaction would exceed max account limit within the block",[Xl]:"Transaction would exceed max Block Cost Limit",[cd]:"Transaction would exceed max Vote Cost Limit",[kl]:"Attempted to sign a transaction with an address that is not a signer for it",[Al]:"Transaction is missing an address at index: $index.",[Tl]:"Transaction has no expected signers therefore it cannot be encoded",[yl]:"Transaction does not have a blockhash lifetime",[_l]:"Transaction is not a durable nonce transaction",[Rl]:"Contents of these address lookup tables unknown: $lookupTableAddresses",[bl]:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",[Sl]:"No fee payer set in CompiledTransaction",[wl]:"Could not find program address at index $index",[xl]:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",[Bl]:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",[vl]:"Transaction is missing a fee payer.",[Il]:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",[Nl]:"Transaction first instruction is not advance nonce account instruction.",[Ol]:"Transaction with no instructions cannot be durable nonce transaction.",[pl]:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",[gl]:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",[Ll]:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",[El]:"Transaction is missing signatures for addresses: $addresses.",[ml]:"Transaction version must be in the range [0, 127]. `$actualVersion` given"};function $d(n,e={}){{let t=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(t+=` '${Wd(e)}'`),`${t}\``}}var $t=class extends Error{cause=this.cause;context;constructor(...[n,e]){let t,r;if(e){let{cause:o,...a}=e;o&&(r={cause:o}),Object.keys(a).length>0&&(t=a)}let s=$d(n,t);super(s,r),this.context={__code:n,...t},this.name="SolanaError"}};ee();re();te();function Vd(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}function Vi(n){return Object.freeze({...n,encode:e=>{let t=new Uint8Array(Vd(e,n));return n.write(e,t,0),t}})}function Gi(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}function wr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Hi(n,e){if(wr(n)!==wr(e))throw new $t(Ws);if(wr(n)&&wr(e)&&n.fixedSize!==e.fixedSize)throw new $t($s,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!wr(n)&&!wr(e)&&n.maxSize!==e.maxSize)throw new $t(Vs,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}function Yi(n,e,t=0){if(e.length-t<=0)throw new $t(Fs,{codecDescription:n})}function ji(n,e,t,r=0){let s=t.length-r;if(s<e)throw new $t(qs,{bytesLength:s,codecDescription:n,expected:e})}function Gd(n,e,t,r){if(r<e||r>t)throw new $t(Gs,{codecDescription:n,max:t,min:e,value:r})}function Zi(n){return n?.endian!==1}function Hd(n){return Vi({fixedSize:n.size,write(e,t,r){n.range&&Gd(n.name,n.range[0],n.range[1],e);let s=new ArrayBuffer(n.size);return n.set(new DataView(s),e,Zi(n.config)),t.set(new Uint8Array(s),r),r+n.size}})}function Yd(n){return Gi({fixedSize:n.size,read(e,t=0){Yi(n.name,e,t),ji(n.name,n.size,e,t);let r=new DataView(jd(e,t,n.size));return[n.get(r,Zi(n.config)),t+n.size]}})}function jd(n,e,t){let r=n.byteOffset+(e??0),s=t??n.byteLength;return n.buffer.slice(r,r+s)}var Hs=(n={})=>Hd({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),Zd=(n={})=>Yd({config:n,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Xi=(n={})=>Hi(Hs(n),Zd(n));ee();re();te();var Ys=class extends TypeError{constructor(e,t){let r,{message:s,explanation:o,...a}=e,{path:f}=e,d=f.length===0?s:`At path: ${f.join(".")} -- ${s}`;super(o??d),o!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}};function Xd(n){return Ur(n)&&typeof n[Symbol.iterator]=="function"}function Ur(n){return typeof n=="object"&&n!=null}function Ln(n){return Ur(n)&&!Array.isArray(n)}function Ot(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Jd(n){let{done:e,value:t}=n.next();return e?void 0:t}function Qd(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});let{path:s,branch:o}=e,{type:a}=t,{refinement:f,message:d=`Expected a value of type \`${a}\`${f?` with refinement \`${f}\``:""}, but received: \`${Ot(r)}\``}=n;return{value:r,type:a,refinement:f,key:s[s.length-1],path:s,branch:o,...n,message:d}}function*Ji(n,e,t,r){Xd(n)||(n=[n]);for(let s of n){let o=Qd(s,e,t,r);o&&(yield o)}}function*js(n,e,t={}){let{path:r=[],branch:s=[n],coerce:o=!1,mask:a=!1}=t,f={path:r,branch:s,mask:a};o&&(n=e.coercer(n,f));let d="valid";for(let w of e.validator(n,f))w.explanation=t.message,d="not_valid",yield[w,void 0];for(let[w,b,N]of e.entries(n,f)){let B=js(b,N,{path:w===void 0?r:[...r,w],branch:w===void 0?s:[...s,b],coerce:o,mask:a,message:t.message});for(let E of B)E[0]?(d=E[0].refinement!=null?"not_refined":"not_valid",yield[E[0],void 0]):o&&(b=E[1],w===void 0?n=b:n instanceof Map?n.set(w,b):n instanceof Set?n.add(b):Ur(n)&&(b!==void 0||w in n)&&(n[w]=b))}if(d!=="not_valid")for(let w of e.refiner(n,f))w.explanation=t.message,d="not_refined",yield[w,void 0];d==="valid"&&(yield[void 0,n])}var Et=class{constructor(e){let{type:t,schema:r,validator:s,refiner:o,coercer:a=d=>d,entries:f=function*(){}}=e;this.type=t,this.schema=r,this.entries=f,this.coercer=a,s?this.validator=(d,w)=>{let b=s(d,w);return Ji(b,w,this,d)}:this.validator=()=>[],o?this.refiner=(d,w)=>{let b=o(d,w);return Ji(b,w,this,d)}:this.refiner=()=>[]}assert(e,t){return Qi(e,this,t)}create(e,t){return q(e,this,t)}is(e){return ea(e,this)}mask(e,t){return eh(e,this,t)}validate(e,t={}){return zr(e,this,t)}};function Qi(n,e,t){let r=zr(n,e,{message:t});if(r[0])throw r[0]}function q(n,e,t){let r=zr(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function eh(n,e,t){let r=zr(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function ea(n,e){return!zr(n,e)[0]}function zr(n,e,t={}){let r=js(n,e,t),s=Jd(r);return s[0]?[new Ys(s[0],function*(){for(let a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function nr(n,e){return new Et({type:n,schema:null,validator:e})}function ta(){return nr("any",()=>!0)}function G(n){return new Et({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(let[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ot(e)}`}})}function Nt(){return nr("boolean",n=>typeof n=="boolean")}function xn(n){return nr("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ot(e)}`)}function Ae(n){let e=Ot(n),t=typeof n;return new Et({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${Ot(r)}`}})}function th(){return nr("never",()=>!1)}function H(n){return new Et({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function v(){return nr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ot(n)}`)}function Q(n){return new Et({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Zs(n,e){return new Et({type:"record",schema:null,*entries(t){if(Ur(t))for(let r in t){let s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return Ln(t)||`Expected an object, but received: ${Ot(t)}`},coercer(t){return Ln(t)?{...t}:t}})}function z(){return nr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ot(n)}`)}function Bn(n){let e=th();return new Et({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){let r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Ot(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function M(n){let e=Object.keys(n);return new Et({type:"type",schema:n,*entries(t){if(Ur(t))for(let r of e)yield[r,t[r],n[r]]},validator(t){return Ln(t)||`Expected an object, but received: ${Ot(t)}`},coercer(t){return Ln(t)?{...t}:t}})}function dt(n){let e=n.map(t=>t.type).join(" | ");return new Et({type:"union",schema:null,coercer(t,r){for(let s of n){let[o,a]=s.validate(t,{coerce:!0,mask:r.mask});if(!o)return a}return t},validator(t,r){let s=[];for(let o of n){let[...a]=js(t,o,r),[f]=a;if(f[0])for(let[d]of a)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ot(t)}`,...s]}})}function sr(){return nr("unknown",()=>!0)}function Sr(n,e,t){return new Et({...n,coercer:(r,s)=>ea(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Ma=fr(oa());ee();re();te();kr();var ih=class extends Rs.default{socket;constructor(n,e,t){super(),this.socket=new window.WebSocket(n,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,e,t){let r=t||e;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,e){this.socket.close(n,e)}addEventListener(n,e,t){this.socket.addEventListener(n,e,t)}};function ia(n,e){return new ih(n,e)}var ah=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},aa=class extends Rs.default{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},f,d){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new ah,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,e,t,r){return!r&&typeof t=="object"&&(r=t,t=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));let a=this.generate_request_id(n,e),f={jsonrpc:"2.0",method:n,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(f),r,d=>{if(d)return o(d);this.queue[a]={promise:[s,o]},t&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},t))})})}async login(n){let e=await this.call("rpc.login",n);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(n,e){return new Promise((t,r)=>{if(!this.ready)return r(new Error("socket not ready"));let s={jsonrpc:"2.0",method:n,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return r(o);t()})})}async subscribe(n){typeof n=="string"&&(n=[n]);let e=await this.call("rpc.on",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+e[n]);return e}async unsubscribe(n){typeof n=="string"&&(n=[n]);let e=await this.call("rpc.off",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(n,e){this.socket.close(n||1e3,e)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=D.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let r=[t.notification];if(t.params.constructor===Object)r.push(t.params);else for(let s=0;s<t.params.length;s++)r.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",t,r),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,e),this.reconnect_interval)))})}};ee();re();te();ee();re();te();ee();re();te();function ca(n){n.lowS!==void 0&&Ct("lowS",n.lowS),n.prehash!==void 0&&Ct("prehash",n.prehash)}var Xs=class extends Error{constructor(e=""){super(e)}},Dt={Err:Xs,_tlv:{encode:(n,e)=>{let{Err:t}=Dt;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let r=e.length/2,s=Lr(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");let o=r>127?Lr(s.length/2|128):"";return Lr(n)+o+s+e},decode(n,e){let{Err:t}=Dt,r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");let s=e[r++],o=!!(s&128),a=0;if(!o)a=s;else{let d=s&127;if(!d)throw new t("tlv.decode(long): indefinite length not supported");if(d>4)throw new t("tlv.decode(long): byte length is too big");let w=e.subarray(r,r+d);if(w.length!==d)throw new t("tlv.decode: length bytes not complete");if(w[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let b of w)a=a<<8|b;if(r+=d,a<128)throw new t("tlv.decode(long): not minimal encoding")}let f=e.subarray(r,r+a);if(f.length!==a)throw new t("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+a)}}},_int:{encode(n){let{Err:e}=Dt;if(n<Fr)throw new e("integer: negative integers are not allowed");let t=Lr(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){let{Err:e}=Dt;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return dr(n)}},toSig(n){let{Err:e,_int:t,_tlv:r}=Dt,s=be("signature",n),{v:o,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");let{v:f,l:d}=r.decode(2,o),{v:w,l:b}=r.decode(2,d);if(b.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(f),s:t.decode(w)}},hexFromSig(n){let{_tlv:e,_int:t}=Dt,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),o=r+s;return e.encode(48,o)}},Fr=BigInt(0),qr=BigInt(1),ch=BigInt(2),Cn=BigInt(3),uh=BigInt(4);function fh(n,e,t){function r(s){let o=n.sqr(s),a=n.mul(o,s);return n.add(n.add(a,n.mul(s,e)),t)}return r}function ua(n,e,t){let{BYTES:r}=n;function s(o){let a;if(typeof o=="bigint")a=o;else{let f=be("private key",o);if(e){if(!e.includes(f.length*2))throw new Error("invalid private key");let d=new Uint8Array(r);d.set(f,d.length-f.length),f=d}try{a=n.fromBytes(f)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof o}`)}}if(t&&(a=n.create(a)),!n.isValidNot0(a))throw new Error("invalid private key: out of range [1..N-1]");return a}return s}function lh(n,e={}){let{Fp:t,Fn:r}=en("weierstrass",n,e),{h:s,n:o}=n;Ft(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:a}=e;if(a&&(!t.is0(n.a)||typeof a.beta!="bigint"||typeof a.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function f(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(Z,L,U){let{x:T,y:P}=L.toAffine(),y=t.toBytes(T);if(Ct("isCompressed",U),U){f();let i=!t.isOdd(P);return kt(fa(i),y)}else return kt(Uint8Array.of(4),y,t.toBytes(P))}function w(Z){Tr(Z);let L=t.BYTES,U=L+1,T=2*L+1,P=Z.length,y=Z[0],i=Z.subarray(1);if(P===U&&(y===2||y===3)){let u=t.fromBytes(i);if(!t.isValid(u))throw new Error("bad point: is not on curve, wrong x");let l=B(u),h;try{h=t.sqrt(l)}catch(S){let g=S instanceof Error?": "+S.message:"";throw new Error("bad point: is not on curve, sqrt error"+g)}f();let p=t.isOdd(h);return(y&1)===1!==p&&(h=t.neg(h)),{x:u,y:h}}else if(P===T&&y===4){let u=t.fromBytes(i.subarray(L*0,L*1)),l=t.fromBytes(i.subarray(L*1,L*2));if(!E(u,l))throw new Error("bad point: is not on curve");return{x:u,y:l}}else throw new Error(`bad point: got length ${P}, expected compressed=${U} or uncompressed=${T}`)}let b=e.toBytes||d,N=e.fromBytes||w,B=fh(t,n.a,n.b);function E(Z,L){let U=t.sqr(L),T=B(Z);return t.eql(U,T)}if(!E(n.Gx,n.Gy))throw new Error("bad curve params: generator point");let k=t.mul(t.pow(n.a,Cn),uh),O=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(k,O)))throw new Error("bad curve params: a or b");function A(Z,L,U=!1){if(!t.isValid(L)||U&&t.is0(L))throw new Error(`bad point coordinate ${Z}`);return L}function x(Z){if(!(Z instanceof C))throw new Error("ProjectivePoint expected")}let K=pr((Z,L)=>{let{px:U,py:T,pz:P}=Z;if(t.eql(P,t.ONE))return{x:U,y:T};let y=Z.is0();L==null&&(L=y?t.ONE:t.inv(P));let i=t.mul(U,L),u=t.mul(T,L),l=t.mul(P,L);if(y)return{x:t.ZERO,y:t.ZERO};if(!t.eql(l,t.ONE))throw new Error("invZ was invalid");return{x:i,y:u}}),J=pr(Z=>{if(Z.is0()){if(e.allowInfinityPoint&&!t.is0(Z.py))return;throw new Error("bad point: ZERO")}let{x:L,y:U}=Z.toAffine();if(!t.isValid(L)||!t.isValid(U))throw new Error("bad point: x or y not field elements");if(!E(L,U))throw new Error("bad point: equation left != right");if(!Z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Y(Z,L,U,T,P){return U=new C(t.mul(U.px,Z),U.py,U.pz),L=gr(T,L),U=gr(P,U),L.add(U)}class C{constructor(L,U,T){this.px=A("x",L),this.py=A("y",U,!0),this.pz=A("z",T),Object.freeze(this)}static fromAffine(L){let{x:U,y:T}=L||{};if(!L||!t.isValid(U)||!t.isValid(T))throw new Error("invalid affine point");if(L instanceof C)throw new Error("projective point not allowed");return t.is0(U)&&t.is0(T)?C.ZERO:new C(U,T,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(L){return Xr(C,"pz",L)}static fromBytes(L){return Tr(L),C.fromHex(L)}static fromHex(L){let U=C.fromAffine(N(be("pointHex",L)));return U.assertValidity(),U}static fromPrivateKey(L){let U=ua(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(U(L))}static msm(L,U){return Qr(C,r,L,U)}precompute(L=8,U=!0){return V.setWindowSize(this,L),U||this.multiply(Cn),this}_setWindowSize(L){this.precompute(L)}assertValidity(){J(this)}hasEvenY(){let{y:L}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(L)}equals(L){x(L);let{px:U,py:T,pz:P}=this,{px:y,py:i,pz:u}=L,l=t.eql(t.mul(U,u),t.mul(y,P)),h=t.eql(t.mul(T,u),t.mul(i,P));return l&&h}negate(){return new C(this.px,t.neg(this.py),this.pz)}double(){let{a:L,b:U}=n,T=t.mul(U,Cn),{px:P,py:y,pz:i}=this,u=t.ZERO,l=t.ZERO,h=t.ZERO,p=t.mul(P,P),R=t.mul(y,y),S=t.mul(i,i),g=t.mul(P,y);return g=t.add(g,g),h=t.mul(P,i),h=t.add(h,h),u=t.mul(L,h),l=t.mul(T,S),l=t.add(u,l),u=t.sub(R,l),l=t.add(R,l),l=t.mul(u,l),u=t.mul(g,u),h=t.mul(T,h),S=t.mul(L,S),g=t.sub(p,S),g=t.mul(L,g),g=t.add(g,h),h=t.add(p,p),p=t.add(h,p),p=t.add(p,S),p=t.mul(p,g),l=t.add(l,p),S=t.mul(y,i),S=t.add(S,S),p=t.mul(S,g),u=t.sub(u,p),h=t.mul(S,R),h=t.add(h,h),h=t.add(h,h),new C(u,l,h)}add(L){x(L);let{px:U,py:T,pz:P}=this,{px:y,py:i,pz:u}=L,l=t.ZERO,h=t.ZERO,p=t.ZERO,R=n.a,S=t.mul(n.b,Cn),g=t.mul(U,y),c=t.mul(T,i),_=t.mul(P,u),$=t.add(U,T),F=t.add(y,i);$=t.mul($,F),F=t.add(g,c),$=t.sub($,F),F=t.add(U,P);let j=t.add(y,u);return F=t.mul(F,j),j=t.add(g,_),F=t.sub(F,j),j=t.add(T,P),l=t.add(i,u),j=t.mul(j,l),l=t.add(c,_),j=t.sub(j,l),p=t.mul(R,F),l=t.mul(S,_),p=t.add(l,p),l=t.sub(c,p),p=t.add(c,p),h=t.mul(l,p),c=t.add(g,g),c=t.add(c,g),_=t.mul(R,_),F=t.mul(S,F),c=t.add(c,_),_=t.sub(g,_),_=t.mul(R,_),F=t.add(F,_),g=t.mul(c,F),h=t.add(h,g),g=t.mul(j,F),l=t.mul($,l),l=t.sub(l,g),g=t.mul($,c),p=t.mul(j,p),p=t.add(p,g),new C(l,h,p)}subtract(L){return this.add(L.negate())}is0(){return this.equals(C.ZERO)}multiply(L){let{endo:U}=e;if(!r.isValidNot0(L))throw new Error("invalid scalar: out of range");let T,P,y=i=>V.wNAFCached(this,i,C.normalizeZ);if(U){let{k1neg:i,k1:u,k2neg:l,k2:h}=U.splitScalar(L),{p,f:R}=y(u),{p:S,f:g}=y(h);P=R.add(g),T=Y(U.beta,p,S,i,l)}else{let{p:i,f:u}=y(L);T=i,P=u}return C.normalizeZ([T,P])[0]}multiplyUnsafe(L){let{endo:U}=e,T=this;if(!r.isValid(L))throw new Error("invalid scalar: out of range");if(L===Fr||T.is0())return C.ZERO;if(L===qr)return T;if(V.hasPrecomputes(this))return this.multiply(L);if(U){let{k1neg:P,k1:y,k2neg:i,k2:u}=U.splitScalar(L),{p1:l,p2:h}=_i(C,T,y,u);return Y(U.beta,l,h,P,i)}else return V.wNAFCachedUnsafe(T,L)}multiplyAndAddUnsafe(L,U,T){let P=this.multiplyUnsafe(U).add(L.multiplyUnsafe(T));return P.is0()?void 0:P}toAffine(L){return K(this,L)}isTorsionFree(){let{isTorsionFree:L}=e;return s===qr?!0:L?L(C,this):V.wNAFCachedUnsafe(this,o).is0()}clearCofactor(){let{clearCofactor:L}=e;return s===qr?this:L?L(C,this):this.multiplyUnsafe(s)}toBytes(L=!0){return Ct("isCompressed",L),this.assertValidity(),b(C,this,L)}toRawBytes(L=!0){return this.toBytes(L)}toHex(L=!0){return lr(this.toBytes(L))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(n.Gx,n.Gy,t.ONE),C.ZERO=new C(t.ZERO,t.ONE,t.ZERO),C.Fp=t,C.Fn=r;let W=r.BITS,V=Jr(C,e.endo?Math.ceil(W/2):W);return C}function fa(n){return Uint8Array.of(n?2:3)}function dh(n,e,t={}){Ft(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let r=e.randomBytes||Zr,s=e.hmac||((T,...P)=>Xo(e.hash,T,kt(...P))),{Fp:o,Fn:a}=n,{ORDER:f,BITS:d}=a;function w(T){let P=f>>qr;return T>P}function b(T){return w(T)?a.neg(T):T}function N(T,P){if(!a.isValidNot0(P))throw new Error(`invalid signature ${T}: out of range 1..CURVE.n`)}class B{constructor(P,y,i){N("r",P),N("s",y),this.r=P,this.s=y,i!=null&&(this.recovery=i),Object.freeze(this)}static fromCompact(P){let y=a.BYTES,i=be("compactSignature",P,y*2);return new B(a.fromBytes(i.subarray(0,y)),a.fromBytes(i.subarray(y,y*2)))}static fromDER(P){let{r:y,s:i}=Dt.toSig(be("DER",P));return new B(y,i)}assertValidity(){}addRecoveryBit(P){return new B(this.r,this.s,P)}recoverPublicKey(P){let y=o.ORDER,{r:i,s:u,recovery:l}=this;if(l==null||![0,1,2,3].includes(l))throw new Error("recovery id invalid");if(f*ch<y&&l>1)throw new Error("recovery id is ambiguous for h>1 curve");let p=l===2||l===3?i+f:i;if(!o.isValid(p))throw new Error("recovery id 2 or 3 invalid");let R=o.toBytes(p),S=n.fromHex(kt(fa((l&1)===0),R)),g=a.inv(p),c=J(be("msgHash",P)),_=a.create(-c*g),$=a.create(u*g),F=n.BASE.multiplyUnsafe(_).add(S.multiplyUnsafe($));if(F.is0())throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a.neg(this.s),this.recovery):this}toBytes(P){if(P==="compact")return kt(a.toBytes(this.r),a.toBytes(this.s));if(P==="der")return Yo(Dt.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return lr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return lr(this.toBytes("compact"))}}let E=ua(a,t.allowedPrivateKeyLengths,t.wrapPrivateKey),k={isValidPrivateKey(T){try{return E(T),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{let T=f;return li(r(Es(T)),T)},precompute(T=8,P=n.BASE){return P.precompute(T,!1)}};function O(T,P=!0){return n.fromPrivateKey(T).toBytes(P)}function A(T){if(typeof T=="bigint")return!1;if(T instanceof n)return!0;let y=be("key",T).length,i=o.BYTES,u=i+1,l=2*i+1;if(!(t.allowedPrivateKeyLengths||a.BYTES===u))return y===u||y===l}function x(T,P,y=!0){if(A(T)===!0)throw new Error("first arg must be private key");if(A(P)===!1)throw new Error("second arg must be public key");return n.fromHex(P).multiply(E(T)).toBytes(y)}let K=e.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");let P=dr(T),y=T.length*8-d;return y>0?P>>BigInt(y):P},J=e.bits2int_modN||function(T){return a.create(K(T))},Y=Zt(d);function C(T){return Kt("num < 2^"+d,T,Fr,Y),a.toBytes(T)}function W(T,P,y=V){if(["recovered","canonical"].some($=>$ in y))throw new Error("sign() legacy options not supported");let{hash:i}=e,{lowS:u,prehash:l,extraEntropy:h}=y;u==null&&(u=!0),T=be("msgHash",T),ca(y),l&&(T=be("prehashed msgHash",i(T)));let p=J(T),R=E(P),S=[C(R),C(p)];if(h!=null&&h!==!1){let $=h===!0?r(o.BYTES):h;S.push(be("extraEntropy",$))}let g=kt(...S),c=p;function _($){let F=K($);if(!a.isValidNot0(F))return;let j=a.inv(F),se=n.BASE.multiply(F).toAffine(),ie=a.create(se.x);if(ie===Fr)return;let ue=a.create(j*a.create(c+ie*R));if(ue===Fr)return;let St=(se.x===ie?0:2)|Number(se.y&qr),le=ue;return u&&w(ue)&&(le=b(ue),St^=1),new B(ie,le,St)}return{seed:g,k2sig:_}}let V={lowS:e.lowS,prehash:!1},Z={lowS:e.lowS,prehash:!1};function L(T,P,y=V){let{seed:i,k2sig:u}=W(T,P,y);return ti(e.hash.outputLen,a.BYTES,s)(i,u)}n.BASE.precompute(8);function U(T,P,y,i=Z){let u=T;P=be("msgHash",P),y=be("publicKey",y),ca(i);let{lowS:l,prehash:h,format:p}=i;if("strict"in i)throw new Error("options.strict was renamed to lowS");if(p!==void 0&&!["compact","der","js"].includes(p))throw new Error('format must be "compact", "der" or "js"');let R=typeof u=="string"||Go(u),S=!R&&!p&&typeof u=="object"&&u!==null&&typeof u.r=="bigint"&&typeof u.s=="bigint";if(!R&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let g,c;try{if(S)if(p===void 0||p==="js")g=new B(u.r,u.s);else throw new Error("invalid format");if(R){try{p!=="compact"&&(g=B.fromDER(u))}catch(le){if(!(le instanceof Dt.Err))throw le}!g&&p!=="der"&&(g=B.fromCompact(u))}c=n.fromHex(y)}catch{return!1}if(!g||l&&g.hasHighS())return!1;h&&(P=e.hash(P));let{r:_,s:$}=g,F=J(P),j=a.inv($),se=a.create(F*j),ie=a.create(_*j),ue=n.BASE.multiplyUnsafe(se).add(c.multiplyUnsafe(ie));return ue.is0()?!1:a.create(ue.x)===_}return Object.freeze({getPublicKey:O,getSharedSecret:x,sign:L,verify:U,utils:k,Point:n,Signature:B})}function hh(n){let e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=It(e.n,n.nBitLength),s={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function ph(n){let{CURVE:e,curveOpts:t}=hh(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function gh(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function la(n){let{CURVE:e,curveOpts:t,ecdsaOpts:r}=ph(n),s=lh(e,t),o=dh(s,r,t);return gh(n,o)}function da(n,e){let t=r=>la({...n,hash:r});return{...t(e),create:t}}var Mn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},my=BigInt(0),yh=BigInt(1),Js=BigInt(2),ha=(n,e)=>(n+e/Js)/e;function _h(n){let e=Mn.p,t=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),f=BigInt(44),d=BigInt(88),w=n*n*n%e,b=w*w*n%e,N=Ee(b,t,e)*b%e,B=Ee(N,t,e)*b%e,E=Ee(B,Js,e)*w%e,k=Ee(E,s,e)*E%e,O=Ee(k,o,e)*k%e,A=Ee(O,f,e)*O%e,x=Ee(A,d,e)*A%e,K=Ee(x,f,e)*O%e,J=Ee(K,t,e)*b%e,Y=Ee(J,a,e)*k%e,C=Ee(Y,r,e)*w%e,W=Ee(C,Js,e);if(!Qs.eql(Qs.sqr(W),n))throw new Error("Cannot find square root");return W}var Qs=It(Mn.p,void 0,void 0,{sqrt:_h}),Pn=da({...Mn,Fp:Qs,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=Mn.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-yh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,a=BigInt("0x100000000000000000000000000000000"),f=ha(o*n,e),d=ha(-r*n,e),w=ve(n-f*t-d*s,e),b=ve(-f*r-d*o,e),N=w>a,B=b>a;if(N&&(w=e-w),B&&(b=e-b),w>a||b>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:N,k1:w,k2neg:B,k2:b}}}},jo);var Ly=Qt.utils.randomPrivateKey,pa=()=>{let n=Qt.utils.randomPrivateKey(),e=uo(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},uo=Qt.getPublicKey;function ga(n){try{return Qt.ExtendedPoint.fromHex(n),!0}catch{return!1}}var Ao=(n,e)=>Qt.sign(n,e.slice(0,32)),mh=Qt.verify,ce=n=>D.isBuffer(n)?n:n instanceof Uint8Array?D.from(n.buffer,n.byteOffset,n.byteLength):D.from(n),fo=class{constructor(e){Object.assign(this,e)}encode(){return D.from((0,Ir.serialize)(zn,this))}static decode(e){return(0,Ir.deserialize)(zn,this,e)}static decodeUnchecked(e){return(0,Ir.deserializeUnchecked)(zn,this,e)}};var zn=new Map,Pa,Rh=32,Ht=32;function bh(n){return n._bn!==void 0}var ya=1,ne=class n extends fo{constructor(e){if(super({}),this._bn=void 0,bh(e))this._bn=e._bn;else{if(typeof e=="string"){let t=ut.default.decode(e);if(t.length!=Ht)throw new Error("Invalid public key input");this._bn=new co.default(t)}else this._bn=new co.default(e);if(this._bn.byteLength()>Ht)throw new Error("Invalid public key input")}}static unique(){let e=new n(ya);return ya+=1,new n(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ut.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(D);if(e.length===Ht)return e;let t=D.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let s=D.concat([e.toBuffer(),D.from(t),r.toBuffer()]),o=ms(s);return new n(o)}static createProgramAddressSync(e,t){let r=D.alloc(0);e.forEach(function(o){if(o.length>Rh)throw new TypeError("Max seed length exceeded");r=D.concat([r,ce(o)])}),r=D.concat([r,t.toBuffer(),D.from("ProgramDerivedAddress")]);let s=ms(r);if(ga(s))throw new Error("Invalid seeds, address must fall off the curve");return new n(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{let o=e.concat(D.from([r]));s=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new n(e);return ga(t.toBytes())}};Pa=ne;ne.default=new Pa("11111111111111111111111111111111");zn.set(ne,{kind:"struct",fields:[["_bn","u256"]]});var xy=new ne("BPFLoader1111111111111111111111111111111111"),ar=1232,vo=127,Kn=64,Fn=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Fn.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var qn=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(qn.prototype,"name",{value:"TransactionExpiredTimeoutError"});var ir=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(ir.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Ar=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((o,a)=>{r.set(o.toBase58(),a)});let s=o=>{let a=r.get(o.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(o=>({programIdIndex:s(o.programId),accountKeyIndexes:o.keys.map(a=>s(a.pubkey)),data:o.data}))}},ae=(n="publicKey")=>m.blob(32,n),wh=(n="signature")=>m.blob(64,n),Er=(n="string")=>{let e=m.struct([m.u32("length"),m.u32("lengthPadding"),m.blob(m.offset(m.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(o,a)=>t(o,a).chars.toString(),s.encode=(o,a,f)=>{let d={chars:D.from(o,"utf8")};return r(d,a,f)},s.alloc=o=>m.u32().span+m.u32().span+D.from(o,"utf8").length,s},Sh=(n="authorized")=>m.struct([ae("staker"),ae("withdrawer")],n),Eh=(n="lockup")=>m.struct([m.ns64("unixTimestamp"),m.ns64("epoch"),ae("custodian")],n),Ah=(n="voteInit")=>m.struct([ae("nodePubkey"),ae("authorizedVoter"),ae("authorizedWithdrawer"),m.u8("commission")],n),vh=(n="voteAuthorizeWithSeedArgs")=>m.struct([m.u32("voteAuthorizationType"),ae("currentAuthorityDerivedKeyOwnerPubkey"),Er("currentAuthorityDerivedKeySeed"),ae("newAuthorized")],n);function Da(n,e){let t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){let o=e[s.property];if(Array.isArray(o))return o.length*t(s.elementLayout)}else if("fields"in s)return Da({layout:s},e[s.property]);return 0},r=0;return n.layout.fields.forEach(s=>{r+=t(s)}),r}function Rt(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,(r&128)===0)break}return e}function bt(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function pe(n,e){if(!n)throw new Error(e||"Assertion failed")}var Wn=class n{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,s=a=>{let f=a.toBase58(),d=r.get(f);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,d)),d},o=s(t);o.isSigner=!0,o.isWritable=!0;for(let a of e){s(a.programId).isInvoked=!0;for(let f of a.keys){let d=s(f.pubkey);d.isSigner||=f.isSigner,d.isWritable||=f.isWritable}}return new n(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];pe(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,d])=>d.isSigner&&d.isWritable),r=e.filter(([,d])=>d.isSigner&&!d.isWritable),s=e.filter(([,d])=>!d.isSigner&&d.isWritable),o=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{pe(t.length>0,"Expected at least one writable signer key");let[d]=t[0];pe(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let f=[...t.map(([d])=>new ne(d)),...r.map(([d])=>new ne(d)),...s.map(([d])=>new ne(d)),...o.map(([d])=>new ne(d))];return[a,f]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,o]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){let r=new Array,s=new Array;for(let[o,a]of this.keyMetaMap.entries())if(t(a)){let f=new ne(o),d=e.findIndex(w=>w.equals(f));d>=0&&(pe(d<256,"Max lookup table index exceeded"),r.push(d),s.push(f),this.keyMetaMap.delete(o))}return[r,s]}},Ua="Reached end of buffer unexpectedly";function zt(n){if(n.length===0)throw new Error(Ua);return n.shift()}function wt(n,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(Ua);return n.splice(...e)}var Yt=class n{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ne(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ut.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ar(this.staticAccountKeys)}static compile(e){let t=Wn.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),a=new Ar(s).compileInstructions(e.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:ut.default.encode(f.data)}));return new n({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let r=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<o}else{let r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];bt(t,e);let r=this.instructions.map(N=>{let{accounts:B,programIdIndex:E}=N,k=Array.from(ut.default.decode(N.data)),O=[];bt(O,B.length);let A=[];return bt(A,k.length),{programIdIndex:E,keyIndicesCount:D.from(O),keyIndices:B,dataLength:D.from(A),data:k}}),s=[];bt(s,r.length);let o=D.alloc(ar);D.from(s).copy(o);let a=s.length;r.forEach(N=>{let E=m.struct([m.u8("programIdIndex"),m.blob(N.keyIndicesCount.length,"keyIndicesCount"),m.seq(m.u8("keyIndex"),N.keyIndices.length,"keyIndices"),m.blob(N.dataLength.length,"dataLength"),m.seq(m.u8("userdatum"),N.data.length,"data")]).encode(N,o,a);a+=E}),o=o.slice(0,a);let f=m.struct([m.blob(1,"numRequiredSignatures"),m.blob(1,"numReadonlySignedAccounts"),m.blob(1,"numReadonlyUnsignedAccounts"),m.blob(t.length,"keyCount"),m.seq(ae("key"),e,"keys"),ae("recentBlockhash")]),d={numRequiredSignatures:D.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:D.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:D.from([this.header.numReadonlyUnsignedAccounts]),keyCount:D.from(t),keys:this.accountKeys.map(N=>ce(N.toBytes())),recentBlockhash:ut.default.decode(this.recentBlockhash)},w=D.alloc(2048),b=f.encode(d,w);return o.copy(w,b),w.slice(0,b+o.length)}static from(e){let t=[...e],r=zt(t);if(r!==(r&vo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let s=zt(t),o=zt(t),a=Rt(t),f=[];for(let B=0;B<a;B++){let E=wt(t,0,Ht);f.push(new ne(D.from(E)))}let d=wt(t,0,Ht),w=Rt(t),b=[];for(let B=0;B<w;B++){let E=zt(t),k=Rt(t),O=wt(t,0,k),A=Rt(t),x=wt(t,0,A),K=ut.default.encode(D.from(x));b.push({programIdIndex:E,accounts:O,data:K})}let N={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:o},recentBlockhash:ut.default.encode(D.from(d)),accountKeys:f,instructions:b};return new n(N)}},$n=class n{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ar(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){let s=e-r,o=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return s<o}else if(e>=this.header.numRequiredSignatures){let s=e-t,a=r-t-this.header.numReadonlyUnsignedAccounts;return s<a}else{let s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let s=e.find(o=>o.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let o of r.writableIndexes)if(o<s.state.addresses.length)t.writable.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(let o of r.readonlyIndexes)if(o<s.state.addresses.length)t.readonly.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=Wn.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let b of o){let N=t.extractTableLookup(b);if(N!==void 0){let[B,{writable:E,readonly:k}]=N;r.push(B),s.writable.push(...E),s.readonly.push(...k)}}let[a,f]=t.getMessageComponents(),w=new Ar(f,s).compileInstructions(e.instructions);return new n({header:a,staticAccountKeys:f,recentBlockhash:e.recentBlockhash,compiledInstructions:w,addressTableLookups:r})}serialize(){let e=Array();bt(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=Array();bt(r,this.compiledInstructions.length);let s=this.serializeAddressTableLookups(),o=Array();bt(o,this.addressTableLookups.length);let a=m.struct([m.u8("prefix"),m.struct([m.u8("numRequiredSignatures"),m.u8("numReadonlySignedAccounts"),m.u8("numReadonlyUnsignedAccounts")],"header"),m.blob(e.length,"staticAccountKeysLength"),m.seq(ae(),this.staticAccountKeys.length,"staticAccountKeys"),ae("recentBlockhash"),m.blob(r.length,"instructionsLength"),m.blob(t.length,"serializedInstructions"),m.blob(o.length,"addressTableLookupsLength"),m.blob(s.length,"serializedAddressTableLookups")]),f=new Uint8Array(ar),w=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:ut.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:s},f);return f.slice(0,w)}serializeInstructions(){let e=0,t=new Uint8Array(ar);for(let r of this.compiledInstructions){let s=Array();bt(s,r.accountKeyIndexes.length);let o=Array();bt(o,r.data.length);let a=m.struct([m.u8("programIdIndex"),m.blob(s.length,"encodedAccountKeyIndexesLength"),m.seq(m.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),m.blob(o.length,"encodedDataLength"),m.blob(r.data.length,"data")]);e+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(ar);for(let r of this.addressTableLookups){let s=Array();bt(s,r.writableIndexes.length);let o=Array();bt(o,r.readonlyIndexes.length);let a=m.struct([ae("accountKey"),m.blob(s.length,"encodedWritableIndexesLength"),m.seq(m.u8(),r.writableIndexes.length,"writableIndexes"),m.blob(o.length,"encodedReadonlyIndexesLength"),m.seq(m.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=zt(t),s=r&vo;pe(r!==s,"Expected versioned message but received legacy message");let o=s;pe(o===0,`Expected versioned message with version 0 but found version ${o}`);let a={numRequiredSignatures:zt(t),numReadonlySignedAccounts:zt(t),numReadonlyUnsignedAccounts:zt(t)},f=[],d=Rt(t);for(let k=0;k<d;k++)f.push(new ne(wt(t,0,Ht)));let w=ut.default.encode(wt(t,0,Ht)),b=Rt(t),N=[];for(let k=0;k<b;k++){let O=zt(t),A=Rt(t),x=wt(t,0,A),K=Rt(t),J=new Uint8Array(wt(t,0,K));N.push({programIdIndex:O,accountKeyIndexes:x,data:J})}let B=Rt(t),E=[];for(let k=0;k<B;k++){let O=new ne(wt(t,0,Ht)),A=Rt(t),x=wt(t,0,A),K=Rt(t),J=wt(t,0,K);E.push({accountKey:O,writableIndexes:x,readonlyIndexes:J})}return new n({header:a,staticAccountKeys:f,recentBlockhash:w,compiledInstructions:N,addressTableLookups:E})}},za={deserializeMessageVersion(n){let e=n[0],t=e&vo;return t===e?"legacy":t},deserialize:n=>{let e=za.deserializeMessageVersion(n);if(e==="legacy")return Yt.from(n);if(e===0)return $n.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},Vt=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({}),Ih=D.alloc(Kn).fill(0),_e=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=D.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},ge=class n{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new _e(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let O=0;O<t.length;O++)if(t[O].programId===void 0)throw new Error(`Transaction instruction index ${O} has undefined program id`);let s=[],o=[];t.forEach(O=>{O.keys.forEach(x=>{o.push({...x})});let A=O.programId.toString();s.includes(A)||s.push(A)}),s.forEach(O=>{o.push({pubkey:new ne(O),isSigner:!1,isWritable:!1})});let a=[];o.forEach(O=>{let A=O.pubkey.toString(),x=a.findIndex(K=>K.pubkey.toString()===A);x>-1?(a[x].isWritable=a[x].isWritable||O.isWritable,a[x].isSigner=a[x].isSigner||O.isSigner):a.push(O)}),a.sort(function(O,A){if(O.isSigner!==A.isSigner)return O.isSigner?-1:1;if(O.isWritable!==A.isWritable)return O.isWritable?-1:1;let x={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return O.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",x)});let f=a.findIndex(O=>O.pubkey.equals(r));if(f>-1){let[O]=a.splice(f,1);O.isSigner=!0,O.isWritable=!0,a.unshift(O)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let O of this.signatures){let A=a.findIndex(x=>x.pubkey.equals(O.publicKey));if(A>-1)a[A].isSigner||(a[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${O.publicKey.toString()}`)}let d=0,w=0,b=0,N=[],B=[];a.forEach(({pubkey:O,isSigner:A,isWritable:x})=>{A?(N.push(O.toString()),d+=1,x||(w+=1)):(B.push(O.toString()),x||(b+=1))});let E=N.concat(B),k=t.map(O=>{let{data:A,programId:x}=O;return{programIdIndex:E.indexOf(x.toString()),accounts:O.keys.map(K=>E.indexOf(K.pubkey.toString())),data:ut.default.encode(A)}});return k.forEach(O=>{pe(O.programIdIndex>=0),O.accounts.forEach(A=>pe(A>=0))}),new Yt({header:{numRequiredSignatures:d,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:b},accountKeys:E,recentBlockhash:e,instructions:k})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,o)=>t[o].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(r=>{let s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let a=o.publicKey.toString();t.has(a)||(t.add(a),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));let s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let a=o.publicKey.toString();t.has(a)||(t.add(a),r.push(o))}let s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(s=>{let o=Ao(r,s.secretKey);this._addSignature(s.publicKey,ce(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){pe(t.length===64);let r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=D.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:s,publicKey:o}of this.signatures)s===null?t&&(r.missing||=[]).push(o):mh(s,e,o.toBytes())||(r.invalid||=[]).push(o);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){let o=this._getMessageSignednessErrors(s,t);if(o){let a="Signature verification failed.";throw o.invalid&&(a+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),o.missing&&(a+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(e){let{signatures:t}=this,r=[];bt(r,t.length);let s=r.length+t.length*64+e.length,o=D.alloc(s);return pe(t.length<256),D.from(r).copy(o,0),t.forEach(({signature:a},f)=>{a!==null&&(pe(a.length===64,"signature has invalid length"),D.from(a).copy(o,r.length+f*64))}),e.copy(o,r.length+t.length*64),pe(o.length<=ar,`Transaction too large: ${o.length} > ${ar}`),o}get keys(){return pe(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return pe(this.instructions.length===1),this.instructions[0].programId}get data(){return pe(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],r=Rt(t),s=[];for(let o=0;o<r;o++){let a=wt(t,0,Kn);s.push(ut.default.encode(D.from(a)))}return n.populate(Yt.from(t),s)}static populate(e,t=[]){let r=new n;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,o)=>{let a={signature:s==ut.default.encode(Ih)?null:ut.default.decode(s),publicKey:e.accountKeys[o]};r.signatures.push(a)}),e.instructions.forEach(s=>{let o=s.accounts.map(a=>{let f=e.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(d=>d.publicKey.toString()===f.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});r.instructions.push(new _e({keys:o,programId:e.accountKeys[s.programIdIndex],data:ut.default.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};var _a=class n{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)pe(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(Kn));this.signatures=r}this.message=e}serialize(){let e=this.message.serialize(),t=Array();bt(t,this.signatures.length);let r=m.struct([m.blob(t.length,"encodedSignaturesLength"),m.seq(wh(),this.signatures.length,"signatures"),m.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,o)}static deserialize(e){let t=[...e],r=[],s=Rt(t);for(let a=0;a<s;a++)r.push(new Uint8Array(wt(t,0,Kn)));let o=za.deserialize(new Uint8Array(t));return new n(o,r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let s of e){let o=r.findIndex(a=>a.equals(s.publicKey));pe(o>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[o]=Ao(t,s.secretKey)}}addSignature(e,t){pe(t.byteLength===64,"Signature must be 64 bytes long");let s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));pe(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}},Oh=160,Nh=64,kh=Oh/Nh,Ka=1e3/kh,Ut=new ne("SysvarC1ock11111111111111111111111111111111"),By=new ne("SysvarEpochSchedu1e111111111111111111111111"),Cy=new ne("Sysvar1nstructions1111111111111111111111111"),eo=new ne("SysvarRecentB1ockHashes11111111111111111111"),Gr=new ne("SysvarRent111111111111111111111111111111111"),My=new ne("SysvarRewards111111111111111111111111111111"),Py=new ne("SysvarS1otHashes111111111111111111111111111"),Dy=new ne("SysvarS1otHistory11111111111111111111111111"),to=new ne("SysvarStakeHistory1111111111111111111111111"),Hr=class extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:s}){let o=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",f;switch(e){case"send":f=`Transaction ${t} resulted in an error. 
${r}. `+o+a;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+o+a;break;default:f=`Unknown action '${(d=>d)(e)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){let o=s.meta.logMessages;this.transactionLogs=o,t(o)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}};var X=class extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}};async function ma(n,e,t,r){let s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await n.sendTransaction(e,t,s),a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:f}=e.nonceInfo,d=f.keys[0].pubkey;a=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await n.confirmTransaction(o,r&&r.commitment)).value;if(a.err)throw o!=null?new Hr({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(a)})`);return o}function or(n){return new Promise(e=>setTimeout(e,n))}function fe(n,e){let t=n.layout.span>=0?n.layout.span:Da(n,e),r=D.alloc(t),s=Object.assign({instruction:n.index},e);return n.layout.encode(s,r),r}var Th=m.nu64("lamportsPerSignature"),Fa=m.struct([m.u32("version"),m.u32("state"),ae("authorizedPubkey"),ae("nonce"),m.struct([Th],"feeCalculator")]),Ra=Fa.span,lo=class n{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=Fa.decode(ce(e),0);return new n({authorizedPubkey:new ne(t.authorizedPubkey),nonce:new ne(t.nonce).toString(),feeCalculator:t.feeCalculator})}};function vr(n){let e=(0,Ca.blob)(8,n),t=e.decode.bind(e),r=e.encode.bind(e),s=e,o=Xi();return s.decode=(a,f)=>{let d=t(a,f);return o.decode(d)},s.encode=(a,f,d)=>{let w=o.encode(a);return r(w,f,d)},s}var At=Object.freeze({Create:{index:0,layout:m.struct([m.u32("instruction"),m.ns64("lamports"),m.ns64("space"),ae("programId")])},Assign:{index:1,layout:m.struct([m.u32("instruction"),ae("programId")])},Transfer:{index:2,layout:m.struct([m.u32("instruction"),vr("lamports")])},CreateWithSeed:{index:3,layout:m.struct([m.u32("instruction"),ae("base"),Er("seed"),m.ns64("lamports"),m.ns64("space"),ae("programId")])},AdvanceNonceAccount:{index:4,layout:m.struct([m.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:m.struct([m.u32("instruction"),ae("authorized")])},AuthorizeNonceAccount:{index:7,layout:m.struct([m.u32("instruction"),ae("authorized")])},Allocate:{index:8,layout:m.struct([m.u32("instruction"),m.ns64("space")])},AllocateWithSeed:{index:9,layout:m.struct([m.u32("instruction"),ae("base"),Er("seed"),m.ns64("space"),ae("programId")])},AssignWithSeed:{index:10,layout:m.struct([m.u32("instruction"),ae("base"),Er("seed"),ae("programId")])},TransferWithSeed:{index:11,layout:m.struct([m.u32("instruction"),vr("lamports"),Er("seed"),ae("programId")])},UpgradeNonceAccount:{index:12,layout:m.struct([m.u32("instruction")])}}),yt=class n{constructor(){}static createAccount(e){let t=At.Create,r=fe(t,{lamports:e.lamports,space:e.space,programId:ce(e.programId.toBuffer())});return new _e({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){let s=At.TransferWithSeed;t=fe(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ce(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let s=At.Transfer;t=fe(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _e({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){let s=At.AssignWithSeed;t=fe(s,{base:ce(e.basePubkey.toBuffer()),seed:e.seed,programId:ce(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=At.Assign;t=fe(s,{programId:ce(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _e({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=At.CreateWithSeed,r=fe(t,{base:ce(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ce(e.programId.toBuffer())}),s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _e({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){let t=new ge;"basePubkey"in e&&"seed"in e?t.add(n.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Ra,programId:this.programId})):t.add(n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Ra,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=At.InitializeNonceAccount,r=fe(t,{authorized:ce(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eo,isSigner:!1,isWritable:!1},{pubkey:Gr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new _e(s)}static nonceAdvance(e){let t=At.AdvanceNonceAccount,r=fe(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new _e(s)}static nonceWithdraw(e){let t=At.WithdrawNonceAccount,r=fe(t,{lamports:e.lamports});return new _e({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:eo,isSigner:!1,isWritable:!1},{pubkey:Gr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){let t=At.AuthorizeNonceAccount,r=fe(t,{authorized:ce(e.newAuthorizedPubkey.toBuffer())});return new _e({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){let s=At.AllocateWithSeed;t=fe(s,{base:ce(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ce(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=At.Allocate;t=fe(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _e({keys:r,programId:this.programId,data:t})}};yt.programId=new ne("11111111111111111111111111111111");var Lh=ar-300,ho=class n{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/n.chunkSize)+1+1)}static async load(e,t,r,s,o){{let N=await e.getMinimumBalanceForRentExemption(o.length),B=await e.getAccountInfo(r.publicKey,"confirmed"),E=null;if(B!==null){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==o.length&&(E=E||new ge,E.add(yt.allocate({accountPubkey:r.publicKey,space:o.length}))),B.owner.equals(s)||(E=E||new ge,E.add(yt.assign({accountPubkey:r.publicKey,programId:s}))),B.lamports<N&&(E=E||new ge,E.add(yt.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:N-B.lamports})))}else E=new ge().add(yt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:N>0?N:1,space:o.length,programId:s}));E!==null&&await ma(e,E,[t,r],{commitment:"confirmed"})}let a=m.struct([m.u32("instruction"),m.u32("offset"),m.u32("bytesLength"),m.u32("bytesLengthPadding"),m.seq(m.u8("byte"),m.offset(m.u32(),-8),"bytes")]),f=n.chunkSize,d=0,w=o,b=[];for(;w.length>0;){let N=w.slice(0,f),B=D.alloc(f+16);a.encode({instruction:0,offset:d,bytes:N,bytesLength:0,bytesLengthPadding:0},B);let E=new ge().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:B});b.push(ma(e,E,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await or(1e3/4),d+=f,w=w.slice(f)}await Promise.all(b);{let N=m.struct([m.u32("instruction")]),B=D.alloc(N.span);N.encode({instruction:1},B);let E=new ge().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Gr,isSigner:!1,isWritable:!1}],programId:s,data:B}),k="processed",O=await e.sendTransaction(E,[t,r],{preflightCommitment:k}),{context:A,value:x}=await e.confirmTransaction({signature:O,lastValidBlockHeight:E.lastValidBlockHeight,blockhash:E.recentBlockhash},k);if(x.err)throw new Error(`Transaction ${O} failed (${JSON.stringify(x)})`);for(;;){try{if(await e.getSlot({commitment:k})>A.slot)break}catch{}await new Promise(K=>setTimeout(K,Math.round(Ka/2)))}}return!0}};ho.chunkSize=Lh;var Uy=new ne("BPFLoader2111111111111111111111111111111111");function xh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ro,ba;function Bh(){if(ba)return ro;ba=1;var n=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var o in r)s.push(o);return s};function t(r,s){var o,a,f,d,w,b,N;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),s);if(N=n.call(r),N==="[object Array]"){for(f="[",a=r.length-1,o=0;o<a;o++)f+=t(r[o],!0)+",";return a>-1&&(f+=t(r[o],!0)),f+"]"}else if(N==="[object Object]"){for(d=e(r).sort(),a=d.length,f="",o=0;o<a;)w=d[o],b=t(r[w],!1),b!==void 0&&(f&&(f+=","),f+=JSON.stringify(w)+":"+b),o++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return ro=function(r){var s=t(r,!1);if(s!==void 0)return""+s},ro}var Ch=Bh(),wa=xh(Ch),Wr=32;function no(n){let e=0;for(;n>1;)n/=2,e++;return e}function Mh(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}var po=class{constructor(e,t,r,s,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=no(Mh(e+Wr+1))-no(Wr)-1,r=this.getSlotsInEpoch(t),s=e-(r-Wr);return[t,s]}else{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,o=t%this.slotsPerEpoch;return[s,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Wr:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+no(Wr)):this.slotsPerEpoch}},Ph=globalThis.fetch,go=class extends aa{constructor(e,t,r){let s=o=>{let a=ia(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}};function Dh(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}var Sa=56,Vn=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=Dh(Uh,e),r=e.length-Sa;pe(r>=0,"lookup table is invalid"),pe(r%32===0,"lookup table is invalid");let s=r/32,{addresses:o}=m.struct([m.seq(ae(),s,"addresses")]).decode(e.slice(Sa));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ne(t.authority[0]):void 0,addresses:o.map(a=>new ne(a))}}},Uh={index:1,layout:m.struct([m.u32("typeIndex"),vr("deactivationSlot"),m.nu64("lastExtendedSlot"),m.u8("lastExtendedStartIndex"),m.u8(),m.seq(ae(),m.offset(m.u8(),-1),"authority")])},zh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Kh(n){let e=n.match(zh);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);let[t,r,s,o]=e,a=n.startsWith("https:")?"wss:":"ws:",f=s==null?null:parseInt(s.slice(1),10),d=f==null?"":`:${f+1}`;return`${a}//${r}${d}${o}`}var Ie=Sr(xn(ne),z(),n=>new ne(n)),qa=Bn([z(),Ae("base64")]),Io=Sr(xn(D),qa,n=>D.from(n[0],"base64")),Fh=30*1e3;function qh(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function me(n){let e,t;if(typeof n=="string")e=n;else if(n){let{commitment:r,...s}=n;e=r,t=s}return{commitment:e,config:t}}function Ea(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Wa(n){return dt([M({jsonrpc:Ae("2.0"),id:z(),result:n}),M({jsonrpc:Ae("2.0"),id:z(),error:M({code:sr(),message:z(),data:Q(ta())})})])}var Wh=Wa(sr());function oe(n){return Sr(Wa(n),Wh,e=>"error"in e?e:{...e,result:q(e.result,n)})}function Oe(n){return oe(M({context:M({slot:v()}),value:n}))}function jn(n){return M({context:M({slot:v()}),value:n})}function so(n,e){return n===0?new $n({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ne(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ut.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Yt(e)}var $h=M({foundation:v(),foundationTerm:v(),initial:v(),taper:v(),terminal:v()}),Vh=oe(G(H(M({epoch:v(),effectiveSlot:v(),amount:v(),postBalance:v(),commission:Q(H(v()))})))),Gh=G(M({slot:v(),prioritizationFee:v()})),Hh=M({total:v(),validator:v(),foundation:v(),epoch:v()}),Yh=M({epoch:v(),slotIndex:v(),slotsInEpoch:v(),absoluteSlot:v(),blockHeight:Q(v()),transactionCount:Q(v())}),jh=M({slotsPerEpoch:v(),leaderScheduleSlotOffset:v(),warmup:Nt(),firstNormalEpoch:v(),firstNormalSlot:v()}),Zh=Zs(z(),G(v())),cr=H(dt([M({}),z()])),Xh=M({err:cr}),Jh=Ae("receivedSignature"),Qh=M({"solana-core":z(),"feature-set":Q(v())}),e0=M({program:z(),programId:Ie,parsed:sr()}),t0=M({programId:Ie,accounts:G(Ie),data:z()}),Aa=Oe(M({err:H(dt([M({}),z()])),logs:H(G(z())),accounts:Q(H(G(H(M({executable:Nt(),owner:z(),lamports:v(),data:G(z()),rentEpoch:Q(v())}))))),unitsConsumed:Q(v()),returnData:Q(H(M({programId:z(),data:Bn([z(),Ae("base64")])}))),innerInstructions:Q(H(G(M({index:v(),instructions:G(dt([e0,t0]))}))))})),r0=Oe(M({byIdentity:Zs(z(),G(v())),range:M({firstSlot:v(),lastSlot:v()})}));function n0(n,e,t,r,s,o){let a=t||Ph,f;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(b,N)=>{let B=await new Promise((E,k)=>{try{r(b,N,(O,A)=>E([O,A]))}catch(O){k(O)}});return await a(...B)}),new Ma.default(async(b,N)=>{let B={method:"POST",body:b,agent:f,headers:Object.assign({"Content-Type":"application/json"},e||{},np)};try{let E=5,k,O=500;for(;d?k=await d(n,B):k=await a(n,B),!(k.status!==429||s===!0||(E-=1,E===0));)console.error(`Server responded with ${k.status} ${k.statusText}.  Retrying after ${O}ms delay...`),await or(O),O*=2;let A=await k.text();k.ok?N(null,A):N(new Error(`${k.status} ${k.statusText}: ${A}`))}catch(E){E instanceof Error&&N(E)}},{})}function s0(n){return(e,t)=>new Promise((r,s)=>{n.request(e,t,(o,a)=>{if(o){s(o);return}r(a)})})}function o0(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);let s=e.map(o=>n.request(o.methodName,o.args));n.request(s,(o,a)=>{if(o){r(o);return}t(a)})})}var i0=oe($h),a0=oe(Hh),c0=oe(Gh),u0=oe(Yh),f0=oe(jh),l0=oe(Zh),d0=oe(v()),h0=Oe(M({total:v(),circulating:v(),nonCirculating:v(),nonCirculatingAccounts:G(Ie)})),yo=M({amount:z(),uiAmount:H(v()),decimals:v(),uiAmountString:Q(z())}),p0=Oe(G(M({address:Ie,amount:z(),uiAmount:H(v()),decimals:v(),uiAmountString:Q(z())}))),g0=Oe(G(M({pubkey:Ie,account:M({executable:Nt(),owner:Ie,lamports:v(),data:Io,rentEpoch:v()})}))),_o=M({program:z(),parsed:sr(),space:v()}),y0=Oe(G(M({pubkey:Ie,account:M({executable:Nt(),owner:Ie,lamports:v(),data:_o,rentEpoch:v()})}))),_0=Oe(G(M({lamports:v(),address:Ie}))),Yr=M({executable:Nt(),owner:Ie,lamports:v(),data:Io,rentEpoch:v()}),m0=M({pubkey:Ie,account:Yr}),R0=Sr(dt([xn(D),_o]),dt([qa,_o]),n=>Array.isArray(n)?q(n,Io):n),mo=M({executable:Nt(),owner:Ie,lamports:v(),data:R0,rentEpoch:v()}),b0=M({pubkey:Ie,account:mo}),w0=M({state:dt([Ae("active"),Ae("inactive"),Ae("activating"),Ae("deactivating")]),active:v(),inactive:v()}),S0=oe(G(M({signature:z(),slot:v(),err:cr,memo:H(z()),blockTime:Q(H(v()))}))),E0=oe(G(M({signature:z(),slot:v(),err:cr,memo:H(z()),blockTime:Q(H(v()))}))),A0=M({subscription:v(),result:jn(Yr)}),v0=M({pubkey:Ie,account:Yr}),I0=M({subscription:v(),result:jn(v0)}),O0=M({parent:v(),slot:v(),root:v()}),N0=M({subscription:v(),result:O0}),k0=dt([M({type:dt([Ae("firstShredReceived"),Ae("completed"),Ae("optimisticConfirmation"),Ae("root")]),slot:v(),timestamp:v()}),M({type:Ae("createdBank"),parent:v(),slot:v(),timestamp:v()}),M({type:Ae("frozen"),slot:v(),timestamp:v(),stats:M({numTransactionEntries:v(),numSuccessfulTransactions:v(),numFailedTransactions:v(),maxTransactionsPerEntry:v()})}),M({type:Ae("dead"),slot:v(),timestamp:v(),err:z()})]),T0=M({subscription:v(),result:k0}),L0=M({subscription:v(),result:jn(dt([Xh,Jh]))}),x0=M({subscription:v(),result:v()}),B0=M({pubkey:z(),gossip:H(z()),tpu:H(z()),rpc:H(z()),version:H(z())}),va=M({votePubkey:z(),nodePubkey:z(),activatedStake:v(),epochVoteAccount:Nt(),epochCredits:G(Bn([v(),v(),v()])),commission:v(),lastVote:v(),rootSlot:H(v())}),C0=oe(M({current:G(va),delinquent:G(va)})),M0=dt([Ae("processed"),Ae("confirmed"),Ae("finalized")]),P0=M({slot:v(),confirmations:H(v()),err:cr,confirmationStatus:Q(M0)}),D0=Oe(G(H(P0))),U0=oe(v()),$a=M({accountKey:Ie,writableIndexes:G(v()),readonlyIndexes:G(v())}),Oo=M({signatures:G(z()),message:M({accountKeys:G(z()),header:M({numRequiredSignatures:v(),numReadonlySignedAccounts:v(),numReadonlyUnsignedAccounts:v()}),instructions:G(M({accounts:G(v()),data:z(),programIdIndex:v()})),recentBlockhash:z(),addressTableLookups:Q(G($a))})}),Va=M({pubkey:Ie,signer:Nt(),writable:Nt(),source:Q(dt([Ae("transaction"),Ae("lookupTable")]))}),Ga=M({accountKeys:G(Va),signatures:G(z())}),Ha=M({parsed:sr(),program:z(),programId:Ie}),Ya=M({accounts:G(Ie),data:z(),programId:Ie}),z0=dt([Ya,Ha]),K0=dt([M({parsed:sr(),program:z(),programId:z()}),M({accounts:G(z()),data:z(),programId:z()})]),ja=Sr(z0,K0,n=>"accounts"in n?q(n,Ya):q(n,Ha)),Za=M({signatures:G(z()),message:M({accountKeys:G(Va),instructions:G(ja),recentBlockhash:z(),addressTableLookups:Q(H(G($a)))})}),Gn=M({accountIndex:v(),mint:z(),owner:Q(z()),programId:Q(z()),uiTokenAmount:yo}),Xa=M({writable:G(Ie),readonly:G(Ie)}),Zn=M({err:cr,fee:v(),innerInstructions:Q(H(G(M({index:v(),instructions:G(M({accounts:G(v()),data:z(),programIdIndex:v()}))})))),preBalances:G(v()),postBalances:G(v()),logMessages:Q(H(G(z()))),preTokenBalances:Q(H(G(Gn))),postTokenBalances:Q(H(G(Gn))),loadedAddresses:Q(Xa),computeUnitsConsumed:Q(v())}),No=M({err:cr,fee:v(),innerInstructions:Q(H(G(M({index:v(),instructions:G(ja)})))),preBalances:G(v()),postBalances:G(v()),logMessages:Q(H(G(z()))),preTokenBalances:Q(H(G(Gn))),postTokenBalances:Q(H(G(Gn))),loadedAddresses:Q(Xa),computeUnitsConsumed:Q(v())}),Or=dt([Ae(0),Ae("legacy")]),ur=M({pubkey:z(),lamports:v(),postBalance:H(v()),rewardType:H(z()),commission:Q(H(v()))}),F0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),transactions:G(M({transaction:Oo,meta:H(Zn),version:Q(Or)})),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),q0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),W0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),transactions:G(M({transaction:Ga,meta:H(Zn),version:Q(Or)})),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),$0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),transactions:G(M({transaction:Za,meta:H(No),version:Q(Or)})),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),V0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),transactions:G(M({transaction:Ga,meta:H(No),version:Q(Or)})),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),G0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),rewards:Q(G(ur)),blockTime:H(v()),blockHeight:H(v())}))),H0=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),transactions:G(M({transaction:Oo,meta:H(Zn)})),rewards:Q(G(ur)),blockTime:H(v())}))),Ia=oe(H(M({blockhash:z(),previousBlockhash:z(),parentSlot:v(),signatures:G(z()),blockTime:H(v())}))),oo=oe(H(M({slot:v(),meta:H(Zn),blockTime:Q(H(v())),transaction:Oo,version:Q(Or)}))),Dn=oe(H(M({slot:v(),transaction:Za,meta:H(No),blockTime:Q(H(v())),version:Q(Or)}))),Y0=Oe(M({blockhash:z(),lastValidBlockHeight:v()})),j0=Oe(Nt()),Z0=M({slot:v(),numTransactions:v(),numSlots:v(),samplePeriodSecs:v()}),X0=oe(G(Z0)),J0=Oe(H(M({feeCalculator:M({lamportsPerSignature:v()})}))),Q0=oe(z()),ep=oe(z()),tp=M({err:cr,logs:G(z()),signature:z()}),rp=M({result:jn(tp),subscription:v()}),np={"solana-client":"js/1.0.0-maintenance"},Oa=class{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let w={};return async b=>{let{commitment:N,config:B}=me(b),E=this._buildArgs([],N,void 0,B),k=wa(E);return w[k]=w[k]??(async()=>{try{let O=await this._rpcRequest("getBlockHeight",E),A=q(O,oe(v()));if("error"in A)throw new X(A.error,"failed to get block height information");return A.result}finally{delete w[k]}})(),await w[k]}})();let r,s,o,a,f,d;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,o=t.fetch,a=t.fetchMiddleware,f=t.disableRetryOnRateLimit,d=t.httpAgent),this._rpcEndpoint=qh(e),this._rpcWsEndpoint=r||Kh(e),this._rpcClient=n0(e,s,o,a,f,d),this._rpcRequest=s0(this._rpcClient),this._rpcBatchRequest=o0(this._rpcClient),this._rpcWebSocket=new go(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgs([e.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",o),f=q(a,Oe(v()));if("error"in f)throw new X(f.error,`failed to get balance for ${e.toBase58()}`);return f.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),r=q(t,oe(H(v())));if("error"in r)throw new X(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=q(e,oe(v()));if("error"in t)throw new X(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=q(e,d0);if("error"in t)throw new X(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[t]),s=q(r,h0);if("error"in s)throw new X(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),o=q(s,Oe(yo));if("error"in o)throw new X(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),o=q(s,Oe(yo));if("error"in o)throw new X(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,t,r){let{commitment:s,config:o}=me(r),a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});let f=this._buildArgs(a,s,"base64",o),d=await this._rpcRequest("getTokenAccountsByOwner",f),w=q(d,g0);if("error"in w)throw new X(w.error,`failed to get token accounts owned by account ${e.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});let o=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",o),f=q(a,y0);if("error"in f)throw new X(f.error,`failed to get token accounts owned by account ${e.toBase58()}`);return f.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),o=q(s,_0);if("error"in o)throw new X(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),o=q(s,p0);if("error"in o)throw new X(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgs([e.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",o),f=q(a,Oe(H(Yr)));if("error"in f)throw new X(f.error,`failed to get info about account ${e.toBase58()}`);return f.result}async getParsedAccountInfo(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",o),f=q(a,Oe(H(mo)));if("error"in f)throw new X(f.error,`failed to get info about account ${e.toBase58()}`);return f.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:s}=me(t),o=e.map(w=>w.toBase58()),a=this._buildArgs([o],r,"jsonParsed",s),f=await this._rpcRequest("getMultipleAccounts",a),d=q(f,Oe(G(H(mo))));if("error"in d)throw new X(d.error,`failed to get info for accounts ${o}`);return d.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:s}=me(t),o=e.map(w=>w.toBase58()),a=this._buildArgs([o],r,"base64",s),f=await this._rpcRequest("getMultipleAccounts",a),d=q(f,Oe(G(H(Yr))));if("error"in d)throw new X(d.error,`failed to get info for accounts ${o}`);return d.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:s,config:o}=me(t),a=this._buildArgs([e.toBase58()],s,void 0,{...o,epoch:r??o?.epoch}),f=await this._rpcRequest("getStakeActivation",a),d=q(f,oe(w0));if("error"in d)throw new X(d.error,`failed to get Stake Activation ${e.toBase58()}`);return d.result}async getProgramAccounts(e,t){let{commitment:r,config:s}=me(t),{encoding:o,...a}=s||{},f=this._buildArgs([e.toBase58()],r,o||"base64",{...a,...a.filters?{filters:Ea(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",f),w=G(m0),b=a.withContext===!0?q(d,Oe(w)):q(d,oe(w));if("error"in b)throw new X(b.error,`failed to get accounts owned by program ${e.toBase58()}`);return b.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",o),f=q(a,oe(G(b0)));if("error"in f)throw new X(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async confirmTransaction(e,t){let r;if(typeof e=="string")r=e;else{let o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=ut.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return pe(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,o=!1,a=new Promise((d,w)=>{try{r=this.onSignature(t,(N,B)=>{r=void 0;let E={context:B,value:N};d({__type:Vt.PROCESSED,response:E})},e);let b=new Promise(N=>{r==null?N():s=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&N()})});(async()=>{if(await b,o)return;let N=await this.getSignatureStatus(t);if(o||N==null)return;let{context:B,value:E}=N;if(E!=null)if(E?.err)w(E.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(E.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(E.confirmationStatus==="processed"||E.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,d({__type:Vt.PROCESSED,response:{context:B,value:E}})}})()}catch(b){w(b)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let o=!1,a=new Promise(N=>{let B=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let E=await B();if(!o){for(;E<=r;)if(await or(1e3),o||(E=await B(),o))return;N({__type:Vt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),w=this.getCancellationPromise(t),b;try{let N=await Promise.race([w,d,a]);if(N.__type===Vt.PROCESSED)b=N.response;else throw new Fn(s)}finally{o=!0,f()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:o,signature:a}}){let f=!1,d=new Promise(E=>{let k=o,O=null,A=async()=>{try{let{context:x,value:K}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return O=x.slot,K?.nonce}catch{return k}};(async()=>{if(k=await A(),!f)for(;;){if(o!==k){E({__type:Vt.NONCE_INVALID,slotInWhichNonceDidAdvance:O});return}if(await or(2e3),f||(k=await A(),f))return}})()}),{abortConfirmation:w,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),N=this.getCancellationPromise(t),B;try{let E=await Promise.race([N,b,d]);if(E.__type===Vt.PROCESSED)B=E.response;else{let k;for(;;){let O=await this.getSignatureStatus(a);if(O==null)break;if(O.context.slot<(E.slotInWhichNonceDidAdvance??r)){await or(400);continue}k=O;break}if(k?.value){let O=e||"finalized",{confirmationStatus:A}=k.value;switch(O){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new ir(a);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new ir(a);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new ir(a);break;default:}B={context:k.context,value:{err:k.value.err}}}else throw new ir(a)}}finally{f=!0,w()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,s=new Promise(d=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:Vt.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t}),f;try{let d=await Promise.race([a,s]);if(d.__type===Vt.PROCESSED)f=d.response;else throw new qn(t,d.timeoutMs/1e3)}finally{clearTimeout(r),o()}return f}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=q(e,oe(G(B0)));if("error"in t)throw new X(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=q(r,C0);if("error"in s)throw new X(s.error,"failed to get vote accounts");return s.result}async getSlot(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlot",s),a=q(o,oe(v()));if("error"in a)throw new X(a.error,"failed to get slot");return a.result}async getSlotLeader(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlotLeader",s),a=q(o,oe(z()));if("error"in a)throw new X(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){let r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),o=q(s,oe(G(Ie)));if("error"in o)throw new X(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,t){let{context:r,value:s}=await this.getSignatureStatuses([e],t);pe(s.length===1);let o=s[0];return{context:r,value:o}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let s=await this._rpcRequest("getSignatureStatuses",r),o=q(s,D0);if("error"in o)throw new X(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getTransactionCount",s),a=q(o,oe(v()));if("error"in a)throw new X(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=q(r,i0);if("error"in s)throw new X(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){let{commitment:s,config:o}=me(r),a=this._buildArgs([e.map(w=>w.toBase58())],s,void 0,{...o,epoch:t??o?.epoch}),f=await this._rpcRequest("getInflationReward",a),d=q(f,Vh);if("error"in d)throw new X(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),t=q(e,a0);if("error"in t)throw new X(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getEpochInfo",s),a=q(o,u0);if("error"in a)throw new X(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=q(e,f0);if("error"in t)throw new X(t.error,"failed to get epoch schedule");let r=t.result;return new po(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=q(e,l0);if("error"in t)throw new X(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=q(s,U0);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){let t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=q(t,X0);if("error"in r)throw new X(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=q(s,J0);if("error"in o)throw new X(o.error,"failed to get fee calculator");let{context:a,value:f}=o.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(e,t){let r=ce(e.serialize()).toString("base64"),s=this._buildArgs([r],t),o=await this._rpcRequest("getFeeForMessage",s),a=q(o,Oe(H(v())));if("error"in a)throw new X(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(a=>a.toBase58()),r=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),o=q(s,c0);if("error"in o)throw new X(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getLatestBlockhash",s),a=q(o,Y0);if("error"in a)throw new X(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgs([e],r,void 0,s),a=await this._rpcRequest("isBlockhashValid",o),f=q(a,j0);if("error"in f)throw new X(f.error,"failed to determine if the blockhash `"+e+"`is valid");return f.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=q(e,oe(Qh));if("error"in t)throw new X(t.error,"failed to get version");return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=q(e,oe(z()));if("error"in t)throw new X(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,s),a=await this._rpcRequest("getBlock",o);try{switch(s?.transactionDetails){case"accounts":{let f=q(a,W0);if("error"in f)throw f.error;return f.result}case"none":{let f=q(a,q0);if("error"in f)throw f.error;return f.result}default:{let f=q(a,F0);if("error"in f)throw f.error;let{result:d}=f;return d?{...d,transactions:d.transactions.map(({transaction:w,meta:b,version:N})=>({meta:b,transaction:{...w,message:so(N,w.message)},version:N}))}:null}}}catch(f){throw new X(f,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",o);try{switch(s?.transactionDetails){case"accounts":{let f=q(a,V0);if("error"in f)throw f.error;return f.result}case"none":{let f=q(a,G0);if("error"in f)throw f.error;return f.result}default:{let f=q(a,$0);if("error"in f)throw f.error;return f.result}}}catch(f){throw new X(f,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){let{commitment:f,...d}=e;r=f,t=d}let s=this._buildArgs([],r,"base64",t),o=await this._rpcRequest("getBlockProduction",s),a=q(o,r0);if("error"in a)throw new X(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,s),a=await this._rpcRequest("getTransaction",o),f=q(a,oo);if("error"in f)throw new X(f.error,"failed to get transaction");let d=f.result;return d&&{...d,transaction:{...d.transaction,message:so(d.version,d.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:r,config:s}=me(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",o),f=q(a,Dn);if("error"in f)throw new X(f.error,"failed to get transaction");return f.result}async getParsedTransactions(e,t){let{commitment:r,config:s}=me(t),o=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(o)).map(d=>{let w=q(d,Dn);if("error"in w)throw new X(w.error,"failed to get transactions");return w.result})}async getTransactions(e,t){let{commitment:r,config:s}=me(t),o=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(o)).map(d=>{let w=q(d,oo);if("error"in w)throw new X(w.error,"failed to get transactions");let b=w.result;return b&&{...b,transaction:{...b.transaction,message:so(b.version,b.transaction.message)}}})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",r),o=q(s,H0);if("error"in o)throw new X(o.error,"failed to get confirmed block");let a=o.result;if(!a)throw new Error("Confirmed block "+e+" not found");let f={...a,transactions:a.transactions.map(({transaction:d,meta:w})=>{let b=new Yt(d.message);return{meta:w,transaction:{...d,message:b}}})};return{...f,transactions:f.transactions.map(({transaction:d,meta:w})=>({meta:w,transaction:ge.populate(d.message,d.signatures)}))}}async getBlocks(e,t,r){let s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),o=await this._rpcRequest("getBlocks",s),a=q(o,oe(G(v())));if("error"in a)throw new X(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),o=q(s,Ia);if("error"in o)throw new X(o.error,"failed to get block");let a=o.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),o=q(s,Ia);if("error"in o)throw new X(o.error,"failed to get confirmed block");let a=o.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",r),o=q(s,oo);if("error"in o)throw new X(o.error,"failed to get transaction");let a=o.result;if(!a)return a;let f=new Yt(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:ge.populate(f,d)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),o=q(s,Dn);if("error"in o)throw new X(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,t){let r=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{let f=q(a,Dn);if("error"in f)throw new X(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},o=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<o));)try{let d=await this.getConfirmedBlockSignatures(t,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{let d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=q(o,S0);if("error"in a)throw new X(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,r){let s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getSignaturesForAddress",s),a=q(o,E0);if("error"in a)throw new X(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){let{context:r,value:s}=await this.getAccountInfoAndContext(e,t),o=null;return s!==null&&(o=new Vn({key:e,state:Vn.deserialize(s.data)})),{context:r,value:o}}async getNonceAndContext(e,t){let{context:r,value:s}=await this.getAccountInfoAndContext(e,t),o=null;return s!==null&&(o=lo.fromAccountData(s.data)),{context:r,value:o}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){let r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=q(r,Q0);if("error"in s)throw new X(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await or(100);let r=Date.now()-this._blockhashInfo.lastFetch>=Fh;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){let o=await this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await or(Ka/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=me(e),s=this._buildArgs([],t,"base64",r),o=await this._rpcRequest("getStakeMinimumDelegation",s),a=q(o,Oe(v()));if("error"in a)throw new X(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,r){if("message"in e){let O=e.serialize(),A=D.from(O).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");let x=t||{};x.encoding="base64","commitment"in x||(x.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(x.innerInstructions=t.innerInstructions);let K=[A,x],J=await this._rpcRequest("simulateTransaction",K),Y=q(J,Aa);if("error"in Y)throw new Error("failed to simulate transaction: "+Y.error.message);return Y.result}let s;if(e instanceof ge){let k=e;s=new ge,s.feePayer=k.feePayer,s.instructions=e.instructions,s.nonceInfo=k.nonceInfo,s.signatures=k.signatures}else s=ge.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");let o=t;if(s.nonceInfo&&o)s.sign(...o);else{let k=this._disableBlockhashCaching;for(;;){let O=await this._blockhashWithExpiryBlockHeight(k);if(s.lastValidBlockHeight=O.lastValidBlockHeight,s.recentBlockhash=O.blockhash,!o)break;if(s.sign(...o),!s.signature)throw new Error("!signature");let A=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else k=!0}}let a=s._compile(),f=a.serialize(),w=s._serialize(f).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){let k=(Array.isArray(r)?r:a.nonProgramIds()).map(O=>O.toBase58());b.accounts={encoding:"base64",addresses:k}}o&&(b.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(b.innerInstructions=t.innerInstructions);let N=[w,b],B=await this._rpcRequest("simulateTransaction",N),E=q(B,Aa);if("error"in E){let k;if("data"in E.error&&(k=E.error.data.logs,k&&Array.isArray(k))){let O=`
    `,A=O+k.join(O);console.error(E.error.message,A)}throw new Hr({action:"simulate",signature:"",transactionMessage:E.error.message,logs:k})}return E.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");let s=t;if(e.nonceInfo)e.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){let f=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=f.lastValidBlockHeight,e.recentBlockhash=f.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");let d=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}let o=e.serialize();return await this.sendRawTransaction(o,r)}async sendRawTransaction(e,t){let r=ce(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},s=t&&t.skipPreflight,o=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),o&&(r.preflightCommitment=o);let a=[e,r],f=await this._rpcRequest("sendTransaction",a),d=q(f,ep);if("error"in d){let w;throw"data"in d.error&&(w=d.error.data.logs),new Hr({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:w})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};let s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:a}=s;try{this._setSubscription(r,{...s,state:"subscribing"});let f=await this._rpcWebSocket.call(a,o);this._setSubscription(r,{...s,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=s.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:o,error:f}),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[o])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=q(e,A0);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,s=wa([e.method,t]),o=this._subscriptionsByHash[s];return o===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let a=this._subscriptionsByHash[s];pe(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:s,config:o}=me(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=q(e,I0);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){let{commitment:o,config:a}=me(r),f=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",a||(s?{filters:Ea(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=q(e,rp);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=q(e,N0);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=q(e,T0);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){let o=t||this._commitment;if(o||r||s){let a={};r&&(a.encoding=r),o&&(a.commitment=o),s&&(a=Object.assign(a,s)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){let o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=q(e,L0);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let s=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){t(a.result,f);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}onSignatureWithOptions(e,t,r){let{commitment:s,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([e],s,void 0,o),f=this._makeSubscription({callback:(d,w)=>{t(d,w);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=q(e,x0);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},Ro=class n{constructor(e){this._keypair=void 0,this._keypair=e??pa()}static generate(){return new n(pa())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let s=e.slice(0,32),o=uo(s);for(let a=0;a<32;a++)if(r[a]!==o[a])throw new Error("provided secretKey is invalid")}return new n({publicKey:r,secretKey:e})}static fromSeed(e){let t=uo(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new n({publicKey:t,secretKey:r})}get publicKey(){return new ne(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},$r=Object.freeze({CreateLookupTable:{index:0,layout:m.struct([m.u32("instruction"),vr("recentSlot"),m.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:m.struct([m.u32("instruction")])},ExtendLookupTable:{index:2,layout:m.struct([m.u32("instruction"),vr(),m.seq(ae(),m.offset(m.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:m.struct([m.u32("instruction")])},CloseLookupTable:{index:4,layout:m.struct([m.u32("instruction")])}});var bo=class{constructor(){}static createLookupTable(e){let[t,r]=ne.findProgramAddressSync([e.authority.toBuffer(),Hs().encode(e.recentSlot)],this.programId),s=$r.CreateLookupTable,o=fe(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yt.programId,isSigner:!1,isWritable:!1}];return[new _e({programId:this.programId,keys:a,data:o}),t]}static freezeLookupTable(e){let t=$r.FreezeLookupTable,r=fe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _e({programId:this.programId,keys:s,data:r})}static extendLookupTable(e){let t=$r.ExtendLookupTable,r=fe(t,{addresses:e.addresses.map(o=>o.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yt.programId,isSigner:!1,isWritable:!1}),new _e({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(e){let t=$r.DeactivateLookupTable,r=fe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _e({programId:this.programId,keys:s,data:r})}static closeLookupTable(e){let t=$r.CloseLookupTable,r=fe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new _e({programId:this.programId,keys:s,data:r})}};bo.programId=new ne("AddressLookupTab1e1111111111111111111111111");var Un=Object.freeze({RequestUnits:{index:0,layout:m.struct([m.u8("instruction"),m.u32("units"),m.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:m.struct([m.u8("instruction"),m.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:m.struct([m.u8("instruction"),m.u32("units")])},SetComputeUnitPrice:{index:3,layout:m.struct([m.u8("instruction"),vr("microLamports")])}}),wo=class{constructor(){}static requestUnits(e){let t=Un.RequestUnits,r=fe(t,e);return new _e({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){let t=Un.RequestHeapFrame,r=fe(t,e);return new _e({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){let t=Un.SetComputeUnitLimit,r=fe(t,e);return new _e({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){let t=Un.SetComputeUnitPrice,r=fe(t,{microLamports:BigInt(e.microLamports)});return new _e({keys:[],programId:this.programId,data:r})}};wo.programId=new ne("ComputeBudget111111111111111111111111111111");var Na=64,ka=32,Ta=64,La=m.struct([m.u8("numSignatures"),m.u8("padding"),m.u16("signatureOffset"),m.u16("signatureInstructionIndex"),m.u16("publicKeyOffset"),m.u16("publicKeyInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u16("messageInstructionIndex")]),So=class n{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:s,instructionIndex:o}=e;pe(t.length===ka,`Public Key must be ${ka} bytes but received ${t.length} bytes`),pe(s.length===Ta,`Signature must be ${Ta} bytes but received ${s.length} bytes`);let a=La.span,f=a+t.length,d=f+s.length,w=1,b=D.alloc(d+r.length),N=o??65535;return La.encode({numSignatures:w,padding:0,signatureOffset:f,signatureInstructionIndex:N,publicKeyOffset:a,publicKeyInstructionIndex:N,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:N},b),b.fill(t,a),b.fill(s,f),b.fill(r,d),new _e({keys:[],programId:n.programId,data:b})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:s}=e;pe(t.length===Na,`Private key must be ${Na} bytes but received ${t.length} bytes`);try{let o=Ro.fromSecretKey(t),a=o.publicKey.toBytes(),f=Ao(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:f,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};So.programId=new ne("Ed25519SigVerify111111111111111111111111111");var sp=(n,e)=>{let t=Pn.sign(n,e);return[t.toCompactRawBytes(),t.recovery]};Pn.utils.isValidPrivateKey;var op=Pn.getPublicKey,xa=32,io=20,Ba=64,ip=11,ao=m.struct([m.u8("numSignatures"),m.u16("signatureOffset"),m.u8("signatureInstructionIndex"),m.u16("ethAddressOffset"),m.u8("ethAddressInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u8("messageInstructionIndex"),m.blob(20,"ethAddress"),m.blob(64,"signature"),m.u8("recoveryId")]),Eo=class n{constructor(){}static publicKeyToEthAddress(e){pe(e.length===Ba,`Public key must be ${Ba} bytes but received ${e.length} bytes`);try{return D.from(_s(ce(e))).slice(-io)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:s,recoveryId:o,instructionIndex:a}=e;return n.createInstructionWithEthAddress({ethAddress:n.publicKeyToEthAddress(t),message:r,signature:s,recoveryId:o,instructionIndex:a})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:r,signature:s,recoveryId:o,instructionIndex:a=0}=e,f;typeof t=="string"?t.startsWith("0x")?f=D.from(t.substr(2),"hex"):f=D.from(t,"hex"):f=t,pe(f.length===io,`Address must be ${io} bytes but received ${f.length} bytes`);let d=1+ip,w=d,b=d+f.length,N=b+s.length+1,B=1,E=D.alloc(ao.span+r.length);return ao.encode({numSignatures:B,signatureOffset:b,signatureInstructionIndex:a,ethAddressOffset:w,ethAddressInstructionIndex:a,messageDataOffset:N,messageDataSize:r.length,messageInstructionIndex:a,signature:ce(s),ethAddress:ce(f),recoveryId:o},E),E.fill(ce(r),ao.span),new _e({keys:[],programId:n.programId,data:E})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:s}=e;pe(t.length===xa,`Private key must be ${xa} bytes but received ${t.length} bytes`);try{let o=ce(t),a=op(o,!1).slice(1),f=D.from(_s(ce(r))),[d,w]=sp(f,o);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:d,recoveryId:w,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Eo.programId=new ne("KeccakSecp256k11111111111111111111111111111");var Ja,ap=new ne("StakeConfig11111111111111111111111111111111");var jr=class{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}};Ja=jr;jr.default=new Ja(0,0,ne.default);var Gt=Object.freeze({Initialize:{index:0,layout:m.struct([m.u32("instruction"),Sh(),Eh()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),ae("newAuthorized"),m.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:m.struct([m.u32("instruction")])},Split:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Withdraw:{index:4,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Deactivate:{index:5,layout:m.struct([m.u32("instruction")])},Merge:{index:7,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:m.struct([m.u32("instruction"),ae("newAuthorized"),m.u32("stakeAuthorizationType"),Er("authoritySeed"),ae("authorityOwner")])}}),zy=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Hn=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:s}=e,o=s||jr.default,a=Gt.Initialize,f=fe(a,{authorized:{staker:ce(r.staker.toBuffer()),withdrawer:ce(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:ce(o.custodian.toBuffer())}}),d={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gr,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new _e(d)}static createAccountWithSeed(e){let t=new ge;t.add(yt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:s,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:o}))}static createAccount(e){let t=new ge;t.add(yt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:s,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:o}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:s}=e,o=Gt.Delegate,a=fe(o);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:to,isSigner:!1,isWritable:!1},{pubkey:ap,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,f=Gt.Authorize,d=fe(f,{newAuthorized:ce(s.toBuffer()),stakeAuthorizationType:o.index}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&w.push({pubkey:a,isSigner:!0,isWritable:!1}),new ge().add({keys:w,programId:this.programId,data:d})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:s,authorityOwner:o,newAuthorizedPubkey:a,stakeAuthorizationType:f,custodianPubkey:d}=e,w=Gt.AuthorizeWithSeed,b=fe(w,{newAuthorized:ce(a.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:s,authorityOwner:ce(o.toBuffer())}),N=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ut,isSigner:!1,isWritable:!1}];return d&&N.push({pubkey:d,isSigner:!0,isWritable:!1}),new ge().add({keys:N,programId:this.programId,data:b})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:s,lamports:o}=e,a=Gt.Split,f=fe(a,{lamports:o});return new _e({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(e,t){let r=new ge;return r.add(yt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:o,basePubkey:a,seed:f,lamports:d}=e,w=new ge;return w.add(yt.allocate({accountPubkey:o,basePubkey:a,seed:f,space:this.space,programId:this.programId})),t&&t>0&&w.add(yt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),w.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:o,lamports:d}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:s}=e,o=Gt.Merge,a=fe(o);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:to,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:s,lamports:o,custodianPubkey:a}=e,f=Gt.Withdraw,d=fe(f,{lamports:o}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:to,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&w.push({pubkey:a,isSigner:!0,isWritable:!1}),new ge().add({keys:w,programId:this.programId,data:d})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,s=Gt.Deactivate,o=fe(s);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Hn.programId=new ne("Stake11111111111111111111111111111111111111");Hn.space=200;var Vr=Object.freeze({InitializeAccount:{index:0,layout:m.struct([m.u32("instruction"),Ah()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),ae("newAuthorized"),m.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:m.struct([m.u32("instruction"),vh()])}}),Ky=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Yn=class n{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:s}=e,o=Vr.InitializeAccount,a=fe(o,{voteInit:{nodePubkey:ce(s.nodePubkey.toBuffer()),authorizedVoter:ce(s.authorizedVoter.toBuffer()),authorizedWithdrawer:ce(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gr,isSigner:!1,isWritable:!1},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new _e(f)}static createAccount(e){let t=new ge;return t.add(yt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:o}=e,a=Vr.Authorize,f=fe(a,{newAuthorized:ce(s.toBuffer()),voteAuthorizationType:o.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:d,programId:this.programId,data:f})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:o,voteAuthorizationType:a,votePubkey:f}=e,d=Vr.AuthorizeWithSeed,w=fe(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ce(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:ce(o.toBuffer()),voteAuthorizationType:a.index}}),b=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:Ut,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ge().add({keys:b,programId:this.programId,data:w})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:o}=e,a=Vr.Withdraw,f=fe(a,{lamports:s}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:d,programId:this.programId,data:f})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return n.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:s}=e,o=Vr.UpdateValidatorIdentity,a=fe(o),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:f,programId:this.programId,data:a})}};Yn.programId=new ne("Vote111111111111111111111111111111111111111");Yn.space=3762;var Fy=new ne("Va1idator1nfo111111111111111111111111111111"),qy=M({name:z(),website:Q(z()),details:Q(z()),iconUrl:Q(z()),keybaseUsername:Q(z())});var Wy=new ne("Vote111111111111111111111111111111111111111"),$y=m.struct([ae("nodePubkey"),ae("authorizedWithdrawer"),m.u8("commission"),m.nu64(),m.seq(m.struct([m.nu64("slot"),m.u32("confirmationCount")]),m.offset(m.u32(),-8),"votes"),m.u8("rootSlotValid"),m.nu64("rootSlot"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),ae("authorizedVoter")]),m.offset(m.u32(),-8),"authorizedVoters"),m.struct([m.seq(m.struct([ae("authorizedPubkey"),m.nu64("epochOfLastAuthorizedSwitch"),m.nu64("targetEpoch")]),32,"buf"),m.nu64("idx"),m.u8("isEmpty")],"priorVoters"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),m.nu64("credits"),m.nu64("prevCredits")]),m.offset(m.u32(),-8),"epochCredits"),m.struct([m.nu64("slot"),m.nu64("timestamp")],"lastTimestamp")]);var Vy=1e9;ee();re();te();var Jy={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new ne("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new ne("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new ne("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:ws.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${ws.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},Qy={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5};export{ks as a,Ls as b,Di as c,Ks as d,Hs as e,Xi as f,oa as g,ne as h,ge as i,_a as j,yt as k,Oa as l,wo as m,Vy as n,Jy as o,Qy as p};
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
