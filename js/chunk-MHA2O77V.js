import{b as Nt,d as bt,f as Tt,h as It}from"./chunk-XVJ4QQYG.js";import{a as L,b as se,c as F,d as yt,e as vt,f as ne}from"./chunk-6T7Q26JY.js";import{a as pt,b as mt,c as Ct,d as ge,e as wt,f as te,g as gt,h as _,t as At,u as Et}from"./chunk-RZQOM5QR.js";import{a as ft}from"./chunk-7GZ7JYLK.js";import{a as X}from"./chunk-3RVNKTWB.js";import{A as N,B as R,C as Le,E as we,F as ct,H as f,I as Be,J as qe,N as Ke,O as q,P as H,Q as lt,R as dt,S as V,T as K,U as b,X as le,Y as ut,Z as je,_ as ee,a as st,aa as k,b as nt,c as rt,ca as ht,da as I,e as it,f as xe,fa as Qe,ga as c,ia as z,j as y,k as ot,q as J,w as at,z as P}from"./chunk-OXOEMY67.js";import{ka as We}from"./chunk-J26BEOSD.js";import{d as tt,g as Y,i as l,k as d,o as u}from"./chunk-JY5TIRRF.js";var ns=tt(Me=>{"use strict";l();u();d();var Os=Symbol.for("react.transitional.element"),Ps=Symbol.for("react.fragment");function ss(s,e,t){var n=null;if(t!==void 0&&(n=""+t),e.key!==void 0&&(n=""+e.key),"key"in e){t={};for(var r in e)r!=="key"&&(t[r]=e[r])}else t=e;return e=t.ref,{$$typeof:Os,type:s,key:n,ref:e!==void 0?e:null,props:t}}Me.Fragment=Ps;Me.jsx=ss;Me.jsxs=ss});var is=tt((Ta,rs)=>{"use strict";l();u();d();rs.exports=ns()});l();u();d();var ve=Y(X(),1);l();u();d();var W=Y(X(),1);var as=(s,e)=>{let t=(0,W.useRef)(void 0);(0,W.useEffect)(()=>{t.current=rt(s,e,!0)}),(0,W.useDebugValue)(t.current)},cs=as,ls=new WeakMap;function ye(s,e){let t=e?.sync,n=(0,W.useMemo)(()=>s&&new WeakMap,[s]),r=(0,W.useRef)(void 0),i=!0,o=(0,W.useSyncExternalStore)((0,W.useCallback)(h=>{let p=it(s,h,t);return h(),p},[s,t]),()=>{let h=xe(s);try{if(!i&&r.current&&!nt(r.current,h,n,new WeakMap))return r.current}catch{}return h},()=>xe(s));i=!1,(0,W.useLayoutEffect)(()=>{r.current=o}),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&cs(o,n);let a=(0,W.useMemo)(()=>new WeakMap,[]);return st(o,n,a,ls)}function ds(s){let{providers:e,providerIds:t}=ye(I.state),n=e[s],r=t[s];return{walletProvider:n,walletProviderType:r}}function us(s){let e=ye(c.state),{activeConnectorIds:t}=ye(b.state),n=s?.namespace||e.activeChain;if(!n)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};let r=e.chains.get(n)?.accountState,i=b.getAuthConnector(n),o=t[n];return{allAccounts:k.getConnections(n).flatMap(p=>p.accounts.map(({address:m,type:A,publicKey:S})=>R.createAccount(n,m,A||"eoa",S))),caipAddress:r?.caipAddress,address:R.getPlainAddress(r?.caipAddress),isConnected:!!r?.caipAddress,status:r?.status,embeddedWalletInfo:i&&o===y.CONNECTOR_ID.AUTH?{user:r?.user?{...r.user,username:N.getConnectedSocialUsername()}:void 0,authProvider:r?.socialProvider||"email",accountType:r?.preferredAccountType,isSmartAccountDeployed:!!r?.smartAccountDeployed}:void 0}}l();u();d();var St=Y(X(),1),Ae;function kt(s){s&&(Ae=s)}function Xs(){if(!Ae)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function s(t){return Ae?.open(t)}async function e(){await Ae?.close()}return{open:s,close:e}}l();u();d();l();u();d();l();u();d();var Ee=class s{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:n,onTimeout:r,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){let{metadata:h,sdkVersion:p,sdkType:m}=f.getSnapshot();return s.instance||(s.instance=new ct({projectId:e,chainId:t,enableLogger:n,onTimeout:r,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!f.state.remoteFeatures?.emailCapture,metadata:h,sdkVersion:p,sdkType:m})),s.instance}};l();u();d();l();u();d();l();u();d();var de={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};var Ne=class extends wt{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new gt({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async writeSolanaTransaction(){return Promise.resolve({hash:""})}async getAccounts({namespace:e}){let n=this.provider?.session?.namespaces?.[e]?.accounts?.map(r=>{let[,,i]=r.split(":");return i}).filter((r,i,o)=>o.indexOf(r)===i)||[];return Promise.resolve({accounts:n.map(r=>R.createAccount(e,r,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&P.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};let n=c.getAccountData();if(n?.balanceLoading&&e.chainId===c.state.activeCaipNetwork?.id)return{balance:n?.balance||"0.00",symbol:n?.balanceSymbol||""};let i=(await c.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:n,address:r}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return c.state.activeCaipNetwork?.chainNamespace===y.CHAIN.SOLANA?i=(await t.request({method:"solana_signMessage",params:{message:ft.encode(new TextEncoder().encode(n)),pubkey:r}},c.state.activeCaipNetwork?.caipNetworkId)).signature:i=await t.request({method:"personal_sign",params:[n,r]},c.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,n=this.getWalletConnectConnector();if(t.chainNamespace===y.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:We(t.id)}]})}catch(r){if(r.code===de.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||r.code===de.ERROR_INVALID_CHAIN_ID||r.code===de.ERROR_CODE_DEFAULT||r?.data?.originalError?.code===de.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:We(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}};l();u();d();var hs=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication","headless"],be={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>{if(!s?.config)return!1;let e=s.config;return!!s.isEnabled&&e.includes("email")},processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.email:!!s},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>{if(!s?.config)return!1;let e=s.config;return s.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.socials:typeof s=="boolean"?s?P.DEFAULT_REMOTE_FEATURES.socials:!1:s},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>{if(!s?.config)return!1;let e=s.config;return s.isEnabled&&e.length>0?e:!1},processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.swaps:typeof s=="boolean"?s?P.DEFAULT_REMOTE_FEATURES.swaps:!1:s},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>{if(!s?.config)return!1;let e=s.config;return s.isEnabled&&e.length>0?e:!1},processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.onramp:typeof s=="boolean"?s?P.DEFAULT_REMOTE_FEATURES.onramp:!1:s},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.activity:!!s},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:s=>s===void 0?P.DEFAULT_REMOTE_FEATURES.reownBranding:!!s},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>s.isEnabled&&(s.config??[]),processFallback:s=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:()=>P.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:()=>P.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:()=>P.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:s=>typeof s>"u"?P.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!s},headless:{apiFeatureName:"headless",localFeatureName:"headless",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:s=>!!s.isEnabled,processFallback:()=>P.DEFAULT_REMOTE_FEATURES.headless}},Ot={localSettingsOverridden:new Set,getApiConfig(s,e){return e?.find(t=>t.id===s)},addWarning(s,e){if(s!==void 0){let t=be[e],n=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(s,e,t,n,r){let i=be[s],o=e[i.localFeatureName];if(r&&!i.isAvailableOnBasic)return!1;if(n){let a=this.getApiConfig(i.apiFeatureName,t);return a?.config===null?this.processFallbackFeature(s,o):a?.config?(o!==void 0&&this.addWarning(o,s),this.processApiFeature(s,a)):!1}return this.processFallbackFeature(s,o)},processApiFeature(s,e){return be[s].processApi(e)},processFallbackFeature(s,e){return be[s].processFallback(e)},async fetchRemoteFeatures(s){let e=s.basic??!1,t=s.features||{};this.localSettingsOverridden.clear();let n=null,r=!1;try{n=await H.fetchProjectConfig(),r=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}let i=r&&!e?P.DEFAULT_REMOTE_FEATURES:P.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let o of hs){let a=this.processFeature(o,t,n,r,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),P.DEFAULT_REMOTE_FEATURES}if(r&&this.localSettingsOverridden.size>0){let o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;_.open({debugMessage:F.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};var Te=class{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,n)=>{if(t){let r=c.getCaipNetworks(t)?.find(a=>a.id===n);if(r)return r;let i=c.getNetworkData(t)?.caipNetwork;return i||c.getRequestedCaipNetworks(t).filter(a=>a.chainNamespace===t)?.[0]}return c.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>c.getCaipNetworks(t),this.getActiveChainNamespace=()=>c.state.activeChain,this.setRequestedCaipNetworks=(t,n)=>{c.setRequestedCaipNetworks(t,n)},this.getApprovedCaipNetworkIds=()=>c.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>c.state.activeChain===t||!t?c.state.activeCaipAddress:c.state.chains.get(t)?.accountState?.caipAddress,this.setClientId=t=>{qe.setClientId(t)},this.getProvider=t=>I.getProvider(t),this.getProviderType=t=>I.getProviderId(t),this.getPreferredAccountType=t=>le(t),this.setCaipAddress=(t,n,r=!1)=>{c.setAccountProp("caipAddress",t,n,r),c.setAccountProp("address",R.getPlainAddress(t),n,r)},this.setBalance=(t,n,r)=>{c.setAccountProp("balance",t,r),c.setAccountProp("balanceSymbol",n,r)},this.setProfileName=(t,n)=>{c.setAccountProp("profileName",t,n)},this.setProfileImage=(t,n)=>{c.setAccountProp("profileImage",t,n)},this.setUser=(t,n)=>{c.setAccountProp("user",t,n)},this.resetAccount=t=>{c.resetAccount(t)},this.setCaipNetwork=t=>{c.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,n)=>{c.setChainNetworkData(n,{caipNetwork:t})},this.setStatus=(t,n)=>{c.setAccountProp("status",t,n),b.isConnected()?N.setConnectionStatus("connected"):N.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>c.getAccountData(t)?.address,this.setConnectors=t=>{let n=[...b.state.allConnectors,...t];b.setConnectors(n)},this.setConnections=(t,n)=>{N.setConnections(t,n),k.setConnections(t,n)},this.fetchIdentity=t=>qe.fetchIdentity(t),this.getReownName=t=>Ct.getNamesForAddress(t),this.getConnectors=()=>b.getConnectors(),this.getConnectorImage=t=>Ke.getConnectorImage(t),this.getConnections=t=>this.remoteFeatures.multiWallet?je.getConnectionsData(t).connections:(_.open(y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=t=>this.remoteFeatures.multiWallet?je.getConnectionsData(t).recentConnections:(_.open(y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async t=>{if(!this.remoteFeatures.multiWallet){_.open(y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await k.switchConnection(t)},this.deleteConnection=t=>{if(!this.remoteFeatures.multiWallet){_.open(y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}N.deleteAddressFromConnection(t),k.syncStorageConnections()},this.setConnectedWalletInfo=(t,n)=>{let r=I.getProviderId(n),i=t?{...t,type:r}:void 0;c.setAccountProp("connectedWalletInfo",i,n)},this.getIsConnectedState=()=>!!c.state.activeCaipAddress,this.addAddressLabel=(t,n,r)=>{let i=c.getAccountData(r)?.addressLabels||{};c.setAccountProp("addressLabels",{...i,[t]:n},r)},this.removeAddressLabel=(t,n)=>{let r=c.getAccountData(n)?.addressLabels||{};c.setAccountProp("addressLabels",{...r,[t]:void 0},n)},this.getAddress=t=>{let n=t||c.state.activeChain;return c.getAccountData(n)?.address},this.resetNetwork=t=>{c.resetNetwork(t)},this.addConnector=t=>{b.addConnector(t)},this.resetWcConnection=()=>{k.resetWcConnection()},this.setAddressExplorerUrl=(t,n)=>{c.setAccountProp("addressExplorerUrl",t,n)},this.setSmartAccountDeployed=(t,n)=>{c.setAccountProp("smartAccountDeployed",t,n)},this.setPreferredAccountType=(t,n)=>{c.setAccountProp("preferredAccountType",t,n)},this.setEIP6963Enabled=t=>{f.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];let r=t?.map(i=>i.chainNamespace);return[...new Set(r)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),e.features?.headless&&!dt.hasInjectedConnectors()&&H.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1,fetchRecommendedWallets:!0}),f.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await Ot.fetchRemoteFeatures(e)),await H.fetchUsage(),f.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&pt.setOnrampProviders(this.remoteFeatures.onramp),(f.state.remoteFeatures?.email||Array.isArray(f.state.remoteFeatures?.socials)&&f.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),f.state.features?.reownAuthentication||f.state.remoteFeatures?.reownAuthentication){let{ReownAuthentication:t}=await import("./features-65LPVIYL.js"),n=f.state.siwx;n instanceof t||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),f.setSIWX(new t))}}async openSend(e){let t=e.namespace||c.state.activeChain,n=this.getCaipAddress(t),r=this.getCaipNetwork(t)?.id;if(!n)throw new Error("openSend: caipAddress not found");if(r?.toString()!==e.chainId.toString()){let i=c.getCaipNetworkById(e.chainId,t);if(!i)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(i,{throwOnFailure:!0})}try{let i=yt.getTokenSymbolByAddress(e.assetAddress);i&&await H.fetchTokenImages([i])}catch{}return await z.open({view:"WalletSend",data:{send:e}}),new Promise((i,o)=>{let a=Qe.subscribeKey("hash",m=>{m&&(p(),i({hash:m}))}),h=z.subscribe(m=>{m.open||(p(),o(new Error("Modal closed")))}),p=this.createCleanupHandler([a,h])})}toModalOptions(){function e(n){return n?.view==="Swap"}function t(n){return n?.view==="WalletSend"}return{isSwap:e,isSend:t}}async checkAllowedOrigins(){try{let e=await H.fetchAllowedOrigins();if(!R.isClient())return;let t=window.location.origin;ge.isOriginAllowed(t,e,y.DEFAULT_ALLOWED_ANCESTORS)||_.open(F.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":_.open(F.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{let t=e.cause instanceof Error?e.cause:e;_.open({displayMessage:F.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:F.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(t.message)},"error");break}default:break}}}createCleanupHandler(e){return()=>{e.forEach(t=>{try{t()}catch{}})}}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,q.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){ht.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&K.setThemeMode(e.themeMode),e.themeVariables&&K.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");c.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});let t=this.getDefaultNetwork();t&&c.setActiveCaipNetwork(t)}initializeConnectionController(e){k.initialize(e.adapters??[]),k.setWcBasic(e.basic??!1)}initializeConnectorController(){b.initialize(this.chainNamespaces)}initializeProjectSettings(e){f.setProjectId(e.projectId),f.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){f.setDebug(e.debug!==!1),f.setEnableWalletGuide(e.enableWalletGuide!==!1),f.setEnableWallets(e.enableWallets!==!1),f.setEIP6963Enabled(e.enableEIP6963!==!1),f.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),f.setEnableReconnect(e.enableReconnect!==!1),f.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),f.setCoinbasePreference(e.coinbasePreference),f.setEnableAuthLogger(e.enableAuthLogger!==!1),f.setCustomRpcUrls(e.customRpcUrls),f.setEnableEmbedded(e.enableEmbedded),f.setAllWallets(e.allWallets),f.setIncludeWalletIds(e.includeWalletIds),f.setExcludeWalletIds(e.excludeWalletIds),f.setFeaturedWalletIds(e.featuredWalletIds),f.setTokens(e.tokens),f.setTermsConditionsUrl(e.termsConditionsUrl),f.setPrivacyPolicyUrl(e.privacyPolicyUrl),f.setCustomWallets(e.customWallets),f.setFeatures(e.features),f.setAllowUnsupportedChain(e.allowUnsupportedChain),f.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),f.setPreferUniversalLinks(e.experimental_preferUniversalLinks),f.setDefaultAccountTypes(e.defaultAccountTypes);let t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),f.setMetadata(e.metadata),f.setDisableAppend(e.disableAppend),f.setEnableEmbedded(e.enableEmbedded),f.setSIWX(e.siwx),this.features=f.state.features??{},!e.projectId){_.open(F.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(r=>r.namespace===y.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");f.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return R.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let n=ne.getUnsupportedNetwork(`${t}:${e}`);c.setActiveCaipNetwork(n)}}getDefaultNetwork(){return ne.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return ne.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return ne.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(r=>r.id===e.defaultNetwork?.id);return t?ne.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,t){try{this.setLoading(!0,e);let n={connections:[]},r=this.getAdapter(e);return(c.state.chains.get(e)?.accountState?.caipAddress||!f.state.enableReconnect)&&r?.disconnect&&(n=await r.disconnect({id:t})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=c.state.activeChain,t=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,r=k.getConnections(e),i=this.remoteFeatures.multiWallet,o=r.length>0;if(!t)throw new Error("Adapter not found");let a=await t.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),N.setConnectedNamespaces([...c.state.chains.keys()]),await this.syncWalletConnectAccount(),await te.initializeIfEnabled()},connectExternal:async e=>{let t=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,t),t?{address:t.address}:void 0},reconnectExternal:async({id:e,info:t,type:n,provider:r})=>{let i=c.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:t,type:n,provider:r,chainId:this.getCaipNetwork()?.id}),N.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{let{id:t,chainNamespace:n,initialDisconnect:r}=e||{},i=n||c.state.activeChain,o=b.getConnectorId(i),a=t===y.CONNECTOR_ID.AUTH||o===y.CONNECTOR_ID.AUTH,h=t===y.CONNECTOR_ID.WALLET_CONNECT||o===y.CONNECTOR_ID.WALLET_CONNECT;try{let p=Array.from(c.state.chains.keys()),m=n?[n]:p;(h||a)&&(m=p);let A=m.map(async v=>{let T=b.getConnectorId(v),M=t||T,x=await this.disconnectConnector(v,M);x&&(a&&N.deleteConnectedSocialProvider(),x.connections.forEach(U=>{N.addDisconnectedConnectorId(U.connectorId,v)})),r&&this.onDisconnectNamespace({chainNamespace:v,closeModal:!1})}),S=await Promise.allSettled(A);Qe.resetSend(),k.resetWcConnection(),te.getSIWX()?.signOutOnDisconnect&&await te.clearSessions(),b.setFilterByNamespace(void 0),k.syncStorageConnections();let E=S.filter(v=>v.status==="rejected");if(E.length>0)throw new Error(E.map(v=>v.reason.message).join(", "));q.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(p){throw new Error(`Failed to disconnect chains: ${p.message}`)}},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>{let t=c.state.activeChain,n=this.getAdapter(c.state.activeChain);if(!t)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");let r=this.getAddress(t);if(!r)throw new Error("signMessage: address not found");return(await n?.signMessage({message:e,address:r,provider:I.getProvider(t)}))?.signature||""},sendTransaction:async e=>{let t=e.chainNamespace;if(!t)throw new Error("sendTransaction: namespace not found");if(P.SEND_SUPPORTED_NAMESPACES.includes(t)){let n=this.getAdapter(t);if(!n)throw new Error("sendTransaction: adapter not found");let r=I.getProvider(t);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:r}))?.hash||""}return""},estimateGas:async e=>{let t=e.chainNamespace;if(t===y.CHAIN.EVM){let n=this.getAdapter(t);if(!n)throw new Error("estimateGas: adapter is required but got undefined");let r=I.getProvider(t),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:r,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{let e=c.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");let t=this.getAddress(e);if(!t)throw new Error("getEnsAvatar: address not found");return await this.syncIdentity({address:t,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),c.getAccountData()?.profileImage||!1},getEnsAddress:async e=>await ge.resolveReownName(e),writeContract:async e=>{let t=c.state.activeChain,n=this.getAdapter(t);if(!t)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");let r=this.getCaipNetwork(),i=this.getCaipAddress(),o=I.getProvider(t);if(!r||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:r,provider:o,caipAddress:i}))?.hash},writeSolanaTransaction:async e=>{let t=c.state.activeChain,n=this.getAdapter(t);if(!t)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");let r=this.getCaipNetwork(),i=this.getCaipAddress(),o=I.getProvider(t);if(!r||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeSolanaTransaction({...e,caipNetwork:r,provider:o,caipAddress:i}))?.hash},parseUnits:(e,t)=>{let n=this.getAdapter(c.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{let n=this.getAdapter(c.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{let t=this.getAdapter(c.state.activeChain);if(!t)throw new Error("getCapabilities: adapter is required but got undefined");return await t?.getCapabilities(e)},grantPermissions:async e=>{let t=this.getAdapter(c.state.activeChain);if(!t)throw new Error("grantPermissions: adapter is required but got undefined");return await t?.grantPermissions(e)},revokePermissions:async e=>{let t=this.getAdapter(c.state.activeChain);if(!t)throw new Error("revokePermissions: adapter is required but got undefined");return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{let t=this.getAdapter(c.state.activeChain);if(!t)throw new Error("walletGetAssets: adapter is required but got undefined");return await t?.walletGetAssets(e)??{}},updateBalance:e=>{let t=this.getAddress(e),n=this.getCaipNetwork(e);!n||!t||this.updateNativeBalance(t,n?.id,e)}},k.setClient(this.connectionControllerClient)}async onConnectExternal(e){let t=c.state.activeChain,n=e.chain||t,r=this.getAdapter(n),i=!0;if(e.type===L.CONNECTOR_TYPE_AUTH&&y.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(A=>b.getConnectorId(A)===y.CONNECTOR_ID.AUTH)&&e.chain!==t&&(i=!1),e.chain&&e.chain!==t&&!e.caipNetwork){let p=this.getCaipNetworks().find(m=>m.chainNamespace===e.chain);p&&i&&this.setCaipNetwork(p)}if(!n)throw new Error("connectExternal: namespace not found");if(!r)throw new Error("connectExternal: adapter not found");let o=this.getCaipNetwork(n),a=e.caipNetwork||o,h=await r.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(h)return N.addConnectedNamespace(n),this.syncProvider({...h,chainNamespace:n}),this.setStatus("connected",n),this.syncConnectedWalletInfo(n),N.removeDisconnectedConnectorId(e.id,n),{address:h.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,t){let n=e.type===L.CONNECTOR_TYPE_AUTH,r=se.getOtherAuthNamespaces(t?.connectedCaipNetwork?.chainNamespace),i=c.state.activeCaipNetwork,o=this.getAdapter(i?.chainNamespace);n&&(await Promise.all(r.map(async a=>{try{let h=I.getProvider(a),p=this.getCaipNetwork(a);await this.getAdapter(a)?.connect({...e,provider:h,socialUri:void 0,chainId:p?.id,rpcUrl:p?.rpcUrls?.default?.http?.[0]})&&(N.addConnectedNamespace(a),N.removeDisconnectedConnectorId(e.id,a),this.setStatus("connected",a),this.syncConnectedWalletInfo(a))}catch(h){_.warn(F.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,F.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(a,h instanceof Error?h.message:void 0),F.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await o?.switchNetwork({caipNetwork:i}))}getApprovedCaipNetworksData(){if(I.getProviderId(c.state.activeChain)===L.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let r=I.getProviderId(t);if(e.chainNamespace===c.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e});else if(this.setCaipNetwork(e),r===L.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let n=t.chains||[],r=t.accounts.map(i=>{let{chainId:o,chainNamespace:a}=J.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...r]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,n)=>{let r=e?.find(i=>i.namespace===n);return r?(r.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:i})=>i===n)}),t[n]=r):t[n]=new Ne({namespace:n,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);let t=this.getAdapter(e);if(!t)throw new Error("adapter not found");await t.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let n=N.getConnectionStatus();f.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(N.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),t.on("switchNetwork",({address:r,chainId:i})=>{let o=this.getCaipNetworks().find(p=>p.id.toString()===i.toString()||p.caipNetworkId.toString()===i.toString()),a=c.state.activeChain===e,h=c.state.chains.get(e)?.accountState?.address;if(o){let p=a&&r?r:h;p&&this.syncAccount({address:p,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",()=>{let r=this.remoteFeatures.multiWallet,i=Array.from(k.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!r||i.length===0})}),t.on("connections",r=>{this.setConnections(r,e)}),t.on("pendingTransactions",()=>{let r=this.getAddress(e),i=c.state.activeCaipNetwork;!r||!i?.id||this.updateNativeBalance(r,i.id,i.chainNamespace)}),t.on("accountChanged",({address:r,chainId:i,connector:o})=>{this.handlePreviousConnectorConnection(o);let a=c.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));let h=c.getNetworkData(e)?.caipNetwork?.id,p=i||h;a&&p?this.syncAccount({address:r,chainId:p,chainNamespace:e}):!a&&p?(this.syncAccountInfo(r,p,e),this.syncBalance({address:r,chainId:p,chainNamespace:e})):this.syncAccountInfo(r,i,e),N.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){let t=e?.chain,n=e?.id,r=b.getConnectorId(t),i=f.state.remoteFeatures?.multiWallet,a=t&&n&&r&&r!==n&&!i;try{a&&await k.disconnect({id:r,namespace:t})}catch(h){console.warn("Error disconnecting previous connector",h)}}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>k.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();let e=this.getAddress();this.getCaipAddress()||N.deleteRecentWallet();let t=N.getRecentWallet();q.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:R.isMobile()?"mobile":"qrcode",name:t?.name||"Unknown",reconnect:!0,view:V.state.view,walletRank:t?.order}})}async syncNamespaceConnection(e){try{e===y.CHAIN.EVM&&R.isSafeApp()&&b.setConnectorId(y.CONNECTOR_ID.SAFE,e);let t=b.getConnectorId(e);switch(this.setStatus("connecting",e),t){case y.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case y.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){let{chainNamespace:t,closeModal:n}=e||{};c.resetAccount(t),c.resetNetwork(t),N.removeConnectedNamespace(t);let r=Array.from(c.state.chains.keys());(t?[t]:r).forEach(o=>N.addDisconnectedConnectorId(b.getConnectorId(o)||"",o)),b.removeConnectorId(t),I.resetChain(t),this.setUser(null,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(null,t),n!==!1&&z.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{let t=this.getAdapter(e),n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return t?.syncConnections({connectToFirstConnector:!n,caipNetwork:r})}))}async syncAdapterConnection(e){let t=this.getAdapter(e),n=this.getCaipNetwork(e),r=b.getConnectorId(e),o=b.getConnectors(e).find(a=>a.id===r);try{if(!t||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");let a=await t?.syncConnection({namespace:e,id:o.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),q.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:V.state.view,walletRank:o?.explorerWallet?.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){let e=Object.keys(this.universalProvider?.session?.namespaces||{}),t=this.chainNamespaces.map(async n=>{let r=this.getAdapter(n);if(!r)return;let i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=c.state.activeCaipNetwork?.id,a=i.find(p=>{let{chainId:m}=J.parseCaipAddress(p);return m===o?.toString()})||i[0];if(a){let p=J.validateCaipAddress(a),{chainId:m,address:A}=J.parseCaipAddress(p);if(I.setProviderId(n,L.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&c.state.activeCaipNetwork&&r.namespace!==y.CHAIN.EVM){let S=r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:c.state.activeCaipNetwork});I.setProvider(n,S)}else I.setProvider(n,this.universalProvider);b.setConnectorId(y.CONNECTOR_ID.WALLET_CONNECT,n),N.addConnectedNamespace(n),await this.syncAccount({address:A,chainId:m,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);let h=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(n),c.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:h.approvedCaipNetworkIds,supportsAllNetworks:h.supportsAllNetworks})});await Promise.all(t)}syncProvider({type:e,provider:t,id:n,chainNamespace:r}){I.setProviderId(r,e),I.setProvider(r,t),b.setConnectorId(n,r)}async syncAccount(e){let t=e.chainNamespace===c.state.activeChain,n=c.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:r,chainId:i,chainNamespace:o}=e,{chainId:a}=N.getActiveNetworkProps(),h=n?.id||a,p=c.state.activeCaipNetwork?.name===y.UNSUPPORTED_NETWORK_NAME,m=c.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(p&&!m)&&h){let A=this.getCaipNetworks().find(T=>T.id.toString()===h.toString()),S=this.getCaipNetworks().find(T=>T.chainNamespace===o);if(!m&&!A&&!S){let T=this.getApprovedCaipNetworkIds()||[],M=T.find(U=>J.parseCaipNetworkId(U)?.chainId===h.toString()),x=T.find(U=>J.parseCaipNetworkId(U)?.chainNamespace===o);A=this.getCaipNetworks().find(U=>U.caipNetworkId===M),S=this.getCaipNetworks().find(U=>U.caipNetworkId===x||"deprecatedCaipNetworkId"in U&&U.deprecatedCaipNetworkId===x)}let E=A||S;E?.chainNamespace===c.state.activeChain?f.state.enableNetworkSwitch&&!f.state.allowUnsupportedChain&&c.state.activeCaipNetwork?.name===y.UNSUPPORTED_NETWORK_NAME?c.showUnsupportedChainUI():this.setCaipNetwork(E):t||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o);let v=this.getAddress(o);se.isLowerCaseMatch(r,v)||this.syncAccountInfo(r,E?.id,o),t?await this.syncBalance({address:r,chainId:E?.id,chainNamespace:o}):await this.syncBalance({address:r,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:r,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,t,n){let r=this.getCaipAddress(n),i=t||r?.split(":")[1];if(!i)return;let o=`${n}:${i}:${e}`;this.setCaipAddress(o,n,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,t){try{let n=await this.getReownName(e);if(n[0]){let r=n[0];this.setProfileName(r.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=b.getConnectorId(e),n=I.getProviderId(e);if(n===L.CONNECTOR_TYPE_ANNOUNCED||n===L.CONNECTOR_TYPE_INJECTED){if(t){let i=this.getConnectors().find(o=>{let a=o.id===t,h=o.info?.rdns===t,p=o.connectors?.some(m=>m.id===t||m.info?.rdns===t);return a||h||!!p});if(i){let{info:o,name:a,imageUrl:h}=i,p=h||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:p,...o},e)}}}else if(n===L.CONNECTOR_TYPE_WALLET_CONNECT){let r=I.getProvider(e);r?.session&&this.setConnectedWalletInfo({...r.session.peer.metadata,name:r.session.peer.metadata.name,icon:r.session.peer.metadata.icons?.[0]},e)}else if(t&&(t===y.CONNECTOR_ID.COINBASE_SDK||t===y.CONNECTOR_ID.COINBASE)){let r=this.getConnectors().find(h=>h.id===t),i=r?.name||"Coinbase Wallet",o=r?.imageUrl||this.getConnectorImage(r),a=r?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!ot.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,n){let r=this.getAdapter(n),i=c.getCaipNetworkByNamespace(n,t);if(r){let o=await r.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){let e=vt.createLogger((r,...i)=>{r&&this.handleAlertError(r),console.error(...i)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};f.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await mt.init(t);let n=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await n()}catch(r){if(r instanceof Error&&r.message.includes("Missing or invalid. Record was recently deleted"))return;throw r}},f.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{ge.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:t=>{k.setUri(t)},onConnect:t=>{let{address:n}=R.getAccount(t[0]);for(let r of this.chainNamespaces)N.removeDisconnectedConnectorId(y.CONNECTOR_ID.WALLET_CONNECT,r);k.finalizeWcConnection(n)},onDisconnect:()=>{c.state.noAdapters&&this.resetAccount(e),k.resetWcConnection()},onChainChanged:t=>{let n=c.state.activeChain,r=n&&b.state.activeConnectorIds[n]===y.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(c.state.noAdapters||r)){let i=this.getCaipNetworks().find(a=>a.id.toString()===t.toString()||a.caipNetworkId.toString()===t.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(t);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:t=>{let n=c.state.activeChain,r=n&&b.state.activeConnectorIds[n]===y.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(c.state.noAdapters||r)){let i=t?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&R.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){q.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){let e=c.getAllApprovedCaipNetworkIds(),t=c.getAllRequestedCaipNetworks();return R.sortRequestedNetworks(e,t).filter(r=>c.isCaipNetworkDisabled(r))}handleAlertError(e){let t=Object.entries(F.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,r]=t??[],{message:i,alertErrorKey:o}=r??{};if(n&&i&&!this.reportedAlertErrors[n]){let a=F.ALERT_ERRORS[o];a&&(_.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let n=e;n.namespace=t,n.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:r})=>r===t)}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=n)}async open(e){await this.injectModalUi(),e?.uri&&k.setUri(e.uri);let{isSwap:t,isSend:n}=this.toModalOptions();return t(e)?z.open({...e,data:{swap:e.arguments}}):n(e)&&e.arguments?this.openSend(e.arguments):z.open(e)}async close(){await this.injectModalUi(),z.close()}setLoading(e,t){z.setLoading(e,t)}async disconnect(e){await k.disconnect({namespace:e})}getSIWX(){return f.state.siwx}getError(){return""}getChainId(){return c.state.activeCaipNetwork?.id}async switchNetwork(e,{throwOnFailure:t=!1}={}){let n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){_.open(F.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await c.switchActiveNetwork(n,{throwOnFailure:t})}getWalletProvider(){return c.state.activeChain?I.state.providers[c.state.activeChain]:null}getWalletProviderType(){return I.getProviderId(c.state.activeChain)}subscribeProviders(e){return I.subscribeProviders(e)}getThemeMode(){return K.state.themeMode}getThemeVariables(){return K.state.themeVariables}setThemeMode(e){K.setThemeMode(e),At(K.state.themeMode)}setTermsConditionsUrl(e){f.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){f.setPrivacyPolicyUrl(e)}setThemeVariables(e){K.setThemeVariables(e),Et(K.state.themeVariables)}subscribeTheme(e){return K.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?k.subscribe(e):(_.open(y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?c.state.chains.get(e)?.accountState?.connectedWalletInfo:c.getAccountData()?.connectedWalletInfo}getAccount(e){let t=e||c.state.activeChain,n=b.getAuthConnector(t),r=c.getAccountData(t),i=N.getConnectedConnectorId(c.state.activeChain),o=k.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");let a=o.flatMap(h=>h.accounts.map(({address:p,type:m,publicKey:A})=>R.createAccount(t,p,m||"eoa",A)));if(r)return{allAccounts:a,caipAddress:r.caipAddress,address:R.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===y.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:N.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:le(t),isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let n=()=>{let r=this.getAccount(t);r&&e(r)};t?c.subscribeChainProp("accountState",n,t):c.subscribe(n),b.subscribe(n)}subscribeNetwork(e){return c.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e,t){return t?c.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo),t):c.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){c.subscribeChainProp("accountState",t=>e(t?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){c.subscribeKey("activeCaipNetwork",e)}getState(){return ee.state}getRemoteFeatures(){return f.state.remoteFeatures}subscribeState(e){return ee.subscribe(e)}subscribeRemoteFeatures(e){return f.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Be.showError(e)}showSuccessMessage(e){Be.showSuccess(e)}getEvent(){return{...q.state}}subscribeEvents(e){return q.subscribe(e)}replace(e){V.replace(e)}redirect(e){V.push(e)}popTransactionStack(e){V.popTransactionStack(e)}isOpen(){return z.state.open}isTransactionStackEmpty(){return V.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){f.setFeatures(e)}updateRemoteFeatures(e){f.setRemoteFeatures(e)}updateOptions(e){let n={...f.state||{},...e};f.setOptions(n)}setConnectMethodsOrder(e){f.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){f.setWalletFeaturesOrder(e)}setCollapseWallets(e){f.setCollapseWallets(e)}setSocialsOrder(e){f.setSocialsOrder(e)}getConnectMethodsOrder(){return lt.getConnectOrderMethod(f.state.features,b.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let n=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(r=>r.id===n.id)||c.addNetwork(n)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(r=>r.id===t)&&c.removeNetwork(e,t)}};var Pt=!1,Ie=class extends Te{async onAuthProviderConnected(e){let t=se.userChainIdToChainNamespace(e?.chainId);if(e.message&&e.signature&&e.siwxMessage&&await te.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!t)throw new Error("AppKit:onAuthProviderConnected - namespace is required");let n=t===y.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,r=f.state.defaultAccountTypes[t],i=le(t),o=e.preferredAccountType||i||r;this.setCaipAddress(n,t);let{signature:a,siwxMessage:h,message:p,...m}=e,A=c.getAccountData(t);this.setUser({...A?.user||{},...m},t),this.setSmartAccountDeployed(!!e.smartAccountDeployed,t),this.setPreferredAccountType(o,t),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:t})]),this.setLoading(!1,t)}setupAuthConnectorListeners(e){e.onRpcRequest(t=>{we.checkIfRequestExists(t)?we.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Le.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Le.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,n)=>{let r=we.checkIfRequestIsSafe(n),i=this.getAddress(),o=c.state.activeCaipNetwork;r||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{let t=c.state.activeChain;if(!t)throw new Error("AppKit:onNotConnected - namespace is required");b.getConnectorId(t)===y.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,t),this.setLoading(!1,t))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:t,type:n})=>{let r=c.state.activeChain;if(!r)throw new Error("AppKit:onSetPreferredAccount - namespace is required");t&&this.setPreferredAccountType(n,r)})}async syncAuthConnectorTheme(e){if(!e)return;let t=K.getSnapshot();await e.syncTheme({themeMode:t.themeMode,themeVariables:t.themeVariables,w3mThemeVariables:at(t.themeVariables,t.themeMode)})}async syncAuthConnector(e,t){let n=y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t),r=t===c.state.activeChain;if(!n)return;this.setLoading(!0,t);let i=e.getLoginEmailUsed();this.setLoading(i,t),i&&this.setStatus("connecting",t);let o=e.getEmail(),a=e.getUsername(),h=c.getAccountData(t)?.user||{};this.setUser({...h,username:a,email:o},t),this.setupAuthConnectorListeners(e);let{isConnected:p}=await e.isConnected();if(t&&n&&r)if(p&&this.connectionControllerClient?.connectExternal){await e.init(),await this.syncAuthConnectorTheme(e),await this.connectionControllerClient?.connectExternal({id:y.CONNECTOR_ID.AUTH,info:{name:y.CONNECTOR_ID.AUTH},type:L.CONNECTOR_TYPE_AUTH,provider:e,chainId:c.getNetworkData(t)?.caipNetwork?.id,chain:t}),this.setStatus("connected",t);let m=N.getConnectedSocialProvider();m?q.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:m,reconnect:!0}}):q.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0,view:V.state.view,walletRank:void 0}})}else b.getConnectorId(t)===y.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),N.removeConnectedNamespace(t));this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!R.isTelegram())return;let t=N.getTelegramSocialProvider();if(!t||!R.isClient())return;let r=new URL(window.location.href).searchParams.get("result_uri");if(!r)return;t&&c.setAccountProp("socialProvider",t,e),await this.authProvider?.init();let i=b.getAuthConnector();t&&i&&(this.setLoading(!0,e),await k.connectExternal({id:i.id,type:i.type,socialUri:r},i.chain),N.setConnectedSocialProvider(t),N.removeTelegramSocialProvider(),q.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let n=this.remoteFeatures?.email,r=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||r,a=se.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=Ee.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:F.EmbeddedWalletAbortController,onTimeout:p=>{p==="iframe_load_failed"?_.open(F.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):p==="iframe_request_timeout"?_.open(F.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):p==="unverified_domain"&&_.open(F.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:p=>ut(p),getCaipNetworks:p=>c.getCaipNetworks(p)}),ee.subscribeOpen(p=>{!p&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));let h=e===c.state.activeChain&&f.state.enableReconnect;f.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&h&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&H.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=c.state.activeChain,n=e.chainNamespace,r=this.getAddressByChainNamespace(n);if(n===t&&c.getAccountData(n)?.caipAddress)await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e);else{let a=I.getProviderId(t)===L.CONNECTOR_TYPE_AUTH,h=I.getProviderId(n),p=h===L.CONNECTOR_TYPE_AUTH,m=y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&h===void 0||p)&&m)try{c.state.activeChain=e.chainNamespace,r?await this.getAdapter(n)?.switchNetwork({caipNetwork:e}):await this.connectionControllerClient?.connectExternal?.({id:y.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:L.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e})}else h===L.CONNECTOR_TYPE_WALLET_CONNECT?(c.state.noAdapters||await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:n}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t)}),await this.injectModalUi(),ee.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:n}){let r=`${n}:${t}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===r)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}let o=b.getConnectorId(n)===y.CONNECTOR_ID.AUTH;try{let{name:a,avatar:h}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(h,n))}catch{t!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){let t=I.getProviderId(e);if(t===L.CONNECTOR_TYPE_AUTH){let n=this.authProvider;if(n){let r=N.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:r},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(R.isClient()&&!Pt)try{let e={...P.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),R.isClient()&&!document.querySelector("w3m-modal")){let r=document.createElement("w3m-modal");!f.state.disableAppend&&!f.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}Pt=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!R.isClient())return;let n=[];(t.email||t.socials&&t.socials.length>0)&&n.push(import("./embedded-wallet-FKC4QT2I.js")),t.email&&n.push(import("./email-DFXOFOMC.js")),t.socials&&n.push(import("./socials-ILKFSQCD.js")),t.swaps&&t.swaps.length>0&&n.push(import("./swaps-J3Z4OLEH.js")),e.send&&n.push(import("./send-TOJTP2CO.js")),e.receive&&n.push(import("./receive-ZGSBR6Y5.js")),t.onramp&&t.onramp.length>0&&n.push(import("./onramp-G4YOFA63.js")),t.payWithExchange&&n.push(import("./pay-with-exchange-LPJC6TIO.js")),t.activity&&n.push(import("./transactions-6XL4IK24.js")),(e.pay||t.payments)&&n.push(import("./exports-FWX4VNLY.js")),t.emailCapture&&n.push(import("./data-capture-SDYLCHXA.js")),await Promise.all([...n,import("./exports-GOFIIOLQ.js"),import("./w3m-modal-G3POF72P.js")])}};l();u();d();l();u();d();var Rt="1.8.16";l();u();d();l();u();d();l();u();d();var ue=Y(X(),1);l();u();d();l();u();d();var ps=new Set(["children","localName","ref","style","className"]),Ut=new WeakMap,_t=(s,e,t,n,r)=>{let i=r?.[e];i===void 0?(s[e]=t,t==null&&e in HTMLElement.prototype&&s.removeAttribute(e)):t!==n&&((o,a,h)=>{let p=Ut.get(o);p===void 0&&Ut.set(o,p=new Map);let m=p.get(a);h!==void 0?m===void 0?(p.set(a,m={handleEvent:h}),o.addEventListener(a,m)):m.handleEvent=h:m!==void 0&&(p.delete(a),o.removeEventListener(a,m))})(s,i,t)},re=({react:s,tagName:e,elementClass:t,events:n,displayName:r})=>{let i=new Set(Object.keys(n??{})),o=s.forwardRef((a,h)=>{let p=s.useRef(new Map),m=s.useRef(null),A={},S={};for(let[E,v]of Object.entries(a))ps.has(E)?A[E==="className"?"class":E]=v:i.has(E)||E in t.prototype?S[E]=v:A[E]=v;return s.useLayoutEffect(()=>{if(m.current===null)return;let E=new Map;for(let v in S)_t(m.current,v,a[v],p.current.get(v),n),p.current.delete(v),E.set(v,a[v]);for(let[v,T]of p.current)_t(m.current,v,void 0,T,n);p.current=E}),s.useLayoutEffect(()=>{m.current?.removeAttribute("defer-hydration")},[]),A.suppressHydrationWarning=!0,s.createElement(e,{...A,ref:s.useCallback(E=>{m.current=E,typeof h=="function"?h(E):h!==null&&(h.current=E)},[h])})});return o.displayName=r??t.name,o};var fs=re({tagName:"appkit-button",elementClass:bt,react:ue.default}),ms=re({tagName:"appkit-network-button",elementClass:It,react:ue.default}),Cs=re({tagName:"appkit-connect-button",elementClass:Tt,react:ue.default}),ws=re({tagName:"appkit-account-button",elementClass:Nt,react:ue.default});l();u();d();var Ur=Y(X(),1);var Se;function gs(s){return Se||(Se=new Ie({...s,sdkVersion:R.generateSdkVersion(s.adapters??[],"react",Rt)}),kt(Se)),Se}l();u();d();l();u();d();l();u();d();var ys={setTimeout:(s,e)=>setTimeout(s,e),clearTimeout:s=>clearTimeout(s),setInterval:(s,e)=>setInterval(s,e),clearInterval:s=>clearInterval(s)},vs=class{#e=ys;#s=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,e){return this.#e.setTimeout(s,e)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,e){return this.#e.setInterval(s,e)}clearInterval(s){this.#e.clearInterval(s)}},he=new vs;function Ft(s){setTimeout(s,0)}var G=typeof window>"u"||"Deno"in globalThis;function D(){}function xt(s,e){return typeof s=="function"?s(e):s}function Lt(s){return typeof s=="number"&&s>=0&&s!==1/0}function Wt(s,e){return Math.max(s+(e||0)-Date.now(),0)}function pe(s,e){return typeof s=="function"?s(e):s}function Bt(s,e){return typeof s=="function"?s(e):s}function ke(s,e){let{type:t="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:a}=s;if(o){if(n){if(e.queryHash!==fe(o,e.options))return!1}else if(!Z(e.queryKey,o))return!1}if(t!=="all"){let h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function Oe(s,e){let{exact:t,status:n,predicate:r,mutationKey:i}=s;if(i){if(!e.options.mutationKey)return!1;if(t){if(j(e.options.mutationKey)!==j(i))return!1}else if(!Z(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function fe(s,e){return(e?.queryKeyHashFn||j)(s)}function j(s){return JSON.stringify(s,(e,t)=>He(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function Z(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(e).every(t=>Z(s[t],e[t])):!1}var As=Object.prototype.hasOwnProperty;function Ve(s,e,t=0){if(s===e)return s;if(t>500)return e;let n=Dt(s)&&Dt(e);if(!n&&!(He(s)&&He(e)))return e;let i=(n?s:Object.keys(s)).length,o=n?e:Object.keys(e),a=o.length,h=n?new Array(a):{},p=0;for(let m=0;m<a;m++){let A=n?m:o[m],S=s[A],E=e[A];if(S===E){h[A]=S,(n?m<i:As.call(s,A))&&p++;continue}if(S===null||E===null||typeof S!="object"||typeof E!="object"){h[A]=E;continue}let v=Ve(S,E,t+1);h[A]=v,v===S&&p++}return i===a&&p===i?s:h}function qt(s,e){if(!e||Object.keys(s).length!==Object.keys(e).length)return!1;for(let t in s)if(s[t]!==e[t])return!1;return!0}function Dt(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function He(s){if(!Mt(s))return!1;let e=s.constructor;if(e===void 0)return!0;let t=e.prototype;return!(!Mt(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Mt(s){return Object.prototype.toString.call(s)==="[object Object]"}function Kt(s){return new Promise(e=>{he.setTimeout(e,s)})}function jt(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?Ve(s,e):e}function Qt(s,e,t=0){let n=[...s,e];return t&&n.length>t?n.slice(1):n}function Ht(s,e,t=0){let n=[e,...s];return t&&n.length>t?n.slice(0,-1):n}var ie=Symbol();function Pe(s,e){return!s.queryFn&&e?.initialPromise?()=>e.initialPromise:!s.queryFn||s.queryFn===ie?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function ze(s,e){return typeof s=="function"?s(...e):!!s}function Vt(s,e,t){let n=!1,r;return Object.defineProperty(s,"signal",{enumerable:!0,get:()=>(r??=e(),n||(n=!0,r.aborted?t():r.addEventListener("abort",t,{once:!0})),r)}),s}l();u();d();l();u();d();l();u();d();var zt=Ft;function Es(){let s=[],e=0,t=a=>{a()},n=a=>{a()},r=zt,i=a=>{e?s.push(a):r(()=>{t(a)})},o=()=>{let a=s;s=[],a.length&&r(()=>{n(()=>{a.forEach(h=>{t(h)})})})};return{batch:a=>{let h;e++;try{h=a()}finally{e--,e||o()}return h},batchCalls:a=>(...h)=>{i(()=>{a(...h)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{r=a}}}var O=Es();l();u();d();l();u();d();l();u();d();var Q=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var Ns=class extends Q{#e;#s;#t;constructor(){super(),this.#t=s=>{if(!G&&window.addEventListener){let e=()=>s();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(s){this.#t=s,this.#s?.(),this.#s=s(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){let s=this.isFocused();this.listeners.forEach(e=>{e(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Re=new Ns;l();u();d();var bs=class extends Q{#e=!0;#s;#t;constructor(){super(),this.#t=s=>{if(!G&&window.addEventListener){let e=()=>s(!0),t=()=>s(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(s){this.#t=s,this.#s?.(),this.#s=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(t=>{t(s)}))}isOnline(){return this.#e}},oe=new bs;l();u();d();function Gt(){let s,e,t=new Promise((r,i)=>{s=r,e=i});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}function Ts(s){return Math.min(1e3*2**s,3e4)}function Ge(s){return(s??"online")==="online"?oe.isOnline():!0}var Ue=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function _e(s){let e=!1,t=0,n,r=Gt(),i=()=>r.status!=="pending",o=T=>{if(!i()){let M=new Ue(T);S(M),s.onCancel?.(M)}},a=()=>{e=!0},h=()=>{e=!1},p=()=>Re.isFocused()&&(s.networkMode==="always"||oe.isOnline())&&s.canRun(),m=()=>Ge(s.networkMode)&&s.canRun(),A=T=>{i()||(n?.(),r.resolve(T))},S=T=>{i()||(n?.(),r.reject(T))},E=()=>new Promise(T=>{n=M=>{(i()||p())&&T(M)},s.onPause?.()}).then(()=>{n=void 0,i()||s.onContinue?.()}),v=()=>{if(i())return;let T,M=t===0?s.initialPromise:void 0;try{T=M??s.fn()}catch(x){T=Promise.reject(x)}Promise.resolve(T).then(A).catch(x=>{if(i())return;let U=s.retry??(G?0:3),ce=s.retryDelay??Ts,me=typeof ce=="function"?ce(t,x):ce,Ce=U===!0||typeof U=="number"&&t<U||typeof U=="function"&&U(t,x);if(e||!Ce){S(x);return}t++,s.onFail?.(t,x),Kt(me).then(()=>p()?void 0:E()).then(()=>{e?S(x):v()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(n?.(),r),cancelRetry:a,continueRetry:h,canStart:m,start:()=>(m()?v():E().then(v),r)}}l();u();d();var Fe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lt(this.gcTime)&&(this.#e=he.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(G?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(he.clearTimeout(this.#e),this.#e=void 0)}};var Xt=class extends Fe{#e;#s;#t;#r;#n;#o;#a;constructor(s){super(),this.#a=!1,this.#o=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#r=s.client,this.#t=this.#r.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=Yt(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(s){if(this.options={...this.#o,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){let e=Yt(this.options);e.data!==void 0&&(this.setState($t(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(s,e){let t=jt(this.state.data,s,this.options);return this.#i({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(s,e){this.#i({type:"setState",state:s,setStateOptions:e})}cancel(s){let e=this.#n?.promise;return this.#n?.cancel(s),e?e.then(D).catch(D):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Bt(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ie||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>pe(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Wt(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(e=>e!==s),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(s,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(s&&this.setOptions(s),!this.options.queryFn){let a=this.observers.find(h=>h.options.queryFn);a&&this.setOptions(a.options)}let t=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},r=()=>{let a=Pe(this.options,e),p=(()=>{let m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#a=!1,this.options.persister?this.options.persister(a,p,this):a(p)},o=(()=>{let a={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return n(a),a})();this.options.behavior?.onFetch(o,this),this.#s=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=_e({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:a=>{a instanceof Ue&&a.revert&&this.setState({...this.#s,fetchStatus:"idle"}),t.abort()},onFail:(a,h)=>{this.#i({type:"failed",failureCount:a,error:h})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{let a=await this.#n.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#t.config.onSuccess?.(a,this),this.#t.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof Ue){if(a.silent)return this.#n.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#i({type:"error",error:a}),this.#t.config.onError?.(a,this),this.#t.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#i(s){let e=t=>{switch(s.type){case"failed":return{...t,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Is(t.data,this.options),fetchMeta:s.meta??null};case"success":let n={...t,...$t(s.data,s.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#s=s.manual?n:void 0,n;case"error":let r=s.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...s.state}}};this.state=e(this.state),O.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:s})})}};function Is(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ge(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function $t(s,e){return{data:s,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Yt(s){let e=typeof s.initialData=="function"?s.initialData():s.initialData,t=e!==void 0,n=t?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Jt=class extends Q{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,e,t){let n=e.queryKey,r=e.queryHash??fe(n,e),i=this.get(r);return i||(i=new Xt({client:s,queryKey:n,queryHash:r,options:s.defaultQueryOptions(e),state:t,defaultOptions:s.getQueryDefaults(n)}),this.add(i)),i}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){let e=this.#e.get(s.queryHash);e&&(s.destroy(),e===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){O.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){let e={exact:!0,...s};return this.getAll().find(t=>ke(e,t))}findAll(s={}){let e=this.getAll();return Object.keys(s).length>0?e.filter(t=>ke(s,t)):e}notify(s){O.batch(()=>{this.listeners.forEach(e=>{e(s)})})}onFocus(){O.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){O.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}};l();u();d();l();u();d();var Zt=class extends Fe{#e;#s;#t;#r;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#t=s.mutationCache,this.#s=[],this.state=s.state||$e(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#s.includes(s)||(this.#s.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#s=this.#s.filter(e=>e!==s),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#s.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(s){let e=()=>{this.#n({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=_e({fn:()=>this.options.mutationFn?this.options.mutationFn(s,t):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let n=this.state.status==="pending",r=!this.#r.canStart();try{if(n)e();else{this.#n({type:"pending",variables:s,isPaused:r}),await this.#t.config.onMutate?.(s,this,t);let o=await this.options.onMutate?.(s,t);o!==this.state.context&&this.#n({type:"pending",context:o,variables:s,isPaused:r})}let i=await this.#r.start();return await this.#t.config.onSuccess?.(i,s,this.state.context,this,t),await this.options.onSuccess?.(i,s,this.state.context,t),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(i,null,s,this.state.context,t),this.#n({type:"success",data:i}),i}catch(i){try{await this.#t.config.onError?.(i,s,this.state.context,this,t)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,s,this.state.context,t)}catch(o){Promise.reject(o)}try{await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,t)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,s,this.state.context,t)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#t.runNext(this)}}#n(s){let e=t=>{switch(s.type){case"failed":return{...t,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...t,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:s.error,failureCount:t.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=e(this.state),O.batch(()=>{this.#s.forEach(t=>{t.onMutationUpdate(s)}),this.#t.notify({mutation:this,type:"updated",action:s})})}};function $e(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var es=class extends Q{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#s=new Map,this.#t=0}#e;#s;#t;build(s,e,t){let n=new Zt({client:s,mutationCache:this,mutationId:++this.#t,options:s.defaultMutationOptions(e),state:t});return this.add(n),n}add(s){this.#e.add(s);let e=De(s);if(typeof e=="string"){let t=this.#s.get(e);t?t.push(s):this.#s.set(e,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){let e=De(s);if(typeof e=="string"){let t=this.#s.get(e);if(t)if(t.length>1){let n=t.indexOf(s);n!==-1&&t.splice(n,1)}else t[0]===s&&this.#s.delete(e)}}this.notify({type:"removed",mutation:s})}canRun(s){let e=De(s);if(typeof e=="string"){let n=this.#s.get(e)?.find(r=>r.state.status==="pending");return!n||n===s}else return!0}runNext(s){let e=De(s);return typeof e=="string"?this.#s.get(e)?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){O.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#s.clear()})}getAll(){return Array.from(this.#e)}find(s){let e={exact:!0,...s};return this.getAll().find(t=>Oe(e,t))}findAll(s={}){return this.getAll().filter(e=>Oe(s,e))}notify(s){O.batch(()=>{this.listeners.forEach(e=>{e(s)})})}resumePausedMutations(){let s=this.getAll().filter(e=>e.state.isPaused);return O.batch(()=>Promise.all(s.map(e=>e.continue().catch(D))))}};function De(s){return s.options.scope?.id}l();u();d();function Ye(s){return{onFetch:(e,t)=>{let n=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[],a={pages:[],pageParams:[]},h=0,p=async()=>{let m=!1,A=v=>{Vt(v,()=>e.signal,()=>m=!0)},S=Pe(e.options,e.fetchOptions),E=async(v,T,M)=>{if(m)return Promise.reject();if(T==null&&v.pages.length)return Promise.resolve(v);let U=(()=>{let et={client:e.client,queryKey:e.queryKey,pageParam:T,direction:M?"backward":"forward",meta:e.options.meta};return A(et),et})(),ce=await S(U),{maxPages:me}=e.options,Ce=M?Ht:Qt;return{pages:Ce(v.pages,ce,me),pageParams:Ce(v.pageParams,T,me)}};if(r&&i.length){let v=r==="backward",T=v?Ss:ts,M={pages:i,pageParams:o},x=T(n,M);a=await E(M,x,v)}else{let v=s??i.length;do{let T=h===0?o[0]??n.initialPageParam:ts(n,a);if(h>0&&T==null)break;a=await E(a,T),h++}while(h<v)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function ts(s,{pages:e,pageParams:t}){let n=e.length-1;return e.length>0?s.getNextPageParam(e[n],e,t[n],t):void 0}function Ss(s,{pages:e,pageParams:t}){return e.length>0?s.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var ks=class{#e;#s;#t;#r;#n;#o;#a;#i;constructor(s={}){this.#e=s.queryCache||new Jt,this.#s=s.mutationCache||new es,this.#t=s.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Re.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=oe.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#s.findAll({...s,status:"pending"}).length}getQueryData(s){let e=this.defaultQueryOptions({queryKey:s});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(s){let e=this.defaultQueryOptions(s),t=this.#e.build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&t.isStaleByTime(pe(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:e,state:t})=>{let n=t.data;return[e,n]})}setQueryData(s,e,t){let n=this.defaultQueryOptions({queryKey:s}),i=this.#e.get(n.queryHash)?.state.data,o=xt(e,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...t,manual:!0})}setQueriesData(s,e,t){return O.batch(()=>this.#e.findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(s){let e=this.defaultQueryOptions({queryKey:s});return this.#e.get(e.queryHash)?.state}removeQueries(s){let e=this.#e;O.batch(()=>{e.findAll(s).forEach(t=>{e.remove(t)})})}resetQueries(s,e){let t=this.#e;return O.batch(()=>(t.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},e)))}cancelQueries(s,e={}){let t={revert:!0,...e},n=O.batch(()=>this.#e.findAll(s).map(r=>r.cancel(t)));return Promise.all(n).then(D).catch(D)}invalidateQueries(s,e={}){return O.batch(()=>(this.#e.findAll(s).forEach(t=>{t.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},e)))}refetchQueries(s,e={}){let t={...e,cancelRefetch:e.cancelRefetch??!0},n=O.batch(()=>this.#e.findAll(s).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(D)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(D)}fetchQuery(s){let e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);let t=this.#e.build(this,e);return t.isStaleByTime(pe(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(D).catch(D)}fetchInfiniteQuery(s){return s.behavior=Ye(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(D).catch(D)}ensureInfiniteQueryData(s){return s.behavior=Ye(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return oe.isOnline()?this.#s.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#s}getDefaultOptions(){return this.#t}setDefaultOptions(s){this.#t=s}setQueryDefaults(s,e){this.#r.set(j(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){let e=[...this.#r.values()],t={};return e.forEach(n=>{Z(s,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(s,e){this.#n.set(j(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){let e=[...this.#n.values()],t={};return e.forEach(n=>{Z(s,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(s){if(s._defaulted)return s;let e={...this.#t.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=fe(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ie&&(e.enabled=!1),e}defaultMutationOptions(s){return s?._defaulted?s:{...this.#t.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#s.clear()}};l();u();d();l();u();d();var Xe=class extends Q{#e;#s=void 0;#t;#r;constructor(s,e){super(),this.#e=s,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){let e=this.options;this.options=this.#e.defaultMutationOptions(s),qt(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),e?.mutationKey&&this.options.mutationKey&&j(e.mutationKey)!==j(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#o(s)}getCurrentResult(){return this.#s}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#n(),this.#o()}mutate(s,e){return this.#r=e,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(s)}#n(){let s=this.#t?.state??$e();this.#s={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#o(s){O.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#s.variables,t=this.#s.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#r.onSuccess?.(s.data,e,t,n)}catch(r){Promise.reject(r)}try{this.#r.onSettled?.(s.data,null,e,t,n)}catch(r){Promise.reject(r)}}else if(s?.type==="error"){try{this.#r.onError?.(s.error,e,t,n)}catch(r){Promise.reject(r)}try{this.#r.onSettled?.(void 0,s.error,e,t,n)}catch(r){Promise.reject(r)}}}this.listeners.forEach(e=>{e(this.#s)})})}};l();u();d();var ae=Y(X(),1),os=Y(is(),1),Je=ae.createContext(void 0),Ze=s=>{let e=ae.useContext(Je);if(s)return s;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Rs=({client:s,children:e})=>(ae.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),(0,os.jsx)(Je.Provider,{value:s,children:e}));l();u();d();l();u();d();var $=Y(X(),1);function Us(s,e){let t=Ze(e),[n]=$.useState(()=>new Xe(t,s));$.useEffect(()=>{n.setOptions(s)},[n,s]);let r=$.useSyncExternalStore($.useCallback(o=>n.subscribe(O.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=$.useCallback((o,a)=>{n.mutate(o,a).catch(D)},[n]);if(r.error&&ze(n.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}l();u();d();l();u();d();function B(s){return{formatters:void 0,fees:void 0,serializers:void 0,...s}}var Ja=B({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});l();u();d();l();u();d();l();u();d();l();u();d();var rc=B({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});l();u();d();var dc=B({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});l();u();d();var Nc=B({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),bc=B({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0}),Tc=B({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});l();u();d();l();u();d();var Rc=B({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"});l();u();d();var xc=B({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});export{ds as a,us as b,Ee as c,Xs as d,gs as e,ks as f,Rs as g,Us as h,Ja as i};
/*! Bundled license information:

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@lit/react/create-component.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
