import{b as Ms}from"./chunk-A7U5I7FQ.js";import{a as oi,b as ii,c as ai,d as st,e as vs,f as Ns,g as ci,h as Ie,i as Me,j as ot,k as _s,l as Lt,m as Bt,n as Ts,o as We,p as An}from"./chunk-3YVXFCSY.js";import"./chunk-4PLPFPWC.js";import"./chunk-ECJO7S2V.js";import{b as Pe,c as Le,d as Us}from"./chunk-W4MYE3I6.js";import"./chunk-LTN6YROF.js";import{A as Ls,F as Bs,G as Sn,M as Ge,N as xs,T as Os,V as En,a as As,b as Ss,c as Es,d as Is,f as Y,k as jt,q as xt,r as je,s as Rs,y as Ps}from"./chunk-N2WXLAZF.js";import"./chunk-BOTAV32Q.js";import"./chunk-X4QP7L3N.js";import{a as ys,b as kr,d as Cr,e as ws,f as bs,g as ks,i as Cs}from"./chunk-MHA2O77V.js";import"./chunk-EVEOQSJV.js";import"./chunk-6HHQFJDN.js";import"./chunk-NBB6K44E.js";import"./chunk-P6OKGMWB.js";import"./chunk-XVJ4QQYG.js";import"./chunk-MWGMXHZG.js";import"./chunk-QLVJW567.js";import"./chunk-7DJCKE43.js";import"./chunk-SA5NWCU7.js";import"./chunk-EDAA45PX.js";import"./chunk-S3KPEUSS.js";import"./chunk-V74C2HKT.js";import"./chunk-PPLSOLUM.js";import"./chunk-MKQASGGU.js";import"./chunk-DLVLGZ7R.js";import"./chunk-YCKXBVJA.js";import"./chunk-ZE7767IA.js";import"./chunk-ASCK67KS.js";import"./chunk-ZYZOIEZB.js";import"./chunk-6T7Q26JY.js";import"./chunk-3C4CKHE3.js";import"./chunk-K5RILM6W.js";import"./chunk-27YRW757.js";import"./chunk-SEJLZ3OT.js";import"./chunk-TI7CUUHJ.js";import"./chunk-NHUA5J6J.js";import"./chunk-4QOCBQPC.js";import"./chunk-PTZTZUDB.js";import"./chunk-RBOFKV5S.js";import"./chunk-Z6LVO3CP.js";import"./chunk-RL7GPJDA.js";import"./chunk-BDSQF46L.js";import"./chunk-N3PRX6SH.js";import"./chunk-MNAGPPOX.js";import"./chunk-EJ5H5H5L.js";import"./chunk-IPTO6NMX.js";import"./chunk-BI3DTO7P.js";import"./chunk-EEYGRRF2.js";import"./chunk-GLIZJUBT.js";import"./chunk-RLPEU2I3.js";import"./chunk-B2LU4KHT.js";import"./chunk-RZQOM5QR.js";import"./chunk-HQPTEMSB.js";import"./chunk-IDZGCU4F.js";import"./chunk-ZS2R6O6N.js";import"./chunk-SQN7L5MN.js";import{a as Ee}from"./chunk-7GZ7JYLK.js";import"./chunk-6HADIPAO.js";import"./chunk-2T4BE52W.js";import{a as cs}from"./chunk-3RVNKTWB.js";import"./chunk-XQOHLC2A.js";import"./chunk-OXOEMY67.js";import"./chunk-HXA2I3EV.js";import"./chunk-JKAT2LPR.js";import"./chunk-WVZCG2XE.js";import"./chunk-SH2H32CZ.js";import{a as br}from"./chunk-BDUWLAUS.js";import{a as $e,b as Ve,c as fs,d as wr,e as kn,f as ps,g as gs,h as ms,j as Cn}from"./chunk-OBMTZ2R2.js";import{c as ls}from"./chunk-6ZQQ3XQO.js";import"./chunk-J26BEOSD.js";import{a as pr}from"./chunk-MQMLE4BX.js";import{c as wn,e as ds,h as bn,j as gr,k as et,l as mr,p as Pt,t as hs,u as yr}from"./chunk-UHIHVU5C.js";import{K as us}from"./chunk-EDRI7XUL.js";import{d as fr,g as Ne,i as b,k,l as v,n as si,o as C}from"./chunk-JY5TIRRF.js";var Hs=fr((Ac,qs)=>{"use strict";b();C();k();var In=ii().Buffer;function bi(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var i=n.length,c=n.charAt(0),f=Math.log(i)/Math.log(256),_=Math.log(256)/Math.log(i);function I(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=In.from(M)),!In.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var Z=0,K=0,q=0,ee=M.length;q!==ee&&M[q]===0;)q++,Z++;for(var R=(ee-q)*_+1>>>0,Ue=new Uint8Array(R);q!==ee;){for(var J=M[q],Ae=0,ue=R-1;(J!==0||Ae<K)&&ue!==-1;ue--,Ae++)J+=256*Ue[ue]>>>0,Ue[ue]=J%i>>>0,J=J/i>>>0;if(J!==0)throw new Error("Non-zero carry");K=Ae,q++}for(var ie=R-K;ie!==R&&Ue[ie]===0;)ie++;for(var a=c.repeat(Z);ie<R;++ie)a+=n.charAt(Ue[ie]);return a}function U(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return In.alloc(0);for(var Z=0,K=0,q=0;M[Z]===c;)K++,Z++;for(var ee=(M.length-Z)*f+1>>>0,R=new Uint8Array(ee);Z<M.length;){var Ue=M.charCodeAt(Z);if(Ue>255)return;var J=e[Ue];if(J===255)return;for(var Ae=0,ue=ee-1;(J!==0||Ae<q)&&ue!==-1;ue--,Ae++)J+=i*R[ue]>>>0,R[ue]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");q=Ae,Z++}for(var ie=ee-q;ie!==ee&&R[ie]===0;)ie++;var a=In.allocUnsafe(K+(ee-ie));a.fill(0,0,K);for(var u=K;ie!==ee;)a[u++]=R[ie++];return a}function F(M){var Z=U(M);if(Z)return Z;throw new Error("Non-base"+i+" character")}return{encode:I,decodeUnsafe:U,decode:F}}qs.exports=bi});var Vs=fr((vc,$s)=>{b();C();k();var ki=Hs(),Ci="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";$s.exports=ki(Ci)});var No=fr(Kt=>{"use strict";b();C();k();Object.defineProperty(Kt,"__esModule",{value:!0});var zn;function wa(n){{let e=v.from(n);e.reverse();let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return zn.toBigInt(n,!1)}Kt.toBigIntLE=wa;function ba(n){{let e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return zn.toBigInt(n,!0)}Kt.toBigIntBE=ba;function ka(n,e){{let t=n.toString(16),r=v.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}return zn.fromBigInt(n,v.allocUnsafe(e),!1)}Kt.toBufferLE=ka;function Ca(n,e){{let t=n.toString(16);return v.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}return zn.fromBigInt(n,v.allocUnsafe(e),!0)}Kt.toBufferBE=Ca});b();C();k();var Qe=Ne(cs(),1);b();C();k();var Gt=As({connection:null}),kt={state:Gt,subscribeKey(n,e){return Is(Gt,n,e)},subscribe(n){return Ss(Gt,()=>n(Gt))},setConnection(n){Gt.connection=Es(n)}};b();C();k();b();C();k();si();b();C();k();b();C();k();var tt=BigInt(0),Te=BigInt(1),Ws=BigInt(2),ui=BigInt(8),li={zip215:!0};function di(n){let e=ms(n);return hs(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ds(n){let e=di(n),{Fp:t,n:r,prehash:s,hash:o,randomBytes:i,nByteLength:c,h:f}=e,_=Ws<<BigInt(c*8)-Te,I=t.create,U=kn(e.n,e.nBitLength);function F(h,g){let T=t.sqr(h),P=t.sqr(g),z=t.add(t.mul(e.a,T),P),H=t.add(t.ONE,t.mul(e.d,t.mul(T,P)));return t.eql(z,H)}if(!F(e.Gx,e.Gy))throw new Error("bad curve params: generator point");let M=e.uvRatio||((h,g)=>{try{return{isValid:!0,value:t.sqrt(h*t.inv(g))}}catch{return{isValid:!1,value:tt}}}),Z=e.adjustScalarBytes||(h=>h),K=e.domain||((h,g,T)=>{if(wn("phflag",T),g.length||T)throw new Error("Contexts/pre-hash are not supported");return h});function q(h,g,T=!1){let P=T?Te:tt;Pt("coordinate "+h,g,P,_)}function ee(h){if(!(h instanceof J))throw new Error("ExtendedPoint expected")}let R=yr((h,g)=>{let{ex:T,ey:P,ez:z}=h,H=h.is0();g==null&&(g=H?ui:t.inv(z));let X=I(T*g),V=I(P*g),j=I(z*g);if(H)return{x:tt,y:Te};if(j!==Te)throw new Error("invZ was invalid");return{x:X,y:V}}),Ue=yr(h=>{let{a:g,d:T}=e;if(h.is0())throw new Error("bad point: ZERO");let{ex:P,ey:z,ez:H,et:X}=h,V=I(P*P),j=I(z*z),te=I(H*H),ge=I(te*te),Se=I(V*g),Re=I(te*I(Se+j)),me=I(ge+I(T*I(V*j)));if(Re!==me)throw new Error("bad point: equation left != right (1)");let ke=I(P*z),ye=I(H*X);if(ke!==ye)throw new Error("bad point: equation left != right (2)");return!0});class J{constructor(g,T,P,z){q("x",g),q("y",T),q("z",P,!0),q("t",z),this.ex=g,this.ey=T,this.ez=P,this.et=z,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof J)throw new Error("extended point not allowed");let{x:T,y:P}=g||{};return q("x",T),q("y",P),new J(T,P,Te,I(T*P))}static normalizeZ(g){let T=wr(t,g.map(P=>P.ez));return g.map((P,z)=>P.toAffine(T[z])).map(J.fromAffine)}static msm(g,T){return gs(J,U,g,T)}_setWindowSize(g){ie.setWindowSize(this,g)}assertValidity(){Ue(this)}equals(g){ee(g);let{ex:T,ey:P,ez:z}=this,{ex:H,ey:X,ez:V}=g,j=I(T*V),te=I(H*z),ge=I(P*V),Se=I(X*z);return j===te&&ge===Se}is0(){return this.equals(J.ZERO)}negate(){return new J(I(-this.ex),this.ey,this.ez,I(-this.et))}double(){let{a:g}=e,{ex:T,ey:P,ez:z}=this,H=I(T*T),X=I(P*P),V=I(Ws*I(z*z)),j=I(g*H),te=T+P,ge=I(I(te*te)-H-X),Se=j+X,Re=Se-V,me=j-X,ke=I(ge*Re),ye=I(Se*me),he=I(ge*me),ae=I(Re*Se);return new J(ke,ye,ae,he)}add(g){ee(g);let{a:T,d:P}=e,{ex:z,ey:H,ez:X,et:V}=this,{ex:j,ey:te,ez:ge,et:Se}=g,Re=I(z*j),me=I(H*te),ke=I(V*P*Se),ye=I(X*ge),he=I((z+H)*(j+te)-Re-me),ae=ye-ke,is=ye+ke,as=I(me-T*Re),ei=I(he*ae),ti=I(is*as),ni=I(he*as),ri=I(ae*is);return new J(ei,ti,ri,ni)}subtract(g){return this.add(g.negate())}wNAF(g){return ie.wNAFCached(this,g,J.normalizeZ)}multiply(g){let T=g;Pt("scalar",T,Te,r);let{p:P,f:z}=this.wNAF(T);return J.normalizeZ([P,z])[0]}multiplyUnsafe(g,T=J.ZERO){let P=g;return Pt("scalar",P,tt,r),P===tt?ue:this.is0()||P===Te?this:ie.wNAFCachedUnsafe(this,P,J.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return ie.unsafeLadder(this,r).is0()}toAffine(g){return R(this,g)}clearCofactor(){let{h:g}=e;return g===Te?this:this.multiplyUnsafe(g)}static fromHex(g,T=!1){let{d:P,a:z}=e,H=t.BYTES;g=et("pointHex",g,H),wn("zip215",T);let X=g.slice(),V=g[H-1];X[H-1]=V&-129;let j=bn(X),te=T?_:t.ORDER;Pt("pointHex.y",j,tt,te);let ge=I(j*j),Se=I(ge-Te),Re=I(P*ge-z),{isValid:me,value:ke}=M(Se,Re);if(!me)throw new Error("Point.fromHex: invalid y coordinate");let ye=(ke&Te)===Te,he=(V&128)!==0;if(!T&&ke===tt&&he)throw new Error("Point.fromHex: x=0 and x_0=1");return he!==ye&&(ke=I(-ke)),J.fromAffine({x:ke,y:j})}static fromPrivateKey(g){let{scalar:T}=l(g);return Ae.multiply(T)}toRawBytes(){let{x:g,y:T}=this.toAffine(),P=gr(T,t.BYTES);return P[P.length-1]|=g&Te?128:0,P}toHex(){return ds(this.toRawBytes())}}J.BASE=new J(e.Gx,e.Gy,Te,I(e.Gx*e.Gy)),J.ZERO=new J(tt,Te,Te,tt);let{BASE:Ae,ZERO:ue}=J,ie=ps(J,c*8);function a(h){return $e(h,r)}function u(h){return a(bn(h))}function l(h){let g=t.BYTES;h=et("private key",h,g);let T=et("hashed private key",o(h),2*g),P=Z(T.slice(0,g)),z=T.slice(g,2*g),H=u(P);return{head:P,prefix:z,scalar:H}}function A(h){let{head:g,prefix:T,scalar:P}=l(h),z=Ae.multiply(P),H=z.toRawBytes();return{head:g,prefix:T,scalar:P,point:z,pointBytes:H}}function m(h){return A(h).pointBytes}function w(h=Uint8Array.of(),...g){let T=mr(...g);return u(o(K(T,et("context",h),!!s)))}function N(h,g,T={}){h=et("message",h),s&&(h=s(h));let{prefix:P,scalar:z,pointBytes:H}=A(g),X=w(T.context,P,h),V=Ae.multiply(X).toRawBytes(),j=w(T.context,V,H,h),te=a(X+j*z);Pt("signature.s",te,tt,r);let ge=mr(V,gr(te,t.BYTES));return et("result",ge,t.BYTES*2)}let p=li;function y(h,g,T,P=p){let{context:z,zip215:H}=P,X=t.BYTES;h=et("signature",h,2*X),g=et("message",g),T=et("publicKey",T,X),H!==void 0&&wn("zip215",H),s&&(g=s(g));let V=bn(h.slice(X,2*X)),j,te,ge;try{j=J.fromHex(T,H),te=J.fromHex(h.slice(0,X),H),ge=Ae.multiplyUnsafe(V)}catch{return!1}if(!H&&j.isSmallOrder())return!1;let Se=w(z,te.toRawBytes(),j.toRawBytes(),g);return te.add(j.multiplyUnsafe(Se)).subtract(ge).clearCofactor().equals(J.ZERO)}return Ae._setWindowSize(8),{CURVE:e,getPublicKey:m,sign:N,verify:y,ExtendedPoint:J,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>i(t.BYTES),precompute(h=8,g=J.BASE){return g._setWindowSize(h),g.multiply(BigInt(3)),g}}}}var Ar=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),zs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),mc=BigInt(0),hi=BigInt(1),Ks=BigInt(2),yc=BigInt(3),fi=BigInt(5),pi=BigInt(8);function gi(n){let e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),o=Ar,c=n*n%o*n%o,f=Ve(c,Ks,o)*c%o,_=Ve(f,hi,o)*n%o,I=Ve(_,fi,o)*_%o,U=Ve(I,e,o)*I%o,F=Ve(U,t,o)*U%o,M=Ve(F,r,o)*F%o,Z=Ve(M,s,o)*M%o,K=Ve(Z,s,o)*M%o,q=Ve(K,e,o)*I%o;return{pow_p_5_8:Ve(q,Ks,o)*n%o,b2:c}}function mi(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function yi(n,e){let t=Ar,r=$e(e*e*e,t),s=$e(r*r*e,t),o=gi(n*s).pow_p_5_8,i=$e(n*r*o,t),c=$e(e*i*i,t),f=i,_=$e(i*zs,t),I=c===n,U=c===$e(-n,t),F=c===$e(-n*zs,t);return I&&(i=f),(U||F)&&(i=_),fs(i,t)&&(i=$e(-i,t)),{isValid:I||U,value:i}}var Fs=kn(Ar,void 0,!0),wi={a:Fs.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:pi,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ls,randomBytes:us,adjustScalarBytes:mi,uvRatio:yi},Ct=Ds(wi);var Rr=Ne(oi()),Be=Ne(Vs());var Dt=Ne(ai()),d=Ne(st()),uo=Ne(st());b();C();k();var Sr=class extends TypeError{constructor(e,t){let r,{message:s,explanation:o,...i}=e,{path:c}=e,f=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(o??f),o!=null&&(this.cause=f),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}};function Ai(n){return Yt(n)&&typeof n[Symbol.iterator]=="function"}function Yt(n){return typeof n=="object"&&n!=null}function vn(n){return Yt(n)&&!Array.isArray(n)}function Ye(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Si(n){let{done:e,value:t}=n.next();return e?void 0:t}function Ei(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});let{path:s,branch:o}=e,{type:i}=t,{refinement:c,message:f=`Expected a value of type \`${i}\`${c?` with refinement \`${c}\``:""}, but received: \`${Ye(r)}\``}=n;return{value:r,type:i,refinement:c,key:s[s.length-1],path:s,branch:o,...n,message:f}}function*js(n,e,t,r){Ai(n)||(n=[n]);for(let s of n){let o=Ei(s,e,t,r);o&&(yield o)}}function*Er(n,e,t={}){let{path:r=[],branch:s=[n],coerce:o=!1,mask:i=!1}=t,c={path:r,branch:s,mask:i};o&&(n=e.coercer(n,c));let f="valid";for(let _ of e.validator(n,c))_.explanation=t.message,f="not_valid",yield[_,void 0];for(let[_,I,U]of e.entries(n,c)){let F=Er(I,U,{path:_===void 0?r:[...r,_],branch:_===void 0?s:[...s,I],coerce:o,mask:i,message:t.message});for(let M of F)M[0]?(f=M[0].refinement!=null?"not_refined":"not_valid",yield[M[0],void 0]):o&&(I=M[1],_===void 0?n=I:n instanceof Map?n.set(_,I):n instanceof Set?n.add(I):Yt(n)&&(I!==void 0||_ in n)&&(n[_]=I))}if(f!=="not_valid")for(let _ of e.refiner(n,c))_.explanation=t.message,f="not_refined",yield[_,void 0];f==="valid"&&(yield[void 0,n])}var ze=class{constructor(e){let{type:t,schema:r,validator:s,refiner:o,coercer:i=f=>f,entries:c=function*(){}}=e;this.type=t,this.schema=r,this.entries=c,this.coercer=i,s?this.validator=(f,_)=>{let I=s(f,_);return js(I,_,this,f)}:this.validator=()=>[],o?this.refiner=(f,_)=>{let I=o(f,_);return js(I,_,this,f)}:this.refiner=()=>[]}assert(e,t){return Gs(e,this,t)}create(e,t){return Ot(e,this,t)}is(e){return Ys(e,this)}mask(e,t){return Ii(e,this,t)}validate(e,t={}){return Jt(e,this,t)}};function Gs(n,e,t){let r=Jt(n,e,{message:t});if(r[0])throw r[0]}function Ot(n,e,t){let r=Jt(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function Ii(n,e,t){let r=Jt(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Ys(n,e){return!Jt(n,e)[0]}function Jt(n,e,t={}){let r=Er(n,e,t),s=Si(r);return s[0]?[new Sr(s[0],function*(){for(let i of r)i[0]&&(yield i[0])}),void 0]:[void 0,s[1]]}function At(n,e){return new ze({type:n,schema:null,validator:e})}function Js(){return At("any",()=>!0)}function W(n){return new ze({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(let[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ye(e)}`}})}function Je(){return At("boolean",n=>typeof n=="boolean")}function Nn(n){return At("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ye(e)}`)}function le(n){let e=Ye(n),t=typeof n;return new ze({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${Ye(r)}`}})}function vi(){return At("never",()=>!1)}function D(n){return new ze({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function S(){return At("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ye(n)}`)}function $(n){return new ze({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Ir(n,e){return new ze({type:"record",schema:null,*entries(t){if(Yt(t))for(let r in t){let s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return vn(t)||`Expected an object, but received: ${Ye(t)}`},coercer(t){return vn(t)?{...t}:t}})}function B(){return At("string",n=>typeof n=="string"||`Expected a string, but received: ${Ye(n)}`)}function _n(n){let e=vi();return new ze({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){let r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Ye(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function L(n){let e=Object.keys(n);return new ze({type:"type",schema:n,*entries(t){if(Yt(t))for(let r of e)yield[r,t[r],n[r]]},validator(t){return vn(t)||`Expected an object, but received: ${Ye(t)}`},coercer(t){return vn(t)?{...t}:t}})}function _e(n){let e=n.map(t=>t.type).join(" | ");return new ze({type:"union",schema:null,coercer(t,r){for(let s of n){let[o,i]=s.validate(t,{coerce:!0,mask:r.mask});if(!o)return i}return t},validator(t,r){let s=[];for(let o of n){let[...i]=Er(t,o,r),[c]=i;if(c[0])for(let[f]of i)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ye(t)}`,...s]}})}function St(){return At("unknown",()=>!0)}function Ut(n,e,t){return new ze({...n,coercer:(r,s)=>Ys(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Ni=Ne(ci());var Hc=Ct.utils.randomPrivateKey,Zs=()=>{let n=Ct.utils.randomPrivateKey(),e=Pr(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},Pr=Ct.getPublicKey;function Xs(n){try{return Ct.ExtendedPoint.fromHex(n),!0}catch{return!1}}var lo=(n,e)=>Ct.sign(n,e.slice(0,32)),_i=Ct.verify,se=n=>v.isBuffer(n)?n:n instanceof Uint8Array?v.from(n.buffer,n.byteOffset,n.byteLength):v.from(n),Lr=class{constructor(e){Object.assign(this,e)}encode(){return v.from((0,Dt.serialize)(Pn,this))}static decode(e){return(0,Dt.deserialize)(Pn,this,e)}static decodeUnchecked(e){return(0,Dt.deserializeUnchecked)(Pn,this,e)}};var Pn=new Map,ho,Ti=32,nn=32;function Ri(n){return n._bn!==void 0}var Qs=1,G=class n extends Lr{constructor(e){if(super({}),this._bn=void 0,Ri(e))this._bn=e._bn;else{if(typeof e=="string"){let t=Be.default.decode(e);if(t.length!=nn)throw new Error("Invalid public key input");this._bn=new Rr.default(t)}else this._bn=new Rr.default(e);if(this._bn.byteLength()>nn)throw new Error("Invalid public key input")}}static unique(){let e=new n(Qs);return Qs+=1,new n(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Be.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(v);if(e.length===nn)return e;let t=v.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let s=v.concat([e.toBuffer(),v.from(t),r.toBuffer()]),o=br(s);return new n(o)}static createProgramAddressSync(e,t){let r=v.alloc(0);e.forEach(function(o){if(o.length>Ti)throw new TypeError("Max seed length exceeded");r=v.concat([r,se(o)])}),r=v.concat([r,t.toBuffer(),v.from("ProgramDerivedAddress")]);let s=br(r);if(Xs(s))throw new Error("Invalid seeds, address must fall off the curve");return new n(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{let o=e.concat(v.from([r]));s=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new n(e);return Xs(t.toBytes())}};ho=G;G.default=new ho("11111111111111111111111111111111");Pn.set(G,{kind:"struct",fields:[["_bn","u256"]]});var $c=new G("BPFLoader1111111111111111111111111111111111"),Ln=1232,Pi=127,fo=64,Br=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Br.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var xr=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(xr.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Or=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Or.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Bn=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((o,i)=>{r.set(o.toBase58(),i)});let s=o=>{let i=r.get(o.toBase58());if(i===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return i};return e.map(o=>({programIdIndex:s(o.programId),accountKeyIndexes:o.keys.map(i=>s(i.pubkey)),data:o.data}))}},re=(n="publicKey")=>d.blob(32,n);var Mt=(n="string")=>{let e=d.struct([d.u32("length"),d.u32("lengthPadding"),d.blob(d.offset(d.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(o,i)=>t(o,i).chars.toString(),s.encode=(o,i,c)=>{let f={chars:v.from(o,"utf8")};return r(f,i,c)},s.alloc=o=>d.u32().span+d.u32().span+v.from(o,"utf8").length,s},Li=(n="authorized")=>d.struct([re("staker"),re("withdrawer")],n),Bi=(n="lockup")=>d.struct([d.ns64("unixTimestamp"),d.ns64("epoch"),re("custodian")],n),xi=(n="voteInit")=>d.struct([re("nodePubkey"),re("authorizedVoter"),re("authorizedWithdrawer"),d.u8("commission")],n),Oi=(n="voteAuthorizeWithSeedArgs")=>d.struct([d.u32("voteAuthorizationType"),re("currentAuthorityDerivedKeyOwnerPubkey"),Mt("currentAuthorityDerivedKeySeed"),re("newAuthorized")],n);function po(n,e){let t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){let o=e[s.property];if(Array.isArray(o))return o.length*t(s.elementLayout)}else if("fields"in s)return po({layout:s},e[s.property]);return 0},r=0;return n.layout.fields.forEach(s=>{r+=t(s)}),r}function Qt(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,(r&128)===0)break}return e}function en(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function be(n,e){if(!n)throw new Error(e||"Assertion failed")}var Ur=class n{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,s=i=>{let c=i.toBase58(),f=r.get(c);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,f)),f},o=s(t);o.isSigner=!0,o.isWritable=!0;for(let i of e){s(i.programId).isInvoked=!0;for(let c of i.keys){let f=s(c.pubkey);f.isSigner||=c.isSigner,f.isWritable||=c.isWritable}}return new n(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];be(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,f])=>f.isSigner&&f.isWritable),r=e.filter(([,f])=>f.isSigner&&!f.isWritable),s=e.filter(([,f])=>!f.isSigner&&f.isWritable),o=e.filter(([,f])=>!f.isSigner&&!f.isWritable),i={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{be(t.length>0,"Expected at least one writable signer key");let[f]=t[0];be(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let c=[...t.map(([f])=>new G(f)),...r.map(([f])=>new G(f)),...s.map(([f])=>new G(f)),...o.map(([f])=>new G(f))];return[i,c]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&i.isWritable),[s,o]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&!i.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){let r=new Array,s=new Array;for(let[o,i]of this.keyMetaMap.entries())if(t(i)){let c=new G(o),f=e.findIndex(_=>_.equals(c));f>=0&&(be(f<256,"Max lookup table index exceeded"),r.push(f),s.push(c),this.keyMetaMap.delete(o))}return[r,s]}},go="Reached end of buffer unexpectedly";function Tn(n){if(n.length===0)throw new Error(go);return n.shift()}function tn(n,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(go);return n.splice(...e)}var xn=class n{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new G(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Be.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Bn(this.staticAccountKeys)}static compile(e){let t=Ur.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),i=new Bn(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:Be.default.encode(c.data)}));return new n({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let r=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<o}else{let r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];en(t,e);let r=this.instructions.map(U=>{let{accounts:F,programIdIndex:M}=U,Z=Array.from(Be.default.decode(U.data)),K=[];en(K,F.length);let q=[];return en(q,Z.length),{programIdIndex:M,keyIndicesCount:v.from(K),keyIndices:F,dataLength:v.from(q),data:Z}}),s=[];en(s,r.length);let o=v.alloc(Ln);v.from(s).copy(o);let i=s.length;r.forEach(U=>{let M=d.struct([d.u8("programIdIndex"),d.blob(U.keyIndicesCount.length,"keyIndicesCount"),d.seq(d.u8("keyIndex"),U.keyIndices.length,"keyIndices"),d.blob(U.dataLength.length,"dataLength"),d.seq(d.u8("userdatum"),U.data.length,"data")]).encode(U,o,i);i+=M}),o=o.slice(0,i);let c=d.struct([d.blob(1,"numRequiredSignatures"),d.blob(1,"numReadonlySignedAccounts"),d.blob(1,"numReadonlyUnsignedAccounts"),d.blob(t.length,"keyCount"),d.seq(re("key"),e,"keys"),re("recentBlockhash")]),f={numRequiredSignatures:v.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:v.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:v.from([this.header.numReadonlyUnsignedAccounts]),keyCount:v.from(t),keys:this.accountKeys.map(U=>se(U.toBytes())),recentBlockhash:Be.default.decode(this.recentBlockhash)},_=v.alloc(2048),I=c.encode(f,_);return o.copy(_,I),_.slice(0,I+o.length)}static from(e){let t=[...e],r=Tn(t);if(r!==(r&Pi))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let s=Tn(t),o=Tn(t),i=Qt(t),c=[];for(let F=0;F<i;F++){let M=tn(t,0,nn);c.push(new G(v.from(M)))}let f=tn(t,0,nn),_=Qt(t),I=[];for(let F=0;F<_;F++){let M=Tn(t),Z=Qt(t),K=tn(t,0,Z),q=Qt(t),ee=tn(t,0,q),R=Be.default.encode(v.from(ee));I.push({programIdIndex:M,accounts:K,data:R})}let U={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:o},recentBlockhash:Be.default.encode(v.from(f)),accountKeys:c,instructions:I};return new n(U)}};var Ui=v.alloc(fo).fill(0),oe=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=v.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},de=class n{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new oe(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let K=0;K<t.length;K++)if(t[K].programId===void 0)throw new Error(`Transaction instruction index ${K} has undefined program id`);let s=[],o=[];t.forEach(K=>{K.keys.forEach(ee=>{o.push({...ee})});let q=K.programId.toString();s.includes(q)||s.push(q)}),s.forEach(K=>{o.push({pubkey:new G(K),isSigner:!1,isWritable:!1})});let i=[];o.forEach(K=>{let q=K.pubkey.toString(),ee=i.findIndex(R=>R.pubkey.toString()===q);ee>-1?(i[ee].isWritable=i[ee].isWritable||K.isWritable,i[ee].isSigner=i[ee].isSigner||K.isSigner):i.push(K)}),i.sort(function(K,q){if(K.isSigner!==q.isSigner)return K.isSigner?-1:1;if(K.isWritable!==q.isWritable)return K.isWritable?-1:1;let ee={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return K.pubkey.toBase58().localeCompare(q.pubkey.toBase58(),"en",ee)});let c=i.findIndex(K=>K.pubkey.equals(r));if(c>-1){let[K]=i.splice(c,1);K.isSigner=!0,K.isWritable=!0,i.unshift(K)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let K of this.signatures){let q=i.findIndex(ee=>ee.pubkey.equals(K.publicKey));if(q>-1)i[q].isSigner||(i[q].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${K.publicKey.toString()}`)}let f=0,_=0,I=0,U=[],F=[];i.forEach(({pubkey:K,isSigner:q,isWritable:ee})=>{q?(U.push(K.toString()),f+=1,ee||(_+=1)):(F.push(K.toString()),ee||(I+=1))});let M=U.concat(F),Z=t.map(K=>{let{data:q,programId:ee}=K;return{programIdIndex:M.indexOf(ee.toString()),accounts:K.keys.map(R=>M.indexOf(R.pubkey.toString())),data:Be.default.encode(q)}});return Z.forEach(K=>{be(K.programIdIndex>=0),K.accounts.forEach(q=>be(q>=0))}),new xn({header:{numRequiredSignatures:f,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:I},accountKeys:M,recentBlockhash:e,instructions:Z})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,o)=>t[o].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(r=>{let s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));let s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}let s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(s=>{let o=lo(r,s.secretKey);this._addSignature(s.publicKey,se(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){be(t.length===64);let r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=v.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:s,publicKey:o}of this.signatures)s===null?t&&(r.missing||=[]).push(o):_i(s,e,o.toBytes())||(r.invalid||=[]).push(o);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){let o=this._getMessageSignednessErrors(s,t);if(o){let i="Signature verification failed.";throw o.invalid&&(i+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),o.missing&&(i+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(i)}}return this._serialize(s)}_serialize(e){let{signatures:t}=this,r=[];en(r,t.length);let s=r.length+t.length*64+e.length,o=v.alloc(s);return be(t.length<256),v.from(r).copy(o,0),t.forEach(({signature:i},c)=>{i!==null&&(be(i.length===64,"signature has invalid length"),v.from(i).copy(o,r.length+c*64))}),e.copy(o,r.length+t.length*64),be(o.length<=Ln,`Transaction too large: ${o.length} > ${Ln}`),o}get keys(){return be(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return be(this.instructions.length===1),this.instructions[0].programId}get data(){return be(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],r=Qt(t),s=[];for(let o=0;o<r;o++){let i=tn(t,0,fo);s.push(Be.default.encode(v.from(i)))}return n.populate(xn.from(t),s)}static populate(e,t=[]){let r=new n;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,o)=>{let i={signature:s==Be.default.encode(Ui)?null:Be.default.decode(s),publicKey:e.accountKeys[o]};r.signatures.push(i)}),e.instructions.forEach(s=>{let o=s.accounts.map(i=>{let c=e.accountKeys[i];return{pubkey:c,isSigner:r.signatures.some(f=>f.publicKey.toString()===c.toString())||e.isAccountSigner(i),isWritable:e.isAccountWritable(i)}});r.instructions.push(new oe({keys:o,programId:e.accountKeys[s.programIdIndex],data:Be.default.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};var Mi=160,Wi=64,Di=Mi/Wi,zi=1e3/Di,it=new G("SysvarC1ock11111111111111111111111111111111"),Vc=new G("SysvarEpochSchedu1e111111111111111111111111"),jc=new G("Sysvar1nstructions1111111111111111111111111"),vr=new G("SysvarRecentB1ockHashes11111111111111111111"),rn=new G("SysvarRent111111111111111111111111111111111"),Gc=new G("SysvarRewards111111111111111111111111111111"),Yc=new G("SysvarS1otHashes111111111111111111111111111"),Jc=new G("SysvarS1otHistory11111111111111111111111111"),Nr=new G("SysvarStakeHistory1111111111111111111111111"),Mr=class extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:s}){let o=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",i="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${r}. `+o+i;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+o+i;break;default:c=`Unknown action '${(f=>f)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){let o=s.meta.logMessages;this.transactionLogs=o,t(o)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}};async function eo(n,e,t,r){let s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await n.sendTransaction(e,t,s),i;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)i=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:c}=e.nonceInfo,f=c.keys[0].pubkey;i=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(await n.confirmTransaction(o,r&&r.commitment)).value;if(i.err)throw o!=null?new Mr({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(i)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(i)})`);return o}function Ki(n){return new Promise(e=>setTimeout(e,n))}function ne(n,e){let t=n.layout.span>=0?n.layout.span:po(n,e),r=v.alloc(t),s=Object.assign({instruction:n.index},e);return n.layout.encode(s,r),r}var Fi=d.nu64("lamportsPerSignature"),qi=d.struct([d.u32("version"),d.u32("state"),re("authorizedPubkey"),re("nonce"),d.struct([Fi],"feeCalculator")]),to=qi.span;function Wt(n){let e=(0,uo.blob)(8,n),t=e.decode.bind(e),r=e.encode.bind(e),s=e,o=Ns();return s.decode=(i,c)=>{let f=t(i,c);return o.decode(f)},s.encode=(i,c,f)=>{let _=o.encode(i);return r(_,c,f)},s}var Ke=Object.freeze({Create:{index:0,layout:d.struct([d.u32("instruction"),d.ns64("lamports"),d.ns64("space"),re("programId")])},Assign:{index:1,layout:d.struct([d.u32("instruction"),re("programId")])},Transfer:{index:2,layout:d.struct([d.u32("instruction"),Wt("lamports")])},CreateWithSeed:{index:3,layout:d.struct([d.u32("instruction"),re("base"),Mt("seed"),d.ns64("lamports"),d.ns64("space"),re("programId")])},AdvanceNonceAccount:{index:4,layout:d.struct([d.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:d.struct([d.u32("instruction"),d.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:d.struct([d.u32("instruction"),re("authorized")])},AuthorizeNonceAccount:{index:7,layout:d.struct([d.u32("instruction"),re("authorized")])},Allocate:{index:8,layout:d.struct([d.u32("instruction"),d.ns64("space")])},AllocateWithSeed:{index:9,layout:d.struct([d.u32("instruction"),re("base"),Mt("seed"),d.ns64("space"),re("programId")])},AssignWithSeed:{index:10,layout:d.struct([d.u32("instruction"),re("base"),Mt("seed"),re("programId")])},TransferWithSeed:{index:11,layout:d.struct([d.u32("instruction"),Wt("lamports"),Mt("seed"),re("programId")])},UpgradeNonceAccount:{index:12,layout:d.struct([d.u32("instruction")])}}),ve=class n{constructor(){}static createAccount(e){let t=Ke.Create,r=ne(t,{lamports:e.lamports,space:e.space,programId:se(e.programId.toBuffer())});return new oe({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){let s=Ke.TransferWithSeed;t=ne(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:se(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let s=Ke.Transfer;t=ne(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){let s=Ke.AssignWithSeed;t=ne(s,{base:se(e.basePubkey.toBuffer()),seed:e.seed,programId:se(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=Ke.Assign;t=ne(s,{programId:se(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=Ke.CreateWithSeed,r=ne(t,{base:se(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:se(e.programId.toBuffer())}),s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new oe({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){let t=new de;"basePubkey"in e&&"seed"in e?t.add(n.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:to,programId:this.programId})):t.add(n.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:to,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=Ke.InitializeNonceAccount,r=ne(t,{authorized:se(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new oe(s)}static nonceAdvance(e){let t=Ke.AdvanceNonceAccount,r=ne(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new oe(s)}static nonceWithdraw(e){let t=Ke.WithdrawNonceAccount,r=ne(t,{lamports:e.lamports});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){let t=Ke.AuthorizeNonceAccount,r=ne(t,{authorized:se(e.newAuthorizedPubkey.toBuffer())});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){let s=Ke.AllocateWithSeed;t=ne(s,{base:se(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:se(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=Ke.Allocate;t=ne(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}};ve.programId=new G("11111111111111111111111111111111");var Hi=Ln-300,Wr=class n{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/n.chunkSize)+1+1)}static async load(e,t,r,s,o){{let U=await e.getMinimumBalanceForRentExemption(o.length),F=await e.getAccountInfo(r.publicKey,"confirmed"),M=null;if(F!==null){if(F.executable)return console.error("Program load failed, account is already executable"),!1;F.data.length!==o.length&&(M=M||new de,M.add(ve.allocate({accountPubkey:r.publicKey,space:o.length}))),F.owner.equals(s)||(M=M||new de,M.add(ve.assign({accountPubkey:r.publicKey,programId:s}))),F.lamports<U&&(M=M||new de,M.add(ve.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:U-F.lamports})))}else M=new de().add(ve.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:U>0?U:1,space:o.length,programId:s}));M!==null&&await eo(e,M,[t,r],{commitment:"confirmed"})}let i=d.struct([d.u32("instruction"),d.u32("offset"),d.u32("bytesLength"),d.u32("bytesLengthPadding"),d.seq(d.u8("byte"),d.offset(d.u32(),-8),"bytes")]),c=n.chunkSize,f=0,_=o,I=[];for(;_.length>0;){let U=_.slice(0,c),F=v.alloc(c+16);i.encode({instruction:0,offset:f,bytes:U,bytesLength:0,bytesLengthPadding:0},F);let M=new de().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:F});I.push(eo(e,M,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ki(1e3/4),f+=c,_=_.slice(c)}await Promise.all(I);{let U=d.struct([d.u32("instruction")]),F=v.alloc(U.span);U.encode({instruction:1},F);let M=new de().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:s,data:F}),Z="processed",K=await e.sendTransaction(M,[t,r],{preflightCommitment:Z}),{context:q,value:ee}=await e.confirmTransaction({signature:K,lastValidBlockHeight:M.lastValidBlockHeight,blockhash:M.recentBlockhash},Z);if(ee.err)throw new Error(`Transaction ${K} failed (${JSON.stringify(ee)})`);for(;;){try{if(await e.getSlot({commitment:Z})>q.slot)break}catch{}await new Promise(R=>setTimeout(R,Math.round(zi/2)))}}return!0}};Wr.chunkSize=Hi;var Zc=new G("BPFLoader2111111111111111111111111111111111");var Xc=globalThis.fetch;var Qc={index:1,layout:d.struct([d.u32("typeIndex"),Wt("deactivationSlot"),d.nu64("lastExtendedSlot"),d.u8("lastExtendedStartIndex"),d.u8(),d.seq(re(),d.offset(d.u8(),-1),"authority")])};var pe=Ut(Nn(G),B(),n=>new G(n)),mo=_n([B(),le("base64")]),$r=Ut(Nn(v),mo,n=>v.from(n[0],"base64")),eu=30*1e3;function yo(n){return _e([L({jsonrpc:le("2.0"),id:B(),result:n}),L({jsonrpc:le("2.0"),id:B(),error:L({code:St(),message:B(),data:$(Js())})})])}var $i=yo(St());function ce(n){return Ut(yo(n),$i,e=>"error"in e?e:{...e,result:Ot(e.result,n)})}function Ze(n){return ce(L({context:L({slot:S()}),value:n}))}function Wn(n){return L({context:L({slot:S()}),value:n})}var Vi=L({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),tu=ce(W(D(L({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:$(D(S()))})))),ji=W(L({slot:S(),prioritizationFee:S()})),Gi=L({total:S(),validator:S(),foundation:S(),epoch:S()}),Yi=L({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:$(S()),transactionCount:$(S())}),Ji=L({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:Je(),firstNormalEpoch:S(),firstNormalSlot:S()}),Zi=Ir(B(),W(S())),Et=D(_e([L({}),B()])),Xi=L({err:Et}),Qi=le("receivedSignature"),nu=L({"solana-core":B(),"feature-set":$(S())}),ea=L({program:B(),programId:pe,parsed:St()}),ta=L({programId:pe,accounts:W(pe),data:B()}),ru=Ze(L({err:D(_e([L({}),B()])),logs:D(W(B())),accounts:$(D(W(D(L({executable:Je(),owner:B(),lamports:S(),data:W(B()),rentEpoch:$(S())}))))),unitsConsumed:$(S()),returnData:$(D(L({programId:B(),data:_n([B(),le("base64")])}))),innerInstructions:$(D(W(L({index:S(),instructions:W(_e([ea,ta]))}))))})),su=Ze(L({byIdentity:Ir(B(),W(S())),range:L({firstSlot:S(),lastSlot:S()})}));var ou=ce(Vi),iu=ce(Gi),au=ce(ji),cu=ce(Yi),uu=ce(Ji),lu=ce(Zi),du=ce(S()),hu=Ze(L({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:W(pe)})),na=L({amount:B(),uiAmount:D(S()),decimals:S(),uiAmountString:$(B())}),fu=Ze(W(L({address:pe,amount:B(),uiAmount:D(S()),decimals:S(),uiAmountString:$(B())}))),pu=Ze(W(L({pubkey:pe,account:L({executable:Je(),owner:pe,lamports:S(),data:$r,rentEpoch:S()})}))),Dr=L({program:B(),parsed:St(),space:S()}),gu=Ze(W(L({pubkey:pe,account:L({executable:Je(),owner:pe,lamports:S(),data:Dr,rentEpoch:S()})}))),mu=Ze(W(L({lamports:S(),address:pe}))),Vr=L({executable:Je(),owner:pe,lamports:S(),data:$r,rentEpoch:S()}),yu=L({pubkey:pe,account:Vr}),ra=Ut(_e([Nn(v),Dr]),_e([mo,Dr]),n=>Array.isArray(n)?Ot(n,$r):n),sa=L({executable:Je(),owner:pe,lamports:S(),data:ra,rentEpoch:S()}),wu=L({pubkey:pe,account:sa}),bu=L({state:_e([le("active"),le("inactive"),le("activating"),le("deactivating")]),active:S(),inactive:S()}),ku=ce(W(L({signature:B(),slot:S(),err:Et,memo:D(B()),blockTime:$(D(S()))}))),Cu=ce(W(L({signature:B(),slot:S(),err:Et,memo:D(B()),blockTime:$(D(S()))}))),Au=L({subscription:S(),result:Wn(Vr)}),oa=L({pubkey:pe,account:Vr}),Su=L({subscription:S(),result:Wn(oa)}),ia=L({parent:S(),slot:S(),root:S()}),Eu=L({subscription:S(),result:ia}),aa=_e([L({type:_e([le("firstShredReceived"),le("completed"),le("optimisticConfirmation"),le("root")]),slot:S(),timestamp:S()}),L({type:le("createdBank"),parent:S(),slot:S(),timestamp:S()}),L({type:le("frozen"),slot:S(),timestamp:S(),stats:L({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),L({type:le("dead"),slot:S(),timestamp:S(),err:B()})]),Iu=L({subscription:S(),result:aa}),vu=L({subscription:S(),result:Wn(_e([Xi,Qi]))}),Nu=L({subscription:S(),result:S()}),_u=L({pubkey:B(),gossip:D(B()),tpu:D(B()),rpc:D(B()),version:D(B())}),no=L({votePubkey:B(),nodePubkey:B(),activatedStake:S(),epochVoteAccount:Je(),epochCredits:W(_n([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:D(S())}),Tu=ce(L({current:W(no),delinquent:W(no)})),ca=_e([le("processed"),le("confirmed"),le("finalized")]),ua=L({slot:S(),confirmations:D(S()),err:Et,confirmationStatus:$(ca)}),Ru=Ze(W(D(ua))),Pu=ce(S()),wo=L({accountKey:pe,writableIndexes:W(S()),readonlyIndexes:W(S())}),jr=L({signatures:W(B()),message:L({accountKeys:W(B()),header:L({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:W(L({accounts:W(S()),data:B(),programIdIndex:S()})),recentBlockhash:B(),addressTableLookups:$(W(wo))})}),bo=L({pubkey:pe,signer:Je(),writable:Je(),source:$(_e([le("transaction"),le("lookupTable")]))}),ko=L({accountKeys:W(bo),signatures:W(B())}),Co=L({parsed:St(),program:B(),programId:pe}),Ao=L({accounts:W(pe),data:B(),programId:pe}),la=_e([Ao,Co]),da=_e([L({parsed:St(),program:B(),programId:B()}),L({accounts:W(B()),data:B(),programId:B()})]),So=Ut(la,da,n=>"accounts"in n?Ot(n,Ao):Ot(n,Co)),Eo=L({signatures:W(B()),message:L({accountKeys:W(bo),instructions:W(So),recentBlockhash:B(),addressTableLookups:$(D(W(wo)))})}),On=L({accountIndex:S(),mint:B(),owner:$(B()),programId:$(B()),uiTokenAmount:na}),Io=L({writable:W(pe),readonly:W(pe)}),Dn=L({err:Et,fee:S(),innerInstructions:$(D(W(L({index:S(),instructions:W(L({accounts:W(S()),data:B(),programIdIndex:S()}))})))),preBalances:W(S()),postBalances:W(S()),logMessages:$(D(W(B()))),preTokenBalances:$(D(W(On))),postTokenBalances:$(D(W(On))),loadedAddresses:$(Io),computeUnitsConsumed:$(S()),costUnits:$(S())}),Gr=L({err:Et,fee:S(),innerInstructions:$(D(W(L({index:S(),instructions:W(So)})))),preBalances:W(S()),postBalances:W(S()),logMessages:$(D(W(B()))),preTokenBalances:$(D(W(On))),postTokenBalances:$(D(W(On))),loadedAddresses:$(Io),computeUnitsConsumed:$(S()),costUnits:$(S())}),zt=_e([le(0),le("legacy")]),It=L({pubkey:B(),lamports:S(),postBalance:D(S()),rewardType:D(B()),commission:$(D(S()))}),Lu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),transactions:W(L({transaction:jr,meta:D(Dn),version:$(zt)})),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),Bu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),xu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),transactions:W(L({transaction:ko,meta:D(Dn),version:$(zt)})),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),Ou=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),transactions:W(L({transaction:Eo,meta:D(Gr),version:$(zt)})),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),Uu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),transactions:W(L({transaction:ko,meta:D(Gr),version:$(zt)})),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),Mu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),rewards:$(W(It)),blockTime:D(S()),blockHeight:D(S())}))),Wu=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),transactions:W(L({transaction:jr,meta:D(Dn)})),rewards:$(W(It)),blockTime:D(S())}))),Du=ce(D(L({blockhash:B(),previousBlockhash:B(),parentSlot:S(),signatures:W(B()),blockTime:D(S())}))),zu=ce(D(L({slot:S(),meta:D(Dn),blockTime:$(D(S())),transaction:jr,version:$(zt)}))),Ku=ce(D(L({slot:S(),transaction:Eo,meta:D(Gr),blockTime:$(D(S())),version:$(zt)}))),Fu=Ze(L({blockhash:B(),lastValidBlockHeight:S()})),qu=Ze(Je()),ha=L({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),Hu=ce(W(ha)),$u=Ze(D(L({feeCalculator:L({lamportsPerSignature:S()})}))),Vu=ce(B()),ju=ce(B()),fa=L({err:Et,logs:W(B()),signature:B()}),Gu=L({result:Wn(fa),subscription:S()});var zr=class n{constructor(e){this._keypair=void 0,this._keypair=e??Zs()}static generate(){return new n(Zs())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let s=e.slice(0,32),o=Pr(s);for(let i=0;i<32;i++)if(r[i]!==o[i])throw new Error("provided secretKey is invalid")}return new n({publicKey:r,secretKey:e})}static fromSeed(e){let t=Pr(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new n({publicKey:t,secretKey:r})}get publicKey(){return new G(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Zt=Object.freeze({CreateLookupTable:{index:0,layout:d.struct([d.u32("instruction"),Wt("recentSlot"),d.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:d.struct([d.u32("instruction")])},ExtendLookupTable:{index:2,layout:d.struct([d.u32("instruction"),Wt(),d.seq(re(),d.offset(d.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:d.struct([d.u32("instruction")])},CloseLookupTable:{index:4,layout:d.struct([d.u32("instruction")])}});var Kr=class{constructor(){}static createLookupTable(e){let[t,r]=G.findProgramAddressSync([e.authority.toBuffer(),vs().encode(e.recentSlot)],this.programId),s=Zt.CreateLookupTable,o=ne(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ve.programId,isSigner:!1,isWritable:!1}];return[new oe({programId:this.programId,keys:i,data:o}),t]}static freezeLookupTable(e){let t=Zt.FreezeLookupTable,r=ne(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:s,data:r})}static extendLookupTable(e){let t=Zt.ExtendLookupTable,r=ne(t,{addresses:e.addresses.map(o=>o.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ve.programId,isSigner:!1,isWritable:!1}),new oe({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(e){let t=Zt.DeactivateLookupTable,r=ne(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:s,data:r})}static closeLookupTable(e){let t=Zt.CloseLookupTable,r=ne(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new oe({programId:this.programId,keys:s,data:r})}};Kr.programId=new G("AddressLookupTab1e1111111111111111111111111");var Rn=Object.freeze({RequestUnits:{index:0,layout:d.struct([d.u8("instruction"),d.u32("units"),d.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:d.struct([d.u8("instruction"),d.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:d.struct([d.u8("instruction"),d.u32("units")])},SetComputeUnitPrice:{index:3,layout:d.struct([d.u8("instruction"),Wt("microLamports")])}}),Fr=class{constructor(){}static requestUnits(e){let t=Rn.RequestUnits,r=ne(t,e);return new oe({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){let t=Rn.RequestHeapFrame,r=ne(t,e);return new oe({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){let t=Rn.SetComputeUnitLimit,r=ne(t,e);return new oe({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){let t=Rn.SetComputeUnitPrice,r=ne(t,{microLamports:BigInt(e.microLamports)});return new oe({keys:[],programId:this.programId,data:r})}};Fr.programId=new G("ComputeBudget111111111111111111111111111111");var ro=64,so=32,oo=64,io=d.struct([d.u8("numSignatures"),d.u8("padding"),d.u16("signatureOffset"),d.u16("signatureInstructionIndex"),d.u16("publicKeyOffset"),d.u16("publicKeyInstructionIndex"),d.u16("messageDataOffset"),d.u16("messageDataSize"),d.u16("messageInstructionIndex")]),qr=class n{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:s,instructionIndex:o}=e;be(t.length===so,`Public Key must be ${so} bytes but received ${t.length} bytes`),be(s.length===oo,`Signature must be ${oo} bytes but received ${s.length} bytes`);let i=io.span,c=i+t.length,f=c+s.length,_=1,I=v.alloc(f+r.length),U=o??65535;return io.encode({numSignatures:_,padding:0,signatureOffset:c,signatureInstructionIndex:U,publicKeyOffset:i,publicKeyInstructionIndex:U,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:U},I),I.fill(t,i),I.fill(s,c),I.fill(r,f),new oe({keys:[],programId:n.programId,data:I})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:s}=e;be(t.length===ro,`Private key must be ${ro} bytes but received ${t.length} bytes`);try{let o=zr.fromSecretKey(t),i=o.publicKey.toBytes(),c=lo(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:c,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};qr.programId=new G("Ed25519SigVerify111111111111111111111111111");var pa=(n,e)=>{let t=Cn.sign(n,e);return[t.toCompactRawBytes(),t.recovery]};Cn.utils.isValidPrivateKey;var ga=Cn.getPublicKey,ao=32,_r=20,co=64,ma=11,Tr=d.struct([d.u8("numSignatures"),d.u16("signatureOffset"),d.u8("signatureInstructionIndex"),d.u16("ethAddressOffset"),d.u8("ethAddressInstructionIndex"),d.u16("messageDataOffset"),d.u16("messageDataSize"),d.u8("messageInstructionIndex"),d.blob(20,"ethAddress"),d.blob(64,"signature"),d.u8("recoveryId")]),Hr=class n{constructor(){}static publicKeyToEthAddress(e){be(e.length===co,`Public key must be ${co} bytes but received ${e.length} bytes`);try{return v.from(pr(se(e))).slice(-_r)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:s,recoveryId:o,instructionIndex:i}=e;return n.createInstructionWithEthAddress({ethAddress:n.publicKeyToEthAddress(t),message:r,signature:s,recoveryId:o,instructionIndex:i})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:r,signature:s,recoveryId:o,instructionIndex:i=0}=e,c;typeof t=="string"?t.startsWith("0x")?c=v.from(t.substr(2),"hex"):c=v.from(t,"hex"):c=t,be(c.length===_r,`Address must be ${_r} bytes but received ${c.length} bytes`);let f=1+ma,_=f,I=f+c.length,U=I+s.length+1,F=1,M=v.alloc(Tr.span+r.length);return Tr.encode({numSignatures:F,signatureOffset:I,signatureInstructionIndex:i,ethAddressOffset:_,ethAddressInstructionIndex:i,messageDataOffset:U,messageDataSize:r.length,messageInstructionIndex:i,signature:se(s),ethAddress:se(c),recoveryId:o},M),M.fill(se(r),Tr.span),new oe({keys:[],programId:n.programId,data:M})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:s}=e;be(t.length===ao,`Private key must be ${ao} bytes but received ${t.length} bytes`);try{let o=se(t),i=ga(o,!1).slice(1),c=v.from(pr(se(r))),[f,_]=pa(c,o);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:f,recoveryId:_,instructionIndex:s})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Hr.programId=new G("KeccakSecp256k11111111111111111111111111111");var vo,ya=new G("StakeConfig11111111111111111111111111111111");var sn=class{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}};vo=sn;sn.default=new vo(0,0,G.default);var ht=Object.freeze({Initialize:{index:0,layout:d.struct([d.u32("instruction"),Li(),Bi()])},Authorize:{index:1,layout:d.struct([d.u32("instruction"),re("newAuthorized"),d.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:d.struct([d.u32("instruction")])},Split:{index:3,layout:d.struct([d.u32("instruction"),d.ns64("lamports")])},Withdraw:{index:4,layout:d.struct([d.u32("instruction"),d.ns64("lamports")])},Deactivate:{index:5,layout:d.struct([d.u32("instruction")])},Merge:{index:7,layout:d.struct([d.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:d.struct([d.u32("instruction"),re("newAuthorized"),d.u32("stakeAuthorizationType"),Mt("authoritySeed"),re("authorityOwner")])}}),Yu=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Un=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:s}=e,o=s||sn.default,i=ht.Initialize,c=ne(i,{authorized:{staker:se(r.staker.toBuffer()),withdrawer:se(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:se(o.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new oe(f)}static createAccountWithSeed(e){let t=new de;t.add(ve.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:s,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:o}))}static createAccount(e){let t=new de;t.add(ve.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:s,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:o}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:s}=e,o=ht.Delegate,i=ne(o);return new de().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:Nr,isSigner:!1,isWritable:!1},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:i}=e,c=ht.Authorize,f=ne(c,{newAuthorized:se(s.toBuffer()),stakeAuthorizationType:o.index}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&_.push({pubkey:i,isSigner:!0,isWritable:!1}),new de().add({keys:_,programId:this.programId,data:f})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:s,authorityOwner:o,newAuthorizedPubkey:i,stakeAuthorizationType:c,custodianPubkey:f}=e,_=ht.AuthorizeWithSeed,I=ne(_,{newAuthorized:se(i.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:s,authorityOwner:se(o.toBuffer())}),U=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:it,isSigner:!1,isWritable:!1}];return f&&U.push({pubkey:f,isSigner:!0,isWritable:!1}),new de().add({keys:U,programId:this.programId,data:I})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:s,lamports:o}=e,i=ht.Split,c=ne(i,{lamports:o});return new oe({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,t){let r=new de;return r.add(ve.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:o,basePubkey:i,seed:c,lamports:f}=e,_=new de;return _.add(ve.allocate({accountPubkey:o,basePubkey:i,seed:c,space:this.space,programId:this.programId})),t&&t>0&&_.add(ve.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),_.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:o,lamports:f}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:s}=e,o=ht.Merge,i=ne(o);return new de().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:Nr,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:s,lamports:o,custodianPubkey:i}=e,c=ht.Withdraw,f=ne(c,{lamports:o}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:Nr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&_.push({pubkey:i,isSigner:!0,isWritable:!1}),new de().add({keys:_,programId:this.programId,data:f})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,s=ht.Deactivate,o=ne(s);return new de().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Un.programId=new G("Stake11111111111111111111111111111111111111");Un.space=200;var Xt=Object.freeze({InitializeAccount:{index:0,layout:d.struct([d.u32("instruction"),xi()])},Authorize:{index:1,layout:d.struct([d.u32("instruction"),re("newAuthorized"),d.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:d.struct([d.u32("instruction"),d.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:d.struct([d.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:d.struct([d.u32("instruction"),Oi()])}}),Ju=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Mn=class n{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:s}=e,o=Xt.InitializeAccount,i=ne(o,{voteInit:{nodePubkey:se(s.nodePubkey.toBuffer()),authorizedVoter:se(s.authorizedVoter.toBuffer()),authorizedWithdrawer:se(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new oe(c)}static createAccount(e){let t=new de;return t.add(ve.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:o}=e,i=Xt.Authorize,c=ne(i,{newAuthorized:se(s.toBuffer()),voteAuthorizationType:o.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new de().add({keys:f,programId:this.programId,data:c})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:o,voteAuthorizationType:i,votePubkey:c}=e,f=Xt.AuthorizeWithSeed,_=ne(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:se(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:se(o.toBuffer()),voteAuthorizationType:i.index}}),I=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new de().add({keys:I,programId:this.programId,data:_})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:o}=e,i=Xt.Withdraw,c=ne(i,{lamports:s}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new de().add({keys:f,programId:this.programId,data:c})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return n.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:s}=e,o=Xt.UpdateValidatorIdentity,i=ne(o),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new de().add({keys:c,programId:this.programId,data:i})}};Mn.programId=new G("Vote111111111111111111111111111111111111111");Mn.space=3762;var Zu=new G("Va1idator1nfo111111111111111111111111111111"),Xu=L({name:B(),website:$(B()),details:$(B()),iconUrl:$(B()),keybaseUsername:$(B())});var Qu=new G("Vote111111111111111111111111111111111111111"),el=d.struct([re("nodePubkey"),re("authorizedWithdrawer"),d.u8("commission"),d.nu64(),d.seq(d.struct([d.nu64("slot"),d.u32("confirmationCount")]),d.offset(d.u32(),-8),"votes"),d.u8("rootSlotValid"),d.nu64("rootSlot"),d.nu64(),d.seq(d.struct([d.nu64("epoch"),re("authorizedVoter")]),d.offset(d.u32(),-8),"authorizedVoters"),d.struct([d.seq(d.struct([re("authorizedPubkey"),d.nu64("epochOfLastAuthorizedSwitch"),d.nu64("targetEpoch")]),32,"buf"),d.nu64("idx"),d.u8("isEmpty")],"priorVoters"),d.nu64(),d.seq(d.struct([d.nu64("epoch"),d.nu64("credits"),d.nu64("prevCredits")]),d.offset(d.u32(),-8),"epochCredits"),d.struct([d.nu64("slot"),d.nu64("timestamp")],"lastTimestamp")]);b();C();k();var xe=new G("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),il=new G("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),on=new G("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),al=new G("So11111111111111111111111111111111111111112"),cl=new G("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");b();C();k();b();C();k();var ft=n=>{let e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}};b();C();k();var Yr=Ne(st(),1),pt=Ne(No(),1);var Kn=n=>e=>{let t=(0,Yr.blob)(n,e),{encode:r,decode:s}=ft(t),o=t;return o.decode=(i,c)=>{let f=s(i,c);return(0,pt.toBigIntLE)(v.from(f))},o.encode=(i,c,f)=>{let _=(0,pt.toBufferLE)(i,n);return r(_,c,f)},o},Fn=n=>e=>{let t=(0,Yr.blob)(n,e),{encode:r,decode:s}=ft(t),o=t;return o.decode=(i,c)=>{let f=s(i,c);return(0,pt.toBigIntBE)(v.from(f))},o.encode=(i,c,f)=>{let _=(0,pt.toBufferBE)(i,n);return r(_,c,f)},o},gt=Kn(8),Al=Fn(8),Aa=Kn(16),Sl=Fn(16),El=Kn(24),Il=Fn(24),vl=Kn(32),Nl=Fn(32);b();C();k();b();C();k();var Sa=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Jr=Math.ceil,qe=Math.floor,Oe="[BigNumber Error] ",_o=Oe+"Number primitive has more than 15 significant digits: ",Xe=1e14,Q=14,Zr=9007199254740991,Xr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],mt=1e7,Ce=1e9;function To(n){var e,t,r,s=R.prototype={constructor:R,toString:null,valueOf:null},o=new R(1),i=20,c=4,f=-7,_=21,I=-1e7,U=1e7,F=!1,M=1,Z=0,K={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",ee=!0;function R(a,u){var l,A,m,w,N,p,y,E,h=this;if(!(h instanceof R))return new R(a,u);if(u==null){if(a&&a._isBigNumber===!0){h.s=a.s,!a.c||a.e>U?h.c=h.e=null:a.e<I?h.c=[h.e=0]:(h.e=a.e,h.c=a.c.slice());return}if((p=typeof a=="number")&&a*0==0){if(h.s=1/a<0?(a=-a,-1):1,a===~~a){for(w=0,N=a;N>=10;N/=10,w++);w>U?h.c=h.e=null:(h.e=w,h.c=[a]);return}E=String(a)}else{if(!Sa.test(E=String(a)))return r(h,E,p);h.s=E.charCodeAt(0)==45?(E=E.slice(1),-1):1}(w=E.indexOf("."))>-1&&(E=E.replace(".","")),(N=E.search(/e/i))>0?(w<0&&(w=N),w+=+E.slice(N+1),E=E.substring(0,N)):w<0&&(w=E.length)}else{if(fe(u,2,q.length,"Base"),u==10&&ee)return h=new R(a),ue(h,i+h.e+1,c);if(E=String(a),p=typeof a=="number"){if(a*0!=0)return r(h,E,p,u);if(h.s=1/a<0?(E=E.slice(1),-1):1,R.DEBUG&&E.replace(/^0\.0*|\./,"").length>15)throw Error(_o+a)}else h.s=E.charCodeAt(0)===45?(E=E.slice(1),-1):1;for(l=q.slice(0,u),w=N=0,y=E.length;N<y;N++)if(l.indexOf(A=E.charAt(N))<0){if(A=="."){if(N>w){w=y;continue}}else if(!m&&(E==E.toUpperCase()&&(E=E.toLowerCase())||E==E.toLowerCase()&&(E=E.toUpperCase()))){m=!0,N=-1,w=0;continue}return r(h,String(a),p,u)}p=!1,E=t(E,u,10,h.s),(w=E.indexOf("."))>-1?E=E.replace(".",""):w=E.length}for(N=0;E.charCodeAt(N)===48;N++);for(y=E.length;E.charCodeAt(--y)===48;);if(E=E.slice(N,++y)){if(y-=N,p&&R.DEBUG&&y>15&&(a>Zr||a!==qe(a)))throw Error(_o+h.s*a);if((w=w-N-1)>U)h.c=h.e=null;else if(w<I)h.c=[h.e=0];else{if(h.e=w,h.c=[],N=(w+1)%Q,w<0&&(N+=Q),N<y){for(N&&h.c.push(+E.slice(0,N)),y-=Q;N<y;)h.c.push(+E.slice(N,N+=Q));N=Q-(E=E.slice(N)).length}else N-=y;for(;N--;E+="0");h.c.push(+E)}}else h.c=[h.e=0]}R.clone=To,R.ROUND_UP=0,R.ROUND_DOWN=1,R.ROUND_CEIL=2,R.ROUND_FLOOR=3,R.ROUND_HALF_UP=4,R.ROUND_HALF_DOWN=5,R.ROUND_HALF_EVEN=6,R.ROUND_HALF_CEIL=7,R.ROUND_HALF_FLOOR=8,R.EUCLID=9,R.config=R.set=function(a){var u,l;if(a!=null)if(typeof a=="object"){if(a.hasOwnProperty(u="DECIMAL_PLACES")&&(l=a[u],fe(l,0,Ce,u),i=l),a.hasOwnProperty(u="ROUNDING_MODE")&&(l=a[u],fe(l,0,8,u),c=l),a.hasOwnProperty(u="EXPONENTIAL_AT")&&(l=a[u],l&&l.pop?(fe(l[0],-Ce,0,u),fe(l[1],0,Ce,u),f=l[0],_=l[1]):(fe(l,-Ce,Ce,u),f=-(_=l<0?-l:l))),a.hasOwnProperty(u="RANGE"))if(l=a[u],l&&l.pop)fe(l[0],-Ce,-1,u),fe(l[1],1,Ce,u),I=l[0],U=l[1];else if(fe(l,-Ce,Ce,u),l)I=-(U=l<0?-l:l);else throw Error(Oe+u+" cannot be zero: "+l);if(a.hasOwnProperty(u="CRYPTO"))if(l=a[u],l===!!l)if(l)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))F=l;else throw F=!l,Error(Oe+"crypto unavailable");else F=l;else throw Error(Oe+u+" not true or false: "+l);if(a.hasOwnProperty(u="MODULO_MODE")&&(l=a[u],fe(l,0,9,u),M=l),a.hasOwnProperty(u="POW_PRECISION")&&(l=a[u],fe(l,0,Ce,u),Z=l),a.hasOwnProperty(u="FORMAT"))if(l=a[u],typeof l=="object")K=l;else throw Error(Oe+u+" not an object: "+l);if(a.hasOwnProperty(u="ALPHABET"))if(l=a[u],typeof l=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(l))ee=l.slice(0,10)=="0123456789",q=l;else throw Error(Oe+u+" invalid: "+l)}else throw Error(Oe+"Object expected: "+a);return{DECIMAL_PLACES:i,ROUNDING_MODE:c,EXPONENTIAL_AT:[f,_],RANGE:[I,U],CRYPTO:F,MODULO_MODE:M,POW_PRECISION:Z,FORMAT:K,ALPHABET:q}},R.isBigNumber=function(a){if(!a||a._isBigNumber!==!0)return!1;if(!R.DEBUG)return!0;var u,l,A=a.c,m=a.e,w=a.s;e:if({}.toString.call(A)=="[object Array]"){if((w===1||w===-1)&&m>=-Ce&&m<=Ce&&m===qe(m)){if(A[0]===0){if(m===0&&A.length===1)return!0;break e}if(u=(m+1)%Q,u<1&&(u+=Q),String(A[0]).length==u){for(u=0;u<A.length;u++)if(l=A[u],l<0||l>=Xe||l!==qe(l))break e;if(l!==0)return!0}}}else if(A===null&&m===null&&(w===null||w===1||w===-1))return!0;throw Error(Oe+"Invalid BigNumber: "+a)},R.maximum=R.max=function(){return J(arguments,-1)},R.minimum=R.min=function(){return J(arguments,1)},R.random=function(){var a=9007199254740992,u=Math.random()*a&2097151?function(){return qe(Math.random()*a)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(l){var A,m,w,N,p,y=0,E=[],h=new R(o);if(l==null?l=i:fe(l,0,Ce),N=Jr(l/Q),F)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(N*=2));y<N;)p=A[y]*131072+(A[y+1]>>>11),p>=9e15?(m=crypto.getRandomValues(new Uint32Array(2)),A[y]=m[0],A[y+1]=m[1]):(E.push(p%1e14),y+=2);y=N/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(N*=7);y<N;)p=(A[y]&31)*281474976710656+A[y+1]*1099511627776+A[y+2]*4294967296+A[y+3]*16777216+(A[y+4]<<16)+(A[y+5]<<8)+A[y+6],p>=9e15?crypto.randomBytes(7).copy(A,y):(E.push(p%1e14),y+=7);y=N/7}else throw F=!1,Error(Oe+"crypto unavailable");if(!F)for(;y<N;)p=u(),p<9e15&&(E[y++]=p%1e14);for(N=E[--y],l%=Q,N&&l&&(p=Xr[Q-l],E[y]=qe(N/p)*p);E[y]===0;E.pop(),y--);if(y<0)E=[w=0];else{for(w=-1;E[0]===0;E.splice(0,1),w-=Q);for(y=1,p=E[0];p>=10;p/=10,y++);y<Q&&(w-=Q-y)}return h.e=w,h.c=E,h}}(),R.sum=function(){for(var a=1,u=arguments,l=new R(u[0]);a<u.length;)l=l.plus(u[a++]);return l},t=function(){var a="0123456789";function u(l,A,m,w){for(var N,p=[0],y,E=0,h=l.length;E<h;){for(y=p.length;y--;p[y]*=A);for(p[0]+=w.indexOf(l.charAt(E++)),N=0;N<p.length;N++)p[N]>m-1&&(p[N+1]==null&&(p[N+1]=0),p[N+1]+=p[N]/m|0,p[N]%=m)}return p.reverse()}return function(l,A,m,w,N){var p,y,E,h,g,T,P,z,H=l.indexOf("."),X=i,V=c;for(H>=0&&(h=Z,Z=0,l=l.replace(".",""),z=new R(A),T=z.pow(l.length-H),Z=h,z.c=u(at(Fe(T.c),T.e,"0"),10,m,a),z.e=z.c.length),P=u(l,A,m,N?(p=q,a):(p=a,q)),E=h=P.length;P[--h]==0;P.pop());if(!P[0])return p.charAt(0);if(H<0?--E:(T.c=P,T.e=E,T.s=w,T=e(T,z,X,V,m),P=T.c,g=T.r,E=T.e),y=E+X+1,H=P[y],h=m/2,g=g||y<0||P[y+1]!=null,g=V<4?(H!=null||g)&&(V==0||V==(T.s<0?3:2)):H>h||H==h&&(V==4||g||V==6&&P[y-1]&1||V==(T.s<0?8:7)),y<1||!P[0])l=g?at(p.charAt(1),-X,p.charAt(0)):p.charAt(0);else{if(P.length=y,g)for(--m;++P[--y]>m;)P[y]=0,y||(++E,P=[1].concat(P));for(h=P.length;!P[--h];);for(H=0,l="";H<=h;l+=p.charAt(P[H++]));l=at(l,E,p.charAt(0))}return l}}(),e=function(){function a(A,m,w){var N,p,y,E,h=0,g=A.length,T=m%mt,P=m/mt|0;for(A=A.slice();g--;)y=A[g]%mt,E=A[g]/mt|0,N=P*y+E*T,p=T*y+N%mt*mt+h,h=(p/w|0)+(N/mt|0)+P*E,A[g]=p%w;return h&&(A=[h].concat(A)),A}function u(A,m,w,N){var p,y;if(w!=N)y=w>N?1:-1;else for(p=y=0;p<w;p++)if(A[p]!=m[p]){y=A[p]>m[p]?1:-1;break}return y}function l(A,m,w,N){for(var p=0;w--;)A[w]-=p,p=A[w]<m[w]?1:0,A[w]=p*N+A[w]-m[w];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,m,w,N,p){var y,E,h,g,T,P,z,H,X,V,j,te,ge,Se,Re,me,ke,ye=A.s==m.s?1:-1,he=A.c,ae=m.c;if(!he||!he[0]||!ae||!ae[0])return new R(!A.s||!m.s||(he?ae&&he[0]==ae[0]:!ae)?NaN:he&&he[0]==0||!ae?ye*0:ye/0);for(H=new R(ye),X=H.c=[],E=A.e-m.e,ye=w+E+1,p||(p=Xe,E=He(A.e/Q)-He(m.e/Q),ye=ye/Q|0),h=0;ae[h]==(he[h]||0);h++);if(ae[h]>(he[h]||0)&&E--,ye<0)X.push(1),g=!0;else{for(Se=he.length,me=ae.length,h=0,ye+=2,T=qe(p/(ae[0]+1)),T>1&&(ae=a(ae,T,p),he=a(he,T,p),me=ae.length,Se=he.length),ge=me,V=he.slice(0,me),j=V.length;j<me;V[j++]=0);ke=ae.slice(),ke=[0].concat(ke),Re=ae[0],ae[1]>=p/2&&Re++;do{if(T=0,y=u(ae,V,me,j),y<0){if(te=V[0],me!=j&&(te=te*p+(V[1]||0)),T=qe(te/Re),T>1)for(T>=p&&(T=p-1),P=a(ae,T,p),z=P.length,j=V.length;u(P,V,z,j)==1;)T--,l(P,me<z?ke:ae,z,p),z=P.length,y=1;else T==0&&(y=T=1),P=ae.slice(),z=P.length;if(z<j&&(P=[0].concat(P)),l(V,P,j,p),j=V.length,y==-1)for(;u(ae,V,me,j)<1;)T++,l(V,me<j?ke:ae,j,p),j=V.length}else y===0&&(T++,V=[0]);X[h++]=T,V[0]?V[j++]=he[ge]||0:(V=[he[ge]],j=1)}while((ge++<Se||V[0]!=null)&&ye--);g=V[0]!=null,X[0]||X.splice(0,1)}if(p==Xe){for(h=1,ye=X[0];ye>=10;ye/=10,h++);ue(H,w+(H.e=h+E*Q-1)+1,N,g)}else H.e=E,H.r=+g;return H}}();function Ue(a,u,l,A){var m,w,N,p,y;if(l==null?l=c:fe(l,0,8),!a.c)return a.toString();if(m=a.c[0],N=a.e,u==null)y=Fe(a.c),y=A==1||A==2&&(N<=f||N>=_)?Hn(y,N):at(y,N,"0");else if(a=ue(new R(a),u,l),w=a.e,y=Fe(a.c),p=y.length,A==1||A==2&&(u<=w||w<=f)){for(;p<u;y+="0",p++);y=Hn(y,w)}else if(u-=N+(A===2&&w>N),y=at(y,w,"0"),w+1>p){if(--u>0)for(y+=".";u--;y+="0");}else if(u+=w-p,u>0)for(w+1==p&&(y+=".");u--;y+="0");return a.s<0&&m?"-"+y:y}function J(a,u){for(var l,A,m=1,w=new R(a[0]);m<a.length;m++)A=new R(a[m]),(!A.s||(l=vt(w,A))===u||l===0&&w.s===u)&&(w=A);return w}function Ae(a,u,l){for(var A=1,m=u.length;!u[--m];u.pop());for(m=u[0];m>=10;m/=10,A++);return(l=A+l*Q-1)>U?a.c=a.e=null:l<I?a.c=[a.e=0]:(a.e=l,a.c=u),a}r=function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,l=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,m=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(w,N,p,y){var E,h=p?N:N.replace(m,"");if(A.test(h))w.s=isNaN(h)?null:h<0?-1:1;else{if(!p&&(h=h.replace(a,function(g,T,P){return E=(P=P.toLowerCase())=="x"?16:P=="b"?2:8,!y||y==E?T:g}),y&&(E=y,h=h.replace(u,"$1").replace(l,"0.$1")),N!=h))return new R(h,E);if(R.DEBUG)throw Error(Oe+"Not a"+(y?" base "+y:"")+" number: "+N);w.s=null}w.c=w.e=null}}();function ue(a,u,l,A){var m,w,N,p,y,E,h,g=a.c,T=Xr;if(g){e:{for(m=1,p=g[0];p>=10;p/=10,m++);if(w=u-m,w<0)w+=Q,N=u,y=g[E=0],h=qe(y/T[m-N-1]%10);else if(E=Jr((w+1)/Q),E>=g.length)if(A){for(;g.length<=E;g.push(0));y=h=0,m=1,w%=Q,N=w-Q+1}else break e;else{for(y=p=g[E],m=1;p>=10;p/=10,m++);w%=Q,N=w-Q+m,h=N<0?0:qe(y/T[m-N-1]%10)}if(A=A||u<0||g[E+1]!=null||(N<0?y:y%T[m-N-1]),A=l<4?(h||A)&&(l==0||l==(a.s<0?3:2)):h>5||h==5&&(l==4||A||l==6&&(w>0?N>0?y/T[m-N]:0:g[E-1])%10&1||l==(a.s<0?8:7)),u<1||!g[0])return g.length=0,A?(u-=a.e+1,g[0]=T[(Q-u%Q)%Q],a.e=-u||0):g[0]=a.e=0,a;if(w==0?(g.length=E,p=1,E--):(g.length=E+1,p=T[Q-w],g[E]=N>0?qe(y/T[m-N]%T[N])*p:0),A)for(;;)if(E==0){for(w=1,N=g[0];N>=10;N/=10,w++);for(N=g[0]+=p,p=1;N>=10;N/=10,p++);w!=p&&(a.e++,g[0]==Xe&&(g[0]=1));break}else{if(g[E]+=p,g[E]!=Xe)break;g[E--]=0,p=1}for(w=g.length;g[--w]===0;g.pop());}a.e>U?a.c=a.e=null:a.e<I&&(a.c=[a.e=0])}return a}function ie(a){var u,l=a.e;return l===null?a.toString():(u=Fe(a.c),u=l<=f||l>=_?Hn(u,l):at(u,l,"0"),a.s<0?"-"+u:u)}return s.absoluteValue=s.abs=function(){var a=new R(this);return a.s<0&&(a.s=1),a},s.comparedTo=function(a,u){return vt(this,new R(a,u))},s.decimalPlaces=s.dp=function(a,u){var l,A,m,w=this;if(a!=null)return fe(a,0,Ce),u==null?u=c:fe(u,0,8),ue(new R(w),a+w.e+1,u);if(!(l=w.c))return null;if(A=((m=l.length-1)-He(this.e/Q))*Q,m=l[m])for(;m%10==0;m/=10,A--);return A<0&&(A=0),A},s.dividedBy=s.div=function(a,u){return e(this,new R(a,u),i,c)},s.dividedToIntegerBy=s.idiv=function(a,u){return e(this,new R(a,u),0,1)},s.exponentiatedBy=s.pow=function(a,u){var l,A,m,w,N,p,y,E,h,g=this;if(a=new R(a),a.c&&!a.isInteger())throw Error(Oe+"Exponent not an integer: "+ie(a));if(u!=null&&(u=new R(u)),p=a.e>14,!g.c||!g.c[0]||g.c[0]==1&&!g.e&&g.c.length==1||!a.c||!a.c[0])return h=new R(Math.pow(+ie(g),p?a.s*(2-qn(a)):+ie(a))),u?h.mod(u):h;if(y=a.s<0,u){if(u.c?!u.c[0]:!u.s)return new R(NaN);A=!y&&g.isInteger()&&u.isInteger(),A&&(g=g.mod(u))}else{if(a.e>9&&(g.e>0||g.e<-1||(g.e==0?g.c[0]>1||p&&g.c[1]>=24e7:g.c[0]<8e13||p&&g.c[0]<=9999975e7)))return w=g.s<0&&qn(a)?-0:0,g.e>-1&&(w=1/w),new R(y?1/w:w);Z&&(w=Jr(Z/Q+2))}for(p?(l=new R(.5),y&&(a.s=1),E=qn(a)):(m=Math.abs(+ie(a)),E=m%2),h=new R(o);;){if(E){if(h=h.times(g),!h.c)break;w?h.c.length>w&&(h.c.length=w):A&&(h=h.mod(u))}if(m){if(m=qe(m/2),m===0)break;E=m%2}else if(a=a.times(l),ue(a,a.e+1,1),a.e>14)E=qn(a);else{if(m=+ie(a),m===0)break;E=m%2}g=g.times(g),w?g.c&&g.c.length>w&&(g.c.length=w):A&&(g=g.mod(u))}return A?h:(y&&(h=o.div(h)),u?h.mod(u):w?ue(h,Z,c,N):h)},s.integerValue=function(a){var u=new R(this);return a==null?a=c:fe(a,0,8),ue(u,u.e+1,a)},s.isEqualTo=s.eq=function(a,u){return vt(this,new R(a,u))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(a,u){return vt(this,new R(a,u))>0},s.isGreaterThanOrEqualTo=s.gte=function(a,u){return(u=vt(this,new R(a,u)))===1||u===0},s.isInteger=function(){return!!this.c&&He(this.e/Q)>this.c.length-2},s.isLessThan=s.lt=function(a,u){return vt(this,new R(a,u))<0},s.isLessThanOrEqualTo=s.lte=function(a,u){return(u=vt(this,new R(a,u)))===-1||u===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(a,u){var l,A,m,w,N=this,p=N.s;if(a=new R(a,u),u=a.s,!p||!u)return new R(NaN);if(p!=u)return a.s=-u,N.plus(a);var y=N.e/Q,E=a.e/Q,h=N.c,g=a.c;if(!y||!E){if(!h||!g)return h?(a.s=-u,a):new R(g?N:NaN);if(!h[0]||!g[0])return g[0]?(a.s=-u,a):new R(h[0]?N:c==3?-0:0)}if(y=He(y),E=He(E),h=h.slice(),p=y-E){for((w=p<0)?(p=-p,m=h):(E=y,m=g),m.reverse(),u=p;u--;m.push(0));m.reverse()}else for(A=(w=(p=h.length)<(u=g.length))?p:u,p=u=0;u<A;u++)if(h[u]!=g[u]){w=h[u]<g[u];break}if(w&&(m=h,h=g,g=m,a.s=-a.s),u=(A=g.length)-(l=h.length),u>0)for(;u--;h[l++]=0);for(u=Xe-1;A>p;){if(h[--A]<g[A]){for(l=A;l&&!h[--l];h[l]=u);--h[l],h[A]+=Xe}h[A]-=g[A]}for(;h[0]==0;h.splice(0,1),--E);return h[0]?Ae(a,h,E):(a.s=c==3?-1:1,a.c=[a.e=0],a)},s.modulo=s.mod=function(a,u){var l,A,m=this;return a=new R(a,u),!m.c||!a.s||a.c&&!a.c[0]?new R(NaN):!a.c||m.c&&!m.c[0]?new R(m):(M==9?(A=a.s,a.s=1,l=e(m,a,0,3),a.s=A,l.s*=A):l=e(m,a,0,M),a=m.minus(l.times(a)),!a.c[0]&&M==1&&(a.s=m.s),a)},s.multipliedBy=s.times=function(a,u){var l,A,m,w,N,p,y,E,h,g,T,P,z,H,X,V=this,j=V.c,te=(a=new R(a,u)).c;if(!j||!te||!j[0]||!te[0])return!V.s||!a.s||j&&!j[0]&&!te||te&&!te[0]&&!j?a.c=a.e=a.s=null:(a.s*=V.s,!j||!te?a.c=a.e=null:(a.c=[0],a.e=0)),a;for(A=He(V.e/Q)+He(a.e/Q),a.s*=V.s,y=j.length,g=te.length,y<g&&(z=j,j=te,te=z,m=y,y=g,g=m),m=y+g,z=[];m--;z.push(0));for(H=Xe,X=mt,m=g;--m>=0;){for(l=0,T=te[m]%X,P=te[m]/X|0,N=y,w=m+N;w>m;)E=j[--N]%X,h=j[N]/X|0,p=P*E+h*T,E=T*E+p%X*X+z[w]+l,l=(E/H|0)+(p/X|0)+P*h,z[w--]=E%H;z[w]=l}return l?++A:z.splice(0,1),Ae(a,z,A)},s.negated=function(){var a=new R(this);return a.s=-a.s||null,a},s.plus=function(a,u){var l,A=this,m=A.s;if(a=new R(a,u),u=a.s,!m||!u)return new R(NaN);if(m!=u)return a.s=-u,A.minus(a);var w=A.e/Q,N=a.e/Q,p=A.c,y=a.c;if(!w||!N){if(!p||!y)return new R(m/0);if(!p[0]||!y[0])return y[0]?a:new R(p[0]?A:m*0)}if(w=He(w),N=He(N),p=p.slice(),m=w-N){for(m>0?(N=w,l=y):(m=-m,l=p),l.reverse();m--;l.push(0));l.reverse()}for(m=p.length,u=y.length,m-u<0&&(l=y,y=p,p=l,u=m),m=0;u;)m=(p[--u]=p[u]+y[u]+m)/Xe|0,p[u]=Xe===p[u]?0:p[u]%Xe;return m&&(p=[m].concat(p),++N),Ae(a,p,N)},s.precision=s.sd=function(a,u){var l,A,m,w=this;if(a!=null&&a!==!!a)return fe(a,1,Ce),u==null?u=c:fe(u,0,8),ue(new R(w),a,u);if(!(l=w.c))return null;if(m=l.length-1,A=m*Q+1,m=l[m]){for(;m%10==0;m/=10,A--);for(m=l[0];m>=10;m/=10,A++);}return a&&w.e+1>A&&(A=w.e+1),A},s.shiftedBy=function(a){return fe(a,-Zr,Zr),this.times("1e"+a)},s.squareRoot=s.sqrt=function(){var a,u,l,A,m,w=this,N=w.c,p=w.s,y=w.e,E=i+4,h=new R("0.5");if(p!==1||!N||!N[0])return new R(!p||p<0&&(!N||N[0])?NaN:N?w:1/0);if(p=Math.sqrt(+ie(w)),p==0||p==1/0?(u=Fe(N),(u.length+y)%2==0&&(u+="0"),p=Math.sqrt(+u),y=He((y+1)/2)-(y<0||y%2),p==1/0?u="5e"+y:(u=p.toExponential(),u=u.slice(0,u.indexOf("e")+1)+y),l=new R(u)):l=new R(p+""),l.c[0]){for(y=l.e,p=y+E,p<3&&(p=0);;)if(m=l,l=h.times(m.plus(e(w,m,E,1))),Fe(m.c).slice(0,p)===(u=Fe(l.c)).slice(0,p))if(l.e<y&&--p,u=u.slice(p-3,p+1),u=="9999"||!A&&u=="4999"){if(!A&&(ue(m,m.e+i+2,0),m.times(m).eq(w))){l=m;break}E+=4,p+=4,A=1}else{(!+u||!+u.slice(1)&&u.charAt(0)=="5")&&(ue(l,l.e+i+2,1),a=!l.times(l).eq(w));break}}return ue(l,l.e+i+1,c,a)},s.toExponential=function(a,u){return a!=null&&(fe(a,0,Ce),a++),Ue(this,a,u,1)},s.toFixed=function(a,u){return a!=null&&(fe(a,0,Ce),a=a+this.e+1),Ue(this,a,u)},s.toFormat=function(a,u,l){var A,m=this;if(l==null)a!=null&&u&&typeof u=="object"?(l=u,u=null):a&&typeof a=="object"?(l=a,a=u=null):l=K;else if(typeof l!="object")throw Error(Oe+"Argument not an object: "+l);if(A=m.toFixed(a,u),m.c){var w,N=A.split("."),p=+l.groupSize,y=+l.secondaryGroupSize,E=l.groupSeparator||"",h=N[0],g=N[1],T=m.s<0,P=T?h.slice(1):h,z=P.length;if(y&&(w=p,p=y,y=w,z-=w),p>0&&z>0){for(w=z%p||p,h=P.substr(0,w);w<z;w+=p)h+=E+P.substr(w,p);y>0&&(h+=E+P.slice(w)),T&&(h="-"+h)}A=g?h+(l.decimalSeparator||"")+((y=+l.fractionGroupSize)?g.replace(new RegExp("\\d{"+y+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):g):h}return(l.prefix||"")+A+(l.suffix||"")},s.toFraction=function(a){var u,l,A,m,w,N,p,y,E,h,g,T,P=this,z=P.c;if(a!=null&&(p=new R(a),!p.isInteger()&&(p.c||p.s!==1)||p.lt(o)))throw Error(Oe+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+ie(p));if(!z)return new R(P);for(u=new R(o),E=l=new R(o),A=y=new R(o),T=Fe(z),w=u.e=T.length-P.e-1,u.c[0]=Xr[(N=w%Q)<0?Q+N:N],a=!a||p.comparedTo(u)>0?w>0?u:E:p,N=U,U=1/0,p=new R(T),y.c[0]=0;h=e(p,u,0,1),m=l.plus(h.times(A)),m.comparedTo(a)!=1;)l=A,A=m,E=y.plus(h.times(m=E)),y=m,u=p.minus(h.times(m=u)),p=m;return m=e(a.minus(l),A,0,1),y=y.plus(m.times(E)),l=l.plus(m.times(A)),y.s=E.s=P.s,w=w*2,g=e(E,A,w,c).minus(P).abs().comparedTo(e(y,l,w,c).minus(P).abs())<1?[E,A]:[y,l],U=N,g},s.toNumber=function(){return+ie(this)},s.toPrecision=function(a,u){return a!=null&&fe(a,1,Ce),Ue(this,a,u,2)},s.toString=function(a){var u,l=this,A=l.s,m=l.e;return m===null?A?(u="Infinity",A<0&&(u="-"+u)):u="NaN":(a==null?u=m<=f||m>=_?Hn(Fe(l.c),m):at(Fe(l.c),m,"0"):a===10&&ee?(l=ue(new R(l),i+m+1,c),u=at(Fe(l.c),l.e,"0")):(fe(a,2,q.length,"Base"),u=t(at(Fe(l.c),m,"0"),10,a,A,!0)),A<0&&l.c[0]&&(u="-"+u)),u},s.valueOf=s.toJSON=function(){return ie(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,n!=null&&R.set(n),R}function He(n){var e=n|0;return n>0||n===e?e:e-1}function Fe(n){for(var e,t,r=1,s=n.length,o=n[0]+"";r<s;){for(e=n[r++]+"",t=Q-e.length;t--;e="0"+e);o+=e}for(s=o.length;o.charCodeAt(--s)===48;);return o.slice(0,s+1||1)}function vt(n,e){var t,r,s=n.c,o=e.c,i=n.s,c=e.s,f=n.e,_=e.e;if(!i||!c)return null;if(t=s&&!s[0],r=o&&!o[0],t||r)return t?r?0:-c:i;if(i!=c)return i;if(t=i<0,r=f==_,!s||!o)return r?0:!s^t?1:-1;if(!r)return f>_^t?1:-1;for(c=(f=s.length)<(_=o.length)?f:_,i=0;i<c;i++)if(s[i]!=o[i])return s[i]>o[i]^t?1:-1;return f==_?0:f>_^t?1:-1}function fe(n,e,t,r){if(n<e||n>t||n!==qe(n))throw Error(Oe+(r||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function qn(n){var e=n.c.length-1;return He(n.e/Q)==e&&n.c[e]%2!=0}function Hn(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function at(n,e,t){var r,s;if(e<0){for(s=t+".";++e;s+=t);n=s+n}else if(r=n.length,++e>r){for(s=t,e-=r;--e;s+=t);n+=s}else e<r&&(n=n.slice(0,e)+"."+n.slice(e));return n}var Ea=To(),Ro=Ea;var Dl=new Ro("1e+18");b();C();k();var Po=Ne(st(),1);var $n=n=>{let e=(0,Po.u8)(n),{encode:t,decode:r}=ft(e),s=e;return s.decode=(o,i)=>!!r(o,i),s.encode=(o,i,c)=>{let f=Number(o);return t(f,i,c)},s};b();C();k();var Lo=Ne(st(),1);var we=n=>{let e=(0,Lo.blob)(32,n),{encode:t,decode:r}=ft(e),s=e;return s.decode=(o,i)=>{let c=r(o,i);return new G(c)},s.encode=(o,i,c)=>{let f=o.toBuffer();return t(f,i,c)},s};b();C();k();var yt=class extends Error{constructor(e){super(e)}},ct=class extends yt{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}},Vn=class extends yt{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}};var Ft=class extends yt{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}},ut=class extends yt{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}},jn=class extends yt{constructor(){super(...arguments),this.name="TokenInvalidMintError"}};var Gn=class extends yt{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}};b();C();k();var Yn;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(Yn||(Yn={}));b();C();k();var Nt=Ne(st(),1);b();C();k();var qt;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Mint=1]="Mint",n[n.Account=2]="Account"})(qt||(qt={}));var Jn=1;b();C();k();var wt=Ne(st(),1);b();C();k();var an=Ne(st(),1);var Ia=(0,an.struct)([(0,an.u8)("m"),(0,an.u8)("n"),$n("isInitialized"),we("signer1"),we("signer2"),we("signer3"),we("signer4"),we("signer5"),we("signer6"),we("signer7"),we("signer8"),we("signer9"),we("signer10"),we("signer11")]),Zn=Ia.span;var Xn;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen"})(Xn||(Xn={}));var Bo=(0,wt.struct)([we("mint"),we("owner"),gt("amount"),(0,wt.u32)("delegateOption"),we("delegate"),(0,wt.u8)("state"),(0,wt.u32)("isNativeOption"),gt("isNative"),gt("delegatedAmount"),(0,wt.u32)("closeAuthorityOption"),we("closeAuthority")]),lt=Bo.span;async function Qr(n,e,t,r=xe){let s=await n.getAccountInfo(e,t);return va(e,s,r)}function va(n,e,t=xe){if(!e)throw new ct;if(!e.owner.equals(t))throw new Ft;if(e.data.length<lt)throw new ut;let r=Bo.decode(e.data.slice(0,lt)),s=v.alloc(0);if(e.data.length>lt){if(e.data.length===Zn)throw new ut;if(e.data[lt]!=qt.Account)throw new Vn;s=e.data.slice(lt+Jn)}return{address:n,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==Xn.Uninitialized,isFrozen:r.state===Xn.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}b();C();k();function xo(n,e,t){if(t.length){n.push({pubkey:e,isSigner:!1,isWritable:!1});for(let r of t)n.push({pubkey:r instanceof G?r:r.publicKey,isSigner:!0,isWritable:!1})}else n.push({pubkey:e,isSigner:!0,isWritable:!1});return n}var Oo=(0,Nt.struct)([(0,Nt.u32)("mintAuthorityOption"),we("mintAuthority"),gt("supply"),(0,Nt.u8)("decimals"),$n("isInitialized"),(0,Nt.u32)("freezeAuthorityOption"),we("freezeAuthority")]),es=Oo.span;async function Uo(n,e,t,r=xe){let s=await n.getAccountInfo(e,t);return Na(e,s,r)}function Na(n,e,t=xe){if(!e)throw new ct;if(!e.owner.equals(t))throw new Ft;if(e.data.length<es)throw new ut;let r=Oo.decode(e.data.slice(0,es)),s=v.alloc(0);if(e.data.length>es){if(e.data.length<=lt)throw new ut;if(e.data.length===Zn)throw new ut;if(e.data[lt]!=qt.Mint)throw new jn;s=e.data.slice(lt+Jn)}return{address:n,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function ts(n,e,t=!1,r=xe,s=on){if(!t&&!G.isOnCurve(e.toBuffer()))throw new Gn;let[o]=G.findProgramAddressSync([e.toBuffer(),r.toBuffer(),n.toBuffer()],s);return o}b();C();k();function Mo(n,e,t,r,s=xe,o=on){return _a(n,e,t,r,v.alloc(0),s,o)}function _a(n,e,t,r,s,o=xe,i=on){let c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:ve.programId,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1}];return new oe({keys:c,programId:i,data:s})}b();C();k();var Qn=Ne(st(),1);var Wo=(0,Qn.struct)([(0,Qn.u8)("instruction"),gt("amount")]);function Do(n,e,t,r,s=[],o=xe){let i=xo([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,s),c=v.alloc(Wo.span);return Wo.encode({instruction:Yn.Transfer,amount:BigInt(r)},c),new oe({keys:i,programId:o,data:c})}async function zo({provider:n,to:e,amount:t,tokenMint:r,connection:s}){if(!n.publicKey)throw new Error("No public key found");if(t<=0)throw new Error("Amount must be greater than 0");try{let o=n.publicKey,i=new Ie(e),c=new Ie(r),_=(await Uo(s,c)).decimals;if(_<0)throw new Error("Invalid token decimals");let I=Math.floor(t*10**_),U=ts(c,o),F=ts(c,i);try{if((await Qr(s,U)).amount<BigInt(I))throw new Error("Insufficient token balance")}catch(R){throw R instanceof ct?new Error("Sender does not have a token account for this mint"):R}let M=!1;try{await Qr(s,F)}catch(R){if(R instanceof ct)M=!0;else throw R}let Z=[],K=M?An.UNIT_LIMIT_WITH_ATA_CREATION:An.UNIT_LIMIT_TRANSFER_ONLY;Z.push(Bt.setComputeUnitPrice({microLamports:An.UNIT_PRICE_MICRO_LAMPORTS}),Bt.setComputeUnitLimit({units:K})),M&&Z.push(Mo(o,F,i,c)),Z.push(Do(U,F,o,I,[],xe));let{blockhash:q,lastValidBlockHeight:ee}=await s.getLatestBlockhash();return new Me({feePayer:o,blockhash:q,lastValidBlockHeight:ee}).add(...Z)}catch(o){throw new Error(`Failed to create SPL token transaction: ${o instanceof Error?o.message:"Unknown error"}`)}}b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();var cn={hexStringToNumber(n){let e=n.startsWith("0x")?n.slice(2):n;return parseInt(e,16)},numberToHexString(n){return`0x${n.toString(16)}`},async getUserInfo(n){let[e,t]=await Promise.all([cn.getAddresses(n),cn.getChainId(n)]);return{chainId:t,addresses:e}},async getChainId(n){let e=await n.request({method:"eth_chainId"});return Number(e)},async getAddress(n){let[e]=await n.request({method:"eth_accounts"});return e},async getAddresses(n){return await n.request({method:"eth_accounts"})},async addEthereumChain(n,e){let t=e.rpcUrls.chainDefault?.http||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:cn.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[Pe.NetworkImageIds[e.id]]}]})}};b();C();k();b();C();k();var _t={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();function dt(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}var Tt=dt({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});b();C();k();var un=dt({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});b();C();k();var Ko=dt({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});b();C();k();var pf=dt({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),gf=dt({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var Ta={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},De={getMethodsByChainNamespace(n){return Ta[n]||[]},createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,e){if(!e)return{...n};let t={...n},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{let[o]=s.split(":");o&&r.add(o)}),r.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,o])=>{t[s]&&(t[s].methods=o)}),e.chains&&Object.entries(e.chains).forEach(([s,o])=>{t[s]&&(t[s].chains=o)}),e.events&&Object.entries(e.events).forEach(([s,o])=>{t[s]&&(t[s].events=o)}),e.rpcMap){let s=new Set;Object.entries(e.rpcMap).forEach(([o,i])=>{let[c,f]=o.split(":");!c||!f||!t[c]||(t[c].rpcMap||(t[c].rpcMap={}),s.has(c)||(t[c].rpcMap={},s.add(c)),t[c].rpcMap[f]=i)})}return t},createNamespaces(n,e){let t=n.reduce((r,s)=>{let{id:o,chainNamespace:i,rpcUrls:c}=s,f=c.default.http[0];r[i]||(r[i]=this.createDefaultNamespace(i));let _=`${i}:${o}`,I=r[i];switch(I.chains.push(_),_){case Tt.caipNetworkId:I.chains.push(Tt.deprecatedCaipNetworkId);break;case un.caipNetworkId:I.chains.push(un.deprecatedCaipNetworkId);break;default:}return I?.rpcMap&&f&&(I.rpcMap[o]=f),r},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async n=>{let e=await Os.resolveName(n);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(n={}){return Object.values(n).flatMap(e=>{let t=e.chains||[],r=e.accounts.map(s=>{let[o,i]=s.split(":");return`${o}:${i}`});return Array.from(new Set([...t,...r]))})},isSessionEventData(n){return typeof n=="object"&&n!==null&&"id"in n&&"topic"in n&&"params"in n&&typeof n.params=="object"&&n.params!==null&&"chainId"in n.params&&"event"in n.params&&typeof n.params.event=="object"&&n.params.event!==null},isOriginAllowed(n,e,t){for(let r of[...e,...t])if(r.includes("*")){let o=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(o,"u").test(n))return!0}else try{if(new URL(r).origin===n)return!0}catch{if(r===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:e,onConnect:t,onDisconnect:r,onAccountsChanged:s,onChainChanged:o,onDisplayUri:i}){t&&n.on("connect",()=>{let c=De.getWalletConnectAccounts(n,e);t(c)}),r&&n.on("disconnect",()=>{r()}),s&&n.on("session_event",c=>{if(De.isSessionEventData(c)){let{name:f,data:_}=c.params.event;if(f==="accountsChanged"&&Array.isArray(_)){let I=_.filter(U=>je.isCaipAddress(U)).map(U=>jt.parseCaipAddress(U)).filter(U=>U.chainNamespace===e);s(I)}}}),o&&n.on("chainChanged",c=>{o(c)}),i&&n.on("display_uri",c=>{i(c)})},getWalletConnectAccounts(n,e){let t=new Set,r=n?.session?.namespaces?.[e]?.accounts?.map(s=>jt.parseCaipAddress(s)).filter(({address:s})=>t.has(s.toLowerCase())?!1:(t.add(s.toLowerCase()),!0));return r&&r.length>0?r:[]}};var er=class{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Y.CHAIN.EVM:await this.syncEVMConnections(e);break;case Y.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Y.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:i}){await Promise.all(e.filter(c=>{let{hasDisconnected:f,hasConnected:_}=s(c.id);return!f&&_}).map(async c=>{if(c.id===Y.CONNECTOR_ID.WALLET_CONNECT){let f=De.getWalletConnectAccounts(r,this.namespace),_=t.find(I=>I.chainNamespace===this.namespace&&I.id.toString()===f[0]?.chainId?.toString());f.length>0&&o({connectorId:c.id,accounts:f.map(I=>({address:I.address})),caipNetwork:_})}else{let{accounts:f,chainId:_}=await Ms.fetchProviderData(c);if(f.length>0&&_){let I=t.find(U=>U.chainNamespace===this.namespace&&U.id.toString()===_.toString());o({connectorId:c.id,accounts:f.map(U=>({address:U})),caipNetwork:I}),c.provider&&c.id!==Y.CONNECTOR_ID.AUTH&&c.id!==Y.CONNECTOR_ID.WALLET_CONNECT&&i(c.id,c.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:i}){await Promise.all(e.filter(c=>{let{hasDisconnected:f,hasConnected:_}=s(c.id);return!f&&_}).map(async c=>{if(c.id===Y.CONNECTOR_ID.WALLET_CONNECT){let f=De.getWalletConnectAccounts(r,this.namespace);f.length>0&&o({connectorId:c.id,accounts:f.map(_=>({address:_.address})),caipNetwork:t})}else{let f=await c.connect({chainId:t?.id});f&&(o({connectorId:c.id,accounts:[{address:f}],caipNetwork:t}),i(c.id,c.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:i}){await Promise.all(e.filter(c=>{let{hasDisconnected:f,hasConnected:_}=s(c.id);return!f&&_}).map(async c=>{if(c.id===Y.CONNECTOR_ID.WALLET_CONNECT){let F=De.getWalletConnectAccounts(r,this.namespace);F.length>0&&o({connectorId:c.id,accounts:F.map(M=>({address:M.address})),caipNetwork:t});return}let f=await c.connect(),I=(await c.getAccountAddresses())?.map(F=>je.createAccount(Y.CHAIN.BITCOIN,F.address,F.purpose||"payment",F.publicKey,F.path));if(I&&I.length>1&&(I=[{namespace:Y.CHAIN.BITCOIN,publicKey:I[_t.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:I[_t.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:I[_t.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:Y.CHAIN.BITCOIN,publicKey:I[_t.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:I[_t.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:I[_t.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(c.chains.find(F=>F.id===t?.id)||c.chains[0]))throw new Error("The connector does not support any of the requested chains");f&&(i(c.id,c.provider),o({connectorId:c.id,accounts:I.map(F=>({address:F.address,type:F.type})),caipNetwork:t}))}))}getConnection({address:e,connectorId:t,connections:r,connectors:s}){if(t){let i=r.find(_=>Le.isLowerCaseMatch(_.connectorId,t));if(!i)return null;let c=s.find(_=>Le.isLowerCaseMatch(_.id,i.connectorId)),f=e?i.accounts.find(_=>Le.isLowerCaseMatch(_.address,e)):i.accounts[0];return{...i,account:f,connector:c}}let o=r.find(i=>i.accounts.length>0&&s.some(c=>Le.isLowerCaseMatch(c.id,i.connectorId)));if(o){let[i]=o.accounts,c=s.find(f=>Le.isLowerCaseMatch(f.id,o.connectorId));return{...o,account:i,connector:c}}return null}};b();C();k();b();C();k();b();C();k();b();C();k();var Rt=class{constructor({provider:e,namespace:t}){this.id=Y.CONNECTOR_ID.WALLET_CONNECT,this.name=Pe.ConnectorNamesMap[Y.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Pe.ConnectorImageIds[Y.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Ge.getCaipNetworks.bind(Ge),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let t=this.getCaipNetworks(),r=Rs.state.universalProviderConfigOverride,s=De.createNamespaces(t,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(t=>t.caipNetworkId);return En.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Ra})}},Ra=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var Pa=[Y.CONNECTOR_ID.AUTH,Y.CONNECTOR_ID.WALLET_CONNECT],Ht=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=t=>Ge.getCaipNetworks(t),this.getConnectorId=t=>Bs.getConnectorId(t),e&&this.construct(e),e?.namespace&&(this.connectionManager=new er({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){let r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===t?.toString());e&&r&&this.addConnection({connectorId:Y.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Y.CONNECTOR_ID.AUTH,type:"AUTH",name:Y.CONNECTOR_NAMES.AUTH,provider:e,imageId:Pe.ConnectorImageIds[Y.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>t.has(r.id)?!1:(t.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){let t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>t.has(r.connectorId.toLowerCase())?!1:(t.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>!Le.isLowerCaseMatch(t.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){xs.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let r=this.eventListeners.get(e);r&&r.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:r}=e;if(!e.provider)return;let s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&r==="AUTH"){let o=s,i=Sn(t.chainNamespace);await o.switchNetwork({chainId:t.caipNetworkId});let c=await o.getUser({chainId:t.caipNetworkId,preferredAccountType:i});this.emit("switchNetwork",c)}}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof Rt);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){let{address:r,chainId:s}=je.getAccount(e[0]),o=this.getCaipNetworks().filter(c=>c.chainNamespace===this.namespace).find(c=>c.id.toString()===s?.toString()),i=this.connectors.find(c=>c.id===t);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:i}),this.addConnection({connectorId:t,accounts:e.map(c=>{let{address:f}=je.getAccount(c);return{address:f}}),caipNetwork:o}))}}onAccountsChanged(e,t,r=!0){if(e.length>0){let{address:s}=je.getAccount(e[0]),o=this.connectionManager?.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});s&&Le.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),t)&&this.emit("accountChanged",{address:s,chainId:o?.caipNetwork?.id,connector:o?.connector}),this.addConnection({connectorId:t,accounts:e.map(i=>{let{address:c}=je.getAccount(i);return{address:c}}),caipNetwork:o?.caipNetwork})}else r&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Le.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,t){let r=typeof e=="string"&&e.startsWith("0x")?cn.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),o=this.getCaipNetworks().filter(i=>i.chainNamespace===this.namespace).find(i=>i.id.toString()===r);s&&this.addConnection({connectorId:t,accounts:s.accounts,caipNetwork:o}),Le.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),t)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,t){if(Pa.includes(e))return;let r=i=>this.onAccountsChanged(i,e),s=i=>this.onChainChanged(i,e),o=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",o),t.on("accountsChanged",r),t.on("chainChanged",s),this.providerHandlers[e]={provider:t,disconnect:o,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){let{provider:t,disconnect:r,accountsChanged:s,chainChanged:o}=this.providerHandlers[e];t.removeListener("disconnect",r),t.removeListener("accountsChanged",s),t.removeListener("chainChanged",o),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){let e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){let[t]=e.accounts;this.emit("accountChanged",{address:t?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}};b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();b();C();k();var $t=class extends Error{constructor(e,t){super(e),this.error=t}};var tr=class extends $t{constructor(){super(...arguments),this.name="WalletAccountError"}};var nr=class extends $t{constructor(){super(...arguments),this.name="WalletSendTransactionError"}},ln=class extends $t{constructor(){super(...arguments),this.name="WalletSignTransactionError"}},rr=class extends $t{constructor(){super(...arguments),this.name="WalletSignMessageError"}};b();C();k();function nt(n){return"version"in n}b();C();k();b();C();k();var sr="solana:signAndSendTransaction";b();C();k();var Fo="solana:signMessage";b();C();k();var dn="solana:signTransaction";b();C();k();var or="standard:connect";b();C();k();var qo="standard:disconnect";b();C();k();var ir="standard:events";function Ho(n){return or in n.features&&ir in n.features&&(sr in n.features||dn in n.features)}b();C();k();function $o(n){if(typeof n=="string")return`solana:${n}`}b();C();k();var rt=class{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,t){this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]=this.listeners[e].filter(r=>r!==t)}emit(e,t){this.listeners[e].forEach(r=>r(t))}};var ar=class extends rt{constructor(e){super(),this.id=Y.CONNECTOR_ID.AUTH,this.name=Y.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=Y.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){let e=Ge.state.chains.get(Y.CHAIN.SOLANA)?.accountState?.address;return e?new Ie(e):void 0}get chains(){let e=this.provider.getAvailableChainIds();return this.requestedChains.filter(t=>e.includes(t.caipNetworkId))}async connect(e={}){let t=e.chainId||this.getActiveChain()?.id,r=Sn("solana");if(await En.authConnectorAuthenticate({authConnector:this.provider,chainId:$o(t),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:Y.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");let t=await this.provider.request({method:"solana_signMessage",params:{message:Ee.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Ee.decode(t.signature)}async signTransaction(e){let t=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=Ee.decode(t.transaction);return nt(e)?ot.deserialize(r):Me.from(r)}async signAndSendTransaction(e,t){let r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:t},chainNamespace:this.chain})).signature}async sendTransaction(e,t,r){let s=await this.signTransaction(e);return await t.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{let o=e[s];if(!o)throw new Error("Invalid solana_signAllTransactions response");let i=Ee.decode(r);return nt(o)?ot.deserialize(i):Me.from(i)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Ee.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}};b();C();k();b();C();k();var cr=class extends rt{constructor(e){super(),this.name="Coinbase Wallet",this.id=Pe.ConnectorExplorerIds[Y.CONNECTOR_ID.COINBASE_SDK]||this.name,this.explorerId=Pe.ConnectorExplorerIds[Y.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=Y.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===Tt.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return Pe.ConnectorImageIds[Y.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();let e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,t){return(await this.coinbase.signAndSendTransaction(e,t)).signature}async sendTransaction(e,t,r){let s=await this.signTransaction(e);return await t.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){let e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){let t=this.coinbase.publicKey;if(e&&!t)throw new Error("Not connected");return t}};b();C();k();b();C();k();b();C();k();b();C();k();var hn=class extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}},fn=class extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}};var Ba=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ns,pn=class extends Rt{constructor({provider:e,chains:t,getActiveChain:r}){super({caipNetworks:t,namespace:"solana",provider:e}),this.eventEmitter=new rt,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),ns.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let t=e;return t===We.CHAIN_IDS.Deprecated_Mainnet?t=We.CHAIN_IDS.Mainnet:t===We.CHAIN_IDS.Deprecated_Devnet&&(t=We.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===t)}).filter(Boolean)}get icon(){return Ps.state.connectorImages[this.id]}get version(){return Ba(this,ns,"f")}get publicKey(){let e=this.getAccount(!1);if(e)return new Ie(e.publicKey)}async connect(){await super.connectWalletConnect();let e=this.getAccount(!0);return this.emit("connect",new Ie(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");let t=await this.internalRequest("solana_signMessage",{message:Ee.encode(e),pubkey:this.getAccount(!0).address});return Ee.decode(t.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");let t=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:t,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){let o=Ee.decode(r.signature);return e.addSignature(new Ie(this.getAccount(!0).publicKey),v.from(o)),e}let s=v.from(r.transaction,"base64");return nt(e)?ot.deserialize(new Uint8Array(s)):Me.from(s)}async signAndSendTransaction(e,t){this.checkIfMethodIsSupported("solana_signAndSendTransaction");let r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:t});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,t,r){let s=await this.signTransaction(e),o=await t.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),o}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{let o=e[s];if(!o)throw new Error("Invalid transactions response");let i=v.from(r,"base64");return nt(o)?ot.deserialize(new Uint8Array(i)):(this.emit("pendingTransaction",void 0),Me.from(i))})}catch(t){if(t instanceof fn){let r=[];for(let s of e)r.push(await this.signTransaction(s));return r}throw t}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){let e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(t=>({namespace:this.chain,address:jt.parseCaipAddress(t).address,type:"eoa"})))}internalRequest(e,t){let s=this.chains.find(o=>this.getActiveChain()?.id===o.id)?.caipNetworkId;switch(s){case We.CHAIN_IDS.Mainnet:this.sessionChains.includes(We.CHAIN_IDS.Mainnet)||(s=We.CHAIN_IDS.Deprecated_Mainnet);break;case We.CHAIN_IDS.Devnet:this.sessionChains.includes(We.CHAIN_IDS.Devnet)||(s=We.CHAIN_IDS.Deprecated_Devnet);break;default:break}return this.provider?.request({method:e,params:t},s)}get sessionChains(){return De.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return v.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){let t=this.session?.namespaces.solana?.accounts[0];if(!t){if(e)throw new Error("Account not found");return}let r=t.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:Ee.decode(r)}}getRawRPCParams(e){return nt(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(t=>({data:Ee.encode(new Uint8Array(t.data)),keys:t.keys.map(r=>({isWritable:r.isWritable,isSigner:r.isSigner,pubkey:r.pubkey.toBase58()})),programId:t.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new fn(e)}};ns=new WeakMap;b();C();k();var Vo={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function rs({provider:n,to:e,value:t,connection:r}){if(!n.publicKey)throw Error("No public key found");let s=new Ie(e),o=Math.floor(t*Ts),{blockhash:i,lastValidBlockHeight:c}=await r.getLatestBlockhash(),f=[Bt.setComputeUnitPrice({microLamports:Vo.UNIT_PRICE_MICRO_LAMPORTS}),Bt.setComputeUnitLimit({units:Vo.UNIT_LIMIT}),_s.transfer({fromPubkey:n.publicKey,toPubkey:s,lamports:o})];return new Me({feePayer:n.publicKey,blockhash:i,lastValidBlockHeight:c}).add(...f)}b();C();k();b();C();k();var xa=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Oa=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},ur,gn,lr=new Set;function Ua(n){mn=void 0,lr.add(n)}function Ma(n){mn=void 0,lr.delete(n)}var Vt={};function Yo(){if(gn||(gn=Object.freeze({register:jo,get:Wa,on:Da}),typeof window>"u"))return gn;let n=Object.freeze({register:jo});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new ss(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return gn}function jo(...n){return n=n.filter(e=>!lr.has(e)),n.length?(n.forEach(e=>Ua(e)),Vt.register?.forEach(e=>Go(()=>e(...n))),function(){n.forEach(t=>Ma(t)),Vt.unregister?.forEach(t=>Go(()=>t(...n)))}):()=>{}}var mn;function Wa(){return mn||(mn=[...lr]),mn}function Da(n,e){return Vt[n]?.push(e)||(Vt[n]=[e]),function(){Vt[n]=Vt[n]?.filter(r=>e!==r)}}function Go(n){try{n()}catch(e){console.error(e)}}var ss=class extends Event{get detail(){return xa(this,ur,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ur.set(this,void 0),Oa(this,ur,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};ur=new WeakMap;b();C();k();b();C();k();function Jo(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}b();C();k();var os={"solana:mainnet":Tt,"solana:testnet":Ko,"solana:devnet":un};var dr=class extends rt{constructor({wallet:e,getActiveChain:t,requestedChains:r}){super(),this.chain=Y.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=t,this.requestedChains=r,this.bindEvents()}get id(){let e=this.name;return Pe.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return Pe.ConnectorExplorerIds[this.name]}get publicKey(){let e=this.getAccount(!1);if(e)return new Ie(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(t=>t.id===e||t.id===os[e]?.id)).filter(Boolean)}async connect(){await this.getWalletFeature(or).connect();let t=this.getAccount(!0),r=new Ie(t.publicKey);return this.emit("connect",r),t.address}async disconnect(){await this.getWalletFeature(qo).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){let t=this.getWalletFeature(Fo),r=this.getAccount(!0),[s]=await t.signMessage({message:e,account:r});if(!s)throw new rr("Empty result");return s.signature}async signTransaction(e){let t=this.getWalletFeature(dn),r=this.getAccount(!0),s=this.serializeTransaction(e),[o]=await t.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!o)throw new ln("Empty result");return this.emit("pendingTransaction",void 0),nt(e)?ot.deserialize(o.signedTransaction):Me.from(o.signedTransaction)}async signAndSendTransaction(e,t){let r=this.getWalletFeature(sr),s=this.getAccount(!0),[o]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...t,preflightCommitment:Jo(t?.preflightCommitment)},chain:this.getActiveChainName()});if(!o)throw new nr("Empty result");return this.emit("pendingTransaction",void 0),Ee.encode(o.signature)}async sendTransaction(e,t,r){let s=await this.signTransaction(e);return await t.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){let t=this.getWalletFeature(dn),r=this.getAccount(!0),s=this.getActiveChainName();return(await t.signTransaction(...e.map(i=>({transaction:new Uint8Array(this.serializeTransaction(i)),account:r,chain:s})))).map(({signedTransaction:i},c)=>{let f=e[c];if(!f)throw new ln("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),nt(f)?ot.deserialize(i):Me.from(i)})}async request(e){return Promise.reject(new hn("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){let t=this.wallet.accounts[0];if(e&&!t)throw new tr;return t}getWalletFeature(e){if(!(e in this.wallet.features))throw new hn(e);return this.wallet.features[e]}getActiveChainName(){let e=Object.entries(os).find(([,t])=>t.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(ir).on("change",t=>{if(t.accounts){let r=t.accounts[0];r&&this.emit("accountsChanged",new Ie(r.publicKey))}})}};var{get:za,on:Zo}=Yo(),bt=[];function Qo(n,e,t){let r=[Zo("register",(...s)=>{bt=[...bt,...Xo(s,n,e)],t(...bt)}),Zo("unregister",(...s)=>{bt=bt.filter(o=>s.some(i=>i.name===o.wallet.name)),t(...bt)})];return bt=Xo(za(),n,e),t(...bt),()=>r.forEach(s=>s())}function Xo(n,e,t){return n.filter(r=>r.name!=="WalletConnect"&&Ho(r)).map(r=>new dr({wallet:r,requestedChains:e,getActiveChain:t}))}var Ka=[Y.CONNECTOR_ID.AUTH,Y.CONNECTOR_ID.WALLET_CONNECT],yn=class extends Ht{constructor(e={}){super({adapterType:Y.ADAPTER_TYPES.SOLANA,namespace:Y.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);let t=xt.getActiveCaipNetworkId(),s=(e.networks?.find(o=>o.caipNetworkId===t)||e.networks?.[0])?.rpcUrls.default.http[0];s&&kt.setConnection(new Lt(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new ar({w3mFrameProvider:e,getActiveChain:()=>Ge.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,t){e.projectId||Ls.open(Us.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");let r=()=>t.getCaipNetwork(this.namespace);je.isClient()&&"coinbaseSolana"in window&&this.addConnector(new cr({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),Qo(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){let t=this.connectors.find(r=>r.id===e.id);return t?{accounts:await t.getAccounts()}:{accounts:[]}}async signMessage(e){let t=e.provider;if(!t)throw new Error("connectionControllerClient:signMessage - provider is undefined");let r=await t.signMessage(new TextEncoder().encode(e.message));return{signature:Ee.encode(r)}}async estimateGas(e){let t=kt.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");let s=await(await rs({provider:e.provider,connection:t,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(t);return{gas:BigInt(s||0)}}async sendTransaction(e){let t=kt.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");let r=e.provider,s=e.tokenMint?await zo({provider:r,connection:t,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await rs({provider:r,connection:t,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),o=await r.sendTransaction(s,t);return await new Promise(i=>{let c=setInterval(async()=>{(await t.getSignatureStatus(o))?.value&&(clearInterval(c),i())},1e3)}),{hash:o}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){let t=this.connectors.find(_=>_.id===e.id);if(!t)throw new Error("Provider not found");let r={...t,...e.id===Y.CONNECTOR_ID.AUTH?{provider:t}:{}},s=e.rpcUrl||this.getCaipNetworks()?.find(_=>_.id===e.chainId)?.rpcUrls.default.http[0];if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);let o=this.connectionManager?.getConnection({address:e.address,connectorId:t.id,connections:this.connections,connectors:this.connectors});if(o?.account)return this.emit("accountChanged",{address:o.account.address,chainId:o.caipNetwork?.id,connector:r}),{id:t.id,address:o.account.address,chainId:e.chainId,provider:t,type:t.type};let i=await t.connect({chainId:e.chainId,socialUri:e.socialUri});kt.setConnection(new Lt(s,this.connectionSettings)),this.emit("accountChanged",{address:i,chainId:e.chainId,connector:r});let c=t.id===Y.CONNECTOR_ID.AUTH,f=this.getCaipNetworks()?.find(_=>_.id===e.chainId);return this.addConnection({connectorId:t.id,accounts:[{address:i}],caipNetwork:f,auth:c?{name:xt.getConnectedSocialProvider(),username:xt.getConnectedSocialUsername()}:void 0}),t.id!==Y.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(t.id,t.provider),{id:t.id,address:i,chainId:e.chainId,provider:t,type:t.type}}async getBalance(e){let t=e.address,r=this.getCaipNetworks()?.find(f=>f.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"SOL"});let s=new Lt(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),o=`${r?.caipNetworkId}:${e.address}`,i=this.balancePromises[o];if(i)return i;let c=xt.getNativeBalanceCacheForCaipAddress(o);return c?{balance:c.balance,symbol:c.symbol}:(this.balancePromises[o]=new Promise(async f=>{try{let I=(await s.getBalance(new Ie(t))/We.LAMPORTS_PER_SOL).toString();if(xt.updateNativeBalanceCache({caipAddress:o,balance:I,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");f({balance:I,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{f({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[o]}),this.balancePromises[o]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);let{caipNetwork:t}=e;t?.rpcUrls?.default?.http?.[0]&&kt.setConnection(new Lt(t.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,t){if(Ka.includes(e))return;let r=o=>{this.onAccountsChanged([o.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",s),t.on("accountsChanged",r),t.on("connect",r),this.providerHandlers[e]={provider:t,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;let t=Y.CONNECTOR_ID.WALLET_CONNECT;De.listenWcProvider({universalProvider:e,namespace:Y.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,t),onDisconnect:()=>this.onDisconnect(t),onAccountsChanged:s=>this.onAccountsChanged(s,t,!1)});let r=new pn({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>Ge.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){let{SolanaWalletConnectStandardWallet:s}=await import("./wallet-standard-YEWFC525.js");s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){let t=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find(o=>o.id===e)?.rpcUrls.default.http[0],s=new Lt(r,this.connectionSettings);return kt.setConnection(s),t}async disconnect(e){if(e.id){let t=this.connectors.find(s=>s.id===e.id);if(!t)throw new Error("Provider not found");let r=this.connections.find(s=>Le.isLowerCaseMatch(s.connectorId,e.id));return await t.provider.disconnect(),this.deleteConnection(t.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:t,getConnectorStorageInfo:r}){await this.connectionManager?.syncConnections({connectors:this.connectors,caipNetwork:t,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r}),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new pn({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>Ge.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async t=>{let r=this.connectors.find(s=>Le.isLowerCaseMatch(s.id,t.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),t}))}}};var hr=Ne(cs(),1);var Fa=new bs,qa=new yn,Ha="939345e3a30974b284f27b6a7918736f",$a={name:"Intear Wallet",description:"Intear Wallet",url:"https://wallet.intear.tech",icons:["/favicon.svg"]};ws({adapters:[qa],networks:[Cs],projectId:Ha,metadata:$a,features:{analytics:!1,socials:!1,onramp:!1,swaps:!1,receive:!1,send:!1,email:!1},themeMode:"dark"});function Va({children:n}){return Qe.default.createElement(ks,{client:Fa},n)}function ja({messageToSign:n,onSignature:e}){let t=kr({namespace:"solana"}),{open:r,close:s}=Cr(),{walletProvider:o}=ys("solana"),[i,c]=(0,Qe.useState)(!1);return(0,hr.useEffect)(()=>{let f=async()=>{if(t.isConnected&&n&&o)try{let _=new TextEncoder().encode(n),I=await o.signMessage(_);e(I,n,t.address||null),o.disconnect(),s(),c(!1)}catch(_){console.error("Signing error:",_),e(null,n,null),o.disconnect(),s(),c(!1)}};if(t.isConnected&&n&&!i&&(c(!0),f()),!t.isConnected&&n){r({view:"Connect"});let _=!1,I=setInterval(()=>{let U=document.getElementsByTagName("w3m-modal")[0];U&&U.className==="open"?_=!0:_&&(clearInterval(I),e(null,n,null),o.disconnect(),s())},50);return()=>clearInterval(I)}},[t.isConnected,n,o,e,r,i]),Qe.default.createElement(Qe.default.Fragment,null)}function Ga({onConnection:n}){let e=kr({namespace:"solana"}),{open:t,close:r}=Cr();return(0,hr.useEffect)(()=>{if(e.isConnected&&e.address){let s=e.address;n(s),r()}},[e.isConnected,e.address,n,r]),(0,hr.useEffect)(()=>{if(!e.isConnected){t({view:"Connect"});let s=!1,o=setInterval(()=>{let i=document.getElementsByTagName("w3m-modal")[0];i&&i.className==="open"?s=!0:s&&(clearInterval(o),n(null))},50);return()=>clearInterval(o)}},[e.isConnected,n,t]),Qe.default.createElement(Qe.default.Fragment,null)}function Ya({messageToSign:n,onSignature:e,needsSignIn:t,onConnection:r}){return Qe.default.createElement(Va,null,n&&Qe.default.createElement(ja,{messageToSign:n,onSignature:e}),t&&Qe.default.createElement(Ga,{onConnection:r}))}export{Ya as default};
/*! Bundled license information:

@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
