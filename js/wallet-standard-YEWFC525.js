import{h as G,i as L,j as W,o as it}from"./chunk-3YVXFCSY.js";import{D as ot,k as st}from"./chunk-N2WXLAZF.js";import"./chunk-BOTAV32Q.js";import"./chunk-X4QP7L3N.js";import"./chunk-EVEOQSJV.js";import"./chunk-NBB6K44E.js";import{a as S}from"./chunk-7GZ7JYLK.js";import"./chunk-6HADIPAO.js";import"./chunk-XQOHLC2A.js";import"./chunk-JKAT2LPR.js";import"./chunk-WVZCG2XE.js";import"./chunk-SH2H32CZ.js";import"./chunk-BDUWLAUS.js";import"./chunk-OBMTZ2R2.js";import"./chunk-6ZQQ3XQO.js";import"./chunk-J26BEOSD.js";import"./chunk-MQMLE4BX.js";import"./chunk-UHIHVU5C.js";import"./chunk-EDRI7XUL.js";import{i as c,k as d,l as f,o as h}from"./chunk-JY5TIRRF.js";c();h();d();c();h();d();c();h();d();var dt=function(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)},ht=function(n,e,t,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},v;function B(n){let e=({register:t})=>t(n);try{window.dispatchEvent(new Z(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}var Z=class extends Event{get detail(){return dt(this,v,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),v.set(this,void 0),ht(this,v,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};v=new WeakMap;c();h();d();var Mt={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},I={mainnet:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedMainnet:"4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",devnet:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedDevnet:"8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};function wt(n){return Mt[n]||[]}function ut(n){return{methods:wt(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}}function rt(n){return n.reduce((e,t)=>{let{id:a,chainNamespace:i,rpcUrls:r}=t,w=r.default.http[0];e[i]||(e[i]=ut(i));let u=`${i}:${a}`,o=e[i];switch(o?.chains.push(u),u){case I.mainnet:o.chains.push(I.deprecatedMainnet);break;case I.devnet:o.chains.push(I.deprecatedDevnet);break;default:}return o?.rpcMap&&w&&(o.rpcMap[a]=w),e},{})}c();h();d();c();h();d();var y=["solana:mainnet","solana:devnet","solana:testnet","solana:localnet"];var m=function(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)},_=function(n,e,t,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},x,b,O,U,Y,Q,P=class{get address(){return m(this,x,"f")}get publicKey(){return m(this,b,"f").slice()}get chains(){return m(this,O,"f").slice()}get features(){return m(this,U,"f").slice()}get label(){return m(this,Y,"f")}get icon(){return m(this,Q,"f")}constructor({address:e,publicKey:t,label:a,icon:i}){x.set(this,void 0),b.set(this,void 0),O.set(this,void 0),U.set(this,void 0),Y.set(this,void 0),Q.set(this,void 0),_(this,x,e,"f"),_(this,b,t,"f"),_(this,O,y,"f"),_(this,U,["solana:signAndSendTransaction","solana:signTransaction","solana:signMessage"],"f"),_(this,Y,a,"f"),_(this,Q,i,"f")}};x=new WeakMap,b=new WeakMap,O=new WeakMap,U=new WeakMap,Y=new WeakMap,Q=new WeakMap;c();h();d();function k(n){return y.includes(n)}function E(n){return"version"in n}var s=function(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)},C=function(n,e,t,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},z,D,V,M,F,J,l,X,$,lt,j,q,H,tt,et,K,at,R;function ft(n){return{"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"solana:mainnet","solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ":"solana:mainnet","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"solana:testnet","solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K":"solana:devnet","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":"solana:devnet"}[n]}var nt=class n{static register(e){let t=new n(e);B(t)}get version(){return s(this,V,"f")}get name(){return s(this,F,"f")}get icon(){return s(this,J,"f")}get chains(){return y.slice()}get features(){return{"standard:connect":{version:"1.0.0",connect:s(this,tt,"f")},"standard:disconnect":{version:"1.0.0",disconnect:s(this,et,"f")},"standard:events":{version:"1.0.0",on:s(this,X,"f")},"solana:signAndSendTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:s(this,K,"f")},"solana:signTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:s(this,at,"f")},"solana:signMessage":{version:"1.0.0",signMessage:s(this,R,"f")}}}get accounts(){let e=s(this,M,"f").session?.namespaces?.solana,t=e?.chains?.map(a=>ft(a));return e?.accounts.map(a=>{let{address:i}=st.parseCaipAddress(a),r=new G(S.decode(i));return{address:i,publicKey:r.toBytes(),chains:t,features:["solana:signAndSendTransaction","solana:signTransaction","solana:signMessage"]}})||[]}constructor(e){z.add(this),D.set(this,{}),V.set(this,"1.0.0"),M.set(this,void 0),F.set(this,"WalletConnect"),J.set(this,"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+"),l.set(this,null),X.set(this,(t,a)=>(s(this,D,"f")[t]||(s(this,D,"f")[t]=[]),s(this,D,"f")[t].push(a),()=>s(this,z,"m",lt).call(this,t,a))),j.set(this,()=>{let t=this.accounts[0];t?.publicKey&&(C(this,l,new P(t),"f"),s(this,z,"m",$).call(this,"change",{accounts:this.accounts}))}),q.set(this,()=>{s(this,l,"f")&&(C(this,l,null,"f"),s(this,z,"m",$).call(this,"change",{accounts:this.accounts}))}),H.set(this,()=>{s(this,M,"f").session?.namespaces?.solana?.accounts.length?s(this,j,"f").call(this):s(this,q,"f").call(this)}),tt.set(this,async()=>(s(this,l,"f")||(ot.push("ConnectingWalletConnect"),await s(this,M,"f").connect({namespaces:rt([it.DEFAULT_CHAIN])})),s(this,j,"f").call(this),{accounts:this.accounts})),et.set(this,async()=>{await s(this,M,"f").disconnect()}),K.set(this,async(...t)=>{if(!s(this,l,"f"))throw new Error("not connected");let a=[];if(t.length===1){let{transaction:i,account:r,chain:w,options:u}=t[0]||{},{minContextSlot:o,preflightCommitment:g,skipPreflight:T,maxRetries:p}=u||{};if(r?.address!==s(this,l,"f")?.address)throw new Error("invalid account");if(!k(w||":"))throw new Error("invalid chain");if(!i)throw new Error("invalid transaction");let ct=await s(this,M,"f").request({method:"solana_signAndSendTransaction",params:{transaction:i,pubkey:s(this,l,"f").address,sendOptions:{preflightCommitment:g,minContextSlot:o,maxRetries:p,skipPreflight:T}}});a.push({signature:S.decode(ct.signature)})}else if(t.length>1){let i=await Promise.all(t.map(r=>s(this,K,"f").call(this,r)));for(let r of i)a.push(...r)}return a}),at.set(this,async(...t)=>{if(!s(this,l,"f"))throw new Error("not connected");let a=[];if(t.length===1){let{transaction:i,account:r,chain:w}=t[0]||{};if(r?.address!==s(this,l,"f").address)throw new Error("invalid account");if(w&&!k(w))throw new Error("invalid chain");if(!i)throw new Error("invalid transaction");let u=L.from(i),o,g=await s(this,M,"f").request({method:"solana_signTransaction",params:{transaction:i,pubkey:s(this,l,"f").address}});if("signature"in g){let p=S.decode(g.signature);u.addSignature(new G(s(this,l,"f").publicKey),f.from(p)),o=u}else{let p=f.from(g.transaction,"base64");E(u)&&(o=W.deserialize(new Uint8Array(p))),o=L.from(p)}if(!o)throw new Error("invalid transaction");let T=E(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}));a.push({signedTransaction:T})}else if(t.length>1){let i;for(let o of t){if(o.account?.address!==s(this,l,"f").address)throw new Error("invalid account");if(o.chain){if(!k(o.chain))throw new Error("invalid chain");if(i&&o.chain!==i)throw new Error("conflicting chain");i=o.chain}}let r=t.map(({transaction:o})=>W.deserialize(o)),u=(await s(this,M,"f").request({method:"solana_signAllTransactions",params:{transactions:r}})).transactions.map((o,g)=>{let T=r[g];if(!T)throw new Error("Invalid transactions response");let p=f.from(o,"base64");return E(T)?W.deserialize(new Uint8Array(p)):L.from(p)});a.push(...u.map(o=>({signedTransaction:E(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}))})))}return a}),R.set(this,async(...t)=>{if(!s(this,l,"f"))throw new Error("not connected");let a=[];if(t.length===1){let{message:i,account:r}=t[0]||{};if(r?.address!==s(this,l,"f").address)throw new Error("invalid account");if(!i)throw new Error("invalid message");let w=await s(this,M,"f").request({method:"solana_signMessage",params:{message:i,pubkey:s(this,l,"f").address}});a.push({signedMessage:i,signature:S.decode(w.signature)})}else if(t.length>1){let i=await Promise.all(t.map(r=>s(this,R,"f").call(this,r)));for(let r of i)a.push(...r)}return a}),C(this,M,e,"f"),this.setProvider(e),B(this)}setProvider(e){C(this,M,e,"f"),C(this,F,"WalletConnect","f"),e.on("connect",()=>s(this,j,"f").call(this)),e.on("disconnect",()=>s(this,q,"f").call(this)),e.on("accountsChanged",()=>s(this,H,"f").call(this)),e.on("chainChanged",()=>s(this,H,"f").call(this)),s(this,j,"f").call(this)}};D=new WeakMap,V=new WeakMap,M=new WeakMap,F=new WeakMap,J=new WeakMap,l=new WeakMap,X=new WeakMap,j=new WeakMap,q=new WeakMap,H=new WeakMap,tt=new WeakMap,et=new WeakMap,K=new WeakMap,at=new WeakMap,R=new WeakMap,z=new WeakSet,$=function(e,...t){s(this,D,"f")[e]?.forEach(a=>a.apply(null,t))},lt=function(e,t){s(this,D,"f")[e]=s(this,D,"f")[e]?.filter(a=>t!==a)};export{nt as SolanaWalletConnectStandardWallet};
