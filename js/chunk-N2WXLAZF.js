import{a as kn}from"./chunk-X4QP7L3N.js";import{b as St,o as bn}from"./chunk-6HADIPAO.js";import{d as _n}from"./chunk-XQOHLC2A.js";import{a as Nn,b as In,c as yn,d as Tn}from"./chunk-JKAT2LPR.js";import{a as je}from"./chunk-WVZCG2XE.js";import{db as qt}from"./chunk-J26BEOSD.js";import{d as vn,g as $e,i as p,j as C,k as u,o as m}from"./chunk-JY5TIRRF.js";var Tt=vn((Cs,tn)=>{"use strict";p();m();u();var Qt=kn();tn.exports=Ae;var Ze=Kn().console||{},Ln={mapHttpRequest:lt,mapHttpResponse:lt,wrapRequestSerializer:It,wrapResponseSerializer:It,wrapErrorSerializer:It,req:lt,res:lt,err:Hn};function Mn(e,t){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ae(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let n=e.browser.write||Ze;e.browser.write&&(e.browser.asObject=!0);let r=e.serializers||{},o=Mn(e.browser.serialize,r),s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let i=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),e.enabled===!1&&(e.level="silent");let d=e.level||"info",l=Object.create(n);l.log||(l.log=et),Object.defineProperty(l,"levelVal",{get:f}),Object.defineProperty(l,"level",{get:U,set:ae});let h={transmit:t,serialize:o,asObject:e.browser.asObject,levels:i,timestamp:Wn(e)};l.levels=Ae.levels,l.level=d,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=et,l.serializers=r,l._serialize=o,l._stdErrSerialize=s,l.child=ne,t&&(l._logEvent=yt());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function U(){return this._level}function ae(x){if(x!=="silent"&&!this.levels.values[x])throw Error("unknown level "+x);this._level=x,Ke(h,l,"error","log"),Ke(h,l,"fatal","error"),Ke(h,l,"warn","error"),Ke(h,l,"info","log"),Ke(h,l,"debug","log"),Ke(h,l,"trace","log")}function ne(x,ie){if(!x)throw new Error("missing bindings for child Pino");ie=ie||{},o&&x.serializers&&(ie.serializers=x.serializers);let z=ie.serializers;if(o&&z){var te=Object.assign({},r,z),ee=e.browser.serialize===!0?Object.keys(te):o;delete x.serializers,dt([x],ee,te,this._stdErrSerialize)}function me(he){this._childLevel=(he._childLevel|0)+1,this.error=qe(he,x,"error"),this.fatal=qe(he,x,"fatal"),this.warn=qe(he,x,"warn"),this.info=qe(he,x,"info"),this.debug=qe(he,x,"debug"),this.trace=qe(he,x,"trace"),te&&(this.serializers=te,this._serialize=ee),t&&(this._logEvent=yt([].concat(he._logEvent.bindings,x)))}return me.prototype=this,new me(this)}return l}Ae.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ae.stdSerializers=Ln;Ae.stdTimeFunctions=Object.assign({},{nullTime:Zt,epochTime:en,unixTime:$n,isoTime:jn});function Ke(e,t,n,r){let o=Object.getPrototypeOf(t);t[n]=t.levelVal>t.levels.values[n]?et:o[n]?o[n]:Ze[n]||Ze[r]||et,xn(e,t,n)}function xn(e,t,n){!e.transmit&&t[n]===et||(t[n]=function(r){return function(){let s=e.timestamp(),i=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ze?Ze:this;for(var l=0;l<i.length;l++)i[l]=arguments[l];if(e.serialize&&!e.asObject&&dt(i,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?r.call(d,Bn(this,n,i,s)):r.apply(d,i),e.transmit){let h=e.transmit.level||t.level,f=Ae.levels.values[h],U=Ae.levels.values[n];if(U<f)return;Fn(this,{ts:s,methodLevel:n,methodValue:U,transmitLevel:h,transmitValue:Ae.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},i)}}}(t[n]))}function Bn(e,t,n,r){e._serialize&&dt(n,e._serialize,e.serializers,e._stdErrSerialize);let o=n.slice(),s=o[0],i={};r&&(i.time=r),i.level=Ae.levels.values[t];let d=(e._childLevel|0)+1;if(d<1&&(d=1),s!==null&&typeof s=="object"){for(;d--&&typeof o[0]=="object";)Object.assign(i,o.shift());s=o.length?Qt(o.shift(),o):void 0}else typeof s=="string"&&(s=Qt(o.shift(),o));return s!==void 0&&(i.msg=s),i}function dt(e,t,n,r){for(let o in e)if(r&&e[o]instanceof Error)e[o]=Ae.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let s in e[o])t&&t.indexOf(s)>-1&&s in n&&(e[o][s]=n[s](e[o][s]))}function qe(e,t,n){return function(){let r=new Array(1+arguments.length);r[0]=t;for(var o=1;o<r.length;o++)r[o]=arguments[o-1];return e[n].apply(this,r)}}function Fn(e,t,n){let r=t.send,o=t.ts,s=t.methodLevel,i=t.methodValue,d=t.val,l=e._logEvent.bindings;dt(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=n.filter(function(h){return l.indexOf(h)===-1}),e._logEvent.level.label=s,e._logEvent.level.value=i,r(s,e._logEvent,d),e._logEvent=yt(l)}function yt(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Hn(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let n in e)t[n]===void 0&&(t[n]=e[n]);return t}function Wn(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Zt:en}function lt(){return{}}function It(e){return e}function et(){}function Zt(){return!1}function en(){return Date.now()}function $n(){return Math.round(Date.now()/1e3)}function jn(){return new Date(Date.now()).toISOString()}function Kn(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}});p();m();u();var A={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof C<"u"&&typeof C.env<"u"?C.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}};p();m();u();var V={bigNumber(e){return e?new je(e):new je(0)},multiply(e,t){if(e===void 0||t===void 0)return new je(0);let n=new je(e),r=new je(t);return n.times(r)},formatNumberToLocalString(e,t=2){return e===void 0?"0.00":typeof e=="number"?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})},parseLocalStringToNumber(e){return e===void 0?0:parseFloat(e.replace(/,/gu,""))}};p();m();u();var Pn={URLS:{FAQ:"https://walletconnect.com/faq"}};p();m();u();var ke={validateCaipAddress(e){if(e.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(t.length!==3)throw new Error(`Invalid CAIP-10 address: ${e}`);let[n,r,o]=t;if(!n||!r||!o)throw new Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:n,chainId:r,address:o}},parseCaipNetworkId(e){let t=e.split(":");if(t.length!==2)throw new Error(`Invalid CAIP-2 network id: ${e}`);let[n,r]=t;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:n,chainId:r}}};p();m();u();function Le(e,t){return t==="light"?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}p();m();u();p();m();u();var Me=$e(Nn(),1),Vt=$e(In(),1),Gt=$e(yn(),1),zt=$e(Tn(),1);Me.default.extend(Gt.default);Me.default.extend(zt.default);var On={...Vt.default,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},Rn=["January","February","March","April","May","June","July","August","September","October","November","December"];Me.default.locale("en-web3-modal",On);var Un={getMonthNameByIndex(e){return Rn[e]},getYear(e=new Date().toISOString()){return(0,Me.default)(e).year()},getRelativeDateFromNow(e){return(0,Me.default)(e).locale("en-web3-modal").fromNow(!0)},formatDate(e,t="DD MMM"){return(0,Me.default)(e).format(t)}};p();m();u();var vt={caipNetworkIdToNumber(e){return e?Number(e.split(":")[1]):void 0},parseEvmChainId(e){return typeof e=="string"?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace(e,t){return e?.filter(n=>n.chainNamespace===t)||[]},getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,t){if(!t)return;let n=e.find(o=>o.caipNetworkId===t);if(n)return n.name;let[r]=t.split(":");return A.CHAIN_NAME_MAP?.[r]||void 0}};p();m();u();var Dn={numericInputKeyDown(e,t,n){let r=["Backspace","Meta","Ctrl","a","A","c","C","x","X","v","V","ArrowLeft","ArrowRight","Tab"],o=e.metaKey||e.ctrlKey,s=e.key,i=s.toLocaleLowerCase(),d=i==="a",l=i==="c",h=i==="v",f=i==="x",U=s===",",ae=s===".",ne=s>="0"&&s<="9";!o&&(d||l||h||f)&&e.preventDefault(),t==="0"&&!U&&!ae&&s==="0"&&e.preventDefault(),t==="0"&&ne&&(n(s),e.preventDefault()),(U||ae)&&(t||(n("0."),e.preventDefault()),(t?.includes(".")||t?.includes(","))&&e.preventDefault()),!ne&&!r.includes(s)&&!ae&&!U&&e.preventDefault()}};p();m();u();p();m();u();var Yt=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];p();m();u();var Xt=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];p();m();u();var Jt=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var Nt={getERC20Abi:e=>A.USDT_CONTRACT_ADDRESSES.includes(e)?Jt:Yt,getSwapAbi:()=>Xt};p();m();u();var D={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function Qe(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}var P={setItem(e,t){xe()&&t!==void 0&&localStorage.setItem(e,t)},getItem(e){if(xe())return localStorage.getItem(e)||void 0},removeItem(e){xe()&&localStorage.removeItem(e)},clear(){xe()&&localStorage.clear()}};function xe(){return typeof window<"u"&&typeof localStorage<"u"}p();m();u();p();m();u();var Ie=$e(Tt()),on=$e(Tt());var qn={level:"info"},tt="custom_context",Pt=1e3*1024,_t=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},pt=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){let n=new _t(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;let t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){let t=[],n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};let n=t.value;return t=t.next,{done:!1,value:n}}}}},ut=class{constructor(t,n=Pt){this.level=t??"error",this.levelValue=Ie.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new pt(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===Ie.levels.values.error?console.error(t):n===Ie.levels.values.warn?console.warn(t):n===Ie.levels.values.debug?console.debug(t):n===Ie.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(St({timestamp:new Date().toISOString(),log:t}));let n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new pt(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){let n=this.getLogArray();return n.push(St({extraMetadata:t})),new Blob(n,{type:"application/json"})}},bt=class{constructor(t,n=Pt){this.baseChunkLogger=new ut(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){let n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},kt=class{constructor(t,n=Pt){this.baseChunkLogger=new ut(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}},Vn=Object.defineProperty,Gn=Object.defineProperties,zn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,rn=(e,t,n)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mt=(e,t)=>{for(var n in t||(t={}))Yn.call(t,n)&&rn(e,n,t[n]);if(nn)for(var n of nn(t))Xn.call(t,n)&&rn(e,n,t[n]);return e},ht=(e,t)=>Gn(e,zn(t));function Jn(e){return ht(mt({},e),{level:e?.level||qn.level})}function Qn(e,t=tt){return e[t]||""}function Zn(e,t,n=tt){return e[n]=t,e}function er(e,t=tt){let n="";return typeof e.bindings>"u"?n=Qn(e,t):n=e.bindings().context||"",n}function tr(e,t,n=tt){let r=er(e,n);return r.trim()?`${r}/${t}`:t}function Ss(e,t,n=tt){let r=tr(e,t,n),o=e.child({context:r});return Zn(o,r,n)}function nr(e){var t,n;let r=new bt((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:(0,Ie.default)(ht(mt({},e.opts),{level:"trace",browser:ht(mt({},(n=e.opts)==null?void 0:n.browser),{write:o=>r.write(o)})})),chunkLoggerController:r}}function rr(e){var t;let n=new kt((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:(0,Ie.default)(ht(mt({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function vs(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?nr(e):rr(e)}_n();var sr="wc",ar="universal_provider",Ms=`${sr}@2:${ar}:`,ir="https://rpc.walletconnect.org/v1/";var xs=`${ir}bundler`;p();m();u();var Ot=(typeof C<"u"&&typeof C.env<"u"?C.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Rt=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],sn="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",X={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Ot,SECURE_SITE_DASHBOARD:`${Ot}/dashboard`,SECURE_SITE_FAVICON:`${Ot}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[A.CHAIN.EVM,A.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[A.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[A.CHAIN.EVM,A.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[A.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[A.CHAIN.EVM,A.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};p();m();u();var N={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(e,t){return Date.now()-e>t},getActiveNetworkProps(){let e=N.getActiveNamespace(),t=N.getActiveCaipNetworkId(),n=t?t.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:e,caipNetworkId:t,chainId:r}},setWalletConnectDeepLink({name:e,href:t}){try{P.setItem(D.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=P.getItem(D.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{P.removeItem(D.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{P.setItem(D.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{P.setItem(D.ACTIVE_CAIP_NETWORK_ID,e),N.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return P.getItem(D.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{P.removeItem(D.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let t=Qe(e);P.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let t=N.getRecentWallets();t.find(r=>r.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),P.setItem(D.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=P.getItem(D.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{let n=Qe(e);P.setItem(n,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return P.getItem(D.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let t=Qe(e);return P.getItem(t)}catch{console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{P.setItem(D.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return P.getItem(D.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{P.removeItem(D.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return P.getItem(D.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return P.getItem(D.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(e){try{P.setItem(D.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return P.getItem(D.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=P.getItem(D.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{let t=Array.from(new Set(e));P.setItem(D.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let t=N.getConnectedNamespaces();t.includes(e)||(t.push(e),N.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let t=N.getConnectedNamespaces(),n=t.indexOf(e);n>-1&&(t.splice(n,1),N.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return P.getItem(D.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{P.setItem(D.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{P.removeItem(D.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let t=P.getItem(D.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let t=N.getBalanceCache();P.setItem(D.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let n=N.getBalanceCache()[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;N.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let t=N.getBalanceCache();t[e.caipAddress]=e,P.setItem(D.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let t=P.getItem(D.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let t=N.getBalanceCache();P.setItem(D.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let n=N.getNativeBalanceCache()[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",e),N.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let t=N.getNativeBalanceCache();t[e.caipAddress]=e,P.setItem(D.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let t=P.getItem(D.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let n=N.getEnsCache()[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;N.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let t=N.getEnsCache();t[e.address]=e,P.setItem(D.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let t=N.getEnsCache();P.setItem(D.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let t=P.getItem(D.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let n=N.getIdentityCache()[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;N.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let t=N.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},P.setItem(D.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let t=N.getIdentityCache();P.setItem(D.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{P.removeItem(D.PORTFOLIO_CACHE),P.removeItem(D.NATIVE_BALANCE_CACHE),P.removeItem(D.ENS_CACHE),P.removeItem(D.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{P.setItem(D.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=P.getItem(D.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,t){try{let n=N.getConnections(),r=n[t]??[],o=new Map;for(let i of r)o.set(i.connectorId,{...i});for(let i of e){let d=o.get(i.connectorId),l=i.connectorId===A.CONNECTOR_ID.AUTH;if(d&&!l){let h=new Set(d.accounts.map(U=>U.address.toLowerCase())),f=i.accounts.filter(U=>!h.has(U.address.toLowerCase()));d.accounts.push(...f)}else o.set(i.connectorId,{...i})}let s={...n,[t]:Array.from(o.values())};P.setItem(D.CONNECTIONS,JSON.stringify(s))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{let e=P.getItem(D.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:t,namespace:n}){try{let r=N.getConnections(),o=r[n]??[],s=new Map(o.map(d=>[d.connectorId,d])),i=s.get(e);i&&(i.accounts.filter(l=>l.address.toLowerCase()!==t.toLowerCase()).length===0?s.delete(e):s.set(e,{...i,accounts:i.accounts.filter(l=>l.address.toLowerCase()!==t.toLowerCase())})),P.setItem(D.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(s.values())}))}catch{console.error(`Unable to remove address "${t}" from connector "${e}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{let e=P.getItem(D.DISCONNECTED_CONNECTOR_IDS);return e?JSON.parse(e):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,t){try{let n=N.getDisconnectedConnectorIds(),r=n[t]??[];r.push(e),P.setItem(D.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[t]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${t}"`)}},removeDisconnectedConnectorId(e,t){try{let n=N.getDisconnectedConnectorIds(),r=n[t]??[];r=r.filter(o=>o.toLowerCase()!==e.toLowerCase()),P.setItem(D.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[t]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${t}"`)}},isConnectorDisconnected(e,t){try{return(N.getDisconnectedConnectorIds()[t]??[]).some(o=>o.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${t}"`)}return!1}};p();m();u();var _={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(e,t=""){return e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return _.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(e){return e?e-Date.now()<=X.TEN_SEC_MS:!0},isAllowedRetry(e,t=X.ONE_SEC_MS){return Date.now()-e>=t},copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(_.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0],t="https://app.safe.global";if(e){let n=new URL(e),r=new URL(t);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+X.FOUR_MINUTES_MS},getNetworkId(e){return e?.split(":")[1]},getPlainAddress(e){return e?.split(":")[2]},async wait(e){return new Promise(t=>{setTimeout(t,e)})},debounce(e,t=500){let n;return(...r)=>{function o(){e(...r)}n&&clearTimeout(n),n=setTimeout(o,t)}},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl(e,t,n=null){if(_.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e,o=n;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),o&&!o?.endsWith("/")&&(o=`${o}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));let s=encodeURIComponent(t);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:o?`${o}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(e,t){if(!_.isHttpUrl(e))return this.formatNativeUrl(e,t);let n=e;n.endsWith("/")||(n=`${n}/`);let r=encodeURIComponent(t);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(e){return e==="popupWindow"?e:this.isTelegram()?N.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,n){window?.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},returnOpenHref(e,t,n){return window?.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;let e=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,t=window?.navigator?.standalone;return!!(e||t)},async preloadImage(e){let t=new Promise((n,r)=>{let o=new Image;o.onload=n,o.onerror=r,o.crossOrigin="anonymous",o.src=e});return Promise.race([t,_.wait(2e3)])},formatBalance(e,t){let n="0.000";if(typeof e=="string"){let r=Number(e);if(r){let o=Math.floor(r*1e3)/1e3;o&&(n=o.toString())}}return`${n}${t?` ${t}`:""}`},formatBalance2(e,t){let n;if(e==="0")n="0";else if(typeof e=="string"){let r=Number(e);r&&(n=r.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:t}},getApiUrl(){return A.W3M_API_URL},getBlockchainApiUrl(){return A.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return A.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})},parseError(e){return typeof e=="string"?e:typeof e?.issues?.[0]?.message=="string"?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks(e,t=[]){let n={};return t&&e&&(e.forEach((r,o)=>{n[r]=o}),t.sort((r,o)=>{let s=n[r.id],i=n[o.id];return s!==void 0&&i!==void 0?s-i:s!==void 0?-1:i!==void 0?1:0})),t},calculateBalance(e){let t=0;for(let n of e)t+=n.value??0;return t},formatTokenBalance(e){let t=e.toFixed(2),[n,r]=t.split(".");return{dollars:n,pennies:r}},isAddress(e,t="eip155"){switch(t){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){let n=new Set;return e.filter(r=>{let o=r[t];return n.has(o)?!1:(n.add(o),!0)})},generateSdkVersion(e,t,n){let o=e.length===0?X.ADAPTER_TYPES.UNIVERSAL:e.map(s=>s.adapterType).join(",");return`${t}-${o}-${n}`},createAccount(e,t,n,r,o){return{namespace:e,address:t,type:n,publicKey:r,path:o}},isCaipAddress(e){if(typeof e!="string")return!1;let t=e.split(":"),n=t[0];return t.filter(Boolean).length===3&&n in A.CHAIN_NAME_MAP},getAccount(e){return e?typeof e=="string"?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0}},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let t=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(e).host==="auth.magic.link"){let o="provider_authorization_url=",s=e.substring(e.indexOf(o)+o.length),i=this.injectIntoUrl(decodeURIComponent(s),n,t);return e.replace(s,encodeURIComponent(i))}return this.injectIntoUrl(e,n,t)},injectIntoUrl(e,t,n){let r=e.indexOf(t);if(r===-1)throw new Error(`${t} parameter not found in the URL: ${e}`);let o=e.indexOf("&",r),s=t.length,i=o!==-1?o:e.length,d=e.substring(0,r+s),l=e.substring(r+s,i),h=e.substring(o),f=l+n;return d+f+h}};p();m();u();p();m();u();p();m();u();var sa=Symbol(),cr=Symbol();var an=Object.getPrototypeOf,Ut=new WeakMap,lr=e=>e&&(Ut.has(e)?Ut.get(e):an(e)===Object.prototype||an(e)===Array.prototype);var cn=e=>lr(e)&&e[cr]||null,Dt=(e,t=!0)=>{Ut.set(e,t)};var Mt=e=>typeof e=="object"&&e!==null,dr=e=>Mt(e)&&!ot.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),dn=(e,t)=>{let n=Lt.get(e);if(n?.[0]===t)return n[1];let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Dt(r,!0),Lt.set(e,[t,r]),Reflect.ownKeys(e).forEach(o=>{if(Object.getOwnPropertyDescriptor(r,o))return;let s=Reflect.get(e,o),{enumerable:i}=Reflect.getOwnPropertyDescriptor(e,o),d={value:s,enumerable:i,configurable:!0};if(ot.has(s))Dt(s,!1);else if(Pe.has(s)){let[l,h]=Pe.get(s);d.value=dn(l,h())}Object.defineProperty(r,o,d)}),Object.preventExtensions(r)},pr=(e,t,n,r)=>({deleteProperty(o,s){let i=Reflect.get(o,s);n(s);let d=Reflect.deleteProperty(o,s);return d&&r(["delete",[s],i]),d},set(o,s,i,d){let l=!e()&&Reflect.has(o,s),h=Reflect.get(o,s,d);if(l&&(ln(h,i)||rt.has(i)&&ln(h,rt.get(i))))return!0;n(s),Mt(i)&&(i=cn(i)||i);let f=!Pe.has(i)&&mr(i)?b(i):i;return t(s,f),Reflect.set(o,s,f,d),r(["set",[s],i,h]),!0}}),Pe=new WeakMap,ot=new WeakSet,Lt=new WeakMap,nt=[1,1],rt=new WeakMap,ln=Object.is,ur=(e,t)=>new Proxy(e,t),mr=dr,hr=dn,fr=pr;function b(e={}){if(!Mt(e))throw new Error("object required");let t=rt.get(e);if(t)return t;let n=nt[0],r=new Set,o=(z,te=++nt[0])=>{n!==te&&(n=te,r.forEach(ee=>ee(z,te)))},s=nt[1],i=(z=++nt[1])=>(s!==z&&!r.size&&(s=z,l.forEach(([te])=>{let ee=te[1](z);ee>n&&(n=ee)})),n),d=z=>(te,ee)=>{let me=[...te];me[1]=[z,...me[1]],o(me,ee)},l=new Map,h=(z,te)=>{let ee=!ot.has(te)&&Pe.get(te);if(ee){if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&l.has(z))throw new Error("prop listener already exists");if(r.size){let me=ee[2](d(z));l.set(z,[ee,me])}else l.set(z,[ee])}},f=z=>{var te;let ee=l.get(z);ee&&(l.delete(z),(te=ee[1])==null||te.call(ee))},U=z=>(r.add(z),r.size===1&&l.forEach(([ee,me],he)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&me)throw new Error("remove already exists");let Sn=ee[2](d(he));l.set(he,[ee,Sn])}),()=>{r.delete(z),r.size===0&&l.forEach(([ee,me],he)=>{me&&(me(),l.set(he,[ee]))})}),ae=!0,ne=fr(()=>ae,h,f,o),x=ur(e,ne);rt.set(e,x);let ie=[e,i,U];return Pe.set(x,ie),Reflect.ownKeys(e).forEach(z=>{let te=Object.getOwnPropertyDescriptor(e,z);"value"in te&&te.writable&&(x[z]=e[z])}),ae=!1,x}function W(e,t,n){let r=Pe.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!r&&console.warn("Please use proxy object");let o,s=[],i=r[2],d=!1,h=i(f=>{if(s.push(f),n){t(s.splice(0));return}o||(o=Promise.resolve().then(()=>{o=void 0,d&&t(s.splice(0))}))});return d=!0,()=>{d=!1,h()}}function Se(e){let t=Pe.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!t&&console.warn("Please use proxy object");let[n,r]=t;return hr(n,r())}function ve(e){return ot.add(e),e}function xt(){return{proxyStateMap:Pe,refSet:ot,snapCache:Lt,versionHolder:nt,proxyCache:rt}}p();m();u();function B(e,t,n,r){let o=e[t];return W(e,()=>{let s=e[t];Object.is(o,s)||n(o=s)},r)}var Ca=Symbol();var{proxyStateMap:Cr,snapCache:gr}=xt(),ft=e=>Cr.has(e);function pn(e){let t=[],n=0,r=new Map,o=new WeakMap,s=()=>{let h=gr.get(d),f=h?.[1];if(f&&!o.has(f)){let U=new Map(r);o.set(f,U)}},i=h=>o.get(h)||r;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(let[h,f]of e)r.set(h,n),t[n++]=f}let d={data:t,index:n,epoch:0,get size(){return ft(this)||s(),i(this).size},get(h){let U=i(this).get(h);if(U===void 0){this.epoch;return}return this.data[U]},has(h){let f=i(this);return this.epoch,f.has(h)},set(h,f){if(!ft(this))throw new Error("Cannot perform mutations on a snapshot");let U=r.get(h);return U===void 0?(r.set(h,this.index),this.data[this.index++]=f):this.data[U]=f,this.epoch++,this},delete(h){if(!ft(this))throw new Error("Cannot perform mutations on a snapshot");let f=r.get(h);return f===void 0?!1:(delete this.data[f],r.delete(h),this.epoch++,!0)},clear(){if(!ft(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(h){this.epoch,i(this).forEach((U,ae)=>{h(this.data[U],ae,this)})},*entries(){this.epoch;let h=i(this);for(let[f,U]of h)yield[f,this.data[U]]},*keys(){this.epoch;let h=i(this);for(let f of h.keys())yield f},*values(){this.epoch;let h=i(this);for(let f of h.values())yield this.data[f]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},l=b(d);return Object.defineProperties(l,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(l),l}var{proxyStateMap:ga,snapCache:wa}=xt();p();m();u();var un={getFeatureValue(e,t){let n=t?.[e];return n===void 0?X.DEFAULT_FEATURES[e]:n},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(_.isTelegram()){if(_.isIos())return e.filter(t=>t!=="google");if(_.isMac())return e.filter(t=>t!=="x");if(_.isAndroid())return e.filter(t=>!["facebook","x"].includes(t))}return e}};var T=b({features:X.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:X.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),O={state:T,subscribeKey(e,t){return B(T,e,t)},setOptions(e){Object.assign(T,e)},setRemoteFeatures(e){if(!e)return;let t={...T.remoteFeatures,...e};T.remoteFeatures=t,T.remoteFeatures?.socials&&(T.remoteFeatures.socials=un.filterSocialsByPlatform(T.remoteFeatures.socials)),T.features?.pay&&(T.remoteFeatures.email=!1,T.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;T.features||(T.features=X.DEFAULT_FEATURES);let t={...T.features,...e};T.features=t,T.features?.pay&&T.remoteFeatures&&(T.remoteFeatures.email=!1,T.remoteFeatures.socials=!1)},setProjectId(e){T.projectId=e},setCustomRpcUrls(e){T.customRpcUrls=e},setAllWallets(e){T.allWallets=e},setIncludeWalletIds(e){T.includeWalletIds=e},setExcludeWalletIds(e){T.excludeWalletIds=e},setFeaturedWalletIds(e){T.featuredWalletIds=e},setTokens(e){T.tokens=e},setTermsConditionsUrl(e){T.termsConditionsUrl=e},setPrivacyPolicyUrl(e){T.privacyPolicyUrl=e},setCustomWallets(e){T.customWallets=e},setIsSiweEnabled(e){T.isSiweEnabled=e},setIsUniversalProvider(e){T.isUniversalProvider=e},setSdkVersion(e){T.sdkVersion=e},setMetadata(e){T.metadata=e},setDisableAppend(e){T.disableAppend=e},setEIP6963Enabled(e){T.enableEIP6963=e},setDebug(e){T.debug=e},setEnableWalletConnect(e){T.enableWalletConnect=e},setEnableWalletGuide(e){T.enableWalletGuide=e},setEnableAuthLogger(e){T.enableAuthLogger=e},setEnableWallets(e){T.enableWallets=e},setPreferUniversalLinks(e){T.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(let[t,n]of Object.entries(X.SIWX_DEFAULTS))e[t]??=n;T.siwx=e},setConnectMethodsOrder(e){T.features={...T.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){T.features={...T.features,walletFeaturesOrder:e}},setSocialsOrder(e){T.remoteFeatures={...T.remoteFeatures,socials:e}},setCollapseWallets(e){T.features={...T.features,collapseWallets:e}},setEnableEmbedded(e){T.enableEmbedded=e},setAllowUnsupportedChain(e){T.allowUnsupportedChain=e},setManualWCControl(e){T.manualWCControl=e},setEnableNetworkSwitch(e){T.enableNetworkSwitch=e},setEnableReconnect(e){T.enableReconnect=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([t,n])=>{n&&(T.defaultAccountTypes[t]=n)})},setUniversalProviderConfigOverride(e){T.universalProviderConfigOverride=e},getUniversalProviderConfigOverride(){return T.universalProviderConfigOverride},getSnapshot(){return Se(T)}};p();m();u();var wr="https://secure.walletconnect.org/sdk",xa=(typeof C<"u"&&typeof C.env<"u"?C.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||wr,Ba=(typeof C<"u"&&typeof C.env<"u"?C.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Fa=(typeof C<"u"&&typeof C.env<"u"?C.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ha={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},oe={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};p();m();u();p();m();u();p();m();u();p();m();u();p();m();u();async function st(...e){let t=await fetch(...e);if(!t.ok)throw new Error(`HTTP status code: ${t.status}`,{cause:t});return t}var ge=class{constructor({baseUrl:t,clientId:n}){this.baseUrl=t,this.clientId=n}async get({headers:t,signal:n,cache:r,...o}){let s=this.createUrl(o);return(await st(s,{method:"GET",headers:t,signal:n,cache:r})).json()}async getBlob({headers:t,signal:n,...r}){let o=this.createUrl(r);return(await st(o,{method:"GET",headers:t,signal:n})).blob()}async post({body:t,headers:n,signal:r,...o}){let s=this.createUrl(o);return(await st(s,{method:"POST",headers:n,body:t?JSON.stringify(t):void 0,signal:r})).json()}async put({body:t,headers:n,signal:r,...o}){let s=this.createUrl(o);return(await st(s,{method:"PUT",headers:n,body:t?JSON.stringify(t):void 0,signal:r})).json()}async delete({body:t,headers:n,signal:r,...o}){let s=this.createUrl(o);return(await st(s,{method:"DELETE",headers:n,body:t?JSON.stringify(t):void 0,signal:r})).json()}createUrl({path:t,params:n}){let r=new URL(t,this.baseUrl);return n&&Object.entries(n).forEach(([o,s])=>{s&&r.searchParams.append(o,s)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};var Er=Object.freeze({enabled:!0,events:[]}),Ar=new ge({baseUrl:_.getAnalyticsUrl(),clientId:null}),Sr=5,vr=60*1e3,Oe=b({...Er}),mn={state:Oe,subscribeKey(e,t){return B(Oe,e,t)},async sendError(e,t){if(!Oe.enabled)return;let n=Date.now();if(Oe.events.filter(s=>{let i=new Date(s.properties.timestamp||"").getTime();return n-i<vr}).length>=Sr)return;let o={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};Oe.events.push(o);try{if(typeof window>"u")return;let{projectId:s,sdkType:i,sdkVersion:d}=O.state;await Ar.post({path:"/e",params:{projectId:s,st:i,sv:d||"html-wagmi-4.2.2"},body:{eventId:_.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}},enable(){Oe.enabled=!0},disable(){Oe.enabled=!1},clearEvents(){Oe.events=[]}};var Ve=class e extends Error{constructor(t,n,r){super(t),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,e.prototype);let o=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){let s=r.stack,i=s.indexOf(`
`);if(i>-1){let d=s.substring(i+1);this.stack=`${this.name}: ${this.message}
${d}`,o=!0}}o||(Error.captureStackTrace?Error.captureStackTrace(this,e):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function hn(e,t){let n=e instanceof Ve?e:new Ve(e instanceof Error?e.message:String(e),t,e);throw mn.sendError(n,n.category),n}function G(e,t="INTERNAL_SDK_ERROR"){let n={};return Object.keys(e).forEach(r=>{let o=e[r];if(typeof o=="function"){let s=o;o.constructor.name==="AsyncFunction"?s=async(...i)=>{try{return await o(...i)}catch(d){return hn(d,t)}}:s=(...i)=>{try{return o(...i)}catch(d){return hn(d,t)}},n[r]=s}else n[r]=o}),n}var fe=b({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Nr={state:fe,subscribeNetworkImages(e){return W(fe.networkImages,()=>e(fe.networkImages))},subscribeKey(e,t){return B(fe,e,t)},subscribe(e){return W(fe,()=>e(fe))},setWalletImage(e,t){fe.walletImages[e]=t},setNetworkImage(e,t){fe.networkImages[e]=t},setChainImage(e,t){fe.chainImages[e]=t},setConnectorImage(e,t){fe.connectorImages={...fe.connectorImages,[e]:t}},setTokenImage(e,t){fe.tokenImages[e]=t},setCurrencyImage(e,t){fe.currencyImages[e]=t}},le=G(Nr);p();m();u();p();m();u();p();m();u();var we={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},fn={handleMobileDeeplinkRedirect(e,t){let n=window.location.href,r=encodeURIComponent(n);if(e===we.PHANTOM.id&&!("phantom"in window)){let o=n.startsWith("https")?"https":"http",s=n.split("/")[2],i=encodeURIComponent(`${o}://${s}`);window.location.href=`${we.PHANTOM.url}/ul/browse/${r}?ref=${i}`}e===we.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${we.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),t===A.CHAIN.SOLANA&&e===we.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${we.COINBASE.url}/dapp?cb_url=${r}`)}};p();m();u();p();m();u();p();m();u();p();m();u();p();m();u();var Be=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),re=b({...Be}),Ir={state:re,subscribeKey(e,t){return B(re,e,t)},showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){let t=_.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){re.message=Be.message,re.variant=Be.variant,re.svg=Be.svg,re.open=Be.open,re.autoClose=Be.autoClose},_showMessage({message:e,svg:t,variant:n="success",autoClose:r=Be.autoClose}){re.open?(re.open=!1,setTimeout(()=>{re.message=e,re.variant=n,re.svg=t,re.open=!0,re.autoClose=r},150)):(re.message=e,re.variant=n,re.svg=t,re.open=!0,re.autoClose=r)}},Q=Ir;var yr={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Cn=_.getBlockchainApiUrl(),de=b({clientId:null,api:new ge({baseUrl:Cn,clientId:null}),supportedChains:{http:[],ws:[]}}),y={state:de,async get(e){let{st:t,sv:n}=y.getSdkProperties(),r=O.state.projectId,o={...e.params||{},st:t,sv:n,projectId:r};return de.api.get({...e,params:o})},getSdkProperties(){let{sdkType:e,sdkVersion:t}=O.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{de.supportedChains.http.length||await y.getSupportedNetworks()}catch{return!1}return de.supportedChains.http.includes(e)},async getSupportedNetworks(){try{let e=await y.get({path:"v1/supported-chains"});return de.supportedChains=e,e}catch{return de.supportedChains}},async fetchIdentity({address:e,caipNetworkId:t}){if(!await y.isNetworkSupported(t))return{avatar:"",name:""};let r=N.getIdentityFromCacheForAddress(e);if(r)return r;let o=await y.get({path:`/v1/identity/${e}`,params:{sender:a.state.activeCaipAddress?_.getPlainAddress(a.state.activeCaipAddress):void 0}});return N.updateIdentityCache({address:e,identity:o,timestamp:Date.now()}),o},async fetchTransactions({account:e,cursor:t,signal:n,cache:r,chainId:o}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:`/v1/account/${e}/history`,params:{cursor:t,chainId:o},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:e,userAddress:t,from:n,to:r,gasPrice:o}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:n,to:r,gasPrice:o}}):{quotes:[]}},async fetchSwapTokens({chainId:e}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]}},async fetchTokenPrice({addresses:e}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?de.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:O.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:e,userAddress:t}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:e}){let{st:t,sv:n}=y.getSdkProperties();if(!await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return y.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:n}})},async generateSwapCalldata({amount:e,from:t,to:n,userAddress:r,disableEstimate:o}){if(!await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return de.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:X.CONVERT_SLIPPAGE_TOLERANCE},projectId:O.state.projectId,from:t,to:n,userAddress:r,disableEstimate:o}})},async generateApproveCalldata({from:e,to:t,userAddress:n}){let{st:r,sv:o}=y.getSdkProperties();if(!await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return y.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:e,to:t,st:r,sv:o}})},async getBalance(e,t,n){let{st:r,sv:o}=y.getSdkProperties();if(!await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId))return Q.showError("Token Balance Unavailable"),{balances:[]};let i=`${t}:${e}`,d=N.getBalanceCacheForCaipAddress(i);if(d)return d;let l=await y.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:n,st:r,sv:o}});return N.updateBalanceCache({caipAddress:i,balance:l,timestamp:Date.now()}),l},async lookupEnsName(e){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:e}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:`/v1/profile/reverse/${e}`,params:{sender:L.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(e){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:e,address:t,message:n,signature:r}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?de.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:e,partnerUserId:t,defaultNetwork:n,purchaseAmount:r,paymentAmount:o}){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?(await de.api.post({path:"/v1/generators/onrampurl",params:{projectId:O.state.projectId},body:{destinationWallets:e,defaultNetwork:n,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:o}})).url:""},async getOnrampOptions(){if(!await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await y.get({path:"/v1/onramp/options"})}catch{return yr}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:n,network:r}){try{return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?await de.api.post({path:"/v1/onramp/quote",params:{projectId:O.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:t.id},paymentSubtotal:{amount:n,currency:t.id},paymentTotal:{amount:n,currency:t.id},purchaseAmount:{amount:n,currency:t.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(e){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?y.get({path:`/v1/sessions/${e}`}):[]},async revokeSmartSession(e,t,n){return await y.isNetworkSupported(a.state.activeCaipNetwork?.caipNetworkId)?de.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:O.state.projectId},body:{pci:t,signature:n}}):{success:!1}},setClientId(e){de.clientId=e,de.api=new ge({baseUrl:Cn,clientId:e})}};p();m();u();p();m();u();p();m();u();p();m();u();p();m();u();p();m();u();p();m();u();var Bt={onSwitchNetwork({network:e,ignoreSwitchConfirmation:t=!1}){let n=a.state.activeCaipNetwork,r=w.state.data;if(e.id===n?.id)return;let s=L.getCaipAddress(a.state.activeChain),i=e.chainNamespace!==a.state.activeChain,d=L.getCaipAddress(e.chainNamespace),h=I.getConnectorId(a.state.activeChain)===A.CONNECTOR_ID.AUTH,f=A.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(U=>U===e.chainNamespace);t||h&&f?w.push("SwitchNetwork",{...r,network:e}):s&&i&&!d?w.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):w.push("SwitchNetwork",{...r,network:e})}};p();m();u();p();m();u();var Re=b({message:"",variant:"info",open:!1}),Tr={state:Re,subscribeKey(e,t){return B(Re,e,t)},open(e,t){let{debug:n}=O.state,{shortMessage:r,longMessage:o}=e;n&&(Re.message=r,Re.variant=t,Re.open=!0),o&&console.error(typeof o=="function"?o():o)},close(){Re.open=!1,Re.message="",Re.variant="info"}},at=G(Tr);var _r=_.getAnalyticsUrl(),br=new ge({baseUrl:_r,clientId:null}),kr=["MODAL_CREATED"],ye=b({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),F={state:ye,subscribe(e){return W(ye,()=>e(ye))},getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:n}=O.state;return{projectId:e,st:t,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{let t=L.state.address;if(kr.includes(e.data.event)||typeof window>"u")return;await br.post({path:"/e",params:F.getSdkProperties(),body:{eventId:_.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),ye.reportedErrors.FORBIDDEN=!1}catch(t){t instanceof Error&&t.cause instanceof Response&&t.cause.status===A.HTTP_STATUS_CODES.FORBIDDEN&&!ye.reportedErrors.FORBIDDEN&&(at.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${xe()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ye.reportedErrors.FORBIDDEN=!0)}},sendEvent(e){ye.timestamp=Date.now(),ye.data=e,(O.state.features?.analytics||e.event==="INITIALIZE")&&F._sendAnalyticsEvent(ye)}};p();m();u();var Ge=b({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ue={state:Ge,subscribe(e){return W(Ge,()=>e(Ge))},subscribeOpen(e){return B(Ge,"open",e)},set(e){Object.assign(Ge,{...Ge,...e})}};var pe=b({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Pr={state:pe,subscribe(e){return W(pe,()=>e(pe))},subscribeKey(e,t){return B(pe,e,t)},async open(e){let t=e?.namespace,n=a.state.activeChain,r=t&&t!==n,o=a.getAccountData(e?.namespace)?.caipAddress;if(E.state.wcBasic?R.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await R.prefetch(),I.setFilterByNamespace(e?.namespace),H.setLoading(!0,t),t&&r){let s=a.getNetworkData(t)?.caipNetwork||a.getRequestedCaipNetworks(t)[0];s&&Bt.onSwitchNetwork({network:s,ignoreSwitchConfirmation:!0})}else{let s=a.state.noAdapters;O.state.manualWCControl||s&&!o?_.isMobile()?w.reset("AllWallets"):w.reset("ConnectingWalletConnectBasic"):e?.view?w.reset(e.view,e.data):o?w.reset("Account"):w.reset("Connect")}pe.open=!0,Ue.set({open:!0}),F.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!o}})},close(){let e=O.state.enableEmbedded,t=!!a.state.activeCaipAddress;pe.open&&F.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),pe.open=!1,w.reset("Connect"),H.clearLoading(),e?t?w.replace("Account"):w.push("Connect"):Ue.set({open:!1}),E.resetUri()},setLoading(e,t){t&&pe.loadingNamespaceMap.set(t,e),pe.loading=e,Ue.set({loading:e})},clearLoading(){pe.loadingNamespaceMap.clear(),pe.loading=!1},shake(){pe.shake||(pe.shake=!0,setTimeout(()=>{pe.shake=!1},500))}},H=G(Pr);var J=b({view:"Connect",history:["Connect"],transactionStack:[]}),Or={state:J,subscribeKey(e,t){return B(J,e,t)},pushTransactionStack(e){J.transactionStack.push(e)},popTransactionStack(e){let t=J.transactionStack.pop();if(!t)return;let{onSuccess:n,onError:r,onCancel:o}=t;switch(e){case"success":n?.();break;case"error":r?.(),w.goBack();break;case"cancel":o?.(),w.goBack();break;default:}},push(e,t){e!==J.view&&(J.view=e,J.history.push(e),J.data=t)},reset(e,t){J.view=e,J.history=[e],J.data=t},replace(e,t){J.history.at(-1)===e||(J.view=e,J.history[J.history.length-1]=e,J.data=t)},goBack(){let e=a.state.activeCaipAddress,t=w.state.view==="ConnectingFarcaster",n=!e&&t;if(J.history.length>1){J.history.pop();let[r]=J.history.slice(-1);r&&(e&&r==="Connect"?J.view="Account":J.view=r)}else H.close();J.data?.wallet&&(J.data.wallet=void 0),setTimeout(()=>{if(n){L.setFarcasterUrl(void 0,a.state.activeChain);let r=I.getAuthConnector();r?.provider?.reload();let o=Se(O.state);r?.provider?.syncDappData?.({metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(e){if(J.history.length>1){J.history=J.history.slice(0,e+1);let[t]=J.history.slice(-1);t&&(J.view=t)}},goBackOrCloseModal(){w.state.history.length>1?w.goBack():H.close()}},w=G(Or);p();m();u();var Te=b({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Ft={state:Te,subscribe(e){return W(Te,()=>e(Te))},setThemeMode(e){Te.themeMode=e;try{let t=I.getAuthConnector();if(t){let n=Ft.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:n,w3mThemeVariables:Le(n,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){Te.themeVariables={...Te.themeVariables,...e};try{let t=I.getAuthConnector();if(t){let n=Ft.getSnapshot().themeVariables;t.provider.syncTheme({themeVariables:n,w3mThemeVariables:Le(Te.themeVariables,Te.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Se(Te)}},ze=G(Ft);var gn={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},j=b({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...gn},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Rr={state:j,subscribe(e){return W(j,()=>{e(j)})},subscribeKey(e,t){return B(j,e,t)},initialize(e){e.forEach(t=>{let n=N.getConnectedConnectorId(t);n&&I.setConnectorId(n,t)})},setActiveConnector(e){e&&(j.activeConnector=ve(e))},setConnectors(e){e.filter(o=>!j.allConnectors.some(s=>s.id===o.id&&I.getConnectorName(s.name)===I.getConnectorName(o.name)&&s.chain===o.chain)).forEach(o=>{o.type!=="MULTI_CHAIN"&&j.allConnectors.push(ve(o))});let n=I.getEnabledNamespaces(),r=I.getEnabledConnectors(n);j.connectors=I.mergeMultiChainConnectors(r)},filterByNamespaces(e){Object.keys(j.filterByNamespaceMap).forEach(t=>{j.filterByNamespaceMap[t]=!1}),e.forEach(t=>{j.filterByNamespaceMap[t]=!0}),I.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){j.filterByNamespaceMap[e]=t,I.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=I.getEnabledNamespaces(),t=I.getEnabledConnectors(e),n=I.areAllNamespacesEnabled();j.connectors=I.mergeMultiChainConnectors(t),n?R.clearFilterByNamespaces():R.filterByNamespaces(e)},getEnabledNamespaces(){return Object.entries(j.filterByNamespaceMap).filter(([e,t])=>t).map(([e])=>e)},getEnabledConnectors(e){return j.allConnectors.filter(t=>e.includes(t.chain))},areAllNamespacesEnabled(){return Object.values(j.filterByNamespaceMap).every(e=>e)},mergeMultiChainConnectors(e){let t=I.generateConnectorMapByName(e),n=[];return t.forEach(r=>{let o=r[0],s=o?.id===A.CONNECTOR_ID.AUTH;r.length>1&&o?n.push({name:o.name,imageUrl:o.imageUrl,imageId:o.imageId,connectors:[...r],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:o?.id||""}):o&&n.push(o)}),n},generateConnectorMapByName(e){let t=new Map;return e.forEach(n=>{let{name:r}=n,o=I.getConnectorName(r);if(!o)return;let s=t.get(o)||[];s.find(d=>d.chain===n.chain)||s.push(n),t.set(o,s)}),t},getConnectorName(e){return e&&({"Trust Wallet":"Trust"}[e]||e)},getUniqueConnectorsByName(e){let t=[];return e.forEach(n=>{t.find(r=>r.chain===n.chain)||t.push(n)}),t},addConnector(e){if(e.id===A.CONNECTOR_ID.AUTH){let t=e,n=Se(O.state),r=ze.getSnapshot().themeMode,o=ze.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),t?.provider?.syncTheme({themeMode:r,themeVariables:o,w3mThemeVariables:Le(o,r)}),I.setConnectors([e])}else I.setConnectors([e])},getAuthConnector(e){let t=e||a.state.activeChain,n=j.connectors.find(r=>r.id===A.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(o=>o.chain===t):n},getAnnouncedConnectorRdns(){return j.connectors.filter(e=>e.type==="ANNOUNCED").map(e=>e.info?.rdns)},getConnectorById(e){return j.allConnectors.find(t=>t.id===e)},getConnector(e,t){return j.allConnectors.filter(r=>r.chain===a.state.activeChain).find(r=>r.explorerId===e||r.info?.rdns===t)},syncIfAuthConnector(e){if(e.id!=="ID_AUTH")return;let t=e,n=Se(O.state),r=ze.getSnapshot().themeMode,o=ze.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),t.provider.syncTheme({themeMode:r,themeVariables:o,w3mThemeVariables:Le(o,r)})},getConnectorsByNamespace(e){let t=j.allConnectors.filter(n=>n.chain===e);return I.mergeMultiChainConnectors(t)},canSwitchToSmartAccount(e){return a.checkIfSmartAccountEnabled()&&se(e)===oe.ACCOUNT_TYPES.EOA},selectWalletConnector(e){let t=I.getConnector(e.id,e.rdns);fn.handleMobileDeeplinkRedirect(t?.explorerId||e.id,a.state.activeChain),t?w.push("ConnectingExternal",{connector:t}):w.push("ConnectingWalletConnect",{wallet:e})},getConnectors(e){return e?I.getConnectorsByNamespace(e):I.mergeMultiChainConnectors(j.allConnectors)},setFilterByNamespace(e){j.filterByNamespace=e,j.connectors=I.getConnectors(e),R.setFilterByNamespace(e)},setConnectorId(e,t){e&&(j.activeConnectorIds={...j.activeConnectorIds,[t]:e},N.setConnectedConnectorId(t,e))},removeConnectorId(e){j.activeConnectorIds={...j.activeConnectorIds,[e]:void 0},N.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return j.activeConnectorIds[e]},isConnected(e){return e?!!j.activeConnectorIds[e]:Object.values(j.activeConnectorIds).some(t=>!!t)},resetConnectorIds(){j.activeConnectorIds={...gn}}},I=G(Rr);var Ur=1e3,Ye={checkNamespaceConnectorId(e,t){return I.getConnectorId(e)===t},isSocialProvider(e){return X.DEFAULT_REMOTE_FEATURES.socials.includes(e)},connectWalletConnect({walletConnect:e,connector:t,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:o,onConnect:s}){return new Promise((i,d)=>{if(e&&I.setActiveConnector(t),o?.(_.isMobile()&&e),r){let h=H.subscribeKey("open",f=>{f||(w.state.view!==r&&w.replace(r),h(),d(new Error("Modal closed")))})}let l=a.subscribeKey("activeCaipAddress",h=>{h&&(s?.(),n&&H.close(),l(),i(ke.parseCaipAddress(h)))})})},connectExternal(e){return new Promise((t,n)=>{let r=a.subscribeKey("activeCaipAddress",o=>{o&&(H.close(),r(),t(ke.parseCaipAddress(o)))});E.connectExternal(e,e.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:e,closeModalOnConnect:t=!0,onOpenFarcaster:n,onConnect:r}){let o=L.state.socialWindow,s=L.state.socialProvider,i=!1,d=null,l=a.subscribeKey("activeCaipAddress",h=>{h&&(t&&H.close(),l())});return new Promise((h,f)=>{async function U(ne){if(ne.data?.resultUri)if(ne.origin===A.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",U,!1);try{let x=I.getAuthConnector();if(x&&!i){o&&(o.close(),L.setSocialWindow(void 0,a.state.activeChain),o=L.state.socialWindow),i=!0;let ie=ne.data.resultUri;if(s&&F.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:s}}),s){N.setConnectedSocialProvider(s),await E.connectExternal({id:x.id,type:x.type,socialUri:ie},x.chain);let z=a.state.activeCaipAddress;if(!z){f(new Error("Failed to connect"));return}h(ke.parseCaipAddress(z)),F.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:a.getActiveCaipNetwork()?.caipNetworkId}})}}}catch{s&&F.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:s}}),f(new Error("Failed to connect"))}}else s&&F.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:s}})}async function ae(){if(e&&(L.setSocialProvider(e,a.state.activeChain),s=L.state.socialProvider,F.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:s}})),s==="farcaster"){n?.();let ne=H.subscribeKey("open",ie=>{!ie&&e==="farcaster"&&(f(new Error("Popup closed")),r?.(),ne())}),x=I.getAuthConnector();if(x&&!L.state.farcasterUrl)try{let{url:ie}=await x.provider.getFarcasterUri();L.setFarcasterUrl(ie,a.state.activeChain)}catch{f(new Error("Failed to connect to farcaster"))}}else{let ne=I.getAuthConnector();d=_.returnOpenHref(`${A.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(ne&&s){let{uri:x}=await ne.provider.getSocialRedirectUri({provider:s});if(d&&x){L.setSocialWindow(d,a.state.activeChain),o=L.state.socialWindow,d.location.href=x;let ie=setInterval(()=>{o?.closed&&!i&&(f(new Error("Popup closed")),clearInterval(ie))},1e3);window.addEventListener("message",U,!1)}else d?.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),d?.close()}}}ae()})},connectEmail({closeModalOnConnect:e=!0,redirectViewOnModalClose:t="Connect",onOpen:n,onConnect:r}){return new Promise((o,s)=>{if(n?.(),t){let d=H.subscribeKey("open",l=>{l||(w.state.view!==t&&w.replace(t),d(),s(new Error("Modal closed")))})}let i=a.subscribeKey("activeCaipAddress",d=>{d&&(r?.(),e&&H.close(),i(),o(ke.parseCaipAddress(d)))})})},async updateEmail(){let e=N.getConnectedConnectorId(a.state.activeChain),t=I.getAuthConnector();if(!t)throw new Error("No auth connector found");if(e!==A.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");let n=t.provider.getEmail()??"";return w.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,o)=>{let s=setInterval(()=>{let d=t.provider.getEmail()??"";d!==n&&(H.close(),clearInterval(s),i(),r({email:d}))},Ur),i=H.subscribeKey("open",d=>{d||(w.state.view!=="Connect"&&w.push("Connect"),clearInterval(s),i(),o(new Error("Modal closed")))})})},canSwitchToSmartAccount(e){return a.checkIfSmartAccountEnabled()&&se(e)===oe.ACCOUNT_TYPES.EOA}};function Xe(){let e=a.state.activeCaipNetwork?.chainNamespace||"eip155",t=a.state.activeCaipNetwork?.id||1,n=X.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${n}`}function se(e){return a.getAccountData(e)?.preferredAccountType}p();m();u();var Ct={getConnectionStatus(e,t){let n=I.state.activeConnectorIds[t],r=E.getConnections(t);return!!n&&e.connectorId===n?"connected":r.some(i=>i.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:e,connectorId:t,addresses:n}){return e.map(r=>{if((t?r.connectorId.toLowerCase()===t.toLowerCase():!1)&&n){let s=r.accounts.filter(i=>!n.some(l=>l.toLowerCase()===i.address.toLowerCase()));return{...r,accounts:s}}return r})},excludeExistingConnections(e,t){let n=new Set(e);return t.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(e,t){return e.filter(n=>n.connectorId.toLowerCase()===t.toLowerCase())},getConnectionsData(e){let t=!!O.state.remoteFeatures?.multiWallet,n=I.state.activeConnectorIds[e],r=E.getConnections(e),s=(E.state.recentConnections.get(e)??[]).filter(d=>I.getConnectorById(d.connectorId)),i=Ct.excludeExistingConnections([...r.map(d=>d.connectorId),...n?[n]:[]],s);return t?{connections:r,recentConnections:i}:{connections:r.filter(d=>d.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}};p();m();u();var Z=b({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Dr={state:Z,subscribe(e){return W(Z,()=>e(Z))},setLastNetworkInView(e){Z.lastNetworkInView=e},async fetchTransactions(e){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");Z.loading=!0;try{let t=await y.fetchTransactions({account:e,cursor:Z.next,chainId:a.state.activeCaipNetwork?.caipNetworkId}),n=Je.filterSpamTransactions(t.data),r=Je.filterByConnectedChain(n),o=[...Z.transactions,...r];Z.loading=!1,Z.transactions=o,Z.transactionsByYear=Je.groupTransactionsByYearAndMonth(Z.transactionsByYear,r),Z.empty=o.length===0,Z.next=t.next?t.next:void 0}catch{let n=a.state.activeChain;F.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:O.state.projectId,cursor:Z.next,isSmartAccount:se(n)===oe.ACCOUNT_TYPES.SMART_ACCOUNT}}),Q.showError("Failed to fetch transactions"),Z.loading=!1,Z.empty=!0,Z.next=void 0}},groupTransactionsByYearAndMonth(e={},t=[]){let n=e;return t.forEach(r=>{let o=new Date(r.metadata.minedAt).getFullYear(),s=new Date(r.metadata.minedAt).getMonth(),i=n[o]??{},l=(i[s]??[]).filter(h=>h.id!==r.id);n[o]={...i,[s]:[...l,r].sort((h,f)=>new Date(f.metadata.minedAt).getTime()-new Date(h.metadata.minedAt).getTime())}}),n},filterSpamTransactions(e){return e.filter(t=>!t.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(e){let t=a.state.activeCaipNetwork?.caipNetworkId;return e.filter(r=>r.metadata.chain===t)},clearCursor(){Z.next=void 0},resetTransactions(){Z.transactions=[],Z.transactionsByYear={},Z.lastNetworkInView=void 0,Z.loading=!1,Z.empty=!1,Z.next=void 0}},Je=G(Dr,"API_ERROR");var K=b({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"}),Fe,Lr={state:K,subscribe(e){return W(K,()=>e(K))},subscribeKey(e,t){return B(K,e,t)},_getClient(){return K._client},setClient(e){K._client=ve(e)},initialize(e){let t=e.filter(n=>!!n.namespace).map(n=>n.namespace);E.syncStorageConnections(t)},syncStorageConnections(e){let t=N.getConnections(),n=e??Array.from(a.state.chains.keys());for(let r of n){let o=t[r]??[],s=new Map(K.recentConnections);s.set(r,o),K.recentConnections=s}},getConnections(e){return e?K.connections.get(e)??[]:[]},hasAnyConnection(e){let t=E.state.connections;return Array.from(t.values()).flatMap(n=>n).some(({connectorId:n})=>n===e)},async connectWalletConnect(){if(_.isTelegram()||_.isSafari()&&_.isIos()){if(Fe){await Fe,Fe=void 0;return}if(!_.isPairingExpired(K?.wcPairingExpiry)){let e=K.wcUri;K.wcUri=e;return}Fe=E._getClient()?.connectWalletConnect?.().catch(()=>{}),E.state.status="connecting",await Fe,Fe=void 0,K.wcPairingExpiry=void 0,E.state.status="connected"}else await E._getClient()?.connectWalletConnect?.()},async connectExternal(e,t,n=!0){let r=await E._getClient()?.connectExternal?.(e);return n&&a.setActiveNamespace(t),r},async reconnectExternal(e){await E._getClient()?.reconnectExternal?.(e);let t=e.chain||a.state.activeChain;t&&I.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){if(!t)return;H.setLoading(!0,a.state.activeChain);let n=I.getAuthConnector();n&&(L.setPreferredAccountType(e,t),await n.provider.setPreferredAccount(e),N.setPreferredAccountTypes(Object.entries(a.state.chains).reduce((r,[o,s])=>{let i=o,d=se(i);return d!==void 0&&(r[i]=d),r},{})),await E.reconnectExternal(n),H.setLoading(!1,a.state.activeChain),F.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:a.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(e){return E._getClient()?.signMessage(e)},parseUnits(e,t){return E._getClient()?.parseUnits(e,t)},formatUnits(e,t){return E._getClient()?.formatUnits(e,t)},async sendTransaction(e){return E._getClient()?.sendTransaction(e)},async getCapabilities(e){return E._getClient()?.getCapabilities(e)},async grantPermissions(e){return E._getClient()?.grantPermissions(e)},async walletGetAssets(e){return E._getClient()?.walletGetAssets(e)??{}},async estimateGas(e){return E._getClient()?.estimateGas(e)},async writeContract(e){return E._getClient()?.writeContract(e)},async getEnsAddress(e){return E._getClient()?.getEnsAddress(e)},async getEnsAvatar(e){return E._getClient()?.getEnsAvatar(e)},checkInstalled(e){return E._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){K.wcUri=void 0,K.wcPairingExpiry=void 0,K.wcLinking=void 0,K.recentWallet=void 0,K.status="disconnected",Je.resetTransactions(),N.deleteWalletConnectDeepLink()},resetUri(){K.wcUri=void 0,K.wcPairingExpiry=void 0,Fe=void 0},finalizeWcConnection(){let{wcLinking:e,recentWallet:t}=E.state;e&&N.setWalletConnectDeepLink(e),t&&N.setAppKitRecent(t),F.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:w.state.data?.wallet?.name||"Unknown",caipNetworkId:a.getActiveCaipNetwork()?.caipNetworkId}})},setWcBasic(e){K.wcBasic=e},setUri(e){K.wcUri=e,K.wcPairingExpiry=_.getPairingExpiry()},setWcLinking(e){K.wcLinking=e},setWcError(e){K.wcError=e,K.buffering=!1},setRecentWallet(e){K.recentWallet=e},setBuffering(e){K.buffering=e},setStatus(e){K.status=e},setIsSwitchingConnection(e){K.isSwitchingConnection=e},async disconnect({id:e,namespace:t,initialDisconnect:n}={}){try{await E._getClient()?.disconnect({id:e,chainNamespace:t,initialDisconnect:n})}catch(r){throw new Ve("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(e,t){let n=new Map(K.connections);n.set(t,e),K.connections=n},async handleAuthAccountSwitch({address:e,namespace:t}){let n=L.state.user?.accounts?.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===e.toLowerCase()&&Ye.canSwitchToSmartAccount(t)?"smartAccount":"eoa";await E.setPreferredAccountType(r,t)},async handleActiveConnection({connection:e,namespace:t,address:n}){let r=I.getConnectorById(e.connectorId),o=e.connectorId===A.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${e.connectorId}`);if(o)o&&n&&await E.handleAuthAccountSwitch({address:n,namespace:t});else return(await E.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:t},t))?.address;return n},async handleDisconnectedConnection({connection:e,namespace:t,address:n,closeModalOnConnect:r}){let o=I.getConnectorById(e.connectorId),s=e.auth?.name?.toLowerCase(),i=e.connectorId===A.CONNECTOR_ID.AUTH,d=e.connectorId===A.CONNECTOR_ID.WALLET_CONNECT;if(!o)throw new Error(`No connector found for connection: ${e.connectorId}`);let l;if(i)if(s&&Ye.isSocialProvider(s)){let{address:h}=await Ye.connectSocial({social:s,closeModalOnConnect:r,onOpenFarcaster(){H.open({view:"ConnectingFarcaster"})},onConnect(){w.replace("ProfileWallets")}});l=h}else{let{address:h}=await Ye.connectEmail({closeModalOnConnect:r,onOpen(){H.open({view:"EmailLogin"})},onConnect(){w.replace("ProfileWallets")}});l=h}else if(d){let{address:h}=await Ye.connectWalletConnect({walletConnect:!0,connector:o,closeModalOnConnect:r,onOpen(f){H.open({view:f?"AllWallets":"ConnectingWalletConnect"})},onConnect(){w.replace("ProfileWallets")}});l=h}else{let h=await E.connectExternal({id:o.id,type:o.type,provider:o.provider,chain:t},t);h&&(l=h.address)}return i&&n&&await E.handleAuthAccountSwitch({address:n,namespace:t}),l},async switchConnection({connection:e,address:t,namespace:n,closeModalOnConnect:r,onChange:o}){let s,i=L.getCaipAddress(n);if(i){let{address:l}=ke.parseCaipAddress(i);s=l}let d=Ct.getConnectionStatus(e,n);switch(d){case"connected":case"active":{let l=await E.handleActiveConnection({connection:e,namespace:n,address:t});if(s&&l){let h=l.toLowerCase()!==s.toLowerCase();o?.({address:l,namespace:n,hasSwitchedAccount:h,hasSwitchedWallet:d==="active"})}break}case"disconnected":{let l=await E.handleDisconnectedConnection({connection:e,namespace:n,address:t,closeModalOnConnect:r});l&&o?.({address:l,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${d}`)}}},E=G(Lr);p();m();u();var gt={createBalance(e,t){let n={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:t,address:e.address==="native"?void 0:this.convertAddressToCAIP10Address(e.address,t),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:e,decimals:t}){return qt(BigInt(e),t)},convertAddressToCAIP10Address(e,t){return`${t}:${e}`},createCAIP2ChainId(e,t){return`${t}:${parseInt(e,16)}`},getChainIdHexFromCAIP2ChainId(e){let t=e.split(":");if(t.length<2||!t[1])return"0x0";let n=t[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(e){return typeof e!="object"||e===null?!1:Object.values(e).every(t=>Array.isArray(t)&&t.every(n=>this.isValidAsset(n)))},isValidAsset(e){return typeof e=="object"&&e!==null&&typeof e.address=="string"&&typeof e.balance=="string"&&(e.type==="ERC20"||e.type==="NATIVE")&&typeof e.metadata=="object"&&e.metadata!==null&&typeof e.metadata.name=="string"&&typeof e.metadata.symbol=="string"&&typeof e.metadata.decimals=="number"&&typeof e.metadata.price=="number"&&typeof e.metadata.iconUrl=="string"}};var De={async getMyTokensWithBalance(e){let t=L.state.address,n=a.state.activeCaipNetwork,r=I.getConnectorId("eip155")===A.CONNECTOR_ID.AUTH;if(!t||!n)return[];let o=`${n.caipNetworkId}:${t}`,s=N.getBalanceCacheForCaipAddress(o);if(s)return s.balances;if(n.chainNamespace===A.CHAIN.EVM&&r){let d=await this.getEIP155Balances(t,n);if(d)return this.filterLowQualityTokens(d)}let i=await y.getBalance(t,n.caipNetworkId,e);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(e,t){try{let n=gt.getChainIdHexFromCAIP2ChainId(t.caipNetworkId);if(!(await E.getCapabilities(e))?.[n]?.assetDiscovery?.supported)return null;let o=await E.walletGetAssets({account:e,chainFilter:[n]});if(!gt.isWalletGetAssetsResponse(o))return null;let i=(o[n]||[]).map(d=>gt.createBalance(d,t.caipNetworkId));return N.updateBalanceCache({caipAddress:`${t.caipNetworkId}:${e}`,balance:{balances:i},timestamp:Date.now()}),i}catch{return null}},filterLowQualityTokens(e){return e.filter(t=>t.quantity.decimals!=="0")}};var Ne=b({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Mr={state:Ne,replaceState(e){e&&Object.assign(Ne,ve(e))},subscribe(e){return a.subscribeChainProp("accountState",t=>{if(t)return e(t)})},subscribeKey(e,t,n){let r;return a.subscribeChainProp("accountState",o=>{if(o){let s=o[e];r!==s&&(r=s,t(s))}},n)},setStatus(e,t){a.setAccountProp("status",e,t)},getCaipAddress(e){return a.getAccountProp("caipAddress",e)},setCaipAddress(e,t){let n=e?_.getPlainAddress(e):void 0;t===a.state.activeChain&&(a.state.activeCaipAddress=e),a.setAccountProp("caipAddress",e,t),a.setAccountProp("address",n,t)},setBalance(e,t,n){a.setAccountProp("balance",e,n),a.setAccountProp("balanceSymbol",t,n)},setProfileName(e,t){a.setAccountProp("profileName",e,t)},setProfileImage(e,t){a.setAccountProp("profileImage",e,t)},setUser(e,t){a.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){a.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){a.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){a.setAccountProp("currentTab",e,a.state.activeChain)},setTokenBalance(e,t){e&&a.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){a.setAccountProp("shouldUpdateToAddress",e,t)},addAddressLabel(e,t,n){let r=a.getAccountProp("addressLabels",n)||new Map;r.set(e,t),a.setAccountProp("addressLabels",r,n)},removeAddressLabel(e,t){let n=a.getAccountProp("addressLabels",t)||new Map;n.delete(e),a.setAccountProp("addressLabels",n,t)},setConnectedWalletInfo(e,t){a.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){a.setAccountProp("preferredAccountType",e,t)},setSocialProvider(e,t){e&&a.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){a.setAccountProp("socialWindow",e?ve(e):void 0,t)},setFarcasterUrl(e,t){a.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){Ne.balanceLoading=!0;let t=a.state.activeCaipNetwork?.caipNetworkId,n=a.state.activeCaipNetwork?.chainNamespace,r=a.state.activeCaipAddress,o=r?_.getPlainAddress(r):void 0;if(Ne.lastRetry&&!_.isAllowedRetry(Ne.lastRetry,30*X.ONE_SEC_MS))return Ne.balanceLoading=!1,[];try{if(o&&t&&n){let s=await De.getMyTokensWithBalance();return L.setTokenBalance(s,n),Ne.lastRetry=void 0,Ne.balanceLoading=!1,s}}catch(s){Ne.lastRetry=Date.now(),e?.(s),Q.showError("Token Balance Unavailable")}finally{Ne.balanceLoading=!1}return[]},resetAccount(e){a.resetAccount(e)}},L=G(Mr);p();m();u();p();m();u();var He={async getTokenList(){let e=a.state.activeCaipNetwork;return(await y.fetchSwapTokens({chainId:e?.caipNetworkId}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){let e=a.state.activeCaipNetwork;if(!e)return null;try{switch(e.chainNamespace){case"solana":let t=(await E?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:t,fast:t,instant:t};case"eip155":default:return await y.fetchGasPrice({chainId:e.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:e,userAddress:t,sourceTokenAmount:n,sourceTokenDecimals:r}){let o=await y.fetchSwapAllowance({tokenAddress:e,userAddress:t});if(o?.allowance&&n&&r){let s=E.parseUnits(n,r)||0;return BigInt(o.allowance)>=s}return!1},async getMyTokensWithBalance(e){let t=await De.getMyTokensWithBalance(e);return L.setTokenBalance(t,a.state.activeChain),this.mapBalancesToSwapTokens(t)},mapBalancesToSwapTokens(e){return e?.map(t=>({...t,address:t?.address?t.address:Xe(),decimals:parseInt(t.quantity.decimals,10),logoUri:t.iconUrl,eip2612:!1}))||[]}};var Y=b({tokenBalances:[],loading:!1}),xr={state:Y,subscribe(e){return W(Y,()=>e(Y))},subscribeKey(e,t){return B(Y,e,t)},setToken(e){e&&(Y.token=ve(e))},setTokenAmount(e){Y.sendTokenAmount=e},setReceiverAddress(e){Y.receiverAddress=e},setReceiverProfileImageUrl(e){Y.receiverProfileImageUrl=e},setReceiverProfileName(e){Y.receiverProfileName=e},setNetworkBalanceInUsd(e){Y.networkBalanceInUSD=e},setLoading(e){Y.loading=e},async sendToken(){try{switch(q.setLoading(!0),a.state.activeCaipNetwork?.chainNamespace){case"eip155":await q.sendEvmToken();return;case"solana":await q.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{q.setLoading(!1)}},async sendEvmToken(){let e=a.state.activeChain;if(!e)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");let t=se(e);if(!q.state.sendTokenAmount||!q.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!q.state.token)throw new Error("A token is required");q.state.token?.address?(F.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===oe.ACCOUNT_TYPES.SMART_ACCOUNT,token:q.state.token.address,amount:q.state.sendTokenAmount,network:a.state.activeCaipNetwork?.caipNetworkId||""}}),await q.sendERC20Token({receiverAddress:q.state.receiverAddress,tokenAddress:q.state.token.address,sendTokenAmount:q.state.sendTokenAmount,decimals:q.state.token.quantity.decimals})):(F.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===oe.ACCOUNT_TYPES.SMART_ACCOUNT,token:q.state.token.symbol||"",amount:q.state.sendTokenAmount,network:a.state.activeCaipNetwork?.caipNetworkId||""}}),await q.sendNativeToken({receiverAddress:q.state.receiverAddress,sendTokenAmount:q.state.sendTokenAmount,decimals:q.state.token.quantity.decimals}))},async fetchTokenBalance(e){Y.loading=!0;let t=a.state.activeCaipNetwork?.caipNetworkId,n=a.state.activeCaipNetwork?.chainNamespace,r=a.state.activeCaipAddress,o=r?_.getPlainAddress(r):void 0;if(Y.lastRetry&&!_.isAllowedRetry(Y.lastRetry,30*X.ONE_SEC_MS))return Y.loading=!1,[];try{if(o&&t&&n){let s=await De.getMyTokensWithBalance();return Y.tokenBalances=s,Y.lastRetry=void 0,s}}catch(s){Y.lastRetry=Date.now(),e?.(s),Q.showError("Token Balance Unavailable")}finally{Y.loading=!1}return[]},fetchNetworkBalance(){if(Y.tokenBalances.length===0)return;let e=He.mapBalancesToSwapTokens(Y.tokenBalances);if(!e)return;let t=e.find(n=>n.address===Xe());t&&(Y.networkBalanceInUSD=t?V.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){w.pushTransactionStack({});let t=e.receiverAddress,n=L.state.address,r=E.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));await E.sendTransaction({chainNamespace:A.CHAIN.EVM,to:t,address:n,data:"0x",value:r??BigInt(0)}),F.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:se("eip155")===oe.ACCOUNT_TYPES.SMART_ACCOUNT,token:q.state.token?.symbol||"",amount:e.sendTokenAmount,network:a.state.activeCaipNetwork?.caipNetworkId||""}}),E._getClient()?.updateBalance("eip155"),q.resetSend()},async sendERC20Token(e){w.pushTransactionStack({onSuccess(){w.replace("Account")}});let t=E.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));if(L.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let n=_.getPlainAddress(e.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await E.writeContract({fromAddress:L.state.address,tokenAddress:n,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:Nt.getERC20Abi(n),chainNamespace:A.CHAIN.EVM}),q.resetSend()}},async sendSolanaToken(){if(!q.state.sendTokenAmount||!q.state.receiverAddress)throw new Error("An amount and receiver address are required");w.pushTransactionStack({onSuccess(){w.replace("Account")}}),await E.sendTransaction({chainNamespace:"solana",to:q.state.receiverAddress,value:q.state.sendTokenAmount}),E._getClient()?.updateBalance("solana"),q.resetSend()},resetSend(){Y.token=void 0,Y.sendTokenAmount=void 0,Y.receiverAddress=void 0,Y.receiverProfileImageUrl=void 0,Y.receiverProfileName=void 0,Y.loading=!1,Y.tokenBalances=[]}},q=G(xr);var Ht={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},wt={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},g=b({chains:pn(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Br={state:g,subscribe(e){return W(g,()=>{e(g)})},subscribeKey(e,t){return B(g,e,t)},subscribeChainProp(e,t,n){let r;return W(g.chains,()=>{let o=n||g.activeChain;if(o){let s=g.chains.get(o)?.[e];r!==s&&(r=s,t(s))}})},initialize(e,t,n){let{chainId:r,namespace:o}=N.getActiveNetworkProps(),s=t?.find(f=>f.id.toString()===r?.toString()),d=e.find(f=>f?.namespace===o)||e?.[0],l=e.map(f=>f.namespace).filter(f=>f!==void 0),h=O.state.enableEmbedded?new Set([...l]):new Set([...t?.map(f=>f.chainNamespace)??[]]);(e?.length===0||!d)&&(g.noAdapters=!0),g.noAdapters||(g.activeChain=d?.namespace,g.activeCaipNetwork=s,a.setChainNetworkData(d?.namespace,{caipNetwork:s}),g.activeChain&&Ue.set({activeChain:d?.namespace})),h.forEach(f=>{let U=t?.filter(x=>x.chainNamespace===f),ae=N.getPreferredAccountTypes()||{},ne={...O.state.defaultAccountTypes,...ae};a.state.chains.set(f,{namespace:f,networkState:b({...wt,caipNetwork:U?.[0]}),accountState:b({...Ht,preferredAccountType:ne[f]}),caipNetworks:U??[],...n}),a.setRequestedCaipNetworks(U??[],f)})},removeAdapter(e){if(g.activeChain===e){let t=Array.from(g.chains.entries()).find(([n])=>n!==e);if(t){let n=t[1]?.caipNetworks?.[0];n&&a.setActiveCaipNetwork(n)}}g.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:n},r){if(!e.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");g.chains.set(e.namespace,{namespace:e.namespace,networkState:{...wt,caipNetwork:r[0]},accountState:Ht,caipNetworks:r,connectionControllerClient:n,networkControllerClient:t}),a.setRequestedCaipNetworks(r?.filter(o=>o.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let t=g.chains.get(e.chainNamespace);if(t){let n=[...t.caipNetworks||[]];t.caipNetworks?.find(r=>r.id===e.id)||n.push(e),g.chains.set(e.chainNamespace,{...t,caipNetworks:n}),a.setRequestedCaipNetworks(n,e.chainNamespace),I.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){let n=g.chains.get(e);if(n){let r=g.activeCaipNetwork?.id===t,o=[...n.caipNetworks?.filter(s=>s.id!==t)||[]];r&&n?.caipNetworks?.[0]&&a.setActiveCaipNetwork(n.caipNetworks[0]),g.chains.set(e,{...n,caipNetworks:o}),a.setRequestedCaipNetworks(o||[],e),o.length===0&&I.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){let n=g.chains.get(e);n&&(n.networkState={...n.networkState||wt,...t},g.chains.set(e,n))},setChainAccountData(e,t,n=!0){if(!e)throw new Error("Chain is required to update chain account data");let r=g.chains.get(e);if(r){let o={...r.accountState||Ht,...t};g.chains.set(e,{...r,accountState:o}),(g.chains.size===1||g.activeChain===e)&&(t.caipAddress&&(g.activeCaipAddress=t.caipAddress),L.replaceState(o))}},setChainNetworkData(e,t){if(!e)return;let n=g.chains.get(e);if(n){let r={...n.networkState||wt,...t};g.chains.set(e,{...n,networkState:r})}},setAccountProp(e,t,n,r=!0){a.setChainAccountData(n,{[e]:t},r)},setActiveNamespace(e){g.activeChain=e;let t=e?g.chains.get(e):void 0,n=t?.networkState?.caipNetwork;n?.id&&e&&(g.activeCaipAddress=t?.accountState?.caipAddress,g.activeCaipNetwork=n,a.setChainNetworkData(e,{caipNetwork:n}),N.setActiveCaipNetworkId(n?.caipNetworkId),Ue.set({activeChain:e,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;g.activeChain!==e.chainNamespace&&a.setIsSwitchingNamespace(!0);let t=g.chains.get(e.chainNamespace);g.activeChain=e.chainNamespace,g.activeCaipNetwork=e,a.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),t?.accountState?.address?g.activeCaipAddress=`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:g.activeCaipAddress=void 0,a.setAccountProp("caipAddress",g.activeCaipAddress,e.chainNamespace),t&&L.replaceState(t.accountState),q.resetSend(),Ue.set({activeChain:g.activeChain,selectedNetworkId:g.activeCaipNetwork?.caipNetworkId}),N.setActiveCaipNetworkId(e.caipNetworkId),!a.checkIfSupportedNetwork(e.chainNamespace)&&O.state.enableNetworkSwitch&&!O.state.allowUnsupportedChain&&!E.state.wcBasic&&a.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let t=g.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let t=e!==a.state.activeChain,n=a.getNetworkData(e)?.caipNetwork,r=a.getCaipNetworkByNamespace(e,n?.id);t&&r&&await a.switchActiveNetwork(r)},async switchActiveNetwork(e){let t=a.state.activeChain;if(!t)throw new Error("ChainController:switchActiveNetwork - namespace is required");let r=!a.state.chains.get(t)?.caipNetworks?.some(s=>s.id===g.activeCaipNetwork?.id),o=a.getNetworkControllerClient(e.chainNamespace);if(o){try{await o.switchCaipNetwork(e),r&&H.close()}catch{w.goBack()}F.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})}},getNetworkControllerClient(e){let t=e||g.activeChain;if(!t)throw new Error("ChainController:getNetworkControllerClient - chain is required");let n=g.chains.get(t);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(e){let t=e||g.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");let n=g.chains.get(t);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(e,t){let n=g.activeChain;if(t&&(n=t),!n)return;let r=g.chains.get(n)?.accountState;if(r)return r[e]},getNetworkProp(e,t){let n=g.chains.get(t)?.networkState;if(n)return n[e]},getRequestedCaipNetworks(e){let t=g.chains.get(e),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=t?.networkState||{};return _.sortRequestedNetworks(n,r).filter(i=>i?.id)},getAllRequestedCaipNetworks(){let e=[];return g.chains.forEach(t=>{if(!t.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");let n=a.getRequestedCaipNetworks(t.namespace);e.push(...n)}),e},setRequestedCaipNetworks(e,t){a.setAdapterNetworkState(t,{requestedCaipNetworks:e});let r=a.getAllRequestedCaipNetworks().map(s=>s.chainNamespace),o=Array.from(new Set(r));I.filterByNamespaces(o)},getAllApprovedCaipNetworkIds(){let e=[];return g.chains.forEach(t=>{if(!t.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");let n=a.getApprovedCaipNetworkIds(t.namespace);e.push(...n)}),e},getActiveCaipNetwork(e){return e?g.chains.get(e)?.networkState?.caipNetwork:g.activeCaipNetwork},getActiveCaipAddress(){return g.activeCaipAddress},getApprovedCaipNetworkIds(e){return g.chains.get(e)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){let n=await a.getNetworkControllerClient()?.getApprovedCaipNetworksData();a.setAdapterNetworkState(e,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){let n=t||g.activeCaipNetwork,r=a.getRequestedCaipNetworks(e);return r.length?r?.some(o=>o.id===n?.id):!0},checkIfSupportedChainId(e){return g.activeChain?a.getRequestedCaipNetworks(g.activeChain)?.some(n=>n.id===e):!0},setSmartAccountEnabledNetworks(e,t){a.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){let e=vt.caipNetworkIdToNumber(g.activeCaipNetwork?.caipNetworkId),t=g.activeChain;return!t||!e?!1:!!a.getNetworkProp("smartAccountEnabledNetworks",t)?.includes(Number(e))},showUnsupportedChainUI(){H.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=g.activeCaipNetwork;return!!(e?.chainNamespace&&X.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){a.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){let t=e;if(!t)throw new Error("Chain is required to set account prop");let n=O.state.defaultAccountTypes[t],r=a.getAccountProp("preferredAccountType",t);g.activeCaipAddress=void 0,a.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),I.removeConnectorId(t)},setIsSwitchingNamespace(e){g.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[],t;if(g.chains.forEach(n=>{A.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&e.push(n.namespace)}),e.length>0){let n=e[0];return t=n?g.chains.get(n)?.caipNetworks?.[0]:void 0,t}},getAccountData(e){return e?a.state.chains.get(e)?.accountState:L.state},getNetworkData(e){let t=e||g.activeChain;if(t)return a.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;let n=a.state.chains.get(e),r=n?.caipNetworks?.find(o=>o.id===t);return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=I.state.filterByNamespace;return(e?[g.chains.get(e)]:Array.from(g.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(e){return e?a.getRequestedCaipNetworks(e):a.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(e){g.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork(){return g.lastConnectedSIWECaipNetwork}},a=G(Br);var Fr=_.getApiUrl(),ue=new ge({baseUrl:Fr,clientId:null}),Hr=40,wn=4,Wr=20,M=b({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),R={state:M,subscribeKey(e,t){return B(M,e,t)},_getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:n}=O.state;return{projectId:e,st:t||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(e){return O.state.isUniversalProvider?e.filter(t=>!!(t.mobile_link||t.desktop_link||t.webapp_link)):e},async _fetchWalletImage(e){let t=`${ue.baseUrl}/getWalletImage/${e}`,n=await ue.getBlob({path:t,params:R._getSdkProperties()});le.setWalletImage(e,URL.createObjectURL(n))},async _fetchNetworkImage(e){let t=`${ue.baseUrl}/public/getAssetImage/${e}`,n=await ue.getBlob({path:t,params:R._getSdkProperties()});le.setNetworkImage(e,URL.createObjectURL(n))},async _fetchConnectorImage(e){let t=`${ue.baseUrl}/public/getAssetImage/${e}`,n=await ue.getBlob({path:t,params:R._getSdkProperties()});le.setConnectorImage(e,URL.createObjectURL(n))},async _fetchCurrencyImage(e){let t=`${ue.baseUrl}/public/getCurrencyImage/${e}`,n=await ue.getBlob({path:t,params:R._getSdkProperties()});le.setCurrencyImage(e,URL.createObjectURL(n))},async _fetchTokenImage(e){let t=`${ue.baseUrl}/public/getTokenImage/${e}`,n=await ue.getBlob({path:t,params:R._getSdkProperties()});le.setTokenImage(e,URL.createObjectURL(n))},_filterWalletsByPlatform(e){return _.isMobile()?e?.filter(n=>n.mobile_link||n.id===we.COINBASE.id?!0:a.state.activeChain==="solana"&&(n.id===we.SOLFLARE.id||n.id===we.PHANTOM.id)):e},async fetchProjectConfig(){return(await ue.get({path:"/appkit/v1/config",params:R._getSdkProperties()})).features},async fetchAllowedOrigins(){try{let{allowedOrigins:e}=await ue.get({path:"/projects/v1/origins",params:R._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){let t=e.cause.status;if(t===A.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:e});if(t>=A.HTTP_STATUS_CODES.SERVER_ERROR&&t<600)throw new Error("SERVER_ERROR",{cause:e});return[]}return[]}},async fetchNetworkImages(){let t=a.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!Wt.getNetworkImageById(n));t&&await Promise.allSettled(t.map(n=>R._fetchNetworkImage(n)))},async fetchConnectorImages(){let{connectors:e}=I.state,t=e.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(t.map(n=>R._fetchConnectorImage(n)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(t=>R._fetchCurrencyImage(t)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(t=>R._fetchTokenImage(t)))},async fetchWallets(e){let t=e.exclude??[];R._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(we).map(s=>s.id));let r=await ue.get({path:"/getWallets",params:{...R._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}});return{data:R._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){let{featuredWalletIds:e}=O.state;if(e?.length){let t={...R._getSdkProperties(),page:1,entries:e?.length??wn,include:e},{data:n}=await R.fetchWallets(t),r=[...n].sort((s,i)=>e.indexOf(s.id)-e.indexOf(i.id)),o=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(o.map(s=>R._fetchWalletImage(s))),M.featured=r,M.allFeatured=r}},async fetchRecommendedWallets(){try{M.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:n}=O.state,r=[...t??[],...n??[]].filter(Boolean),o=a.getRequestedCaipNetworkIds().join(","),s={page:1,entries:wn,include:e,exclude:r,chains:o},{data:i,count:d}=await R.fetchWallets(s),l=N.getRecentWallets(),h=i.map(U=>U.image_id).filter(Boolean),f=l.map(U=>U.image_id).filter(Boolean);await Promise.allSettled([...h,...f].map(U=>R._fetchWalletImage(U))),M.recommended=i,M.allRecommended=i,M.count=d??0}catch{}finally{M.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){let{includeWalletIds:t,excludeWalletIds:n,featuredWalletIds:r}=O.state,o=a.getRequestedCaipNetworkIds().join(","),s=[...M.recommended.map(({id:f})=>f),...n??[],...r??[]].filter(Boolean),i={page:e,entries:Hr,include:t,exclude:s,chains:o},{data:d,count:l}=await R.fetchWallets(i),h=d.slice(0,Wr).map(f=>f.image_id).filter(Boolean);await Promise.allSettled(h.map(f=>R._fetchWalletImage(f))),M.wallets=_.uniqueBy([...M.wallets,...R._filterOutExtensions(d)],"id").filter(f=>f.chains?.some(U=>o.includes(U))),M.count=l>M.count?l:M.count,M.page=e},async initializeExcludedWallets({ids:e}){let t={page:1,entries:e.length,include:e},{data:n}=await R.fetchWallets(t);n&&n.forEach(r=>{M.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:e,badge:t}){let{includeWalletIds:n,excludeWalletIds:r}=O.state,o=a.getRequestedCaipNetworkIds().join(",");M.search=[];let s={page:1,entries:100,search:e?.trim(),badge_type:t,include:n,exclude:r,chains:o},{data:i}=await R.fetchWallets(s);F.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});let d=i.map(l=>l.image_id).filter(Boolean);await Promise.allSettled([...d.map(l=>R._fetchWalletImage(l)),_.wait(300)]),M.search=R._filterOutExtensions(i)},initPromise(e,t){let n=M.promises[e];return n||(M.promises[e]=t())},prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){let o=[e&&R.initPromise("connectorImages",R.fetchConnectorImages),t&&R.initPromise("featuredWallets",R.fetchFeaturedWallets),n&&R.initPromise("recommendedWallets",R.fetchRecommendedWallets),r&&R.initPromise("networkImages",R.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(o)},prefetchAnalyticsConfig(){O.state.features?.analytics&&R.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await ue.get({path:"/getAnalyticsConfig",params:R._getSdkProperties()});O.setFeatures({analytics:e})}catch{O.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let t=a.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(n=>n.chains?.some(r=>t.includes(r))),M.recommended=M.allRecommended.filter(n=>n.chains?.some(r=>t.includes(r))),M.filteredWallets=M.wallets.filter(n=>n.chains?.some(r=>t.includes(r)))},clearFilterByNamespaces(){M.filteredWallets=[]},setFilterByNamespace(e){if(!e){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let t=a.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(n=>n.chains?.some(r=>t.includes(r))),M.recommended=M.allRecommended.filter(n=>n.chains?.some(r=>t.includes(r))),M.filteredWallets=M.wallets.filter(n=>n.chains?.some(r=>t.includes(r)))}};var $r={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},$t=b({networkImagePromises:{}}),Wt={async fetchWalletImage(e){if(e)return await R._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;let t=this.getNetworkImageById(e);return t||($t.networkImagePromises[e]||($t.networkImagePromises[e]=R._fetchNetworkImage(e)),await $t.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return le.state.walletImages[e]},getWalletImage(e){if(e?.image_url)return e?.image_url;if(e?.image_id)return le.state.walletImages[e.image_id]},getNetworkImage(e){if(e?.assets?.imageUrl)return e?.assets?.imageUrl;if(e?.assets?.imageId)return le.state.networkImages[e.assets.imageId]},getNetworkImageById(e){if(e)return le.state.networkImages[e]},getConnectorImage(e){if(e?.imageUrl)return e.imageUrl;if(e?.info?.icon)return e.info.icon;if(e?.imageId)return le.state.connectorImages[e.imageId]},getChainImage(e){return le.state.networkImages[$r[e]]}};p();m();u();var it={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},jt={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},jr={providers:Rt,selectedProvider:null,error:null,purchaseCurrency:it,paymentCurrency:jt,purchaseCurrencies:[it],paymentCurrencies:[],quotesLoading:!1},$=b(jr),Kr={state:$,subscribe(e){return W($,()=>e($))},subscribeKey(e,t){return B($,e,t)},setSelectedProvider(e){if(e&&e.name==="meld"){let t=a.state.activeChain,n=t===A.CHAIN.SOLANA?"SOL":"USDC",r=a.getAccountProp("address",t)??"",o=new URL(e.url);o.searchParams.append("publicKey",sn),o.searchParams.append("destinationCurrencyCode",n),o.searchParams.append("walletAddress",r),o.searchParams.append("externalCustomerId",O.state.projectId),$.selectedProvider={...e,url:o.toString()}}else $.selectedProvider=e},setOnrampProviders(e){if(Array.isArray(e)&&e.every(t=>typeof t=="string")){let t=e,n=Rt.filter(r=>t.includes(r.name));$.providers=n}else $.providers=[]},setPurchaseCurrency(e){$.purchaseCurrency=e},setPaymentCurrency(e){$.paymentCurrency=e},setPurchaseAmount(e){Kt.state.purchaseAmount=e},setPaymentAmount(e){Kt.state.paymentAmount=e},async getAvailableCurrencies(){let e=await y.getOnrampOptions();$.purchaseCurrencies=e.purchaseCurrencies,$.paymentCurrencies=e.paymentCurrencies,$.paymentCurrency=e.paymentCurrencies[0]||jt,$.purchaseCurrency=e.purchaseCurrencies[0]||it,await R.fetchCurrencyImages(e.paymentCurrencies.map(t=>t.id)),await R.fetchTokenImages(e.purchaseCurrencies.map(t=>t.symbol))},async getQuote(){$.quotesLoading=!0;try{let e=await y.getOnrampQuote({purchaseCurrency:$.purchaseCurrency,paymentCurrency:$.paymentCurrency,amount:$.paymentAmount?.toString()||"0",network:$.purchaseCurrency?.symbol});return $.quotesLoading=!1,$.purchaseAmount=Number(e?.purchaseAmount.amount),e}catch(e){return $.error=e.message,$.quotesLoading=!1,null}finally{$.quotesLoading=!1}},resetState(){$.selectedProvider=null,$.error=null,$.purchaseCurrency=it,$.paymentCurrency=jt,$.purchaseCurrencies=[it],$.paymentCurrencies=[],$.paymentAmount=void 0,$.purchaseAmount=void 0,$.quotesLoading=!1}},Kt=G(Kr);p();m();u();p();m();u();var _e={getGasPriceInEther(e,t){let n=t*e;return Number(n)/1e18},getGasPriceInUSD(e,t,n){let r=_e.getGasPriceInEther(t,n);return V.bigNumber(e).times(r).toNumber()},getPriceImpact({sourceTokenAmount:e,sourceTokenPriceInUSD:t,toTokenPriceInUSD:n,toTokenAmount:r}){let o=V.bigNumber(e).times(t),s=V.bigNumber(r).times(n);return o.minus(s).div(o).times(100).toNumber()},getMaxSlippage(e,t){let n=V.bigNumber(e).div(100);return V.multiply(t,n).toNumber()},getProviderFee(e,t=.0085){return V.bigNumber(e).times(t).toString()},isInsufficientNetworkTokenForGas(e,t){let n=t||"0";return V.bigNumber(e).eq(0)?!0:V.bigNumber(V.bigNumber(n)).gt(e)},isInsufficientSourceTokenForSwap(e,t,n){let r=n?.find(s=>s.address===t)?.quantity?.numeric;return V.bigNumber(r||"0").lt(e)},getToTokenAmount({sourceToken:e,toToken:t,sourceTokenPrice:n,toTokenPrice:r,sourceTokenAmount:o}){if(o==="0"||!e||!t)return"0";let s=e.decimals,i=n,d=t.decimals,l=r;if(l<=0)return"0";let h=V.bigNumber(o).times(.0085),U=V.bigNumber(o).minus(h).times(V.bigNumber(10).pow(s)),ae=V.bigNumber(i).div(l),ne=s-d;return U.times(ae).div(V.bigNumber(10).pow(ne)).div(V.bigNumber(10).pow(d)).toFixed(d).toString()}};var En=15e4,qr=6;var ce={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:X.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0},c=b(ce),Et={state:c,subscribe(e){return W(c,()=>e(c))},subscribeKey(e,t){return B(c,e,t)},getParams(){let e=a.state.activeCaipAddress,t=_.getPlainAddress(e),n=Xe(),r=I.getConnectorId(a.state.activeChain);if(!t)throw new Error("No address found to swap the tokens from.");let o=!c.toToken?.address||!c.toToken?.decimals,s=!c.sourceToken?.address||!c.sourceToken?.decimals||!V.bigNumber(c.sourceTokenAmount).gt(0),i=!c.sourceTokenAmount;return{networkAddress:n,fromAddress:t,fromCaipAddress:e,sourceTokenAddress:c.sourceToken?.address,toTokenAddress:c.toToken?.address,toTokenAmount:c.toTokenAmount,toTokenDecimals:c.toToken?.decimals,sourceTokenAmount:c.sourceTokenAmount,sourceTokenDecimals:c.sourceToken?.decimals,invalidToToken:o,invalidSourceToken:s,invalidSourceTokenAmount:i,availableToSwap:e&&!o&&!s&&!i,isAuthConnector:r===A.CONNECTOR_ID.AUTH}},setSourceToken(e){if(!e){c.sourceToken=e,c.sourceTokenAmount="",c.sourceTokenPriceInUSD=0;return}c.sourceToken=e,k.setTokenPrice(e.address,"sourceToken")},setSourceTokenAmount(e){c.sourceTokenAmount=e},setToToken(e){if(!e){c.toToken=e,c.toTokenAmount="",c.toTokenPriceInUSD=0;return}c.toToken=e,k.setTokenPrice(e.address,"toToken")},setToTokenAmount(e){c.toTokenAmount=e?V.formatNumberToLocalString(e,qr):""},async setTokenPrice(e,t){let n=c.tokensPriceMap[e]||0;n||(c.loadingPrices=!0,n=await k.getAddressPrice(e)),t==="sourceToken"?c.sourceTokenPriceInUSD=n:t==="toToken"&&(c.toTokenPriceInUSD=n),c.loadingPrices&&(c.loadingPrices=!1),k.getParams().availableToSwap&&k.swapTokens()},switchTokens(){if(c.initializing||!c.initialized)return;let e=c.toToken?{...c.toToken}:void 0,t=c.sourceToken?{...c.sourceToken}:void 0,n=e&&c.toTokenAmount===""?"1":c.toTokenAmount;k.setSourceToken(e),k.setToToken(t),k.setSourceTokenAmount(n),k.setToTokenAmount(""),k.swapTokens()},resetState(){c.myTokensWithBalance=ce.myTokensWithBalance,c.tokensPriceMap=ce.tokensPriceMap,c.initialized=ce.initialized,c.sourceToken=ce.sourceToken,c.sourceTokenAmount=ce.sourceTokenAmount,c.sourceTokenPriceInUSD=ce.sourceTokenPriceInUSD,c.toToken=ce.toToken,c.toTokenAmount=ce.toTokenAmount,c.toTokenPriceInUSD=ce.toTokenPriceInUSD,c.networkPrice=ce.networkPrice,c.networkTokenSymbol=ce.networkTokenSymbol,c.networkBalanceInUSD=ce.networkBalanceInUSD,c.inputError=ce.inputError,c.myTokensWithBalance=ce.myTokensWithBalance},resetValues(){let{networkAddress:e}=k.getParams(),t=c.tokens?.find(n=>n.address===e);k.setSourceToken(t),k.setToToken(void 0)},getApprovalLoadingState(){return c.loadingApprovalTransaction},clearError(){c.transactionError=void 0},async initializeState(){if(!c.initializing){if(c.initializing=!0,!c.initialized)try{await k.fetchTokens(),c.initialized=!0}catch{c.initialized=!1,Q.showError("Failed to initialize swap"),w.goBack()}c.initializing=!1}},async fetchTokens(){let{networkAddress:e}=k.getParams();await k.getTokenList(),await k.getNetworkTokenPrice(),await k.getMyTokensWithBalance();let t=c.tokens?.find(n=>n.address===e);t&&(c.networkTokenSymbol=t.symbol,k.setSourceToken(t),k.setSourceTokenAmount("1"))},async getTokenList(){let e=await He.getTokenList();c.tokens=e,c.popularTokens=e.sort((t,n)=>t.symbol<n.symbol?-1:t.symbol>n.symbol?1:0),c.suggestedTokens=e.filter(t=>!!X.SWAP_SUGGESTED_TOKENS.includes(t.symbol),{})},async getAddressPrice(e){let t=c.tokensPriceMap[e];if(t)return t;let r=(await y.fetchTokenPrice({addresses:[e]}))?.fungibles||[],s=[...c.tokens||[],...c.myTokensWithBalance||[]]?.find(l=>l.address===e)?.symbol,i=r.find(l=>l.symbol.toLowerCase()===s?.toLowerCase())?.price||0,d=parseFloat(i.toString());return c.tokensPriceMap[e]=d,d},async getNetworkTokenPrice(){let{networkAddress:e}=k.getParams(),n=(await y.fetchTokenPrice({addresses:[e]}).catch(()=>(Q.showError("Failed to fetch network token price"),{fungibles:[]}))).fungibles?.[0],r=n?.price.toString()||"0";c.tokensPriceMap[e]=parseFloat(r),c.networkTokenSymbol=n?.symbol||"",c.networkPrice=r},async getMyTokensWithBalance(e){let t=await De.getMyTokensWithBalance(e),n=He.mapBalancesToSwapTokens(t);n&&(await k.getInitialGasPrice(),k.setBalances(n))},setBalances(e){let{networkAddress:t}=k.getParams(),n=a.state.activeCaipNetwork;if(!n)return;let r=e.find(o=>o.address===t);e.forEach(o=>{c.tokensPriceMap[o.address]=o.price||0}),c.myTokensWithBalance=e.filter(o=>o.address.startsWith(n.caipNetworkId)),c.networkBalanceInUSD=r?V.multiply(r.quantity.numeric,r.price).toString():"0"},async getInitialGasPrice(){let e=await He.fetchGasPrice();if(!e)return{gasPrice:null,gasPriceInUSD:null};switch(a.state?.activeCaipNetwork?.chainNamespace){case A.CHAIN.SOLANA:return c.gasFee=e.standard??"0",c.gasPriceInUSD=V.multiply(e.standard,c.networkPrice).div(1e9).toNumber(),{gasPrice:BigInt(c.gasFee),gasPriceInUSD:Number(c.gasPriceInUSD)};case A.CHAIN.EVM:default:let t=e.standard??"0",n=BigInt(t),r=BigInt(En),o=_e.getGasPriceInUSD(c.networkPrice,r,n);return c.gasFee=t,c.gasPriceInUSD=o,{gasPrice:n,gasPriceInUSD:o}}},async swapTokens(){let e=L.state.address,t=c.sourceToken,n=c.toToken,r=V.bigNumber(c.sourceTokenAmount).gt(0);if(r||k.setToTokenAmount(""),!n||!t||c.loadingPrices||!r)return;c.loadingQuote=!0;let o=V.bigNumber(c.sourceTokenAmount).times(10**t.decimals).round(0);try{let s=await y.fetchSwapQuote({userAddress:e,from:t.address,to:n.address,gasPrice:c.gasFee,amount:o.toString()});c.loadingQuote=!1;let i=s?.quotes?.[0]?.toAmount;if(!i){at.open({shortMessage:"Incorrect amount",longMessage:"Please enter a valid amount"},"error");return}let d=V.bigNumber(i).div(10**n.decimals).toString();k.setToTokenAmount(d),k.hasInsufficientToken(c.sourceTokenAmount,t.address)?c.inputError="Insufficient balance":(c.inputError=void 0,k.setTransactionDetails())}catch{c.loadingQuote=!1,c.inputError="Insufficient balance"}},async getTransaction(){let{fromCaipAddress:e,availableToSwap:t}=k.getParams(),n=c.sourceToken,r=c.toToken;if(!(!e||!t||!n||!r||c.loadingQuote))try{c.loadingBuildTransaction=!0;let o=await He.fetchSwapAllowance({userAddress:e,tokenAddress:n.address,sourceTokenAmount:c.sourceTokenAmount,sourceTokenDecimals:n.decimals}),s;return o?s=await k.createSwapTransaction():s=await k.createAllowanceTransaction(),c.loadingBuildTransaction=!1,c.fetchError=!1,s}catch{w.goBack(),Q.showError("Failed to check allowance"),c.loadingBuildTransaction=!1,c.approvalTransaction=void 0,c.swapTransaction=void 0,c.fetchError=!0;return}},async createAllowanceTransaction(){let{fromCaipAddress:e,sourceTokenAddress:t,toTokenAddress:n}=k.getParams();if(!(!e||!n)){if(!t)throw new Error("createAllowanceTransaction - No source token address found.");try{let r=await y.generateApproveCalldata({from:t,to:n,userAddress:e}),o=_.getPlainAddress(r.tx.from);if(!o)throw new Error("SwapController:createAllowanceTransaction - address is required");let s={data:r.tx.data,to:o,gasPrice:BigInt(r.tx.eip155.gasPrice),value:BigInt(r.tx.value),toAmount:c.toTokenAmount};return c.swapTransaction=void 0,c.approvalTransaction={data:s.data,to:s.to,gasPrice:s.gasPrice,value:s.value,toAmount:s.toAmount},{data:s.data,to:s.to,gasPrice:s.gasPrice,value:s.value,toAmount:s.toAmount}}catch{w.goBack(),Q.showError("Failed to create approval transaction"),c.approvalTransaction=void 0,c.swapTransaction=void 0,c.fetchError=!0;return}}},async createSwapTransaction(){let{networkAddress:e,fromCaipAddress:t,sourceTokenAmount:n}=k.getParams(),r=c.sourceToken,o=c.toToken;if(!t||!n||!r||!o)return;let s=E.parseUnits(n,r.decimals)?.toString();try{let i=await y.generateSwapCalldata({userAddress:t,from:r.address,to:o.address,amount:s,disableEstimate:!0}),d=r.address===e,l=BigInt(i.tx.eip155.gas),h=BigInt(i.tx.eip155.gasPrice),f=_.getPlainAddress(i.tx.to);if(!f)throw new Error("SwapController:createSwapTransaction - address is required");let U={data:i.tx.data,to:f,gas:l,gasPrice:h,value:BigInt(d?s??"0":"0"),toAmount:c.toTokenAmount};return c.gasPriceInUSD=_e.getGasPriceInUSD(c.networkPrice,l,h),c.approvalTransaction=void 0,c.swapTransaction=U,U}catch{w.goBack(),Q.showError("Failed to create transaction"),c.approvalTransaction=void 0,c.swapTransaction=void 0,c.fetchError=!0;return}},onEmbeddedWalletApprovalSuccess(){Q.showLoading("Approve limit increase in your wallet"),w.replace("SwapPreview")},async sendTransactionForApproval(e){let{fromAddress:t,isAuthConnector:n}=k.getParams();c.loadingApprovalTransaction=!0,n?w.pushTransactionStack({onSuccess:k.onEmbeddedWalletApprovalSuccess}):Q.showLoading("Approve limit increase in your wallet");try{await E.sendTransaction({address:t,to:e.to,data:e.data,value:e.value,chainNamespace:A.CHAIN.EVM}),await k.swapTokens(),await k.getTransaction(),c.approvalTransaction=void 0,c.loadingApprovalTransaction=!1}catch(o){let s=o;c.transactionError=s?.shortMessage,c.loadingApprovalTransaction=!1,Q.showError(s?.shortMessage||"Transaction error"),F.sendEvent({type:"track",event:"SWAP_APPROVAL_ERROR",properties:{message:s?.shortMessage||s?.message||"Unknown",network:a.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:k.state.sourceToken?.symbol||"",swapToToken:k.state.toToken?.symbol||"",swapFromAmount:k.state.sourceTokenAmount||"",swapToAmount:k.state.toTokenAmount||"",isSmartAccount:se(A.CHAIN.EVM)===oe.ACCOUNT_TYPES.SMART_ACCOUNT}})}},async sendTransactionForSwap(e){if(!e)return;let{fromAddress:t,toTokenAmount:n,isAuthConnector:r}=k.getParams();c.loadingTransaction=!0;let o=`Swapping ${c.sourceToken?.symbol} to ${V.formatNumberToLocalString(n,3)} ${c.toToken?.symbol}`,s=`Swapped ${c.sourceToken?.symbol} to ${V.formatNumberToLocalString(n,3)} ${c.toToken?.symbol}`;r?w.pushTransactionStack({onSuccess(){w.replace("Account"),Q.showLoading(o),Et.resetState()}}):Q.showLoading("Confirm transaction in your wallet");try{let i=[c.sourceToken?.address,c.toToken?.address].join(","),d=await E.sendTransaction({address:t,to:e.to,data:e.data,value:e.value,chainNamespace:A.CHAIN.EVM});return c.loadingTransaction=!1,Q.showSuccess(s),F.sendEvent({type:"track",event:"SWAP_SUCCESS",properties:{network:a.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:k.state.sourceToken?.symbol||"",swapToToken:k.state.toToken?.symbol||"",swapFromAmount:k.state.sourceTokenAmount||"",swapToAmount:k.state.toTokenAmount||"",isSmartAccount:se(A.CHAIN.EVM)===oe.ACCOUNT_TYPES.SMART_ACCOUNT}}),Et.resetState(),r||w.replace("Account"),Et.getMyTokensWithBalance(i),d}catch(i){let d=i;c.transactionError=d?.shortMessage,c.loadingTransaction=!1,Q.showError(d?.shortMessage||"Transaction error"),F.sendEvent({type:"track",event:"SWAP_ERROR",properties:{message:d?.shortMessage||d?.message||"Unknown",network:a.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:k.state.sourceToken?.symbol||"",swapToToken:k.state.toToken?.symbol||"",swapFromAmount:k.state.sourceTokenAmount||"",swapToAmount:k.state.toTokenAmount||"",isSmartAccount:se(A.CHAIN.EVM)===oe.ACCOUNT_TYPES.SMART_ACCOUNT}});return}},hasInsufficientToken(e,t){return _e.isInsufficientSourceTokenForSwap(e,t,c.myTokensWithBalance)},setTransactionDetails(){let{toTokenAddress:e,toTokenDecimals:t}=k.getParams();!e||!t||(c.gasPriceInUSD=_e.getGasPriceInUSD(c.networkPrice,BigInt(c.gasFee),BigInt(En)),c.priceImpact=_e.getPriceImpact({sourceTokenAmount:c.sourceTokenAmount,sourceTokenPriceInUSD:c.sourceTokenPriceInUSD,toTokenPriceInUSD:c.toTokenPriceInUSD,toTokenAmount:c.toTokenAmount}),c.maxSlippage=_e.getMaxSlippage(c.slippage,c.toTokenAmount),c.providerFee=_e.getProviderFee(c.sourceTokenAmount))}},k=G(Et);p();m();u();var Ee=b({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),Vr={state:Ee,subscribe(e){return W(Ee,()=>e(Ee))},subscribeKey(e,t){return B(Ee,e,t)},showTooltip({message:e,triggerRect:t,variant:n}){Ee.open=!0,Ee.message=e,Ee.triggerRect=t,Ee.variant=n},hide(){Ee.open=!1,Ee.message="",Ee.triggerRect={width:0,height:0,top:0,left:0}}},Gr=G(Vr);p();m();u();p();m();u();var An={convertEVMChainIdToCoinType(e){if(e>=2147483648)throw new Error("Invalid chainId");return(2147483648|e)>>>0}};var Ce=b({suggestions:[],loading:!1}),zr={state:Ce,subscribe(e){return W(Ce,()=>e(Ce))},subscribeKey(e,t){return B(Ce,e,t)},async resolveName(e){try{return await y.lookupEnsName(e)}catch(t){let n=t;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await y.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{Ce.loading=!0,Ce.suggestions=[];let t=await y.getEnsNameSuggestions(e);return Ce.suggestions=t.suggestions.map(n=>({...n,name:n.name}))||[],Ce.suggestions}catch(t){let n=At.parseEnsApiError(t,"Error fetching name suggestions");throw new Error(n)}finally{Ce.loading=!1}},async getNamesForAddress(e){try{if(!a.state.activeCaipNetwork)return[];let n=N.getEnsFromCacheForAddress(e);if(n)return n;let r=await y.reverseLookupEnsName({address:e});return N.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r}catch(t){let n=At.parseEnsApiError(t,"Error fetching names for address");throw new Error(n)}},async registerName(e){let t=a.state.activeCaipNetwork,n=L.state.address,r=I.getAuthConnector();if(!t)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Ce.loading=!0;try{let o=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});w.pushTransactionStack({onCancel(){w.replace("RegisterAccountName")}});let s=await E.signMessage(o);Ce.loading=!1;let i=t.id;if(!i)throw new Error("Network not found");let d=An.convertEVMChainIdToCoinType(Number(i));await y.registerEnsName({coinType:d,address:n,signature:s,message:o}),L.setProfileName(e,t.chainNamespace),w.replace("RegisterAccountNameSuccess")}catch(o){let s=At.parseEnsApiError(o,`Error registering name ${e}`);throw w.replace("RegisterAccountName"),new Error(s)}finally{Ce.loading=!1}},validateName(e){return/^[a-zA-Z0-9-]{4,}$/u.test(e)},parseEnsApiError(e,t){return e?.reasons?.[0]?.description||t}},At=G(zr);p();m();u();var ct=b({isLegalCheckboxChecked:!1}),Yr={state:ct,subscribe(e){return W(ct,()=>e(ct))},subscribeKey(e,t){return B(ct,e,t)},setIsLegalCheckboxChecked(e){ct.isLegalCheckboxChecked=e}};p();m();u();var We=null,be={getSIWX(){return O.state.siwx},async initializeIfEnabled(){let e=O.state.siwx,t=a.getActiveCaipAddress();if(!(e&&t))return;let[n,r,o]=t.split(":");if(a.checkIfSupportedNetwork(n))try{if(We&&await We,(await e.getSessions(`${n}:${r}`,o)).length)return;await H.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),F.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await E._getClient()?.disconnect().catch(console.error),w.reset("Connect"),Q.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){let e=O.state.siwx,t=_.getPlainAddress(a.getActiveCaipAddress()),n=a.getActiveCaipNetwork(),r=E._getClient();if(!e)throw new Error("SIWX is not enabled");if(!t)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{let o=await e.createMessage({chainId:n.caipNetworkId,accountAddress:t}),s=o.toString();I.getConnectorId(n.chainNamespace)===A.CONNECTOR_ID.AUTH&&w.pushTransactionStack({});let d=await r.signMessage(s);await e.addSession({data:o,message:s,signature:d}),a.setLastConnectedSIWECaipNetwork(n),H.close(),F.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(o){let s=this.getSIWXEventProperties();(!H.state.open||w.state.view==="ApproveTransaction")&&await H.open({view:"SIWXSignMessage"}),Q.showError("Error signing message"),F.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",o)}},async cancelSignMessage(){try{let e=this.getSIWX();if(e?.getRequired?.()){let n=a.getLastConnectedSIWECaipNetwork();if(n){let r=await e?.getSessions(n?.caipNetworkId,_.getPlainAddress(a.getActiveCaipAddress())||"");r&&r.length>0?await a.switchActiveNetwork(n):await E.disconnect()}else await E.disconnect()}else H.close();H.close(),F.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){let e=this.getSIWX(),t=a.getAllRequestedCaipNetworks(),n=[];return await Promise.all(t.map(async r=>{let o=await e?.getSessions(r.caipNetworkId,_.getPlainAddress(a.getActiveCaipAddress())||"");o&&n.push(...o)})),n},async getSessions(){let e=O.state.siwx,t=_.getPlainAddress(a.getActiveCaipAddress()),n=a.getActiveCaipNetwork();return e&&t&&n?e.getSessions(n.caipNetworkId,t):[]},async isSIWXCloseDisabled(){let e=this.getSIWX();if(e){let t=w.state.view==="ApproveTransaction",n=w.state.view==="SIWXSignMessage";if(t||n)return e.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:e,chainId:t,socialUri:n,preferredAccountType:r,chainNamespace:o}){let s=be.getSIWX();if(!s||!o.includes(A.CHAIN.EVM)){let h=await e.connect({chainId:t,socialUri:n,preferredAccountType:r});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}let i=await s.createMessage({chainId:a.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:"<<AccountAddress>>"}),d={accountAddress:i.accountAddress,chainId:i.chainId,domain:i.domain,uri:i.uri,version:i.version,nonce:i.nonce,notBefore:i.notBefore,statement:i.statement,resources:i.resources,requestId:i.requestId,issuedAt:i.issuedAt,expirationTime:i.expirationTime,serializedMessage:i.toString()},l=await e.connect({chainId:t,socialUri:n,siwxMessage:d,preferredAccountType:r});return d.accountAddress=l.address,d.serializedMessage=l.message||"",l.signature&&l.message&&await be.addEmbeddedWalletSession(d,l.message,l.signature),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(e,t,n){if(We)return We;let r=be.getSIWX();return r?(We=r.addSession({data:e,message:t,signature:n}).finally(()=>{We=null}),We):Promise.resolve()},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:n}){let r=be.getSIWX(),o=new Set(t.map(d=>d.split(":")[0]));if(!r||o.size!==1||!o.has("eip155"))return!1;let s=await r.createMessage({chainId:a.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),i=await e.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:n,chains:[s.chainId,...t.filter(d=>d!==s.chainId)]});if(Q.showLoading("Authenticating...",{autoClose:!1}),L.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(o)[0]),i?.auths?.length){let d=i.auths.map(l=>{let h=e.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud,version:l.p.version||s.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:h,signature:l.s.s,cacao:l}});try{await r.setSessions(d),F.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:be.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),F.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:be.getSIWXEventProperties()}),await e.disconnect().catch(console.error),l}finally{Q.hide()}}return!0},getSIWXEventProperties(){let e=a.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:a.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:se(e)===oe.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){let e=this.getSIWX();e&&await e.setSessions([])}};p();m();u();var Xr={isUnsupportedChainView(){return w.state.view==="UnsupportedChain"||w.state.view==="SwitchNetwork"&&w.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){H.shake();return}if(await be.isSIWXCloseDisabled()){H.shake();return}H.close()}};p();m();u();export{b as a,W as b,ve as c,B as d,Un as e,A as f,V as g,Dn as h,Nt as i,Pn as j,ke as k,Le as l,Jn as m,Ss as n,vs as o,X as p,N as q,_ as r,O as s,xa as t,Ba as u,Fa as v,Ha as w,oe as x,le as y,Wt as z,at as A,F as B,R as C,w as D,ze as E,I as F,se as G,Ct as H,Q as I,Je as J,E as K,q as L,a as M,L as N,Bt as O,H as P,Kt as Q,k as R,Gr as S,At as T,Yr as U,be as V,Xr as W};
