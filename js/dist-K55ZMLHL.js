import{a as ra}from"./chunk-XVL5DJMZ.js";import"./chunk-JCWDJGXT.js";import{a as na,b as fo,c as ho,e as Tt,f as yo,g as go,h as bo,i as zo,j as wo,k as xo,l as vo,m as jo,n as Io,o as Ro,p as Ao,q as Mo,s as ko}from"./chunk-6HHQFJDN.js";import{a as ta}from"./chunk-NBB6K44E.js";import{$ as J,A as ma,Aa as To,B as tt,Ba as Na,C as S,Ca as Re,D as W,Da as _a,E as X,Ea as Oa,F as fa,Fa as xe,G as rt,Ga as Vt,H as ee,Ha as Ka,I as Eo,Ia as Ua,J as ae,Ja as La,K as ht,Ka as gt,L as K,M as s,N as Ce,O as ha,P as yt,Q as F,R as ya,S as H,T as ce,U as E,V as f,W as nt,X as ot,Y as He,Z as k,_ as Fe,a as mt,b as ze,ba as ga,c as we,ca as In,d as ft,da as Rn,e as oa,ea as ba,f as sa,fa as za,g as te,ga as wa,h as Le,ha as xa,i as qt,ia as va,j as Qt,ja,k as vn,ka as Ia,l as Ie,la as Ra,m as jn,ma as Aa,n as Po,na as Ma,o as aa,oa as An,p as ia,pa as ka,q as et,qa as Pa,r as ca,ra as Co,s as ua,sa as Sa,t as da,ta as Ea,u as re,ua as Ca,v as So,va as Da,w as la,wa as Ta,x as Z,y as ne,ya as qa,z as pa,za as Do}from"./chunk-MJQ5UT2E.js";import"./chunk-P6OKGMWB.js";import{a as Zs,b as Gs,c as Xs,d as ea}from"./chunk-2T4BE52W.js";import{Da as $s,Eb as Ws,Fb as Ys,Hb as mo,Jb as Qs,L as Dt,La as Bs,Ub as Vs,V as pt,Wb as xn,X as wn,Zb as Ue,_b as Js,d as Hs,fa as Fs,ra as po}from"./chunk-SH2H32CZ.js";import"./chunk-BDUWLAUS.js";import"./chunk-OBMTZ2R2.js";import"./chunk-6ZQQ3XQO.js";import{Ba as Us,Ca as lo,_a as Ls,w as zn,ya as uo}from"./chunk-J26BEOSD.js";import"./chunk-MQMLE4BX.js";import"./chunk-UHIHVU5C.js";import"./chunk-EDRI7XUL.js";import{e as je,i as x,k as v,o as j}from"./chunk-JY5TIRRF.js";x();j();v();var Oo={};je(Oo,{all:()=>No,anvil:()=>_o,anvil2:()=>Zi,anvil3:()=>Gi,arbitrum:()=>fo,arbitrumSepolia:()=>ho,base:()=>Tt,baseSepolia:()=>yo,berachain:()=>go,berachainBepolia:()=>bo,bsc:()=>zo,celo:()=>wo,gnosis:()=>xo,hoodi:()=>vo,katana:()=>jo,mainnet:()=>Io,optimism:()=>Ro,optimismSepolia:()=>Ao,polygon:()=>Mo,sepolia:()=>ko});x();j();v();var qo={};je(qo,{arbitrum:()=>fo,arbitrumSepolia:()=>ho,base:()=>Tt,baseSepolia:()=>yo,berachain:()=>go,berachainBepolia:()=>bo,bsc:()=>zo,celo:()=>wo,gnosis:()=>xo,hoodi:()=>vo,katana:()=>jo,mainnet:()=>Io,optimism:()=>Ro,optimismSepolia:()=>Ao,polygon:()=>Mo,sepolia:()=>ko});x();j();v();var No=[Tt,...Object.values(qo).filter(e=>e&&e.id!==Tt.id)],_o=na,Zi=po({..._o,id:31338}),Gi=po({..._o,id:31339});var En={};je(En,{authSession:()=>Yo,createThemeController:()=>uc,defaultSize:()=>Za,experimental_inline:()=>cc,from:()=>ic,getDialogUrl:()=>hr,getReferrer:()=>wt,handleBlur:()=>fr,handleResponse:()=>Ot,hostUrls:()=>yr,iframe:()=>Wo,noop:()=>gr,popup:()=>Ja,requiresConfirmation:()=>Qo});x();j();v();x();j();v();x();j();v();function Ha(e,t={}){let{raw:r=!1}=t,o=e;if(r)return e;if(o.error)throw Ko(o.error);return o.result}function Ko(e){let t=e;if(t instanceof Error&&!("code"in t))return new $e({cause:t,data:t,message:t.message,stack:t.stack});let{code:r}=t;return r===$e.code?new $e(t):r===Jt.code?new Jt(t):r===Ye.code?new Ye(t):r===tr.code?new tr(t):r===Xt.code?new Xt(t):r===rr.code?new rr(t):r===We.code?new We(t):r===nr.code?new nr(t):r===Zt.code?new Zt(t):r===Gt.code?new Gt(t):r===Be.code?new Be(t):r===er.code?new er(t):new $e({cause:t instanceof Error?t:void 0,data:t,message:t.message,stack:t instanceof Error?t.stack:void 0})}var he=class extends Error{constructor(t){let{cause:r,code:o,message:n,data:i,stack:h}=t;super(n,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=r,this.code=o,this.data=i,this.stack=h??""}},Jt=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Missing or invalid parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}};Object.defineProperty(Jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});var Zt=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Requested resource not found."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}};Object.defineProperty(Zt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});var Gt=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Requested resource not available."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}};Object.defineProperty(Gt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});var Be=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Transaction creation failed."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}};Object.defineProperty(Be,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});var We=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Method is not implemented."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}};Object.defineProperty(We,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});var Xt=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Rate limit exceeded."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}};Object.defineProperty(Xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});var er=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"JSON-RPC version not supported."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}};Object.defineProperty(er,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});var tr=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Input is not a valid JSON-RPC request."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}};Object.defineProperty(tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});var rr=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Method does not exist."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}};Object.defineProperty(rr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});var Ye=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Invalid method parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}};Object.defineProperty(Ye,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var $e=class e extends he{constructor(t={}){super({cause:t.cause,code:e.code,data:t.data,message:t.message??"Internal JSON-RPC error.",stack:t.stack}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalError"})}};Object.defineProperty($e,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});var nr=class e extends he{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Failed to parse JSON-RPC response."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}};Object.defineProperty(nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});var de=class extends Error{constructor(t,r){super(r),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=r}},be=class extends de{constructor({message:t="The user rejected the request."}={}){super(4001,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}};Object.defineProperty(be,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});var oe=class extends de{constructor({message:t="The requested method and/or account has not been authorized by the user."}={}){super(4100,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}};Object.defineProperty(oe,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});var Ae=class extends de{constructor({message:t="The provider does not support the requested method."}={}){super(4200,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}};Object.defineProperty(Ae,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});var se=class extends de{constructor({message:t="The provider is disconnected from all chains."}={}){super(4900,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}};Object.defineProperty(se,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});var Me=class extends de{constructor({message:t="The provider is not connected to the requested chain."}={}){super(4901,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}};Object.defineProperty(Me,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});var sr=class extends de{constructor({message:t="An error occurred when attempting to switch chain."}={}){super(4902,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.SwitchChainError"})}};Object.defineProperty(sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var ar=class extends de{constructor({message:t="This Wallet does not support a capability that was not marked as optional."}={}){super(5700,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedNonOptionalCapabilityError"})}};Object.defineProperty(ar,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});var bt=class extends de{constructor({message:t="This Wallet does not support the requested chain ID."}={}){super(5710,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedChainIdError"})}};Object.defineProperty(bt,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});var ir=class extends de{constructor({message:t="There is already a bundle submitted with this ID."}={}){super(5720,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DuplicateIdError"})}};Object.defineProperty(ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});var Qe=class extends de{constructor({message:t="This bundle id is unknown / has not been submitted."}={}){super(5730,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnknownBundleIdError"})}};Object.defineProperty(Qe,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});var cr=class extends de{constructor({message:t="The call bundle is too large for the Wallet to process."}={}){super(5740,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.BundleTooLargeError"})}};Object.defineProperty(cr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});var ur=class extends de{constructor({message:t="The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."}={}){super(5750,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicReadyWalletRejectedUpgradeError"})}};Object.defineProperty(ur,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});var dr=class extends de{constructor({message:t="The wallet does not support atomic execution but the request requires it."}={}){super(5760,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicityNotSupportedError"})}};Object.defineProperty(dr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});function Fa(){let e=new ta.default;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}function Mn(e,t={}){if(!e)throw new Uo;return{...e,async request(r){try{let o=await e.request(r);return o&&typeof o=="object"&&"jsonrpc"in o?Ha(o):o}catch(o){throw Lo(o)}}}}function Lo(e){let t=Ko(e);if(t instanceof $e){if(!t.data)return t;let{code:r}=t.data;if(r===se.code)return new se(t);if(r===Me.code)return new Me(t);if(r===be.code)return new be(t);if(r===oe.code)return new oe(t);if(r===Ae.code)return new Ae(t);if(r===sr.code)return new sr(t);if(r===ur.code)return new ur(t);if(r===dr.code)return new dr(t);if(r===cr.code)return new cr(t);if(r===Qe.code)return new Qe(t);if(r===ir.code)return new ir(t);if(r===bt.code)return new bt(t);if(r===ar.code)return new ar(t)}return t}var Uo=class extends we{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}};x();j();v();var $a=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype&&"isVisible"in IntersectionObserverEntry.prototype;x();j();v();function ec(e={}){let{prefix:t="[Porto]"}=e,r=new Set;return{error:Nt(console.error,{prefix:t}),errorOnce:Nt(console.error,{memo:r,prefix:t}),log:Nt(console.log,{prefix:t}),logOnce:Nt(console.log,{memo:r,prefix:t}),warn:Nt(console.warn,{prefix:t}),warnOnce:Nt(console.warn,{memo:r,prefix:t})}}var Ho=ec();function Nt(e,t={}){let{memo:r,prefix:o}=t;return(...n)=>{let i=n.join(" ");r?.has(i)||(r?.add(i),e(`${o} ${i}`))}}x();j();v();function Ba(){let e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")}function Wa(){let e=navigator.userAgent.toLowerCase();return(e.includes("firefox")||e.includes("fxios"))&&!e.includes("seamonkey")}function Ya(){return window.navigator?.userAgentData?.mobile?!0:navigator.maxTouchPoints>1||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4))}var Fo={};je(Fo,{bridge:()=>mr,cliRelay:()=>sc,from:()=>nc,fromWindow:()=>at,noop:()=>oc});x();j();v();x();j();v();function Qa(){let e=()=>{},t=()=>{};return{promise:new Promise((o,n)=>{e=o,t=n}),reject:t,resolve:e}}x();j();v();function De(e){if(Array.isArray(e))return e.map(De);if(typeof e=="function")return;if(typeof e!="object"||e===null)return e;if(Object.getPrototypeOf(e)!==Object.prototype)try{return structuredClone(e)}catch{return}let t={};for(let[r,o]of Object.entries(e))t[r]=De(o);return t}function Pn(e,t){let r=[],o=new Set;for(let n of e){let i=t(n);o.has(i)||(o.add(i),r.push(n))}return r}function zt(){return typeof globalThis<"u"&&"crypto"in globalThis?globalThis.crypto.randomUUID():crypto.randomUUID()}function st(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(st.cache.get(r))return st.cache.get(r);let o=e().finally(()=>st.cache.delete(r));return st.cache.set(r,o),o}(function(e){e.cache=new Map})(st||(st={}));function nc(e){return e}function at(e,t={}){let{targetOrigin:r}=t,o=new Map;return{destroy(){for(let n of o.values())e.removeEventListener("message",n)},on(n,i,h){function u(c){c.data.topic===n&&(h&&c.data.id!==h||r&&c.origin!==r||i(c.data.payload,c))}return e.addEventListener("message",u),o.set(n,u),()=>e.removeEventListener("message",u)},async send(n,i,h){let u=zt();return e.postMessage(De({id:u,payload:i,topic:n}),h??r??"*"),{id:u,payload:i,topic:n}},async sendAsync(n,i,h){let{id:u}=await this.send(n,i,h);return new Promise(c=>this.on(n,c,u))}}}function mr(e){let{from:t,to:r,waitForReady:o=!1}=e,n=!1,i=Qa();t.on("ready",i.resolve);let h={destroy(){t.destroy(),r.destroy(),n&&i.reject()},on(u,c,a){return t.on(u,c,a)},async send(u,c){return n=!0,o&&await i.promise.finally(()=>n=!1),r.send(u,c)},async sendAsync(u,c){return n=!0,o&&await i.promise.finally(()=>n=!1),r.sendAsync(u,c)}};return{...h,ready(u){h.send("ready",u)},waitForReady(){return i.promise}}}function oc(){return{destroy(){},on(){return()=>{}},ready(){},send(){return Promise.resolve(void 0)},sendAsync(){return Promise.resolve(void 0)},waitForReady(){return Promise.resolve(void 0)}}}function sc(e){let{relayUrl:t}=e,r=null,o=new Map;function n(){!t||r||(r=new EventSource(t),r.onmessage=h=>{try{let u=JSON.parse(h.data);if(!u.topic||!u.payload)return;let c=o.get(u.topic);if(!c)return;for(let a of c)a(u.payload,{data:u,origin:t})}catch(u){console.error("Error parsing SSE message:",u)}},r.onerror=h=>{console.error("SSE connection error:",h),r?.close(),r=null,setTimeout(n,1e3)})}n();async function i(h,u){let c=zt(),l=await fetch(t,{body:ze({id:c,payload:u,topic:h}),headers:{"Content-Type":"application/json"},method:"POST"});return{id:c,payload:u,response:l,topic:h}}return{destroy(){r?.close(),r=null,o.clear()},on(h,u){return o.has(h)||o.set(h,new Set),o.get(h).add(u),()=>{let c=o.get(h);c&&(c.delete(u),c.size===0&&o.delete(h))}},async ready(h){await new Promise(u=>setTimeout(u,32)),this.send("ready",h)},async send(h,u){let{id:c}=await i(h,u);return{id:c,payload:u,topic:h}},async sendAsync(h,u){let{response:c}=await i(h,u);if(!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);if(c.headers.get("content-type")?.includes("application/json"))return await c.json()}}}x();j();v();var $o;var Va={get environment(){if(!$o)throw new Error("React Native environment is not configured");return $o},set environment(e){$o=e}};x();j();v();function Sn(){return!!(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof window<"u"&&Object.hasOwn(window,"ReactNativeWebView")||typeof globalThis<"u"&&Object.hasOwn(globalThis,"HermesEngine"))}var Bo={cancel:"cancel",error:"error",success:"success",unknown:"unknown"},yr={local:"http://localhost:5175/dialog/",prod:"https://id.porto.sh/dialog",stg:"https://stg.id.porto.sh/dialog"};function ic(e){return e}function Wo(e={}){let{skipProtocolCheck:t,skipUnsupported:r}=e,o=n=>!r&&Ba()&&n?.some(i=>["wallet_connect","eth_requestAccounts"].includes(i.method));return typeof window>"u"?gr():{name:"iframe",setup(n){let{host:i,internal:h,theme:u,themeController:c}=n,{store:a}=h,l=Ja().setup(n),p=!1,m=new URL(i),d=document.createElement("dialog");d.dataset.porto="",d.setAttribute("role","dialog"),d.setAttribute("aria-closed","true"),d.setAttribute("aria-label","Porto Wallet"),d.setAttribute("hidden","until-found"),Object.assign(d.style,{background:"transparent",border:"0",outline:"0",padding:"0",position:"fixed"}),document.body.appendChild(d);let g=document.createElement("iframe");g.setAttribute("data-testid","porto");let z=["payment",`publickey-credentials-get ${m.origin}`,`publickey-credentials-create ${m.origin}`];Wa()||z.push("clipboard-write"),g.setAttribute("allow",z.join("; ")),g.setAttribute("tabindex","0"),g.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"),g.setAttribute("src",hr(i)),g.setAttribute("title","Porto"),Object.assign(g.style,{backgroundColor:"transparent",border:"0",colorScheme:"light dark",height:"100%",left:"0",position:"fixed",top:"0",width:"100%"});let y=document.createElement("style");y.innerHTML=`
        dialog[data-porto]::backdrop {
          background: transparent!important;
        }
      `,d.appendChild(y),d.appendChild(g);let b=mr({from:at(window,{targetOrigin:m.origin}),to:at(g.contentWindow,{targetOrigin:m.origin}),waitForReady:!0});c?._setup(b,!0);let w=window.matchMedia("(max-width: 460px)"),I=()=>{b.send("__internal",{type:"resize",width:w.matches?460:461})};w.addEventListener("change",I),b.on("ready",$=>{let le=n.internal.store.getState().chainIds.filter(ve=>$.chainIds.includes(ve));le.length===0&&(le=$.chainIds),a.setState(ve=>({...ve,chainIds:le})),b.send("__internal",{chainIds:le,mode:"iframe",referrer:wt(),theme:u,type:"init"}),I()}),b.on("rpc-response",$=>{if(o([$._request])){let ge=g.src;g.src=ge}Ot(a,$)}),b.on("__internal",$=>{$.type==="switch"&&$.mode==="popup"&&(l.open(),l.syncRequests(a.getState().requestQueue))});let A=null,P=null,C=()=>fr(a),D=$=>{$.key==="Escape"&&fr(a)},T=new MutationObserver($=>{for(let ge of $){if(ge.type!=="attributes")continue;let le=ge.attributeName;le&&le==="inert"&&d.removeAttribute(le)}});T.observe(d,{attributeOldValue:!0,attributes:!0});let q=!1,L=()=>{q&&(q=!1,d.removeEventListener("click",C),document.removeEventListener("keydown",D),d.style.pointerEvents="none",P?.focus(),P=null,Object.assign(document.body.style,A??""),document.body.style.overflow=A?.overflow??"")},Y=()=>{q||(q=!0,d.addEventListener("click",C),document.addEventListener("keydown",D),g.focus(),d.style.pointerEvents="auto",A=Object.assign({},document.body.style),document.body.style.overflow="hidden")},V=!1,Q=()=>{V||(V=!0,document.activeElement instanceof HTMLElement&&(P=document.activeElement),d.removeAttribute("hidden"),d.removeAttribute("aria-closed"),d.showModal())},G=()=>{if(V){V=!1,d.setAttribute("hidden","true"),d.setAttribute("aria-closed","true"),d.close();for(let $ of d.parentNode?Array.from(d.parentNode.children):[])$!==d&&$.hasAttribute("inert")&&$.removeAttribute("inert")}};return{close(){l.close(),p=!1,b.send("__internal",{mode:"iframe",referrer:wt(),type:"init"}),G(),L()},destroy(){l.close(),p=!1,L(),G(),l.destroy(),b.destroy(),d.remove(),T.disconnect(),w.removeEventListener("change",I)},open(){p||(p=!0,Q(),Y(),b.send("__internal",{mode:"iframe",referrer:wt(),type:"init"}))},async secure(){let{trustedHosts:$}=await b.waitForReady(),ge=(()=>{if(t)return!0;let Ee=window.location.protocol.startsWith("https");return Ee||Ho.warnOnce("Detected insecure protocol (HTTP).",`

The Porto iframe is not supported on HTTP origins (${window.location.origin})`,"due to lack of WebAuthn support.","See https://porto.sh/sdk#secure-origins-https for more information."),Ee})(),le=$a(),ve=!!$?.includes(window.location.hostname),pe=!!(le||ve);return pe||Ho.warnOnce([`Warning: Browser does not support IntersectionObserver v2 or host "${m.hostname}" is not trusted by Porto.`,"This may result in the dialog falling back to a popup.","",`Add "${m.hostname}" to the trusted hosts list to enable iframe dialog: https://github.com/ithacaxyz/porto/edit/main/src/trusted-hosts.ts`].join(`
`)),{frame:pe,host:ve,protocol:ge}},async syncRequests($){let{methodPolicies:ge}=await b.waitForReady(),le=await this.secure(),ve=$?.every(Ee=>ge?.find(co=>co.method===Ee.request.method)?.modes?.headless===!0),pe=o($.map(Ee=>Ee.request));if(!ve&&(pe||!le.protocol||!le.frame))l.syncRequests($);else{let Ee=$.some(co=>Qo(co.request,{methodPolicies:ge,targetOrigin:m.origin}));!p&&Ee&&this.open(),b.send("rpc-requests",$)}}}},supportsHeadless:!0}}function Ja(e={}){if(typeof window>"u")return gr();let{type:t="auto",size:r=Za}=e;return{name:"popup",setup(o){let{host:n,internal:i,themeController:h}=o,{store:u}=i,c=new URL(n),a=null,l=t==="page"||t==="auto"&&Ya()?"page":"popup";function p(){a&&fr(u)}let m=(()=>{let g=setInterval(()=>{a?.closed&&fr(u)},100);return()=>clearInterval(g)})(),d;return h?._setup(null,!0),{close(){a&&(a.close(),a=null)},destroy(){this.close(),window.removeEventListener("focus",p),d?.destroy(),m()},open(){if(l==="popup"){let g=(window.innerWidth-r.width)/2+window.screenX,z=window.screenY+100;a=window.open(hr(n),"_blank",`width=${r.width},height=${r.height},left=${g},top=${z}`)}else a=window.open(hr(n),"_blank");if(!a)throw new Error("Failed to open popup");d=mr({from:at(window,{targetOrigin:c.origin}),to:at(a,{targetOrigin:c.origin}),waitForReady:!0}),h?._setup(d,!1),d.send("__internal",{mode:l==="page"?"page":"popup",referrer:wt(),theme:h?.getTheme()??o.theme,type:"init"}),d.on("rpc-response",g=>Ot(u,g)),window.removeEventListener("focus",p),window.addEventListener("focus",p)},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(g){g.some(y=>Qo(y.request))&&((!a||a.closed)&&this.open(),a?.focus()),d?.send("rpc-requests",g)}}},supportsHeadless:!1}}function Yo(e={}){if(!Sn())return gr();let{requestOptions:t={showTitle:!0}}=e;return{name:"authSession",setup(r){let{host:o,internal:n}=r,{store:i}=n,h=Va.environment;h.maybeCompleteAuthSession?.();let u=!1,c=null;async function a(l){let{request:p}=l,d={account_verifyEmail:"account_verifyEmail",eth_requestAccounts:"eth_requestAccounts",eth_sendTransaction:"eth_sendTransaction",eth_signTypedData_v4:"eth_signTypedData_v4",personal_sign:"personal_sign",wallet_addFunds:"wallet_addFunds",wallet_connect:"wallet_connect",wallet_getAccountVersion:"wallet_getAccountVersion",wallet_getAssets:"wallet_getAssets",wallet_getCallsStatus:"wallet_getCallsStatus",wallet_getCapabilities:"wallet_getCapabilities",wallet_getKeys:"wallet_getKeys",wallet_getPermissions:"wallet_getPermissions",wallet_grantAdmin:"wallet_grantAdmin",wallet_grantPermissions:"wallet_grantPermissions",wallet_prepareCalls:"wallet_prepareCalls",wallet_prepareUpgradeAccount:"wallet_prepareUpgradeAccount",wallet_revokeAdmin:"wallet_revokeAdmin",wallet_revokePermissions:"wallet_revokePermissions",wallet_sendCalls:"wallet_sendCalls",wallet_sendPreparedCalls:"wallet_sendPreparedCalls",wallet_switchEthereumChain:"wallet_switchEthereumChain",wallet_verifySignature:"wallet_verifySignature"}[p.method];if(!d)throw new Ae({message:`Method not supported in Mode.reactNative(): ${p.method}`});let g=h.makeRedirectUri({...e.redirectUri?{scheme:e.redirectUri.scheme}:{},path:e.redirectUri?.path??"/",preferLocalhost:typeof __DEV__=="boolean"&&__DEV__}),z=new URL(o);z.pathname=`${z.pathname.replace(/\/$/,"")}/${d}`;let y=new URLSearchParams({id:String(p.id),jsonrpc:"2.0",method:p.method,redirectUri:g}),b=p.params??[];b.length>0&&y.set("params",ze(b));let w=p._decoded?.params;w&&y.set("_decoded",ze(w)),z.search=y.toString();let I=await h.openAuthSessionAsync(z.toString(),g,t),A=(()=>{if(I.type==="success"&&I.url){let P=new URL(I.url),C=P.searchParams.get("status")??Bo.unknown,D=P.searchParams.get("message")??void 0,T=P.searchParams.get("payload")??void 0;if(C===Bo.success)try{return{id:p.id,jsonrpc:"2.0",result:T?mt(T):void 0}}catch(L){return{error:{code:-32603,message:L instanceof Error?L.message:"Failed to parse redirect payload"},id:p.id,jsonrpc:"2.0"}}let q=C===Bo.cancel?new be({message:D??"User rejected request"}):new de(-32603,D??C??"Request failed");return{error:{code:q.code,message:q.message},id:p.id,jsonrpc:"2.0"}}return I.type==="cancel"||I.type==="dismiss"?{error:{code:be.code,message:"User rejected request"},id:p.id,jsonrpc:"2.0"}:{error:{code:-32603,message:I.error??"Request failed"},id:p.id,jsonrpc:"2.0"}})();Ot(i,A),h.dismissAuthSession?.()}return{close(){h.dismissAuthSession?.()},destroy(){h.dismissAuthSession?.()},open(){},async secure(){return{frame:!1,host:!0,protocol:!0}},async syncRequests(l){if(u)return;let[p]=l;if(p&&c!==p.request.id){c=p.request.id,u=!0;try{await a(p)}catch(m){Ot(i,{error:{code:-32603,message:m instanceof Error?m.message:"Request failed"},id:p.request.id,jsonrpc:"2.0"}),h.dismissAuthSession?.()}finally{c=null,u=!1}}}}},supportsHeadless:!1}}function gr(){return{name:"noop",setup(){return{close(){},destroy(){},open(){},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(){}}},supportsHeadless:!0}}function cc(e){let{element:t}=e;return typeof window>"u"?gr():{name:"inline",setup(r){let{host:o,internal:n,theme:i,themeController:h}=r,{store:u}=n,c=!1,a=new URL(o),l=document.createElement("div");l.dataset.porto="",l.style.height="100%",t().appendChild(l);let p=document.createElement("iframe");p.setAttribute("allow",`payment; publickey-credentials-get ${a.origin}; publickey-credentials-create ${a.origin}`),p.setAttribute("aria-label","Porto Wallet"),p.setAttribute("tabindex","0"),p.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"),p.setAttribute("src",hr(o)),p.setAttribute("title","Porto"),Object.assign(p.style,{border:"0",height:"100%",width:"100%"}),l.appendChild(p);let m=mr({from:at(window,{targetOrigin:a.origin}),to:at(p.contentWindow,{targetOrigin:a.origin}),waitForReady:!0});return h?._setup(m,!0),m.on("ready",()=>{m.send("__internal",{mode:"inline-iframe",referrer:wt(),theme:i,type:"init"})}),m.on("rpc-response",d=>Ot(u,d)),{close(){},destroy(){m.destroy(),l.remove()},open(){c||(c=!0,m.send("__internal",{mode:"iframe",referrer:wt(),type:"init"}))},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(d){m.send("rpc-requests",d)}}},supportsHeadless:!0}}function uc(){let e=null,t=null;return{_setup(o,n=!1){n&&(e=null),t=o},getTheme(){return e},setTheme(o){e=o,t?.send("__internal",{theme:o,type:"set-theme"}).catch(()=>{})}}}var Za={height:282,width:360};function Qo(e,t={}){let{methodPolicies:r,targetOrigin:o}=t,n=r?.find(i=>i.method===e.method);return n&&n.modes?.headless?!!(typeof n.modes.headless=="object"&&n.modes.headless.sameOrigin&&o!==window.location.origin):!0}function wt(){return{icon:(()=>{let t=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: dark)"]')?.href,r=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: light)"]')?.href??document.querySelector('link[rel="icon"]')?.href;return t&&r&&t!==r?{dark:t,light:r}:window.matchMedia("(prefers-color-scheme: dark)").matches?t:r})(),title:document.title}}function fr(e){e.setState(t=>({...t,requestQueue:t.requestQueue.map(r=>({account:r.account,error:new be,request:r.request,status:"error"}))}))}function Ot(e,t){e.setState(r=>({...r,requestQueue:r.requestQueue.map(o=>o.request.id!==t.id?o:t.error?{account:o.account,error:t.error,request:o.request,status:"error"}:{account:o.account,request:o.request,result:t.result,status:"success"})}))}function hr(e){let t=new URL(e),r=new URLSearchParams(window.location.search),o="porto.";for(let[n,i]of r.entries())n.startsWith(o)&&t.searchParams.set(n.slice(o.length),i);return t.toString()}x();j();v();var vt={};je(vt,{from:()=>ie,fromPrivateKey:()=>br,getKey:()=>xt,sign:()=>Te});x();j();v();x();j();v();x();j();v();function Vo(e){if(typeof e=="string"){if(!lo(e,{strict:!1}))throw new uo({address:e});return{address:e,type:"json-rpc"}}if(!lo(e.address,{strict:!1}))throw new uo({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}function ie(e){let t=typeof e=="string"?{address:e}:e,r=t.sign?"privateKey":"porto",{address:o,sign:n,signMessage:i,signTransaction:h,signTypedData:u,type:c}=Vo({address:t.address,sign({hash:a}){if(r==="porto")throw new Error("`sign` not supported on porto accounts.");if(!t.sign)throw new Error("`sign` not supported.");return t.sign({hash:a})},signMessage({message:a}){return this.sign({hash:$s(a)})},signTransaction(){throw new Error("`signTransaction` not supported on porto accounts.")},signTypedData(a){return this.sign({hash:Bs(a)})}});return{address:o,keys:t.keys??void 0,sign:n,signMessage:i,signTransaction:h,signTypedData:u,source:r,type:c}}function br(e,t={}){let{keys:r}=t,o=da(ga({privateKey:e}));return ie({address:o,keys:r,async sign({hash:n}){return ja(ba({payload:n,privateKey:e}))},source:"privateKey"})}function xt(e,t={}){let{key:r,role:o}=t;if(r!==null){if(typeof r=="object")return r;if(e.keys&&e.keys.length>0)return typeof r=="number"?e.keys[r]:e.keys.find(n=>n.privateKey&&(!o||n.role===o))}}async function Te(e,t){let{storage:r,replaySafe:o=!0,wrap:n=!0,webAuthn:i}=t,h=xt(e,t),u=o?An({domain:{verifyingContract:e.address},message:{digest:t.payload},primaryType:"ERC1271Sign",types:{ERC1271Sign:[{name:"digest",type:"bytes32"}]}}):t.payload,c=h?({hash:a})=>xe(h,{address:null,payload:a,storage:r,webAuthn:i,wrap:n}):e.source==="privateKey"?e.sign:void 0;if(!c)throw new Error("cannot find key to sign with.");return await c({hash:u})}x();j();v();x();j();v();function Dn(e,t={}){return ka(e,t)}function ei(e,t,r){if(t==="Error")return Ga;if(t==="Panic")return Xa;if(jn(t,{strict:!1})){let n=qt(t,0,4);if(n===pc)return Ga;if(n===mc)return Xa}let o=Pa(e,t,r);if(o.type!=="error")throw new Sa({name:t,type:"error"});return o}var Ga=Dn({inputs:[{name:"message",type:"string"}],name:"Error",type:"error"}),pc="0x08c379a0",Xa=Dn({inputs:[{name:"reason",type:"uint8"}],name:"Panic",type:"error"}),mc="0x4e487b71";x();j();v();x();j();v();var Tn=class extends zn{constructor(){super("Function is not recognized.",{metaMessages:["This could be due to any of the following:","  - The contract does not have the function,","  - The address is not a contract."],name:"FunctionSelectorNotRecognizedError"})}};x();j();v();x();j();v();function ti(e,t={}){return Ws(e,t)}function ri(e){return Ys(e)}function Go(e,t){let r=e.walk(n=>"data"in n);if(!r?.data)return e;if(r.data===ri(ti("error FnSelectorNotRecognized()")))return new Tn;let o=null;for(let n of t.calls){let i=n;if(i.abi)try{if(!!!Ls({abi:i.abi,data:r.data}))continue;o=i}catch{}}return o?Hs(r,{abi:o.abi,address:o.to,args:o.args,functionName:o.functionName}):e}x();j();v();x();j();v();var M=()=>Fe(["0x",S()],{message:"Needs string in format ^0x[A-Fa-f0-9]{40}$."}),R=()=>Fe(["0x",S()],{message:"Needs string in format ^0x[A-Fa-f0-9]+$."}),U=()=>He(R(),W(),{decode:e=>Ie(e),encode:e=>te(e)}),B=()=>He(R(),fa({message:"Required bigint"}),{decode:e=>vn(e),encode:e=>te(e)});function jt(e){return F(e)}var Xo=class extends we{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Schema.ValidationError"})}};function Nn(e){let t=e,r=`Validation failed with ${t.issues.length} error${t.issues.length===1?"":"s"}:`;r+=`
`;for(let o of t.issues)o&&(r+=`
`,r+=qn(o));return new Xo(r)}function qn(e,t=0){let r=yc(e.path),o=`- ${r?`${r}: `:""}`,n="  ".repeat(t+1),i=o;switch(e.code){case"invalid_type":{let h=e.expected,u=e.input?gc(e):"undefined";i+=`Expected ${h}. ${e.message!=="Invalid input"?e.message:""}`,u!=="undefined"&&(i+=`but received ${u}`);break}case"too_big":{let h=e.maximum,u=e.inclusive??!0;e.exact??!1?i+=`${e.origin} must be exactly ${h}`:i+=`${e.origin} must be ${u?"at most":"less than"} ${h}`;break}case"too_small":{let h=e.minimum,u=e.inclusive??!0;e.exact??!1?i+=`${e.origin} must be exactly ${h}`:i+=`${e.origin} must be ${u?"at least":"greater than"} ${h}`;break}case"invalid_format":{switch(e.format){case"regex":i+=`Must match pattern: ${e.pattern}`;break;case"starts_with":i+=`Must start with "${e.prefix}"`;break;case"ends_with":i+=`Must end with "${e.suffix}"`;break;case"includes":i+=`Must include "${e.includes}"`;break;case"template_literal":i+=`Must match pattern: ${e.pattern}`;break;default:i+=`Invalid ${e.format} format`}break}case"not_multiple_of":{i+=`Number must be a multiple of ${e.divisor}`;break}case"unrecognized_keys":{let h=e.keys.map(u=>`"${u}"`).join(", ");i+=`Unrecognized key${e.keys.length>1?"s":""}: ${h}`;break}case"invalid_union":{let h=e.errors&&e.errors.length>0;i+="Invalid union value.",h&&e.errors.forEach(u=>{u.length>0&&u.forEach(c=>{i+=`
`,i+=n,i+=qn(c,t+1)})});break}case"invalid_key":{i+=`Invalid ${e.origin} key`,e.issues&&e.issues.length>0&&e.issues.forEach(h=>{i+=`
`,i+=n,i+=qn(h,t+1)});break}case"invalid_element":{i+=`Invalid ${e.origin} element at key "${e.key}"`,e.issues&&e.issues.length>0&&e.issues.forEach(h=>{i+=`
`,i+=n,i+=qn(h,t+1)});break}case"invalid_value":{let h=e.values.map(u=>JSON.stringify(u)).join(", ");e.values.length>1?i+=`Expected one of: ${h}`:i+=`Expected ${h}`;break}case"custom":{i+=e.message||"Custom validation failed";break}default:i+=e.message||"Validation failed"}return i}function yc(e){return e.length===0?"":"at `"+e.map((t,r)=>typeof t=="number"?`[${t}]`:typeof t=="symbol"?`[${t.toString()}]`:/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t)&&r>0?`.${t}`:r===0&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t)?t:`["${t}"]`).join("")+"`"}function gc(e){let t=e.input;if(t===void 0)return"undefined";if(t===null)return"null";let r=typeof t;return r==="object"?Array.isArray(t)?"array":t instanceof Date?"date":t instanceof Map?"map":t instanceof Set?"set":"object":r}x();j();v();x();j();v();x();j();v();var bc=s({selector:R(),to:M(),type:E("call")}),zc=s({limit:B(),period:F([E("minute"),E("hour"),E("day"),E("week"),E("month"),E("year")]),token:f(F([M(),ee()])),type:E("spend")}),ni=F([bc,zc]);var zr=s({expiry:U(),prehash:f(X()),publicKey:R(),role:F([E("admin"),E("normal")]),type:F([E("p256"),E("secp256k1"),E("webauthnp256")])}),es=s({...zr.shape,permissions:k(K(ni))});var _n;(function(e){e.AssetDiffAsset=F([s({address:f(F([M(),ee()])),decimals:f(F([W(),ee()])),direction:F([E("incoming"),E("outgoing")]),fiat:f(s({currency:S(),value:He(S(),W(),{decode:t=>Number(t),encode:t=>String(t)})})),name:f(F([S(),ee()])),symbol:S(),type:E("erc20"),value:B()}),s({address:f(F([M(),ee()])),direction:F([E("incoming"),E("outgoing")]),fiat:f(s({currency:S(),value:He(S(),W(),{decode:t=>Number(t),encode:t=>String(t)})})),name:f(F([S(),ee()])),symbol:S(),type:E("erc721"),uri:S(),value:B()}),s({address:ee(),decimals:f(F([W(),ee()])),direction:F([E("incoming"),E("outgoing")]),fiat:f(s({currency:S(),value:He(S(),W(),{decode:t=>Number(t),encode:t=>String(t)})})),symbol:S(),type:ee(),value:B()})]),e.Response=ce(R(),k(K(k(H([M(),k(K(e.AssetDiffAsset))])))))})(_n||(_n={}));var it;(function(e){e.Request=k(K(es)),e.Response=k(K(s({...es.shape,hash:R()})))})(it||(it={}));var On;(function(e){e.Response=ce(R(),s({currency:S(),value:S()}))})(On||(On={}));var Kn;(function(e){e.Request=s({feePayer:f(M()),feeToken:f(M()),nonce:f(B())})})(Kn||(Kn={}));var Un;(function(e){e.Request=k(K(s({address:M(),value:B()})))})(Un||(Un={}));var wr;(function(e){e.Request=k(K(s({hash:R()}))),e.Response=k(K(s({hash:R()})))})(wr||(wr={}));x();j();v();var Kt=s({eoa:M(),executionData:R(),nonce:R(),signature:R()}),ts=s({...Kt.shape,chainId:U()});x();j();v();x();j();v();var si=F([s({combinedGas:B(),encodedFundTransfers:k(K(R())),encodedPreCalls:k(K(R())),eoa:M(),executionData:R(),expiry:B(),funder:M(),funderSignature:R(),isMultichain:X(),nonce:B(),payer:M(),paymentAmount:B(),paymentMaxAmount:B(),paymentRecipient:M(),paymentSignature:R(),paymentToken:M(),settler:M(),settlerContext:R(),signature:R(),supportedAccountImplementation:M()}),s({combinedGas:B(),encodedFundTransfers:k(K(R())),encodedPreCalls:k(K(R())),eoa:M(),executionData:R(),expiry:B(),funder:M(),funderSignature:R(),isMultichain:X(),nonce:B(),payer:M(),paymentRecipient:M(),paymentSignature:R(),paymentToken:M(),prePaymentAmount:B(),prePaymentMaxAmount:B(),settler:M(),settlerContext:R(),signature:R(),supportedAccountImplementation:M(),totalPaymentAmount:B(),totalPaymentMaxAmount:B()})]),_l=s({eoa:M(),executionData:R(),nonce:B()});var Ic=J.object({address:J.union([M(),J.null()]),decimals:J.optional(J.number()),deficit:B(),fiat:J.optional(J.object({currency:J.string(),value:J.string()})),name:J.optional(J.string()),required:B(),symbol:J.optional(J.string())}),Rc=J.object({additionalAuthorization:J.nullish(J.object({address:M(),chainId:U(),nonce:U(),r:R(),s:R(),yParity:U()})),assetDeficits:J.optional(J.array(Ic)),authorizationAddress:J.optional(J.union([M(),J.null()])),chainId:U(),ethPrice:B(),extraPayment:B(),feeTokenDeficit:B(),intent:si,nativeFeeEstimate:J.object({maxFeePerGas:B(),maxPriorityFeePerGas:B()}),orchestrator:M(),paymentTokenDecimals:J.number(),txGas:B()}),Ac=J.object({multiChainRoot:J.optional(J.union([R(),J.null()])),quotes:J.readonly(J.array(Rc)).check(J.minLength(1)),ttl:J.number()}),Ut=J.object({...Ac.shape,hash:R(),r:R(),s:R(),v:J.optional(R()),yParity:J.optional(R())});x();j();v();var xr=s({address:M(),decimals:W(),feeToken:f(X()),interop:f(X()),nativeRate:f(B()),symbol:S(),uid:S()}),vr=S().check(tt(/^[A-Z0-9]+$/));var rs=s({address:M(),chainId:U(),nonce:U()}),kc=s({...rs.shape,r:R(),s:R(),yParity:U()}),Pc=s({data:f(R()),to:M(),value:f(B())}),jr;(function(e){e.Parameters=s({address:M(),secret:S()}),e.Request=s({method:E("account_getOnrampContactInfo"),params:k(H([e.Parameters]))}),e.Response=s({email:f(S()),phone:f(S()),phoneVerifiedAt:f(W())})})(jr||(jr={}));var Ir;(function(e){e.Parameters=s({address:M()}),e.Request=s({method:E("account_onrampStatus"),params:k(H([e.Parameters]))}),e.Response=s({email:f(W()),phone:f(W())})})(Ir||(Ir={}));var Rr;(function(e){e.Parameters=s({phone:S(),walletAddress:M()}),e.Request=s({method:E("account_resendVerifyPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(Rr||(Rr={}));var Ar;(function(e){e.Parameters=s({email:S().check(tt(/^.*@.*$/)),walletAddress:M()}),e.Request=s({method:E("account_setEmail"),params:k(H([e.Parameters]))}),e.Response=ee()})(Ar||(Ar={}));var Mr;(function(e){e.Parameters=s({phone:S(),walletAddress:M()}),e.Request=s({method:E("account_setPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(Mr||(Mr={}));var kr;(function(e){e.Parameters=s({chainId:U(),email:S(),signature:R(),token:S(),walletAddress:M()}),e.Request=s({method:E("account_verifyEmail"),params:k(H([e.Parameters]))}),e.Response=ee()})(kr||(kr={}));var Pr;(function(e){e.Parameters=s({code:S(),phone:S(),walletAddress:M()}),e.Request=s({method:E("account_verifyPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(Pr||(Pr={}));var Ln;(function(e){e.Request=s({method:E("health"),params:rt()}),e.Response=s({quoteSigner:M(),status:S(),version:S()})})(Ln||(Ln={}));var Hn;(function(e){e.Parameters=s({address:M(),chainId:U(),tokenAddress:M(),value:B()}),e.Request=s({method:E("wallet_addFaucetFunds"),params:k(H([e.Parameters]))}),e.Response=s({message:f(S()),transactionHash:R()})})(Hn||(Hn={}));var ii;(function(e){e.Parameters=s({chainId:U(),id:R()}),e.Request=s({method:E("wallet_getAccounts"),params:k(H([e.Parameters]))}),e.Response=k(K(s({address:M(),keys:it.Response})))})(ii||(ii={}));var Sr;(function(e){e.Parameters=s({address:M()}),e.Request=s({method:E("wallet_getAuthorization"),params:k(H([e.Parameters]))}),e.Response=s({authorization:kc,data:R(),to:M()})})(Sr||(Sr={}));var Fn;(function(e){e.Request=s({method:E("wallet_getCapabilities"),params:f(H([k(K(W()))]))});let t=s({address:M(),version:f(F([S(),ee()]))});e.Response=ce(R(),s({contracts:s({accountImplementation:t,accountProxy:t,legacyAccountImplementations:k(K(t)),legacyOrchestrators:k(K(F([s({orchestrator:t,simulator:t}),t]))),orchestrator:t,simulator:t}),fees:s({quoteConfig:s({constantRate:f(F([W(),ee()])),gas:f(s({intentBuffer:f(W()),txBuffer:f(W())})),rateTtl:W(),ttl:W()}),recipient:M(),tokens:k(K(xr))})}))})(Fn||(Fn={}));var Ve;(function(e){let t=F([E("native"),E("erc20"),E("erc721"),S()]);e.Parameters=s({account:M(),assetFilter:f(ce(R(),k(K(s({address:F([M(),E("native")]),type:t}))))),assetTypeFilter:f(k(K(t))),chainFilter:f(k(K(U())))}),e.Request=s({method:E("wallet_getAssets"),params:k(H([e.Parameters]))}),e.Price=s({currency:S(),value:He(S(),W(),{decode:r=>Number(r),encode:r=>String(r)})}),e.Response=ce(S(),k(K(jt([s({address:M(),balance:B(),metadata:nt(s({decimals:W(),fiat:ot(e.Price),name:S(),symbol:S()})),type:E("erc20")}),s({address:nt(E("native")),balance:B(),metadata:nt(s({decimals:W(),fiat:ot(e.Price),name:f(S()),symbol:f(S())})),type:E("native")})]))))})(Ve||(Ve={}));var $n;(function(e){e.Request=s({method:E("wallet_getCallsStatus"),params:k(H([R()]))}),e.Response=s({id:S(),receipts:f(k(K(s({blockHash:R(),blockNumber:U(),chainId:U(),gasUsed:U(),logs:k(K(s({address:M(),data:R(),topics:k(K(R()))}))),status:R(),transactionHash:R()})))),status:W()})})($n||($n={}));var Er;(function(e){e.Parameters=s({address:M(),chainIds:f(k(K(U())))}),e.Request=s({method:E("wallet_getKeys"),params:k(H([e.Parameters]))}),e.Response=ce(R(),it.Response)})(Er||(Er={}));var It;(function(e){e.Capabilities=s({authorizeKeys:f(it.Request),meta:Kn.Request,preCall:f(X()),preCalls:f(k(K(Kt))),requiredFunds:f(Un.Request),revokeKeys:f(wr.Request)}),e.ResponseCapabilities=s({assetDiffs:f(_n.Response),authorizeKeys:ot(it.Response),feePayerDigest:f(R()),feeSignature:f(R()),feeTotals:f(On.Response),revokeKeys:ot(wr.Response)}),e.Parameters=s({calls:k(K(Pc)),capabilities:e.Capabilities,chainId:U(),from:f(M()),key:f(s({prehash:X(),publicKey:R(),type:zr.shape.type}))}),e.Request=s({method:E("wallet_prepareCalls"),params:k(H([e.Parameters]))}),e.Response=s({capabilities:e.ResponseCapabilities,context:s({preCall:f(yt(ts)),quote:f(yt(Ut))}),digest:R(),key:ot(s({prehash:X(),publicKey:R(),type:zr.shape.type})),signature:R(),typedData:s({domain:F([s({chainId:F([U(),W()]),name:S(),verifyingContract:M(),version:S()}),s({})]),message:ce(S(),ae()),primaryType:S(),types:ce(S(),ae())})})})(It||(It={}));var Cr;(function(e){e.Capabilities=s({authorizeKeys:it.Request}),e.Parameters=s({address:M(),capabilities:e.Capabilities,chainId:f(W()),delegation:M()}),e.Request=s({method:E("wallet_prepareUpgradeAccount"),params:k(H([e.Parameters]))}),e.Response=s({capabilities:e.Capabilities,chainId:U(),context:s({address:M(),authorization:rs,chainId:U(),preCall:Kt}),digests:s({auth:R(),exec:R()}),typedData:s({domain:F([s({chainId:F([U(),W()]),name:S(),verifyingContract:M(),version:S()}),s({})]),message:ce(S(),ae()),primaryType:S(),types:ce(S(),ae())})})})(Cr||(Cr={}));var ci;(function(e){e.Request=s({method:E("wallet_feeTokens"),params:f(rt())}),e.Response=ce(R(),k(K(s({address:M(),decimals:W(),nativeRate:f(B()),symbol:S()}))))})(ci||(ci={}));var Dr;(function(e){e.Parameters=s({capabilities:f(s({feeSignature:f(R())})),context:s({preCall:f(yt(ts)),quote:f(yt(Ut))}),key:f(s({prehash:X(),publicKey:R(),type:zr.shape.type})),signature:R()}),e.Request=s({method:E("wallet_sendPreparedCalls"),params:k(H([e.Parameters]))}),e.Response=s({id:R()})})(Dr||(Dr={}));var Bn;(function(e){e.Parameters=s({context:s({address:M(),authorization:rs,chainId:U(),preCall:Kt}),signatures:s({auth:R(),exec:R()})}),e.Request=s({method:E("wallet_upgradeAccount"),params:k(H([e.Parameters]))}),e.Response=rt()})(Bn||(Bn={}));var Tr;(function(e){e.Parameters=s({address:R(),chainId:U(),digest:R(),signature:R()}),e.Request=s({method:E("wallet_verifySignature"),params:k(H([e.Parameters]))}),e.Response=s({proof:ot(s({account:M(),initPreCall:ot(Kt),keyHash:R()})),valid:X()})})(Tr||(Tr={}));async function Wn(e,t){try{let r="wallet_getAuthorization",o=await Dt(()=>e.request({method:r,params:[Z(Sr.Parameters,t)]}),{cacheKey:`${e.uid}.${r}.${t.address}`});return ne(Sr.Response,o)}catch(r){throw ue(r),r}}async function ke(e,t={}){let r=(()=>{if(t.chainId)return[t.chainId];if(t.chainIds!=="all")return t.chainIds?t.chainIds:[e.chain.id]})();try{let o="wallet_getCapabilities",n=await Dt(()=>e.request({method:o,params:r?[r]:void 0},{retryCount:0}),{cacheKey:`${e.uid}.${o}.${r?.join(",")}`}),i=t.raw?n:ne(Fn.Response,n);return t.chainIds?i:Object.values(i)[0]}catch(o){throw ue(o),o}}async function Yn(e,t){let{account:r,assetFilter:o,assetTypeFilter:n,chainFilter:i}=t;try{let u=await e.request({method:"wallet_getAssets",params:[Z(Ve.Parameters,{account:r,assetFilter:o,assetTypeFilter:n,chainFilter:i})]}),c=ne(Ve.Response,u),a=Object.entries(c).reduce((p,[m,d])=>(p[Ie(m)]=d,p),{}),l={};for(let p of Object.values(a))for(let m of p){let d=JSON.stringify(m.metadata);l[d]={...m,balance:m.balance+(l[d]?.balance??0n)}}return{...a,0:Object.values(l)}}catch(h){throw ue(h),h}}async function ui(e,t){let{address:r,chain:o=e.chain,tokenAddress:n,value:i}=t;try{let u=await e.request({method:"wallet_addFaucetFunds",params:[Z(Hn.Parameters,{address:r,chainId:o?.id,tokenAddress:n,value:i})]},{retryCount:0});return await new Promise(c=>setTimeout(c,2e3)),u}catch(h){throw ue(h),h}}async function Lt(e,t){let{id:r}=t;try{let n=await e.request({method:"wallet_getCallsStatus",params:[r]});return ne($n.Response,n)}catch(o){throw ue(o),o}}async function di(e,t){let{address:r,chainIds:o}=t;try{let i=await e.request({method:"wallet_getKeys",params:[Z(Er.Parameters,{address:r,chainIds:o})]});return ne(Er.Response,i)}catch(n){throw ue(n),n}}async function qr(e){let t="health",r=await Dt(()=>e.request({method:t}),{cacheKey:`${e.uid}.${t}`});return ne(Ln.Response,r)}async function Qn(e,t){let{address:r,capabilities:o,chain:n=e.chain,key:i}=t,h=t.calls.map(u=>({data:u.abi?Ea(Ca(u.abi,u.functionName),u.args):u.data??"0x",to:u.to,value:u.value??0n}));try{let c=await e.request({method:"wallet_prepareCalls",params:[Z(It.Parameters,{calls:h,capabilities:{...o,meta:{...o?.meta}},chainId:n?.id,from:r,key:i?{prehash:i.prehash,publicKey:i.publicKey,type:i.type}:void 0})]},{retryCount:0});return Object.assign(ne(It.Response,c),{_raw:c})}catch(u){throw ue(u),Pe(u,{calls:t.calls}),u}}async function li(e,t){let{address:r,chain:o=e.chain,delegation:n,...i}=t;try{let u=await e.request({method:"wallet_prepareUpgradeAccount",params:[Z(Cr.Parameters,De({address:r,capabilities:i,chainId:o?.id,delegation:n}))]},{retryCount:0});return ne(Cr.Response,u)}catch(h){throw ue(h),Pe(h),h}}async function pi(e,t){let{capabilities:r,context:o,key:n,signature:i}=t;try{let u=await e.request({method:"wallet_sendPreparedCalls",params:[Z(Dr.Parameters,{capabilities:r,context:{preCall:o.preCall,quote:o.quote},key:n?{prehash:n.prehash,publicKey:n.publicKey,type:n.type}:void 0,signature:i})]},{retryCount:0});return ne(Dr.Response,u)}catch(h){throw ue(h),Pe(h),h}}async function mi(e,t){let{address:r,secret:o}=t;try{let i=await e.request({method:"account_getOnrampContactInfo",params:[Z(jr.Parameters,{address:r,secret:o})]},{retryCount:0});return ne(jr.Response,i)}catch(n){throw ue(n),Pe(n),n}}async function fi(e,t){let{address:r}=t;try{let n=await e.request({method:"account_onrampStatus",params:[Z(Ir.Parameters,{address:r})]},{retryCount:0});return ne(Ir.Response,n)}catch(o){throw ue(o),Pe(o),o}}async function hi(e,t){let{phone:r,walletAddress:o}=t;try{let i=await e.request({method:"account_resendVerifyPhone",params:[Z(Rr.Parameters,{phone:r,walletAddress:o})]},{retryCount:0});return ne(Rr.Response,i)}catch(n){throw ue(n),Pe(n),n}}async function yi(e,t){let{email:r,walletAddress:o}=t;try{let i=await e.request({method:"account_setEmail",params:[Z(Ar.Parameters,{email:r,walletAddress:o})]},{retryCount:0});return ne(Ar.Response,i)}catch(n){throw ue(n),Pe(n),n}}async function gi(e,t){let{phone:r,walletAddress:o}=t;try{let i=await e.request({method:"account_setPhone",params:[Z(Mr.Parameters,{phone:r,walletAddress:o})]},{retryCount:0});return ne(Mr.Response,i)}catch(n){throw ue(n),Pe(n),n}}async function bi(e,t){let{context:r,signatures:o}=t;try{await e.request({method:"wallet_upgradeAccount",params:[Z(Bn.Parameters,{context:r,signatures:o})]},{retryCount:0})}catch(n){throw ue(n),Pe(n),n}}async function zi(e,t){let{chainId:r,email:o,signature:n,token:i,walletAddress:h}=t;try{let c=await e.request({method:"account_verifyEmail",params:[Z(kr.Parameters,{chainId:r,email:o,signature:n,token:i,walletAddress:h})]},{retryCount:0});return ne(kr.Response,c)}catch(u){throw ue(u),Pe(u),u}}async function wi(e,t){let{code:r,phone:o,walletAddress:n}=t;try{let h=await e.request({method:"account_verifyPhone",params:[Z(Pr.Parameters,{code:r,phone:o,walletAddress:n})]},{retryCount:0});return ne(Pr.Response,h)}catch(i){throw ue(i),Pe(i),i}}async function xi(e,t){let{signature:r}=t,{signature:o,capabilities:{feeSignature:n,...i},...h}=t.response,u=ns({capabilities:i,...h}),c=et(Le(JSON.stringify(u))),a=Rn({payload:c,signature:wa(r)}),{quoteSigner:l}=await qr(e);return a===l}async function Ht(e,t){let{address:r,chain:o=e.chain,digest:n,signature:i}=t;try{async function h(){return{proof:null,valid:await Qs(e,{address:r,hash:n,signature:i})}}let u="wallet_verifySignature",c=await(async()=>{let a=await e.request({method:u,params:[Z(Tr.Parameters,{address:r,chainId:o?.id,digest:n,signature:i})]},{retryCount:0}).catch(h);return a.valid?a:h()})();return ne(Tr.Response,c)}catch(h){throw ue(h),h}}function Pe(e,{calls:t}={}){if(!(e instanceof zn))return;let r=i=>{try{if(i.name==="ContractFunctionExecutionError"){let a=i.cause.name==="ContractFunctionRevertedError"?i.cause.data:void 0;if(a)return ei([a.abiItem],a.errorName)}let h=i.walk(a=>!(a instanceof Error)&&a.code===3);if(!h)return;let{data:u,message:c}=h;return u==="0xd0d5039b"?Dn("error Unauthorized()"):{inputs:[],name:(c??u).split("(")[0],type:"error"}}catch{return}},o=Go(e,{calls:t??[]}),n=r(o);if(!(o===e&&!n))throw new os(Object.assign(o,{abiError:n}))}function ns(e){if(typeof e=="object"&&e!==null){if(Array.isArray(e))return e.map(ns);let t={};for(let r of Object.keys(e).sort())t[r]=ns(e[r]);return t}return e}function ue(e){if(e.name==="$ZodError")throw Nn(e)}var os=class extends we{constructor(t){super("An error occurred while executing calls.",{cause:t,metaMessages:[t.abiError&&"Reason: "+t.abiError.name].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Rpc.ExecutionError"}),Object.defineProperty(this,"abiError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiError=t.abiError}};x();j();v();var cs={};je(cs,{fallback:()=>xn,http:()=>Ue,relayProxy:()=>Rt,relayUrls:()=>is,webSocket:()=>Js});x();j();v();var is={anvil:{http:"http://localhost:9119"},prod:{http:"https://rpc.porto.sh"},stg:{http:"https://stg-rpc.porto.sh"}};function Rt(e){return t=>{let r=e.public(t),o=e.relay(t);return Vs({key:Rt.type,name:"Relay Proxy",async request({method:n,params:i},h){return Ec(n)?o.request({method:n,params:i},h):r.request({method:n,params:i},h)},type:Rt.type})}}(function(e){e.type="relayProxy"})(Rt||(Rt={}));function Ec(e){return!!(e.startsWith("wallet_")||e.startsWith("account_")||e==="health")}var us=new Map;function vi(e,t={}){let{config:r,id:o,store:n}=e._internal,{chains:i,relay:h}=r,u=n.getState(),c=t.chainId??u.chainIds[0],a=i.find(d=>d.id===c);if(!a)throw new Error(["Could not find a compatible Porto chain on the given chain configuration.","",`Provided chains: [${i.map(d=>`${d.name} (id: ${d.id})`).join(", ")}]`,`Needed chain (id): ${c}`,"Please add this chain (id) to your chain configuration."].join(`
`));let l=Rt({public:r.transports[a.id]??xn(a.rpcUrls.default.http.map(d=>Ue(d))),relay:h}),p=[o,ze(a)].filter(Boolean).join(":");if(us.has(p))return us.get(p);let m=wn({...t,chain:a,pollingInterval:1e3,transport:l});return us.set(p,m),m}x();j();v();x();j();v();x();j();v();var Se=s({chainId:f(U()),expiry:U(),hash:R(),id:R(),prehash:f(X()),publicKey:R(),role:F([E("admin"),E("session")]),type:F([E("address"),E("p256"),E("secp256k1"),E("webauthn-p256")])}),Vn=k(K(jt([s({signature:S(),to:M()}),s({signature:S()}),s({to:M()})])).check(ma(1))),ds=s({limit:F([Fe([W(),".",W()]),Fe([W()])]).check(tt(/^\d+(\.\d+)?$/)),symbol:f(F([E("native"),vr]))}),Jn=s({addresses:k(K(M()))}),Zn=k(K(s({limit:B(),period:F([E("minute"),E("hour"),E("day"),E("week"),E("month"),E("year")]),token:f(M())}))),Tc=s({calls:f(Vn),signatureVerification:f(Jn),spend:f(Zn)}),ji=s({...Se.shape,feeToken:f(nt(ds)),permissions:f(Tc)});var Ft=s({address:M(),chainId:f(U()),expiry:W(),id:R(),key:Ce(Se,{publicKey:!0,type:!0}),permissions:s({calls:Vn,signatureVerification:f(Jn),spend:f(Zn)})}),$t=s({address:f(M()),chainId:f(U()),expiry:W().check(pa(1)),feeToken:nt(ds),key:f(Ce(Se,{publicKey:!0,type:!0})),permissions:s({calls:Vn,signatureVerification:f(Jn),spend:f(Zn)})});var Nr=Ft;function ls(e,t){let{chainId:r,expiry:o,permissions:n,id:i,publicKey:h,type:u}=e,{address:c}=t;return{address:c,chainId:r,expiry:o,id:i,key:{publicKey:h,type:u},permissions:n??{}}}function ps(e){let{chainId:t,expiry:r,key:o}=e;return Re({chainId:t,expiry:r,permissions:e.permissions??{},publicKey:o.publicKey,role:"session",type:o.type})}x();j();v();x();j();v();x();j();v();var Xn;(function(e){e.GetCapabilitiesResponse=s({status:F([E("supported"),E("unsupported")])})})(Xn||(Xn={}));var eo;(function(e){e.Request=F([X(),s({chainId:f(U()),label:f(S())})])})(eo||(eo={}));var _r;(function(e){e.Request=jt([s({chainId:f(W()),domain:f(S()),expirationTime:f(ht()),issuedAt:f(ht()),nonce:S(),notBefore:f(ht()),requestId:f(S()),resources:f(k(K(S()))),scheme:f(S()),statement:f(S()),uri:f(S()),version:f(E("1"))}),s({authUrl:F([S(),s({logout:S(),nonce:S(),verify:S()})]),chainId:f(U()),domain:f(S()),expirationTime:f(ht()),issuedAt:f(ht()),notBefore:f(ht()),requestId:f(S()),resources:f(k(K(S()))),scheme:f(S()),statement:f(S()),uri:f(S()),version:f(E("1"))})]),e.Response=s({message:S(),signature:R(),token:f(S())})})(_r||(_r={}));var Je;(function(e){e.GetCapabilitiesResponse=s({supported:X(),tokens:k(K(xr))}),e.Request=F([vr,M()])})(Je||(Je={}));var to;(function(e){e.Request=$t})(to||(to={}));var ro;(function(e){e.GetCapabilitiesResponse=s({supported:X()})})(ro||(ro={}));var ct;(function(e){e.GetCapabilitiesResponse=s({supported:X()}),e.Request=s({id:f(F([R(),ee()]))}),e.Response=k(K(Ft))})(ct||(ct={}));var ut;(function(e){e.Request=k(K(s({context:ae(),signature:R()}))),e.Response=e.Request})(ut||(ut={}));var Or;(function(e){e.Request=S()})(Or||(Or={}));var Kr;(function(e){e.GetCapabilitiesResponse=s({supported:X(),tokens:k(K(xr))}),e.Request=k(K(jt([s({address:M(),value:B()}),s({symbol:vr,value:F([Fe([W(),".",W()]),Fe([W()])]).check(tt(/^\d+(\.\d+)?$/))})])))})(Kr||(Kr={}));var Nc=s({...Ce(Se,{id:!0,publicKey:!0,type:!0}).shape,credentialId:f(S()),privateKey:f(Eo())}),ms;(function(e){e.Parameters=s({address:M(),secret:S()}),e.Request=s({method:E("account_getOnrampContactInfo"),params:k(H([e.Parameters]))}),e.Response=s({email:f(S()),phone:f(S()),phoneVerifiedAt:f(W())})})(ms||(ms={}));var fs;(function(e){e.Parameters=s({address:M()}),e.Request=s({method:E("account_onrampStatus"),params:k(H([e.Parameters]))}),e.Response=s({email:f(W()),phone:f(W())})})(fs||(fs={}));var hs;(function(e){e.Parameters=s({email:S(),walletAddress:M()}),e.Request=s({method:E("account_resendVerifyPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(hs||(hs={}));var ys;(function(e){e.Parameters=s({email:S(),walletAddress:M()}),e.Request=s({method:E("account_setEmail"),params:k(H([e.Parameters]))}),e.Response=ee()})(ys||(ys={}));var gs;(function(e){e.Parameters=s({email:S(),walletAddress:M()}),e.Request=s({method:E("account_setPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(gs||(gs={}));var Ur;(function(e){e.Parameters=s({chainId:U(),email:S(),token:S(),walletAddress:M()}),e.Request=s({method:E("account_verifyEmail"),params:k(H([e.Parameters]))}),e.Response=ee()})(Ur||(Ur={}));var bs;(function(e){e.Parameters=s({code:S(),phone:S(),walletAddress:M()}),e.Request=s({method:E("account_verifyPhone"),params:k(H([e.Parameters]))}),e.Response=ee()})(bs||(bs={}));var Lr;(function(e){e.Parameters=s({address:f(M()),chainId:f(U()),token:f(M()),value:f(S())}),e.Request=s({method:E("wallet_addFunds"),params:k(H([e.Parameters]))}),e.Response=s({id:R()})})(Lr||(Lr={}));var Hr;(function(e){e.Request=s({method:E("eth_accounts"),params:f(ae())}),e.Response=k(K(M()))})(Hr||(Hr={}));var Fr;(function(e){e.Request=s({method:E("eth_chainId"),params:f(ae())}),e.Response=R()})(Fr||(Fr={}));var $r;(function(e){e.Request=s({method:E("eth_requestAccounts"),params:f(ae())}),e.Response=k(K(M()))})($r||($r={}));var Br;(function(e){e.Request=s({method:E("eth_sendTransaction"),params:k(H([s({capabilities:f(s({feeToken:f(Je.Request),merchantUrl:f(Or.Request),preCalls:f(ut.Request)})),chainId:f(U()),data:f(R()),from:f(M()),to:M(),value:f(B())})]))}),e.Response=R()})(Br||(Br={}));var Wr;(function(e){e.Request=s({method:E("eth_signTypedData_v4"),params:k(H([M(),S()]))}),e.Response=R()})(Wr||(Wr={}));var Ne;(function(e){e.Parameters=s({address:f(M()),chainId:f(U())}),e.Request=s({method:E("wallet_getAdmins"),params:f(k(H([e.Parameters])))}),e.Key=Nc,e.Response=s({address:M(),chainId:U(),keys:k(K(e.Key))})})(Ne||(Ne={}));var At;(function(e){e.Capabilities=s({feeToken:f(Je.Request)}),e.Parameters=s({address:f(M()),capabilities:f(e.Capabilities),chainId:f(U()),key:Ce(Se,{publicKey:!0,type:!0})}),e.Request=s({method:E("wallet_grantAdmin"),params:k(H([e.Parameters]))}),e.Response=s({address:M(),chainId:U(),key:Ne.Key})})(At||(At={}));var Mt;(function(e){e.Parameters=$t,e.Request=s({method:E("wallet_grantPermissions"),params:k(H([e.Parameters]))}),e.ResponseCapabilities=s({preCalls:f(ut.Response)}),e.Response=s({...Ft.shape,capabilities:f(Eo())})})(Mt||(Mt={}));var Yr;(function(e){e.Parameters=s({address:f(M())}),e.Request=s({method:E("wallet_getAccountVersion"),params:f(k(H([e.Parameters])))}),e.Response=s({current:S(),latest:S()})})(Yr||(Yr={}));var Qr;(function(e){e.Parameters=s({address:f(M()),chainIds:f(k(K(U())))}),e.Request=s({method:E("wallet_getPermissions"),params:f(k(H([e.Parameters])))}),e.Response=ct.Response})(Qr||(Qr={}));var Vr;(function(e){e.Capabilities=s({feeToken:f(Je.Request)}),e.Parameters=s({address:f(M()),capabilities:f(e.Capabilities),chainId:f(U()),id:R()}),e.Request=s({method:E("wallet_revokeAdmin"),params:k(H([e.Parameters]))}),e.Response=void 0})(Vr||(Vr={}));var Jr;(function(e){e.Capabilities=s({feeToken:f(Je.Request)}),e.Parameters=s({address:f(M()),capabilities:f(e.Capabilities),id:R()}),e.Request=s({method:E("wallet_revokePermissions"),params:k(H([e.Parameters]))}),e.Response=void 0})(Jr||(Jr={}));var Zr;(function(e){e.Request=s({method:E("wallet_switchEthereumChain"),params:k(H([s({chainId:R()})]))})})(Zr||(Zr={}));var Gr;(function(e){e.Parameters=s({context:ae(),signatures:s({auth:R(),exec:R()})}),e.Request=s({method:E("wallet_upgradeAccount"),params:k(H([e.Parameters]))}),e.ResponseCapabilities=s({admins:f(k(K(Ne.Key))),permissions:f(ct.Response)}),e.Response=s({address:M(),capabilities:f(e.ResponseCapabilities)})})(Gr||(Gr={}));var Xr;(function(e){e.Request=s({method:E("personal_sign"),params:k(H([R(),M()]))}),e.Response=R()})(Xr||(Xr={}));var en;(function(e){e.Request=s({method:E("porto_ping"),params:f(rt())}),e.Response=E("pong")})(en||(en={}));var Bt;(function(e){e.Capabilities=s({createAccount:f(eo.Request),email:f(X()),grantAdmins:f(k(K(Ce(Se,{publicKey:!0,type:!0})))),grantPermissions:f(to.Request),preCalls:f(ut.Request),selectAccount:f(F([X(),s({address:M(),key:f(s({credentialId:f(S()),publicKey:R()}))})])),signInWithEthereum:f(_r.Request)}),e.Parameters=s({capabilities:f(e.Capabilities),chainIds:f(k(K(U())))}),e.Request=s({method:E("wallet_connect"),params:f(k(H([e.Parameters])))}),e.ResponseCapabilities=s({admins:f(k(K(s({...Ce(Se,{id:!0,publicKey:!0,type:!0}).shape,credentialId:f(S())})))),permissions:f(ct.Response),preCalls:f(ut.Response),signInWithEthereum:f(_r.Response)}),e.Response=s({accounts:k(K(s({address:M(),capabilities:f(e.ResponseCapabilities)}))),chainIds:k(K(U()))})})(Bt||(Bt={}));var tn;(function(e){e.Request=s({method:E("wallet_disconnect"),params:f(ae())}),e.Response=void 0})(tn||(tn={}));var Ze;(function(e){e.Parameters=Ve.Parameters,e.Request=Ve.Request,e.Response=Ve.Response})(Ze||(Ze={}));var rn;(function(e){e.Request=s({method:E("wallet_getCallsStatus"),params:H([R()])}),e.Response=s({atomic:X(),chainId:U(),id:S(),receipts:f(k(K(s({blockHash:R(),blockNumber:R(),gasUsed:R(),logs:k(K(s({address:M(),data:R(),topics:k(K(R()))}))),status:R(),transactionHash:R()})))),status:W(),version:S()})})(rn||(rn={}));var nn;(function(e){e.Request=s({method:E("wallet_getCapabilities"),params:f(F([k(H([F([R(),rt()])])),k(H([F([R(),rt()]),k(K(U()))]))]))}),e.Response=ce(R(),s({atomic:Xn.GetCapabilitiesResponse,feeToken:Je.GetCapabilitiesResponse,merchant:ro.GetCapabilitiesResponse,permissions:ct.GetCapabilitiesResponse,requiredFunds:Kr.GetCapabilitiesResponse}))})(nn||(nn={}));var _e;(function(e){e.Parameters=s({address:M(),chainIds:f(k(K(U())))}),e.Request=s({method:E("wallet_getKeys"),params:k(H([e.Parameters]))}),e.Response=k(K(ji))})(_e||(_e={}));var fe;(function(e){e.Capabilities=s({feeToken:f(Je.Request),merchantUrl:f(Or.Request),permissions:f(ct.Request),preCalls:f(ut.Request),requiredFunds:f(Kr.Request)}),e.Parameters=s({calls:k(K(s({data:f(R()),to:M(),value:f(B())}))),capabilities:f(e.Capabilities),chainId:f(U()),from:f(M()),key:f(Ce(Se,{prehash:!0,publicKey:!0,type:!0})),version:f(S())}),e.Request=s({method:E("wallet_prepareCalls"),params:k(H([e.Parameters]))}),e.Response=s({capabilities:f(s({...It.ResponseCapabilities.shape,quote:f(Ut)})),chainId:R(),context:s({account:s({address:M()}),calls:e.Parameters.shape.calls,nonce:B(),quote:f(yt(Ut))}),digest:R(),key:Ce(Se,{prehash:!0,publicKey:!0,type:!0}),typedData:s({domain:F([s({chainId:U(),name:S(),verifyingContract:M(),version:S()}),s({})]),message:ce(S(),ae()),primaryType:S(),types:ce(S(),ae())})})})(fe||(fe={}));var on;(function(e){e.Capabilities=s({...Bt.Capabilities.shape,label:f(S())}),e.Parameters=s({address:M(),capabilities:f(e.Capabilities),chainId:f(U())}),e.Request=s({method:E("wallet_prepareUpgradeAccount"),params:k(H([e.Parameters]))}),e.Response=s({context:ae(),digests:s({auth:R(),exec:R()})})})(on||(on={}));var sn;(function(e){e.Capabilities=fe.Capabilities,e.Request=s({method:E("wallet_sendCalls"),params:k(H([ha(fe.Parameters,{key:!0})]))}),e.Response=s({id:R()})})(sn||(sn={}));var an;(function(e){e.Parameters=s({capabilities:fe.Response.shape.capabilities,chainId:R(),context:fe.Response.shape.context,key:fe.Response.shape.key,signature:R()}),e.Request=s({method:E("wallet_sendPreparedCalls"),params:k(H([e.Parameters]))}),e.Response=k(K(s({capabilities:f(ce(S(),ae())),id:R()})))})(an||(an={}));var cn;(function(e){e.Parameters=s({address:M(),chainId:f(U()),digest:R(),signature:R()}),e.Request=s({method:E("wallet_verifySignature"),params:k(H([e.Parameters]))}),e.Response=s({address:M(),chainId:U(),proof:f(ae()),valid:X()})})(cn||(cn={}));var zs=ya("method",[Ur.Request,Lr.Request,Hr.Request,Fr.Request,$r.Request,Br.Request,Wr.Request,Yr.Request,Ne.Request,Qr.Request,At.Request,Mt.Request,on.Request,Vr.Request,Jr.Request,Gr.Request,Xr.Request,en.Request,Bt.Request,tn.Request,Ze.Request,rn.Request,nn.Request,_e.Request,fe.Request,sn.Request,an.Request,Zr.Request,cn.Request]);function ws(e,t){let r=la(e,t);if(r.error){let o=r.error.issues.at(0);throw o?.code==="invalid_union"&&o.note==="No matching discriminator"?new We:new Ye(Nn(r.error))}return{...t,_decoded:r.data}}x();j();v();async function xs(e){e.persist.hasHydrated()||await new Promise(t=>{e.persist.onFinishHydration(()=>t(!0)),setTimeout(()=>t(!0),100)})}x();j();v();function no(e){if(e)return e.startsWith("/")?`${window.location.origin}${e}`:e}function js(e){let{config:t,getMode:r,id:o,store:n}=e,{announceProvider:i}=t;function h(g={}){let z=u(),y=g.request??ws(zs,{method:"wallet_getCapabilities",params:g.chainIds?[void 0,g.chainIds]:void 0});return Dt(()=>r().actions.getCapabilities({chainIds:g.chainIds,internal:{client:z,config:t,request:y,store:n}}),{cacheKey:`getCapabilities.${o}.${g.chainIds?.join(",")}`})}function u(g){let z=typeof g=="string"?Ie(g):g;return vi({_internal:e},{chainId:z})}let c=new Map,a=[],l=Fa(),p=Mn({...l,async request(g){await xs(n);let z=["eth_accounts","eth_chainId","eth_requestAccounts","wallet_getAssets","wallet_getCapabilities","wallet_getKeys","wallet_getPermissions","wallet_getAccountVersion","wallet_connect"].includes(g.method);return st(async()=>{let y;try{y=ws(zs,g)}catch(w){let I=w;if(!(I instanceof We))throw I;if(g.method.startsWith("wallet_"))throw new Ae;return u().request(g)}let b=n.getState();switch(y.method){case"account_verifyEmail":{if(b.accounts.length===0)throw new se;let[w]=y._decoded.params,{chainId:I,email:A,token:P,walletAddress:C}=w,D=u(I);if(I&&I!==D.chain.id)throw new Me;let T=C?b.accounts.find(q=>re(q.address,C)):b.accounts[0];if(!T)throw new oe;return await r().actions.verifyEmail({account:T,chainId:I,email:A,internal:{client:D,config:t,request:y,store:n},token:P,walletAddress:C})}case"wallet_addFunds":{if(b.accounts.length===0)throw new se;let{address:w,value:I,token:A}=y.params[0]??{},P=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!P)throw new oe;let C=u(),D=await r().actions.addFunds({address:P.address,internal:{client:C,config:t,request:y,store:n},token:A,value:I});return l.emit("message",{data:null,type:"assetsChanged"}),D}case"eth_accounts":{if(b.accounts.length===0)throw new se;return b.accounts.map(dn)}case"eth_chainId":return te(b.chainIds[0]);case"eth_requestAccounts":{if(b.accounts.length>0&&c.get("eth_requestAccounts"))return b.accounts.map(dn);let w=u(),{accounts:I}=await r().actions.loadAccounts({internal:{client:w,config:t,request:y,store:n}});return n.setState(A=>({...A,accounts:I})),l.emit("connect",{chainId:te(w.chain.id)}),c.set("eth_requestAccounts",!0),setTimeout(()=>c.delete("eth_requestAccounts"),1e3),I.map(dn)}case"eth_sendTransaction":{if(b.accounts.length===0)throw new se;let[{capabilities:w,chainId:I,data:A="0x",from:P,to:C,value:D}]=y._decoded.params,T=u(I);if(I&&I!==T.chain.id)throw new Me;let q=P?b.accounts.find(Y=>re(Y.address,P)):b.accounts[0];if(!q)throw new oe;let{id:L}=await r().actions.sendCalls({account:q,asTxHash:!0,calls:[{data:A,to:C,value:D}],chainId:T.chain.id,internal:{client:T,config:t,request:y,store:n},merchantUrl:no(t.merchantUrl??w?.merchantUrl)});return L}case"eth_signTypedData_v4":{if(b.accounts.length===0)throw new se;let[w,I]=y._decoded.params,A=b.accounts.find(D=>re(D.address,w));if(!A)throw new oe;let P=u();return await r().actions.signTypedData({account:A,data:I,internal:{client:P,config:t,request:y,store:n}})}case"wallet_grantAdmin":{if(b.accounts.length===0)throw new se;let[{address:w,capabilities:I,chainId:A,key:P}]=y._decoded.params??[{}],C=w?b.accounts.find(Y=>re(Y.address,w)):b.accounts[0];if(!C)throw new oe;let D=u(A);if(un([...C.keys??[]])?.some(Y=>Y.publicKey?.toLowerCase()===P.publicKey.toLowerCase()))throw new Ye({message:"Key already granted as admin."});let{key:q}=await r().actions.grantAdmin({account:C,feeToken:I?.feeToken,internal:{client:D,config:t,request:y,store:n},key:P});n.setState(Y=>{let V=Y.accounts.findIndex(Q=>C?re(Q.address,C.address):!0);return V===-1?Y:{...Y,accounts:Y.accounts.map((Q,G)=>G===V?{...Q,keys:[...Q.keys??[],q]}:Q)}});let L=un([...C.keys??[],q]);return l.emit("message",{data:null,type:"adminsChanged"}),Z(At.Response,{address:C.address,chainId:D.chain.id,key:L.at(-1)})}case"wallet_grantPermissions":{if(b.accounts.length===0)throw new se;let[{address:w,chainId:I,...A}]=y._decoded.params??[{}],P=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!P)throw new oe;let C=u(I),{key:D}=await r().actions.grantPermissions({account:P,internal:{client:C,config:t,request:y,store:n},permissions:A});return n.setState(T=>{let q=T.accounts.findIndex(L=>P?re(L.address,P.address):!0);return q===-1?T:{...T,accounts:T.accounts.map((L,Y)=>Y===q?{...L,keys:[...L.keys??[],D]}:L)}}),l.emit("message",{data:null,type:"permissionsChanged"}),Z(Mt.Response,{...ls(D,{address:P.address})})}case"wallet_getAdmins":{if(b.accounts.length===0)throw new se;let[{address:w,chainId:I}]=y._decoded.params??[{}],A=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!A)throw new oe;let P=u(I),C=await r().actions.getKeys({account:A,internal:{client:P,config:t,request:y,store:n}}),D=un(C);return Z(Ne.Response,{address:A.address,chainId:P.chain.id,keys:D})}case"wallet_prepareUpgradeAccount":{let[{address:w,capabilities:I,chainId:A}]=y._decoded.params??[{}],{email:P,label:C,grantPermissions:D}=I??{},T=u(A),{context:q,digests:L}=await r().actions.prepareUpgradeAccount({address:w,email:P,internal:{client:T,config:t,request:y,store:n},label:C,permissions:D});return a.push(q.account),{context:q,digests:L}}case"wallet_getAccountVersion":{if(b.accounts.length===0)throw new se;let[{address:w}]=y._decoded.params??[{}],I=w?b.accounts.find(D=>re(D.address,w)):b.accounts[0];if(!I)throw new oe;let A=u(),{current:P,latest:C}=await r().actions.getAccountVersion({address:I.address,internal:{client:A,config:t,request:y,store:n}});return{current:P,latest:C}}case"wallet_getKeys":{if(b.accounts.length===0)throw new se;let[{address:w,chainIds:I}]=y._decoded.params??[{}],A=b.accounts.find(D=>re(D.address,w));if(!A)throw new oe;let P=u(),C=await r().actions.getKeys({account:A,chainIds:I,internal:{client:P,config:t,request:y,store:n}});return Z(_e.Response,C)}case"wallet_getPermissions":{if(b.accounts.length===0)throw new se;let[{address:w,chainIds:I}]=y._decoded.params??[{}],A=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!A)throw new oe;let P=u(),C=await r().actions.getKeys({account:A,chainIds:I,internal:{client:P,config:t,request:y,store:n}});return vs(C,{address:A.address})}case"wallet_revokeAdmin":{if(b.accounts.length===0)throw new se;let[{address:w,capabilities:I,id:A}]=y._decoded.params,P=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!P)throw new oe;let C=u();await r().actions.revokeAdmin({account:P,feeToken:I?.feeToken,id:A,internal:{client:C,config:t,request:y,store:n}});let D=P.keys?.filter(T=>T.id.toLowerCase()!==A.toLowerCase());n.setState(T=>({...T,accounts:T.accounts.map(q=>re(q.address,P.address)?{...q,keys:D}:q)})),l.emit("message",{data:null,type:"adminsChanged"});return}case"wallet_revokePermissions":{if(b.accounts.length===0)throw new se;let[{address:w,capabilities:I,id:A}]=y._decoded.params,P=w?b.accounts.find(T=>re(T.address,w)):b.accounts[0];if(!P)throw new oe;let C=u();await r().actions.revokePermissions({account:P,feeToken:I?.feeToken,id:A,internal:{client:C,config:t,request:y,store:n}});let D=P.keys?.filter(T=>T.id.toLowerCase()!==A.toLowerCase());n.setState(T=>({...T,accounts:T.accounts.map(q=>re(q.address,P.address)?{...q,keys:D}:q)})),l.emit("message",{data:null,type:"permissionsChanged"});return}case"wallet_upgradeAccount":{let[{context:w,signatures:I}]=y._decoded.params??[{}],A=u(),P=a.find(q=>re(q.address,w.account.address));if(!P)throw new oe;let{account:C}=await r().actions.upgradeAccount({account:P,context:w,internal:{client:A,config:t,request:y,store:n},signatures:I}),D=un(C.keys??[]),T=vs(C.keys??[],{address:C.address});return n.setState(q=>({...q,accounts:[C]})),l.emit("connect",{chainId:te(A.chain.id)}),{address:C.address,capabilities:{admins:D,...T.length>0?{permissions:T}:{}}}}case"porto_ping":return"pong";case"personal_sign":{if(b.accounts.length===0)throw new se;let[w,I]=y._decoded.params,A=b.accounts.find(D=>re(D.address,I));if(!A)throw new oe;let P=u();return await r().actions.signPersonalMessage({account:A,data:w,internal:{client:P,config:t,request:y,store:n}})}case"wallet_connect":{let[{capabilities:w,chainIds:I}]=y._decoded.params??[{}],A=u(I?.[0]),P=A.chain.id,{createAccount:C,email:D,grantAdmins:T,grantPermissions:q,selectAccount:L,signInWithEthereum:Y}=w??{},V={client:A,config:t,request:y,store:n},{accounts:Q}=await(async()=>{if(D||C){let{label:pe=void 0}=typeof C=="object"?C:{},{account:Ee}=await r().actions.createAccount({admins:T,email:D,internal:V,label:pe,permissions:q,signInWithEthereum:Y});return{accounts:[Ee]}}let $=b.accounts[0],{address:ge,key:le}=(()=>{if(L)return typeof L=="object"?L:{address:void 0,key:void 0};for(let pe of $?.keys??[])if(pe.type==="webauthn-p256"&&pe.role==="admin")return{address:$?.address,key:{credentialId:pe.credentialId??pe.privateKey?.credential?.id,publicKey:pe.publicKey}};return{address:void 0,key:void 0}})(),ve={internal:V,permissions:q,signInWithEthereum:Y};try{return await r().actions.loadAccounts({address:ge,key:le,...ve})}catch(pe){if(pe instanceof be)throw pe;if(ge&&le)return await r().actions.loadAccounts(ve);throw pe}})();n.setState($=>({...$,accounts:Q}));let G=[P,...n.getState().chainIds.filter($=>$!==P)];return l.emit("connect",{chainId:te(G[0])}),{accounts:Q.map($=>({address:dn($),capabilities:{admins:$.keys?un($.keys):[],permissions:$.keys?vs($.keys,{address:$.address}):[],...$.signInWithEthereum&&{signInWithEthereum:$.signInWithEthereum}}})),chainIds:G.map($=>te($))}}case"wallet_disconnect":{let w=u();await r().actions.disconnect?.({internal:{client:w,config:t,request:y,store:n}}),n.setState(I=>({...I,accounts:[]})),l.emit("disconnect",new se);return}case"wallet_getAssets":{let[w]=y._decoded.params??[],{account:I,chainFilter:A,assetFilter:P,assetTypeFilter:C}=w,D=u(),T=await r().actions.getAssets({account:I,assetFilter:P,assetTypeFilter:C,chainFilter:A,internal:{client:D,config:t,request:y,store:n}}),q=Object.entries(T).reduce((L,[Y,V])=>(L[te(Number(Y))]=V,L),{});return Z(Ze.Response,q)}case"wallet_getCallsStatus":{let[w]=y._decoded.params??[],I=u();return await r().actions.getCallsStatus({id:w,internal:{client:I,config:t,request:y,store:n}})}case"wallet_getCapabilities":{let[w,I]=y.params??[];return await h({chainIds:I,request:y})}case"wallet_prepareCalls":{let[w]=y._decoded.params,{calls:I,capabilities:A,chainId:P,key:C,from:D}=w,T=u(P),q=D??b.accounts[0];if(!q)throw new oe;if(P&&P!==T.chain.id)throw new Me;let{digest:L,...Y}=await r().actions.prepareCalls({account:ie(q),calls:I,feeToken:A?.feeToken,internal:{client:T,config:t,request:y,store:n},key:C,merchantUrl:no(t.merchantUrl??A?.merchantUrl),requiredFunds:A?.requiredFunds});return Z(fe.Response,{capabilities:Y.capabilities,chainId:te(Y.chainId??T.chain.id),context:{...Y.context,account:{address:Y.account.address},calls:Y.context.calls??[],nonce:Y.context.nonce??0n},digest:L,key:Y.key,typedData:Y.typedData})}case"wallet_sendPreparedCalls":{let[w]=y._decoded.params,{chainId:I,context:A,key:P,signature:C}=w,{account:D}=w.context,T=u(I);if(I&&Ie(I)!==T.chain.id)throw new Me;return[{id:await r().actions.sendPreparedCalls({account:ie(D),context:A,internal:{client:T,config:t,request:y,store:n},key:P,signature:C})}]}case"wallet_sendCalls":{if(b.accounts.length===0)throw new se;let[w]=y._decoded.params,{calls:I,capabilities:A,chainId:P,from:C}=w,D=u(P);if(P&&P!==D.chain.id)throw new Me;let T=C?b.accounts.find(L=>re(L.address,C)):b.accounts[0];if(!T)throw new oe;let{id:q}=await r().actions.sendCalls({account:T,calls:I,chainId:D.chain.id,feeToken:A?.feeToken,internal:{client:D,config:t,request:y,store:n},merchantUrl:no(t.merchantUrl??A?.merchantUrl),permissionsId:A?.permissions?.id,requiredFunds:A?.requiredFunds});return{id:q}}case"wallet_switchEthereumChain":{let[w]=y._decoded.params,{chainId:I}=w,A=Ie(I);if(!t.chains.find(D=>D.id===A))throw new bt;let C=u(I);await r().actions.switchChain?.({chainId:C.chain.id,internal:{client:C,config:t,request:y,store:n}}),n.setState(D=>({...D,chainIds:[A,...D.chainIds.filter(T=>T!==A)]}));return}case"wallet_verifySignature":{let[w]=y._decoded.params,{address:I,chainId:A,digest:P,signature:C}=w,D=u(A);return{...await Ht(D,{address:I,digest:P,signature:C}),address:I,chainId:te(D.chain.id)}}}},{enabled:z,id:ze(g)})}});function m(){let g=()=>{},z=()=>{};xs(n).then(()=>{h().catch(()=>{}),g(),g=n.subscribe(b=>b.accounts,b=>{l.emit("accountsChanged",b.map(dn))},{equalityFn:(b,w)=>b.every((I,A)=>I.address===w[A]?.address)}),z(),z=n.subscribe(b=>b.chainIds[0],(b,w)=>{b!==w&&l.emit("chainChanged",te(b))})});let y=Uc(p,i);return()=>{g(),z(),y()}}let d=m();return Object.assign(p,{_internal:{destroy:d}})}function Uc(e,t){if(!t)return()=>{};if(typeof window>"u"||!window.dispatchEvent)return()=>{};let{icon:r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIyIiBoZWlnaHQ9IjQyMiIgdmlld0JveD0iMCAwIDQyMiA0MjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MjIiIGhlaWdodD0iNDIyIiBmaWxsPSJibGFjayIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMV8xNSkiPgo8cGF0aCBkPSJNODEgMjg2LjM2NkM4MSAyODAuODkzIDg1LjQ1MDUgMjc2LjQ1NSA5MC45NDA0IDI3Ni40NTVIMzI5LjUxMUMzMzUuMDAxIDI3Ni40NTUgMzM5LjQ1MiAyODAuODkzIDMzOS40NTIgMjg2LjM2NlYzMDYuMTg4QzMzOS40NTIgMzExLjY2MiAzMzUuMDAxIDMxNi4wOTkgMzI5LjUxMSAzMTYuMDk5SDkwLjk0MDRDODUuNDUwNSAzMTYuMDk5IDgxIDMxMS42NjIgODEgMzA2LjE4OFYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAyMzQuODI4Qzg1LjQ1MDUgMjM0LjgyOCA4MSAyMzkuMjY2IDgxIDI0NC43MzlWMjcxLjUzMUM4My44NDMyIDI2OS42MzMgODcuMjYyMiAyNjguNTI2IDkwLjk0MDQgMjY4LjUyNkgzMjkuNTExQzMzMy4xODggMjY4LjUyNiAzMzYuNjA4IDI2OS42MzMgMzM5LjQ1MiAyNzEuNTMxVjI0NC43MzlDMzM5LjQ1MiAyMzkuMjY2IDMzNS4wMDEgMjM0LjgyOCAzMjkuNTExIDIzNC44MjhIOTAuOTQwNFpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgwLjg5MyAzMzUuMDAxIDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTlDODEgMzExLjY2NCA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2NCAzMzkuNDUyIDMwNi4xOVYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAxOTMuMjAxQzg1LjQ1MDUgMTkzLjIwMSA4MSAxOTcuNjM4IDgxIDIwMy4xMTJWMjI5LjkwM0M4My44NDMyIDIyOC4wMDYgODcuMjYyMiAyMjYuODk5IDkwLjk0MDQgMjI2Ljg5OUgzMjkuNTExQzMzMy4xODggMjI2Ljg5OSAzMzYuNjA4IDIyOC4wMDYgMzM5LjQ1MiAyMjkuOTAzVjIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNFpNMzM5LjQ1MiAyNDQuNzM5QzMzOS40NTIgMjM5LjI2NSAzMzUuMDAxIDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNDODEuMjE3NSAyNzEuMzg1IDgxLjQzODMgMjcxLjI0NSA4MS42NjI0IDI3MS4xMDlDODMuODMyNSAyNjkuNzk0IDg2LjMwNTQgMjY4LjkyNyA4OC45NTIzIDI2OC42MzVDODkuNjA1MSAyNjguNTYzIDkwLjI2ODQgMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMzAuMTgzIDI2OC41MjYgMzMwLjg0NiAyNjguNTYzIDMzMS40OTggMjY4LjYzNUMzMzQuNDE5IDI2OC45NTcgMzM3LjEyOCAyNjkuOTggMzM5LjQ1MiAyNzEuNTNWMjQ0LjczOVpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgxLjAyMSAzMzUuMjA2IDI3Ni42NjMgMzI5Ljg5MyAyNzYuNDYyQzMyOS43NjcgMjc2LjQ1NyAzMjkuNjQgMjc2LjQ1NSAzMjkuNTExIDI3Ni40NTVIOTAuOTQwNEM4NS40NTA1IDI3Ni40NTUgODEgMjgwLjg5MyA4MSAyODYuMzY2VjMwNi4xODhDODEgMzExLjY2MiA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2MiAzMzkuNDUyIDMwNi4xODhWMjg2LjM2NloiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNSIvPgo8cGF0aCBvcGFjaXR5PSIwLjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTguMDE0NiAxMDRDODguNjE3NyAxMDQgODEgMTExLjU5NSA4MSAxMjAuOTY1VjE4OC4yNzZDODMuODQzMiAxODYuMzc5IDg3LjI2MjIgMTg1LjI3MiA5MC45NDA0IDE4NS4yNzJIMzI5LjUxMUMzMzMuMTg4IDE4NS4yNzIgMzM2LjYwOCAxODYuMzc5IDMzOS40NTIgMTg4LjI3NlYxMjAuOTY1QzMzOS40NTIgMTExLjU5NSAzMzEuODMzIDEwNCAzMjIuNDM3IDEwNEg5OC4wMTQ2Wk0zMzkuNDUyIDIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNEM4NS40NTA1IDE5My4yMDEgODEgMTk3LjYzOCA4MSAyMDMuMTEyVjIyOS45MDNDODEuMjE3NSAyMjkuNzU4IDgxLjQzODMgMjI5LjYxOCA4MS42NjI0IDIyOS40ODJDODMuODMyNSAyMjguMTY3IDg2LjMwNTQgMjI3LjMgODguOTUyMyAyMjcuMDA4Qzg5LjYwNTEgMjI2LjkzNiA5MC4yNjg0IDIyNi44OTkgOTAuOTQwNCAyMjYuODk5SDMyOS41MTFDMzMwLjE4MyAyMjYuODk5IDMzMC44NDYgMjI2LjkzNiAzMzEuNDk4IDIyNy4wMDhDMzM0LjQxOSAyMjcuMzMgMzM3LjEyOCAyMjguMzUyIDMzOS40NTIgMjI5LjkwM1YyMDMuMTEyWk0zMzkuNDUyIDI0NC43MzlDMzM5LjQ1MiAyMzkuMzkzIDMzNS4yMDYgMjM1LjAzNiAzMjkuODkzIDIzNC44MzVDMzI5Ljc2NyAyMzQuODMgMzI5LjY0IDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNMODEuMDcwNyAyNzEuNDgzQzgxLjI2NTMgMjcxLjM1NSA4MS40NjI1IDI3MS4yMyA4MS42NjI0IDI3MS4xMDlDODEuOTA4MyAyNzAuOTYgODIuMTU4MSAyNzAuODE3IDgyLjQxMTcgMjcwLjY3OUM4NC4zOTUzIDI2OS42MDUgODYuNjA1NCAyNjguODk0IDg4Ljk1MjMgMjY4LjYzNUM4OS4wMDUyIDI2OC42MjkgODkuMDU4IDI2OC42MjQgODkuMTExIDI2OC42MThDODkuNzEyNSAyNjguNTU3IDkwLjMyMjggMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMjkuNzM4IDI2OC41MjYgMzI5Ljk2NSAyNjguNTMgMzMwLjE5MiAyNjguNTM5QzMzMC42MzEgMjY4LjU1NSAzMzEuMDY3IDI2OC41ODcgMzMxLjQ5OCAyNjguNjM1QzMzNC40MTkgMjY4Ljk1NyAzMzcuMTI4IDI2OS45OCAzMzkuNDUyIDI3MS41M1YyNDQuNzM5Wk0zMzkuNDUyIDI4Ni4zNjZDMzM5LjQ1MiAyODEuMDIxIDMzNS4yMDYgMjc2LjY2MyAzMjkuODkzIDI3Ni40NjJMMzI5Ljg2NSAyNzYuNDYxQzMyOS43NDggMjc2LjQ1NyAzMjkuNjI5IDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTg4QzgxIDMxMS42NjIgODUuNDUwNSAzMTYuMTAxIDkwLjk0MDQgMzE2LjEwMUgzMjkuNTExQzMzNS4wMDEgMzE2LjEwMSAzMzkuNDUyIDMxMS42NjIgMzM5LjQ1MiAzMDYuMTg4VjI4Ni4zNjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjY5Ljg2OCAxMzEuNzUyQzI2OS44NjggMTI2LjI3OCAyNzQuMzE4IDEyMS44NCAyNzkuODA4IDEyMS44NEgzMTEuNjE4QzMxNy4xMDggMTIxLjg0IDMyMS41NTggMTI2LjI3OCAzMjEuNTU4IDEzMS43NTJWMTYxLjQ4NUMzMjEuNTU4IDE2Ni45NTkgMzE3LjEwOCAxNzEuMzk2IDMxMS42MTggMTcxLjM5NkgyNzkuODA4QzI3NC4zMTggMTcxLjM5NiAyNjkuODY4IDE2Ni45NTkgMjY5Ljg2OCAxNjEuNDg1VjEzMS43NTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzFfMTUiPgo8cmVjdCB3aWR0aD0iMjU5IiBoZWlnaHQ9IjIxMyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgxIDEwNCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",name:o="Porto",rdns:n="xyz.ithaca.porto"}=typeof t=="object"?t:{};return ra({info:{icon:r,name:o,rdns:n,uuid:zt()},provider:e})}function un(e){return e.map(t=>{if(t.role==="admin")try{return Z(Ne.Key,{id:t.id??t.publicKey,publicKey:t.publicKey,type:t.type,...t.type==="webauthn-p256"?{credentialId:t.privateKey?.credential?.id,privateKey:{credential:{id:t.privateKey?.credential?.id},rpId:t.privateKey?.rpId}}:{}})}catch{return}}).filter(Boolean)}function vs(e,{address:t}){return e.map(r=>{if(r.chainId&&r.role==="session"&&!(r.expiry>0&&r.expiry<BigInt(Math.floor(Date.now()/1e3))))try{return Z(Nr,ls(r,{address:t}))}catch{return}}).filter(Boolean)}function dn(e){return Us(e.address)}var Fi={};je(Fi,{_internal_types:()=>Hi,dialog:()=>Yt,from:()=>Ge,reactNative:()=>Li,relay:()=>lt});x();j();v();x();j();v();function Ge(e){return{...e,setup:e.setup??(()=>()=>{})}}async function ln(e){let{account:t,calls:r,permissionsId:o}=e;if(typeof o<"u"){if(o===null)return;let h=t.keys?.find(u=>u.publicKey===o&&u.privateKey);if(!h)throw new Error(`permission (id: ${o}) does not exist.`);return h}let n=t.keys?.find(h=>!h.privateKey||h.role!=="session"||h.expiry<BigInt(Math.floor(Date.now()/1e3))?!1:!!r.every(c=>h.permissions?.calls?.some(a=>{if(a.to&&a.to!==c.to)return!1;if(a.signature){if(!c.data)return!1;let l=qt(c.data,0,4);if(jn(a.signature))return a.signature===l;if(Co(a.signature)!==l)return!1}return!0}))),i=t.keys?.find(h=>h.role==="admin"&&h.privateKey);return n??i}x();j();v();x();j();v();function Mi(e={}){let t=e.id??0;return{prepare(r){return Hc({id:t++,...r})},get id(){return t}}}function Hc(e){return{...e,jsonrpc:"2.0"}}x();j();v();function ki(){return null}var Rs={};je(Rs,{account_getOnrampContactInfo:()=>ms,account_onrampStatus:()=>fs,account_resendVerifyPhone:()=>hs,account_setEmail:()=>ys,account_setPhone:()=>gs,account_verifyEmail:()=>Ur,account_verifyPhone:()=>bs,eth_accounts:()=>Hr,eth_chainId:()=>Fr,eth_requestAccounts:()=>$r,eth_sendTransaction:()=>Br,eth_signTypedData_v4:()=>Wr,personal_sign:()=>Xr,porto_ping:()=>en,wallet_addFunds:()=>Lr,wallet_connect:()=>Bt,wallet_disconnect:()=>tn,wallet_getAccountVersion:()=>Yr,wallet_getAdmins:()=>Ne,wallet_getAssets:()=>Ze,wallet_getCallsStatus:()=>rn,wallet_getCapabilities:()=>nn,wallet_getKeys:()=>_e,wallet_getPermissions:()=>Qr,wallet_grantAdmin:()=>At,wallet_grantPermissions:()=>Mt,wallet_prepareCalls:()=>fe,wallet_prepareUpgradeAccount:()=>on,wallet_revokeAdmin:()=>Vr,wallet_revokePermissions:()=>Jr,wallet_sendCalls:()=>sn,wallet_sendPreparedCalls:()=>an,wallet_switchEthereumChain:()=>Zr,wallet_upgradeAccount:()=>Gr,wallet_verifySignature:()=>cn});x();j();v();x();j();v();var pn=$t;function mn(e){let{expiry:t,feeToken:r,permissions:o,publicKey:n,type:i}=e;return{expiry:t,feeToken:r??null,key:{publicKey:n,type:i},permissions:o??{}}}async function Oe(e,t={}){if(!e)return;let r=t.chainId??e.chainId,o=e.expiry??0,n=e.feeToken,i=Ka(e,{feeTokens:t.feeTokens}),h={chainId:r,expiry:o,feeToken:n,permissions:i,role:"session"};if(e?.key)return Re({...h,publicKey:e.key.publicKey,type:e.key.type??"secp256k1"});if(typeof globalThis.crypto?.subtle?.generateKey=="function")try{return await Na(h)}catch(c){if(!Bc(c))throw c}return qa(h)}function Bc(e){if(!(e instanceof Error))return!1;let t=e.message?.toLowerCase()??"";return e.name==="TypeError"||e.name==="ReferenceError"||t.includes("subtle")||t.includes("generatekey")}x();j();v();x();j();v();var Wc=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,Yc=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,Qc=/^localhost(:[0-9]{1,5})?$/,Vc=/^[a-zA-Z0-9]{8,}$/,Jc=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,Zc=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Gc=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Ei(e){let{chainId:t,domain:r,expirationTime:o,issuedAt:n=new Date,nonce:i,notBefore:h,requestId:u,resources:c,scheme:a,uri:l,version:p}=e;{if(t!==Math.floor(t))throw new Ke({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${t}`]});if(!(Wc.test(r)||Yc.test(r)||Qc.test(r)))throw new Ke({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${r}`]});if(!Vc.test(i))throw new Ke({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${i}`]});if(!Si(l))throw new Ke({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${l}`]});if(p!=="1")throw new Ke({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${p}`]});if(a&&!Jc.test(a))throw new Ke({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${a}`]});let b=e.statement;if(b?.includes(`
`))throw new Ke({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${b}`]})}let m=ua(e.address,{checksum:!0}),d=a?`${a}://${r}`:r,g=e.statement?`${e.statement}
`:"",z=`${d} wants you to sign in with your Ethereum account:
${m}

${g}`,y=`URI: ${l}
Version: ${p}
Chain ID: ${t}
Nonce: ${i}
Issued At: ${n.toISOString()}`;if(o&&(y+=`
Expiration Time: ${o.toISOString()}`),h&&(y+=`
Not Before: ${h.toISOString()}`),u&&(y+=`
Request ID: ${u}`),c){let b=`
Resources:`;for(let w of c){if(!Si(w))throw new Ke({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${w}`]});b+=`
- ${w}`}y+=b}return`${z}
${y}`}function Si(e){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e)||/%[^0-9a-f]/i.test(e)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;let t=Xc(e),r=t[1],o=t[2],n=t[3],i=t[4],h=t[5];if(!(r?.length&&n&&n.length>=0))return!1;if(o?.length){if(!(n.length===0||/^\//.test(n)))return!1}else if(/^\/\//.test(n))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(r.toLowerCase()))return!1;let u="";return u+=`${r}:`,o?.length&&(u+=`//${o}`),u+=n,i?.length&&(u+=`?${i}`),h?.length&&(u+=`#${h}`),u}function Xc(e){return e.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}function Ci(e){let{scheme:t,statement:r,...o}=e.match(Zc)?.groups??{},{chainId:n,expirationTime:i,issuedAt:h,notBefore:u,requestId:c,...a}=e.match(Gc)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...a,...n?{chainId:Number(n)}:{},...i?{expirationTime:new Date(i)}:{},...h?{issuedAt:new Date(h)}:{},...u?{notBefore:new Date(u)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}var Ke=class extends we{constructor(t){let{field:r,metaMessages:o}=t;super(`Invalid Sign-In with Ethereum message field "${r}".`,{metaMessages:o}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Siwe.InvalidMessageFieldError"})}};async function Ms(e){let{address:t,authUrl:r,message:o,signature:n,publicKey:i}=e,{chainId:h}=Ci(o);return await fetch(r.verify,{body:JSON.stringify({address:t,chainId:h,message:o,signature:n,walletAddress:t,...i&&{publicKey:i}}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}).then(u=>u.json())}async function oo(e,t,r){let{chainId:o=e.chain?.id,domain:n,uri:i,resources:h,version:u="1"}=t,{address:c}=r,a=t.authUrl?ks(t.authUrl):void 0;if(!o)throw new Error("`chainId` is required.");if(!n)throw new Error("`domain` is required.");if(!t.nonce&&!a?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");if(!i)throw new Error("`uri` is required.");let l=await(async()=>{if(t.nonce)return t.nonce;if(!a?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");let d=await(await fetch(a.nonce,{body:JSON.stringify({address:c,chainId:o,walletAddress:c}),headers:{"Content-Type":"application/json"},method:"POST"})).json().catch(()=>{});if(!d?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");return d.nonce})();return Ei({...t,address:r.address,chainId:o,domain:n,nonce:l,resources:h,uri:i,version:u})}function ks(e,t=""){if(!e)return;let r=(()=>{if(typeof e=="string"){let o=e.replace(/\/$/,"");return{logout:o+"/logout",nonce:o+"/nonce",verify:o+"/verify"}}return e})();return{logout:As(r.logout,t),nonce:As(r.nonce,t),verify:As(r.verify,t)}}function As(e,t){return!t||!e.startsWith("/")?e:t+e}x();j();v();x();j();v();function tu(e){let t=oa(e);return ft("0x19",Le(`Ethereum Signed Message:
`+Qt(t)),t)}function fn(e){return et(tu(e))}x();j();v();x();j();v();x();j();v();function ou(e,t){let{as:r}=t,o=qi(e),n=Ra(new Uint8Array(o.length));return o.encode(n),r==="Hex"?sa(n.bytes):n.bytes}function Ti(e,t={}){let{as:r="Hex"}=t;return ou(e,{as:r})}function qi(e){return Array.isArray(e)?su(e.map(t=>qi(t))):au(e)}function su(e){let t=e.reduce((n,i)=>n+i.length,0),r=Ni(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),r===1?n.pushUint8(t):r===2?n.pushUint16(t):r===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:i}of e)i(n)}}}function au(e){let t=typeof e=="string"?aa(e):e,r=Ni(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(183+r),r===1?n.pushUint8(t.length):r===2?n.pushUint16(t.length):r===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function Ni(e){if(e<=255)return 1;if(e<=65535)return 2;if(e<=16777215)return 3;if(e<=4294967295)return 4;throw new we("Length is too large.")}function _i(e){return cu(e,{presign:!0})}function cu(e,t={}){let{presign:r}=t;return et(ft("0x05",Ti(uu(r?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function uu(e){let{address:t,chainId:r,nonce:o}=e,n=xa(e);return[r?te(r):"0x",t,o?te(o):"0x",...n?Ia(n):[]]}async function Ps(e,t){let{account:r=e.account}=t,o=r?ie(r):void 0;if(!o)throw new Error("account is required.");let{domain:{name:n,version:i}}=await Fs(e,{address:o.address});if(!e.chain)throw new Error("client.chain is required");return{chainId:e.chain.id,name:n,verifyingContract:o.address,version:i}}var gn={};je(gn,{addFaucetFunds:()=>ui,createAccount:()=>Oi,decorator:()=>bu,getAssets:()=>Yn,getAuthorization:()=>Wn,getCallsStatus:()=>Lt,getCapabilities:()=>ke,getKeys:()=>hn,getOnrampContactInfo:()=>pu,health:()=>qr,onrampStatus:()=>mu,prepareCalls:()=>dt,prepareUpgradeAccount:()=>yn,resendVerifyPhone:()=>fu,sendCalls:()=>kt,sendPreparedCalls:()=>Pt,setEmail:()=>so,setPhone:()=>yu,signCalls:()=>hu,upgradeAccount:()=>St,verifyEmail:()=>Ss,verifyPhone:()=>gu,verifySignature:()=>Ht});x();j();v();async function Oi(e,t){let r=br(In(),{keys:t.authorizeKeys});return await St(e,{...t,account:r})}async function hn(e,t){let{account:r=e.account,chainIds:o}=t,n=r?ie(r):void 0;if(!n)throw new Error("account is required.");let i=await di(e,{address:n.address,chainIds:o});return Object.entries(i).flatMap(([h,u])=>u.map(c=>_a(c,{chainId:Number(h)})))}async function pu(e,t){let{address:r,secret:o}=t;return await mi(e,{address:r,secret:o})}async function mu(e,t){let{address:r}=t;return await fi(e,{address:r})}async function dt(e,t){let{account:r=e.account,calls:o,chain:n=e.chain,feePayer:i,merchantUrl:h,nonce:u,preCalls:c,requiredFunds:a,revokeKeys:l}=t,p=r?ie(r):void 0,m=t.key??(p?xt(p,{role:"admin"}):void 0),d=t.authorizeKeys?.some(V=>V.role==="session"),{contracts:g,fees:{tokens:z}}=await ke(e,{chainId:n?.id}),y=d?g.orchestrator.address:void 0,b=(t.authorizeKeys??[]).map(V=>Vt(V,{feeTokens:z,orchestrator:y})),w=t.feeToken?t.feeToken:m?.permissions?.spend?.[0]?.token,I=typeof c=="boolean"?c:!1,A=typeof c=="object"?c.map(({context:V,signature:Q})=>({...V.preCall,signature:Q})):void 0,P={address:p?.address,calls:o??[],capabilities:{authorizeKeys:b,meta:{feePayer:i,feeToken:w,nonce:u},preCall:I,preCalls:A,requiredFunds:a,revokeKeys:l?.map(V=>({hash:V.hash}))},chain:n,key:m?Vt(m,{feeTokens:z}):void 0},C=await(async()=>{if(h){let V=wn({chain:e.chain,transport:Ue(h)});return await Qn(V,P).catch(Q=>(console.error(Q),Qn(e,P)))}return await Qn(e,P)})(),{capabilities:D,context:T,digest:q,signature:L,typedData:Y}=C;if(h&&!await xi(e,{response:C._raw,signature:L}))throw new Error(`cannot verify integrity of \`wallet_prepareCalls\` response from ${h}`);return{capabilities:{...D,quote:T.quote},context:T,digest:q,key:m,typedData:Y}}async function yn(e,t){let{address:r,authorizeKeys:o,chain:n=e.chain}=t;if(!n)throw new Error("chain is required.");let{contracts:i,fees:{tokens:h}}=await ke(e,{chainId:n.id}),u=t.delegation??i.accountProxy.address,a=o.some(b=>b.role==="session")?i.orchestrator.address:void 0,l=o.map(b=>{let w=b.role==="session"?b.permissions:{};return Vt({...b,permissions:w},{feeTokens:h,orchestrator:a})}),{capabilities:p,chainId:m,context:d,digests:g,typedData:z}=await li(e,{address:r,authorizeKeys:l,chain:n,delegation:u}),y=ie({address:r,keys:o});return{capabilities:p,chainId:m,context:{...d,account:y},digests:g,typedData:z}}async function fu(e,t){let{phone:r,walletAddress:o}=t;return await hi(e,{phone:r,walletAddress:o})}async function kt(e,t){let{account:r=e.account,chain:o=e.chain,webAuthn:n}=t;if(!o)throw new Error("`chain` is required.");let i=r?ie(r):void 0;if(!i)throw new Error("`account` is required.");let h=t.key??xt(i,t);if(!h&&!i.sign)throw new Error("`key` or `account` with `sign` is required");let u=await Promise.all((t.preCalls??[]).map(async m=>{if(m.signature)return m;let{authorizeKeys:d,key:g,calls:z,revokeKeys:y}=m,{context:b,digest:w}=await dt(e,{account:i,authorizeKeys:d,calls:z,chain:o,feeToken:t.feeToken,key:g,preCalls:!0,revokeKeys:y}),I=await xe(g,{address:null,payload:w,webAuthn:n});return{context:b,signature:I}})),{capabilities:c,context:a,digest:l}=await dt(e,{...t,account:i,chain:o,key:h,preCalls:u}),p=await(async()=>h?await xe(h,{address:null,payload:l,webAuthn:n,wrap:!1}):await i.sign({hash:l}))();return await Pt(e,{capabilities:c.feeSignature?{feeSignature:c.feeSignature}:void 0,context:a,key:h,signature:p})}async function hu(e,t){let r=!!e.context.preCall,{account:o,key:n}=t;if(o){let i=o.keys?.findIndex(h=>h.publicKey===e.key?.publicKey);if(i===-1)throw new Error("key not found");return await Te(o,{key:i,payload:e.digest,replaySafe:!1,wrap:r})}if(n)return await xe(n,{address:null,payload:e.digest,wrap:r});throw new Error("no key or account provided")}async function Pt(e,t){let{capabilities:r,context:o,key:n,signature:i}=t;return await pi(e,{capabilities:r,context:o,key:n?Vt(n):void 0,signature:i})}async function so(e,t){let{email:r,walletAddress:o}=t;return await yi(e,{email:r,walletAddress:o})}async function yu(e,t){let{phone:r,walletAddress:o}=t;return await gi(e,{phone:r,walletAddress:o})}async function St(e,t){if(t.account){let{account:i}=t,h=[...i.keys??[],...t.authorizeKeys??[]].filter((l,p,m)=>m.findIndex(d=>d.id===l.id)===p),{digests:u,...c}=await yn(e,{...t,address:i.address,authorizeKeys:h}),a={auth:await i.sign({hash:u.auth}),exec:await i.sign({hash:u.exec})};return await St(e,{...c,signatures:a})}let{context:r,signatures:o}=t,n=ie(r.account);return await bi(e,{context:r,signatures:o}),n}async function Ss(e,t){let{chainId:r,email:o,signature:n,token:i,walletAddress:h}=t;return await zi(e,{chainId:r,email:o,signature:n,token:i,walletAddress:h})}async function gu(e,t){let{code:r,phone:o,walletAddress:n}=t;return await wi(e,{code:r,phone:o,walletAddress:n})}function bu(e){return{createAccount:t=>Oi(e,t),getCallsStatus:t=>Lt(e,t),getCapabilities:()=>ke(e),getKeys:t=>hn(e,t),health:()=>qr(e),prepareCalls:t=>dt(e,t),prepareUpgradeAccount:t=>yn(e,t),sendCalls:t=>kt(e,t),sendPreparedCalls:t=>Pt(e,t),upgradeAccount:t=>St(e,t),verifySignature:t=>Ht(e,t)}}x();j();v();x();j();v();var Ki="0x8010801080108010801080108010801080108010801080108010801080108010",zu=Ma("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function wu(e){if(typeof e=="string"){if(qt(e,-32)!==Ki)throw new Es(e)}else za(e.authorization)}function Ui(e){let{data:t,signature:r}=e;wu(e);let o=Rn({payload:_i(e.authorization),signature:va(e.authorization)}),n=Aa(zu,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??o,t??"0x"]),i=te(Qt(n),{size:32});return ft(r,n,i,Ki)}var Es=class extends we{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};async function Wt(e,t){let{address:r}=t,{authorization:o,data:n,to:i}=await Wn(e,{address:r});return Ui({authorization:{...o,nonce:BigInt(o.nonce),r:BigInt(o.r),s:BigInt(o.s)},data:n,signature:t.signature,to:i})}x();j();v();function Cs(e,t){let{tokens:r}=t,o=r.filter(n=>n.interop);return e.map(n=>{if(n.address)return n;let i=o.find(h=>h.symbol===n.symbol);if(!i)throw new Error(`interop token not found: ${n.symbol}`);return{address:i.address,value:Da(n.value,i.decimals)}})}x();j();v();async function Xe(e,t){let{chain:r=e.chain}=t??{};return await ke(e,{chainId:r?.id}).then(n=>n.fees.tokens)}async function Ds(e,t){let{addressOrSymbol:r}=t;return(await Xe(e,t)).find(Ds.predicate(r))}(function(e){function t(r){return o=>r?So(r)?re(o.address,r):r==="native"?o.address===mo:r===o.symbol:!1}e.predicate=t})(Ds||(Ds={}));async function Et(e,t){let{chain:r=e.chain,store:o}=t??{},n=o?.getState()??{},i=t?.addressOrSymbol??n.feeToken;return(await Xe(e,{chain:r}).then(c=>c.filter(a=>a.feeToken)))?.find(c=>i?i==="native"&&c.address===mo||So(i)&&re(c.address,i)?!0:i===c.symbol:!1)}function lt(e={}){let t=e,{mock:r,multichain:o=!0,webAuthn:n}=t,i,h,u=(()=>{if(t.keystoreHost!=="self"&&!(typeof window<"u"&&window.location?.hostname==="localhost"))return t.keystoreHost})();return Ge({actions:{async addFunds(){throw new Ae},async createAccount(c){let{admins:a,email:l,label:p,permissions:m,internal:d,signInWithEthereum:g}=c,{client:z}=d,y=br(In()),b=await Xe(z),w=r?To():await Do({createFn:n?.createFn,label:p||`${y.address.slice(0,8)}\u2026${y.address.slice(-6)}`,rpId:u,userId:Po(y.address)}),I=await Oe(m,{chainId:z.chain.id,feeTokens:b}),A=a?.map(D=>Re(D)),P=await St(z,{account:y,authorizeKeys:[w,...A??[],...I?[I]:[]]});i=y.address,l&&p&&await so(z,{email:p,walletAddress:P.address});let C=await(async()=>{if(!g)return;let D=await oo(z,g,{address:P.address}),T=await Te(y,{payload:fn(Le(D))}),q=await Wt(z,{address:P.address,signature:T});return{message:D,signature:q}})();return{account:{...P,signInWithEthereum:C}}},async getAccountVersion(c){let{address:a,internal:l}=c,{client:p}=l,{contracts:m}=await ke(p),{accountImplementation:d}=m,g=await Ps(p,{account:ie(d)}).then(y=>y.version),z=await Ps(p,{account:a}).then(y=>y.version).catch(()=>g);if(!z||!g)throw new Error("version not found.");return{current:z,latest:g}},async getAssets(c){let{account:a,chainFilter:l,assetFilter:p,assetTypeFilter:m,internal:d}=c,{client:g}=d;return await Yn(g,{account:a,assetFilter:p,assetTypeFilter:m,chainFilter:l})},async getCallsStatus(c){let{id:a,internal:l}=c,{client:p}=l,m=await Lt(p,{id:a});return{atomic:!0,chainId:te(p.chain.id),id:a,receipts:m.receipts?.map(d=>({blockHash:d.blockHash,blockNumber:te(d.blockNumber),gasUsed:te(d.gasUsed),logs:d.logs,status:d.status,transactionHash:d.transactionHash})),status:m.status,version:"1.0"}},async getCapabilities(c){let{chainIds:a,internal:l}=c,{client:p}=l,m={atomic:{status:"supported"},atomicBatch:{supported:!0},feeToken:{supported:!0,tokens:[]},merchant:{supported:!0},permissions:{supported:!0},requiredFunds:{supported:!!o,tokens:[]}},d=await ke(p,{chainIds:a?a.map(g=>Ie(g)):"all",raw:!0});return Object.entries(d).reduce((g,[z,y])=>({...g,[z]:{...m,...y,feeToken:{supported:!0,tokens:y.fees.tokens},requiredFunds:{supported:!!o,tokens:o?y.fees.tokens.filter(b=>b.interop):[]}}}),{})},async getKeys(c){let{account:a,chainIds:l,internal:p}=c,{client:m}=p,d=await hn(m,{account:a,chainIds:l});return Pn([...d,...a.keys??[]],g=>g.publicKey)},async grantAdmin(c){let{account:a,internal:l}=c,{client:p}=l,m=Re(c.key,{chainId:p.chain.id}),d=await Et(p,{addressOrSymbol:c.feeToken,store:l.store}),{id:g}=await kt(p,{account:a,authorizeKeys:[m],feeToken:d?.address,webAuthn:n});return await pt(p,{id:g,pollingInterval:500}),{key:m}},async grantPermissions(c){let{account:a,internal:l,permissions:p}=c,{client:m}=l,d=await Xe(m),g=await Oe(p,{chainId:m.chain.id,feeTokens:d});if(!g)throw new Error("key to authorize not found.");let z=a.keys?.find(I=>I.role==="admin"&&I.privateKey);if(!z)throw new Error("admin key not found.");let{context:y,digest:b}=await dt(m,{account:a,authorizeKeys:[g],key:z,preCalls:!0}),w=await xe(z,{address:null,payload:b});return await Pt(m,{context:y,key:z,signature:w}),{key:g}},async loadAccounts(c){let{internal:a,permissions:l,signInWithEthereum:p}=c,{client:m}=a,d=await Xe(m),g=await Oe(l,{chainId:m.chain.id,feeTokens:d}),{digest:z,digestType:y,message:b}=await(async()=>{if(p&&c.address){let L=await oo(m,p,{address:c.address});return{context:void 0,digest:fn(Le(L)),digestType:"siwe",message:L}}return{context:void 0,digest:"0x",message:void 0}})(),{address:w,credentialId:I,webAuthnSignature:A}=await(async()=>{if(r){if(!i)throw new Error("address_internal not found.");return{address:i,credentialId:void 0}}if(c.address&&c.key)return{address:c.address,credentialId:c.key.credentialId};let L=await Ta({challenge:z,getFn:n?.getFn,rpId:u}),Y=L.raw.response,V=ia(new Uint8Array(Y.userHandle)),Q=L.raw.id;return{address:V,credentialId:Q,webAuthnSignature:L}})(),P=await hn(m,{account:w,chainIds:[m.chain.id]}),C=ie({address:w,keys:[...P,...g?[g]:[]].map((L,Y)=>Y===0&&L.type==="webauthn-p256"?Oa({...L,credential:{id:I,publicKey:ca(L.publicKey)},id:w,rpId:u}):L)}),D=xt(C,{role:"admin"}),T=await(async()=>{if(z!=="0x")return A?La(Ua(A),{keyType:"webauthn-p256",publicKey:D.publicKey}):await xe(D,{address:C.address,payload:z})})();if(g){let{context:L,digest:Y}=await dt(m,{account:C,authorizeKeys:[g],preCalls:!0}),V=await xe(D,{address:null,payload:Y});await Pt(m,{context:L,key:D,signature:V})}let q=await(async()=>{if(p){if(y==="siwe"&&b&&T){let L=await Wt(m,{address:C.address,signature:T});return{message:b,signature:L}}{let L=await oo(m,p,{address:C.address}),Y=await Te(C,{payload:fn(Le(L)),role:"admin"}),V=await Wt(m,{address:C.address,signature:Y});return{message:L,signature:V}}}})();return{accounts:[{...C,signInWithEthereum:q}]}},async prepareCalls(c){let{account:a,calls:l,internal:p,merchantUrl:m}=c,{client:d}=p,g=c.key??await ln({account:a,calls:l});if(!g)throw new Error("cannot find authorized key to sign with.");let[z,y]=await Promise.all([Xe(d),Et(d,{addressOrSymbol:c.feeToken,store:p.store})]),b=Cs(c.requiredFunds??[],{tokens:z}),{capabilities:w,context:I,digest:A,typedData:P}=await dt(d,{account:a,calls:l,feeToken:y?.address,key:g,merchantUrl:m,requiredFunds:o?b:void 0}),C=I.quote?.quotes??[],D=C[C.length-1];return{account:a,capabilities:{...w,quote:I.quote},chainId:d.chain.id,context:{...I,account:a,calls:l,nonce:D?.intent.nonce},digest:A,key:g,typedData:P}},async prepareUpgradeAccount(c){let{address:a,email:l,label:p,internal:m,permissions:d}=c,{client:g}=m,[z,y]=await Promise.all([Xe(g),Et(g,{store:m.store})]),b=r?To():await Do({createFn:n?.createFn,label:p||`${a.slice(0,8)}\u2026${a.slice(-6)}`,rpId:u,userId:Po(a)}),w=await Oe(d,{chainId:g.chain.id,feeTokens:z}),{context:I,digests:A}=await yn(g,{address:a,authorizeKeys:[b,...w?[w]:[]],feeToken:y?.address});return l&&(h=p),{context:I,digests:A}},async revokeAdmin(c){let{account:a,id:l,internal:p}=c,{client:m}=p,d=a.keys?.find(g=>g.id===l);if(d){if(d.type==="webauthn-p256"&&a.keys?.filter(g=>g.type==="webauthn-p256").length===1)throw new Error("revoke the only WebAuthn key left.");try{let g=await Et(m,{addressOrSymbol:c.feeToken,store:p.store}),{id:z}=await kt(m,{account:a,feeToken:g?.address,revokeKeys:[d],webAuthn:n});await pt(m,{id:z})}catch(g){let z=g;if(z.name==="Rpc.ExecutionError"&&z.abiError?.name==="KeyDoesNotExist")return;throw g}}},async revokePermissions(c){let{account:a,id:l,internal:p}=c,{client:m}=p,d=a.keys?.find(g=>g.id===l);if(d){if(d.role==="admin")throw new Error("cannot revoke admins.");try{let g=await Et(m,{addressOrSymbol:c.feeToken,store:p.store}),{id:z}=await kt(m,{account:a,feeToken:g?.address,revokeKeys:[d],webAuthn:n});await pt(m,{id:z})}catch(g){let z=g;if(z.name==="Rpc.ExecutionError"&&z.abiError?.name==="KeyDoesNotExist")return;throw g}}},async sendCalls(c){let{account:a,asTxHash:l,calls:p,chainId:m,internal:d,merchantUrl:g}=c,{client:z}=d,y=await ln({account:a,calls:p,permissionsId:c.permissionsId}),[b,w]=await Promise.all([Xe(z),Et(z,{addressOrSymbol:c.feeToken,store:d.store})]),I=Cs(c.requiredFunds??[],{tokens:b}),A=await kt(z,{account:a,calls:p,feeToken:w?.address,key:y,merchantUrl:g,requiredFunds:o?I:void 0,webAuthn:n,...m?{chain:{id:m}}:{}});if(l){let{id:P,receipts:C,status:D}=await pt(z,{id:A.id,pollingInterval:500});if(!C?.[0])throw D==="success"?new Qe({message:"Call bundle with id: "+P+" not found."}):new Be({message:"Transaction failed under call bundle id: "+P+"."});return{id:C[0].transactionHash}}return A},async sendPreparedCalls(c){let{context:a,key:l,internal:p,signature:m}=c,{client:d}=p,{id:g}=await Pt(d,{context:a,key:l,signature:m});return g},async signPersonalMessage(c){let{account:a,data:l,internal:p}=c,{client:m}=p,d=a.keys?.find(z=>z.role==="admin"&&z.privateKey);if(!d)throw new Error("cannot find admin key to sign with.");let g=await Te(a,{key:d,payload:fn(l),webAuthn:n});return Wt(m,{address:a.address,signature:g})},async signTypedData(c){let{account:a,internal:l}=c,{client:p}=l,m=a.keys?.find(y=>y.role==="admin"&&y.privateKey);if(!m)throw new Error("cannot find admin key to sign with.");let d=mt(c.data),g=d.domain?.name==="Orchestrator",z=await Te(a,{key:m,payload:An(d),replaySafe:!g,webAuthn:n});return g?z:Wt(p,{address:a.address,signature:z})},async upgradeAccount(c){let{account:a,context:l,internal:p,signatures:m}=c,{client:d}=p;return await St(d,{context:l,signatures:m}),h&&await so(d,{email:h,walletAddress:a.address}),{account:a}},async verifyEmail(c){let{account:a,chainId:l,email:p,token:m,internal:d,walletAddress:g}=c,{client:z}=d,y=a.keys?.find(w=>w.role==="admin"&&w.privateKey);if(!y)throw new Error("cannot find admin key to sign with.");let b=await Te(a,{key:y,payload:et(Le(`${p}${m}`)),webAuthn:n});return await Ss(z,{chainId:l,email:p,signature:b,token:m,walletAddress:g})}},config:e,name:"rpc"})}function Yt(e={}){let{fallback:t=lt(),host:r=yr.prod,renderer:o=Wo(),theme:n,themeController:i}=e,h=new Set,u=Mi();function c(a){return Mn({async request(l){let p=u.prepare(l);return a.setState(m=>{let d=m.accounts[0],g=d?.keys?.find(z=>z.role==="admin"&&z.type==="webauthn-p256");return{...m,requestQueue:[...m.requestQueue,{account:d?{address:d.address,key:g?{credentialId:g?.credentialId,publicKey:g.publicKey}:void 0}:void 0,request:p,status:"pending"}]}}),new Promise((m,d)=>{let g=z=>{let y=z.find(b=>b.request.id===p.id);if(!y&&z.length===0){h.delete(g),d(new be);return}y&&(y.status!=="success"&&y.status!=="error"||(h.delete(g),y.status==="success"?m(y.result):d(Lo(y.error)),a.setState(b=>({...b,requestQueue:b.requestQueue.filter(w=>w.request.id!==p.id)}))))};h.add(g)})}},{schema:ki()})}return Ge({actions:{async addFunds(a){let{internal:l}=a,{request:p,store:m}=l;if(p.method!=="wallet_addFunds")throw new Error("Cannot add funds for method: "+p.method);return await c(m).request(p)},async createAccount(a){let{internal:l}=a,{client:p,config:m,request:d,store:g}=l,{storage:z}=m,y=c(g);return{account:await(async()=>{if(d.method==="wallet_connect"){let[{capabilities:w,chainIds:I}]=d._decoded.params??[{}],A=Ts(w?.signInWithEthereum?.authUrl??m.authUrl,{storage:z}),P=d.params?.[0]?.capabilities?.signInWithEthereum,C=await Oe(w?.grantPermissions,{chainId:p.chain.id}),D=C?Z(pn,mn(C)):void 0,{accounts:T}=await y.request({...d,params:[{capabilities:{...d.params?.[0]?.capabilities,grantPermissions:D,signInWithEthereum:A||P?{...P,authUrl:A}:void 0},chainIds:I?.map(Q=>te(Q))}]}),[q]=T;if(!q)throw new Error("no account found.");let L=q.capabilities?.admins?.map(Q=>Re(Q,{chainId:p.chain.id})).filter(Boolean),Y=q.capabilities?.permissions?.map(Q=>{try{let G=ps(ne(Nr,Q));return G.id===C?.id?{...G,...C,permissions:G.permissions}:G}catch{return}}).filter(Boolean),V=await(async()=>{if(!q.capabilities?.signInWithEthereum)return;let{message:Q,signature:G}=q.capabilities.signInWithEthereum;if(!A)return{message:Q,signature:G};let{token:$}=await Ms({address:q.address,authUrl:A,message:Q,publicKey:q.capabilities?.admins?.[0]?.publicKey,signature:G});return{message:Q,signature:G,token:$}})();return{...ie({address:q.address,keys:[...L??[],...Y??[]]}),signInWithEthereum:V}}throw new Error(`Account creation not supported on method: ${d.method}`)})()}},async disconnect(a){let{internal:l}=a,{config:p}=l,{storage:m}=p,d=await m.getItem("porto.authUrl")||void 0,g=Ts(p.authUrl??d,{storage:m});g&&await fetch(g.logout,{credentials:"include",method:"POST"}).catch(()=>{})},async getAccountVersion(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_getAccountVersion")throw new Error("Cannot get version for method: "+m.method);return o.supportsHeadless?await c(p).request(m):t.actions.getAccountVersion(a)},async getAssets(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_getAssets")throw new Error("Cannot get assets for method: "+m.method);if(!o.supportsHeadless)return t.actions.getAssets(a);let g=await c(p).request(m);return ne(Ze.Response,g)},async getCallsStatus(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_getCallsStatus")throw new Error("Cannot get status for method: "+m.method);return o.supportsHeadless?await c(p).request(m):t.actions.getCallsStatus(a)},async getCapabilities(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_getCapabilities")throw new Error("Cannot get capabilities for method: "+m.method);return o.supportsHeadless?await c(p).request(m):t.actions.getCapabilities(a)},async getKeys(a){let{account:l,chainIds:p,internal:m}=a,{store:d}=m,g=await(async()=>{if(!o.supportsHeadless)return t.actions.getKeys(a);let y=await c(d).request({method:"wallet_getKeys",params:[Z(_e.Parameters,{address:l.address,chainIds:p})]});return ne(_e.Response,y)})();return Pn([...g,...l.keys??[]],z=>z.publicKey)},async grantAdmin(a){let{internal:l}=a,{request:p,store:m}=l;if(p.method!=="wallet_grantAdmin")throw new Error("Cannot authorize admin for method: "+p.method);let[d]=p._decoded.params,g=Re(d.key);if(!g)throw new Error("no key found.");let z=await ao(l,a);return await c(m).request({method:"wallet_grantAdmin",params:[{...p.params?.[0],capabilities:{...p.params?.[0]?.capabilities,feeToken:z}}]}),{key:g}},async grantPermissions(a){let{internal:l}=a,{client:p,request:m,store:d}=l;if(m.method!=="wallet_grantPermissions")throw new Error("Cannot grant permissions for method: "+m.method);let[{address:g,...z}]=m._decoded.params,y=await Oe(z,{chainId:p.chain.id});if(!y)throw new Error("no key found.");let b=Z(pn,mn(y));return await c(d).request({method:"wallet_grantPermissions",params:[b]}),{key:y}},async loadAccounts(a){let{internal:l}=a,{client:p,config:m,store:d}=l,{storage:g}=m,z=c(d),y=l.request;if(y.method!=="wallet_connect"&&y.method!=="eth_requestAccounts")throw new Error("Cannot load accounts for method: "+y.method);return{accounts:await(async()=>{let[w]=y._decoded.params??[],{capabilities:I}=w??{},A=Ts(I?.signInWithEthereum?.authUrl??m.authUrl,{storage:g}),P=y.params?.[0]?.capabilities?.signInWithEthereum,C=await Oe(I?.grantPermissions,{chainId:p.chain.id}),D=C?Z(pn,mn(C)):void 0,{accounts:T}=await z.request({method:"wallet_connect",params:[{...y.params?.[0],capabilities:{...y.params?.[0]?.capabilities,grantPermissions:D,signInWithEthereum:A||P?{...P,authUrl:A}:void 0}}]});return Promise.all(T.map(async q=>{let L=q.capabilities?.admins?.map(Q=>Re(Q)).filter(Boolean),Y=q.capabilities?.permissions?.map(Q=>{try{let G=ps(ne(Nr,Q));return G.id===C?.id?{...G,...C,permissions:G.permissions}:G}catch{return}}).filter(Boolean),V=await(async()=>{if(!q.capabilities?.signInWithEthereum)return;let{message:Q,signature:G}=q.capabilities.signInWithEthereum;if(!A)return{message:Q,signature:G};let{token:$}=await Ms({address:q.address,authUrl:A,message:Q,publicKey:q.capabilities?.admins?.[0]?.publicKey,signature:G});return{message:Q,signature:G,token:$}})();return{...ie({address:q.address,keys:[...L??[],...Y??[]]}),signInWithEthereum:V}}))})()}},async prepareCalls(a){let{account:l,internal:p}=a,{store:m,request:d}=p;if(d.method!=="wallet_prepareCalls")throw new Error("Cannot prepare calls for method: "+d.method);if(!o.supportsHeadless)return t.actions.prepareCalls(a);let g=await ao(p,a),z=c(m),y=ne(fe.Response,await z.request({...d,params:[{...d.params?.[0],capabilities:{...d.params?.[0]?.capabilities,feeToken:g}}]}));return{account:l,chainId:Number(y.chainId),context:y.context,digest:y.digest,key:y.key,typedData:y.typedData}},async prepareUpgradeAccount(a){let{internal:l}=a,{client:p,store:m,request:d}=l;if(d.method!=="wallet_prepareUpgradeAccount")throw new Error("Cannot prepare upgrade for method: "+d.method);if(!o.supportsHeadless)return t.actions.prepareUpgradeAccount(a);let[{capabilities:g}]=d._decoded.params??[{}],z=await Oe(g?.grantPermissions,{chainId:p.chain.id}),y=z?Z(pn,mn(z)):void 0,b=c(m),{context:w,digests:I}=await b.request({...d,params:[{...d.params?.[0],capabilities:{...d.params?.[0]?.capabilities,grantPermissions:y}}]}),A=w.account.keys?.map(P=>P.id===z?.id?{...P,...z}:P);return{context:{...w,account:{...w.account,keys:A}},digests:I}},async revokeAdmin(a){let{account:l,id:p,internal:m}=a,{store:d,request:g}=m;if(g.method!=="wallet_revokeAdmin")throw new Error("Cannot revoke admin for method: "+g.method);let z=l.keys?.find(w=>w.id===p);if(!z)return;if(z.type==="webauthn-p256"&&l.keys?.filter(w=>w.type==="webauthn-p256").length===1)throw new Error("revoke the only WebAuthn key left.");let y=await ao(m,a);return await c(d).request({...g,params:[{...g.params?.[0],capabilities:{...g.params?.[0]?.capabilities,feeToken:y}}]})},async revokePermissions(a){let{account:l,id:p,internal:m}=a,{store:d,request:g}=m;if(g.method!=="wallet_revokePermissions")throw new Error("Cannot revoke permissions for method: "+g.method);let z=l.keys?.find(b=>b.id===p);if(!z)return;if(z.role==="admin")throw new Error("cannot revoke permissions.");return await c(d).request(g)},async sendCalls(a){let{account:l,asTxHash:p,calls:m,chainId:d,internal:g,merchantUrl:z,requiredFunds:y}=a,{client:b,store:w,request:I}=g,A=c(w),P=await ao(g,a),C=await ln({account:l,calls:m,permissionsId:a.permissionsId});if(C&&C.role==="session"){if(!o.supportsHeadless)return t.actions.sendCalls(a);try{let D=await A.request(Z(fe.Request,{method:"wallet_prepareCalls",params:[{calls:m,capabilities:{...I._decoded.method==="wallet_sendCalls"?I._decoded.params?.[0]?.capabilities:void 0,feeToken:P,merchantUrl:z,requiredFunds:y},chainId:d,from:l.address,key:C}]})),T=D.capabilities?.quote?.quotes??[];if(T.some((Q,G)=>G===T.length-1&&T.length>1?!1:vn(Q.feeTokenDeficit)>0n))throw new Error("insufficient funds");let L=await xe(C,{address:null,payload:D.digest,wrap:!1}),V=(await A.request({method:"wallet_sendPreparedCalls",params:[{...D,signature:L}]}))[0];if(!V)throw new Error("id not found");if(p){let{id:Q,receipts:G,status:$}=await pt(b,{id:V.id,pollingInterval:500});if(!G?.[0])throw $==="success"?new Qe({message:"Call bundle with id: "+Q+" not found."}):new Be({message:"Transaction failed under call bundle id: "+Q+"."});return{id:G[0].transactionHash}}return V}catch{}}if(I.method==="eth_sendTransaction")return{id:await A.request({...I,params:[{...I.params?.[0],capabilities:{feeToken:P,merchantUrl:z},...d?{chainId:te(d)}:{}}]})};if(I.method==="wallet_sendCalls")return await A.request({method:"wallet_sendCalls",params:[{...I.params?.[0],capabilities:{...I.params?.[0]?.capabilities,feeToken:P,merchantUrl:z},...d?{chainId:te(d)}:{}}]});throw new Error("Cannot execute for method: "+I.method)},async sendPreparedCalls(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_sendPreparedCalls")throw new Error("Cannot send prepared calls for method: "+m.method);if(!o.supportsHeadless)return t.actions.sendPreparedCalls(a);let z=(await c(p).request(m))[0]?.id;if(!z)throw new Error("id not found");return z},async signPersonalMessage(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="personal_sign")throw new Error("Cannot sign personal message for method: "+m.method);return await c(p).request(m)},async signTypedData(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="eth_signTypedData_v4")throw new Error("Cannot sign typed data for method: "+m.method);return await c(p).request(m)},async switchChain(a){let{internal:l}=a,{store:p,request:m}=l;if(m.method!=="wallet_switchEthereumChain")throw new Error("Cannot switch chain for method: "+m.method);return o.supportsHeadless?await c(p).request(m):void 0},async upgradeAccount(a){let{account:l,internal:p}=a,{store:m,request:d}=p;if(d.method!=="wallet_upgradeAccount")throw new Error("Cannot upgrade account for method: "+d.method);return await c(m).request(d),{account:l}},async verifyEmail(a){let{internal:l}=a,{request:p,store:m}=l;if(p.method!=="account_verifyEmail")throw new Error("Cannot verify email for method: "+p.method);return await c(m).request(p)}},config:e,name:"dialog",setup(a){let{internal:l}=a,{store:p}=l,m=o.setup({host:r,internal:l,theme:n,themeController:i}),d=p.subscribe(g=>g.requestQueue,g=>{for(let y of h)y(g);let z=g.map(y=>y.status==="pending"?y:void 0).filter(Boolean);m.syncRequests(z).catch(()=>{}),z.length===0&&m.close()});return()=>{d(),m.destroy()}}})}async function ao(e,t){let{config:{feeToken:r}}=e,{feeToken:o}=t??{};return o??r}function Ts(e,{storage:t}){if(!e)return;let r=ks(e,typeof window<"u"?window.location.origin:void 0);return r&&t.setItem("porto.authUrl",r),r}x();j();v();function Li(e={}){if(!Sn())return e.fallback??Ge({actions:lt().actions,name:"relay"});let{redirectUri:t,requestOptions:r,...o}=e;return Ge({...Yt({...o,renderer:Yo({redirectUri:t,requestOptions:r})}),name:"reactNative"})}var Hi={};x();j();v();var Ji={};je(Ji,{create:()=>_u,defaultConfig:()=>Ct});x();j();v();x();j();v();var bn=new Map,io=e=>{let t=bn.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,o])=>[r,o.getState()])):{}},Au=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};let o=bn.get(r.name);if(o)return{type:"tracked",store:e,...o};let n={connection:t.connect(r),stores:{}};return bn.set(r.name,n),{type:"tracked",store:e,...n}},Mu=(e,t)=>{if(t===void 0)return;let r=bn.get(e);r&&(delete r.stores[t],Object.keys(r.stores).length===0&&bn.delete(e))},ku=e=>{var t,r;if(!e)return;let o=e.split(`
`),n=o.findIndex(h=>h.includes("api.setState"));if(n<0)return;let i=((t=o[n+1])==null?void 0:t.trim())||"";return(r=/.+ (.+) .+/.exec(i))==null?void 0:r[1]},Pu=(e,t={})=>(r,o,n)=>{let{enabled:i,anonymousActionType:h,store:u,...c}=t,a;try{a=(i??(import.meta.env?import.meta.env.MODE:void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!a)return e(r,o,n);let{connection:l,...p}=Au(u,a,c),m=!0;n.setState=(z,y,b)=>{let w=r(z,y);if(!m)return w;let I=b===void 0?{type:h||ku(new Error().stack)||"anonymous"}:typeof b=="string"?{type:b}:b;return u===void 0?(l?.send(I,o()),w):(l?.send({...I,type:`${u}/${I.type}`},{...io(c.name),[u]:n.getState()}),w)},n.devtools={cleanup:()=>{l&&typeof l.unsubscribe=="function"&&l.unsubscribe(),Mu(c.name,u)}};let d=(...z)=>{let y=m;m=!1,r(...z),m=y},g=e(n.setState,o,n);if(p.type==="untracked"?l?.init(g):(p.stores[p.store]=n,l?.init(Object.fromEntries(Object.entries(p.stores).map(([z,y])=>[z,z===p.store?g:y.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let z=!1,y=n.dispatch;n.dispatch=(...b)=>{(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&b[0].type==="__setState"&&!z&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),z=!0),y(...b)}}return l.subscribe(z=>{var y;switch(z.type){case"ACTION":if(typeof z.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return qs(z.payload,b=>{if(b.type==="__setState"){if(u===void 0){d(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let w=b.state[u];if(w==null)return;JSON.stringify(n.getState())!==JSON.stringify(w)&&d(w);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(b)});case"DISPATCH":switch(z.payload.type){case"RESET":return d(g),u===void 0?l?.init(n.getState()):l?.init(io(c.name));case"COMMIT":if(u===void 0){l?.init(n.getState());return}return l?.init(io(c.name));case"ROLLBACK":return qs(z.state,b=>{if(u===void 0){d(b),l?.init(n.getState());return}d(b[u]),l?.init(io(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return qs(z.state,b=>{if(u===void 0){d(b);return}JSON.stringify(n.getState())!==JSON.stringify(b[u])&&d(b[u])});case"IMPORT_STATE":{let{nextLiftedState:b}=z.payload,w=(y=b.computedStates.slice(-1)[0])==null?void 0:y.state;if(!w)return;d(u===void 0?w:w[u]),l?.send(null,b);return}case"PAUSE_RECORDING":return m=!m}return}}),g},$i=Pu,qs=(e,t)=>{let r;try{r=JSON.parse(e)}catch(o){console.error("[zustand devtools middleware] Could not parse the received json",o)}r!==void 0&&t(r)},Su=e=>(t,r,o)=>{let n=o.subscribe;return o.subscribe=(h,u,c)=>{let a=h;if(u){let l=c?.equalityFn||Object.is,p=h(o.getState());a=m=>{let d=h(m);if(!l(p,d)){let g=p;u(p=d,g)}},c?.fireImmediately&&u(p,p)}return n(a)},e(t,r,o)},Bi=Su;function Eu(e,t){let r;try{r=e()}catch{return}return{getItem:n=>{var i;let h=c=>c===null?null:JSON.parse(c,t?.reviver),u=(i=r.getItem(n))!=null?i:null;return u instanceof Promise?u.then(h):h(u)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,t?.replacer)),removeItem:n=>r.removeItem(n)}}var Ns=e=>t=>{try{let r=e(t);return r instanceof Promise?r:{then(o){return Ns(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return Ns(o)(r)}}}},Cu=(e,t)=>(r,o,n)=>{let i={storage:Eu(()=>localStorage),partialize:y=>y,version:0,merge:(y,b)=>({...b,...y}),...t},h=!1,u=0,c=new Set,a=new Set,l=i.storage;if(!l)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...y)},o,n);let p=()=>{let y=i.partialize({...o()});return l.setItem(i.name,{state:y,version:i.version})},m=n.setState;n.setState=(y,b)=>(m(y,b),p());let d=e((...y)=>(r(...y),p()),o,n);n.getInitialState=()=>d;let g,z=()=>{var y,b;if(!l)return;let w=++u;h=!1,c.forEach(A=>{var P;return A((P=o())!=null?P:d)});let I=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(y=o())!=null?y:d))||void 0;return Ns(l.getItem.bind(l))(i.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==i.version){if(i.migrate){let P=i.migrate(A.state,A.version);return P instanceof Promise?P.then(C=>[!0,C]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var P;if(w!==u)return;let[C,D]=A;if(g=i.merge(D,(P=o())!=null?P:d),r(g,!0),C)return p()}).then(()=>{w===u&&(I?.(g,void 0),g=o(),h=!0,a.forEach(A=>A(g)))}).catch(A=>{w===u&&I?.(void 0,A)})};return n.persist={setOptions:y=>{i={...i,...y},y.storage&&(l=y.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>z(),hasHydrated:()=>h,onHydrate:y=>(c.add(y),()=>{c.delete(y)}),onFinishHydration:y=>(a.add(y),()=>{a.delete(y)})},i.skipHydration||z(),g||d},Wi=Cu;x();j();v();var Yi=e=>{let t,r=new Set,o=(a,l)=>{let p=typeof a=="function"?a(t):a;if(!Object.is(p,t)){let m=t;t=l??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(d=>d(t,m))}},n=()=>t,u={setState:o,getState:n,getInitialState:()=>c,subscribe:a=>(r.add(a),()=>r.delete(a))},c=t=e(o,n,u);return u},Qi=e=>e?Yi(e):Yi;var Ks={};je(Ks,{combine:()=>Tu,cookie:()=>Nu,from:()=>Du,idb:()=>_s,localStorage:()=>qu,memory:()=>Os});x();j();v();function Du(e){return e}function Tu(...e){return{async getItem(t){let o=(await Promise.allSettled(e.map(n=>n.getItem(t)))).find(n=>n.status==="fulfilled"&&n.value!==null);return o?.status!=="fulfilled"||o.value===null?null:o.value},async removeItem(t){await Promise.allSettled(e.map(r=>r.removeItem(t)))},async setItem(t,r){await Promise.allSettled(e.map(o=>o.setItem(t,r)))},sizeLimit:Math.min(...e.map(t=>t.sizeLimit)),storages:e}}function _s(){let e=typeof indexedDB<"u"?Zs("porto","store"):void 0;return{async getItem(t){let r=await Gs(t,e);return r===null?null:r},async removeItem(t){await ea(t,e)},async setItem(t,r){await Xs(t,De(r),e)},sizeLimit:1024*1024*50}}function qu(){return{async getItem(e){let t=window.localStorage.getItem(e);if(t===null)return null;try{return mt(t)}catch{return null}},async removeItem(e){window.localStorage.removeItem(e)},async setItem(e,t){window.localStorage.setItem(e,ze(t))},sizeLimit:1024*1024*5}}function Nu(){return{async getItem(e){let t=document.cookie.split("; ").find(r=>r.startsWith(`${e}=`));if(!t)return null;try{return mt(t.substring(e.length+1))}catch{return null}},async removeItem(e){document.cookie=`${e}=;max-age=-1;path=/`},async setItem(e,t){document.cookie=`${e}=${ze(t)};path=/;samesite=None;secure;max-age=31536000`},sizeLimit:1024*4}}function Os(){let e=new Map;return{getItem(t){return e.get(t)??null},removeItem(t){e.delete(t)},setItem(t,r){e.set(t,r)},sizeLimit:Number.POSITIVE_INFINITY}}var Vi=typeof window<"u"&&typeof document<"u",Ct={announceProvider:!0,chains:No,mode:Vi?Yt({host:yr.prod}):lt(),relay:Ue(is.prod.http),storage:Vi&&typeof indexedDB<"u"?_s():Os(),storageKey:"porto.store"};function _u(e={}){let t=e.chains??Ct.chains,r=Object.fromEntries(t.map(a=>[a.id,e.transports?.[a.id]??Ue()])),o={announceProvider:e.announceProvider??Ct.announceProvider,authUrl:e.authUrl,chains:t,feeToken:e.feeToken,merchantUrl:e.merchantUrl,mode:e.mode??Ct.mode,relay:e.relay??Ct.relay,storage:e.storage??Ct.storage,storageKey:e.storageKey??Ct.storageKey,transports:r},n=Qi($i(Bi(Wi(a=>({accounts:[],chainIds:o.chains.map(l=>l.id),feeToken:o.feeToken,requestQueue:[]}),{merge(a,l){let p=a,m=o.chains.find(g=>g.id===p.chainIds[0])?.id??o.chains[0].id,d=[m,...o.chains.map(g=>g.id).filter(g=>g!==m)];return{...l,...p,chainIds:d}},name:o.storageKey,partialize:a=>({accounts:a.accounts.map(l=>De(l)),chainIds:a.chainIds}),storage:o.storage,version:5})))),i=o.mode,h={config:o,getMode(){return i},id:zt(),setMode(a){return c?.(),i=a,c=a.setup({internal:h}),c},store:n},u=js(h),c=i!==null?i.setup({internal:h}):()=>{};return{_internal:h,config:o,destroy(){c(),u._internal.destroy()},provider:u}}export{vt as Account,Oo as Chains,En as Dialog,gt as Key,Fo as Messenger,Fi as Mode,Ji as Porto,gn as RelayActions,Rs as RpcSchema,Ks as Storage,cs as Transport,js as from};
