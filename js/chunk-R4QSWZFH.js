import{a as ut}from"./chunk-Z65QX34R.js";import{a as fe,b as pt}from"./chunk-ANQ7QFBQ.js";import{a as b,b as ne,c as de,d as _,e as lt,f as $,g as m}from"./chunk-C76LFVKJ.js";import{A as _e,B as it,D as R,E as V,G as a,H as De,I as d,J as G,K as ct,N as ue,S as dt,T as ft,b as f,c as tt,h as F,i as rt,j as E,k as w,l as A,m as p,o as ot,p as O,q as B,r as K,s as se,t as U,u as v,z as Re}from"./chunk-AXPE5NAX.js";import{a as Ze,b as Je,c as Xe,e as et,f as Ue}from"./chunk-YDPF4UGR.js";import{a as st,e as nt}from"./chunk-LQBGFF7Y.js";import{C as at}from"./chunk-YY5EM6U5.js";import{a as oe}from"./chunk-AMYL42KT.js";import{q as Me}from"./chunk-JGRP444H.js";import{c as pe,f as z}from"./chunk-57YRCRKT.js";var mt=pe(ht=>{"use strict";var Y=oe();function Gt(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var $t=typeof Object.is=="function"?Object.is:Gt,Yt=Y.useState,Zt=Y.useEffect,Jt=Y.useLayoutEffect,Xt=Y.useDebugValue;function er(r,e){var t=e(),o=Yt({inst:{value:t,getSnapshot:e}}),s=o[0].inst,n=o[1];return Jt(function(){s.value=t,s.getSnapshot=e,Fe(s)&&n({inst:s})},[r,t,e]),Zt(function(){return Fe(s)&&n({inst:s}),r(function(){Fe(s)&&n({inst:s})})},[r]),Xt(t),t}function Fe(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!$t(r,t)}catch{return!0}}function tr(r,e){return e()}var rr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tr:er;ht.useSyncExternalStore=Y.useSyncExternalStore!==void 0?Y.useSyncExternalStore:rr});var xt=pe((Er,Ct)=>{"use strict";Ct.exports=mt()});var Ht=pe(Oe=>{"use strict";var gr=Symbol.for("react.transitional.element"),vr=Symbol.for("react.fragment");function Qt(r,e,t){var o=null;if(t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),"key"in e){t={};for(var s in e)s!=="key"&&(t[s]=e[s])}else t=e;return e=t.ref,{$$typeof:gr,type:r,key:o,ref:e!==void 0?e:null,props:t}}Oe.Fragment=vr;Oe.jsx=Qt;Oe.jsxs=Qt});var Kt=pe(($n,zt)=>{"use strict";zt.exports=Ht()});var k=z(oe(),1);var gt=z(xt(),1);var{use:yt}=k.default,{useSyncExternalStore:or}=gt.default,sr=(r,e)=>{let t=(0,k.useRef)();(0,k.useEffect)(()=>{t.current=Xe(r,e,!0)}),(0,k.useDebugValue)(t.current)},nr=new WeakMap;function he(r,e){let t=e?.sync,o=(0,k.useRef)(),s=(0,k.useRef)(),n=!0,i=or((0,k.useCallback)(u=>{let h=et(r,u,t);return u(),h},[r,t]),()=>{let u=Ue(r,yt);try{if(!n&&o.current&&s.current&&!Je(o.current,u,s.current,new WeakMap))return o.current}catch{}return u},()=>Ue(r,yt));n=!1;let c=new WeakMap;(0,k.useEffect)(()=>{o.current=i,s.current=c}),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&sr(i,c);let l=(0,k.useMemo)(()=>new WeakMap,[]);return Ze(i,c,l,nr)}function ir(r){let e=he(a.state),t=r?.namespace||e.activeChain;if(!t)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};let o=e.chains.get(t)?.accountState,s=v.getAuthConnector(t),n=w.getConnectedConnectorId(t);return{allAccounts:o?.allAccounts||[],caipAddress:o?.caipAddress,address:A.getPlainAddress(o?.caipAddress),isConnected:!!o?.caipAddress,status:o?.status,embeddedWalletInfo:s&&n===f.CONNECTOR_ID.AUTH?{user:o?.user?{...o.user,username:w.getConnectedSocialUsername()}:void 0,authProvider:o?.socialProvider||"email",accountType:o?.preferredAccountTypes?.[t],isSmartAccountDeployed:!!o?.smartAccountDeployed}:void 0}}var ar=at({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function L(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}var Le=L({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});var We=z(oe(),1);var me;function vt(r){r&&(me=r)}function Hr(r){let{providers:e,providerIds:t}=he(m.state),o=e[r],s=t[r];return{walletProvider:o,walletProviderType:s}}function zr(){if(!me)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function r(t){await me?.open(t)}async function e(){await me?.close()}return{open:r,close:e}}var Ce=class r{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n}){return r.instance||(r.instance=new pt({projectId:e,chainId:t,enableLogger:o,onTimeout:s,abortController:n})),r.instance}};var Q={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};var qe=L({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});var so=L({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});var uo=L({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),fo=L({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var cr={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Z={getMethodsByChainNamespace(r){return cr[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};let t={...r},o=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>o.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>o.add(s)),e.events&&Object.keys(e.events).forEach(s=>o.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{let[n]=s.split(":");n&&o.add(n)}),o.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,n])=>{t[s]&&(t[s].methods=n)}),e.chains&&Object.entries(e.chains).forEach(([s,n])=>{t[s]&&(t[s].chains=n)}),e.events&&Object.entries(e.events).forEach(([s,n])=>{t[s]&&(t[s].events=n)}),e.rpcMap){let s=new Set;Object.entries(e.rpcMap).forEach(([n,i])=>{let[c,l]=n.split(":");!c||!l||!t[c]||(t[c].rpcMap||(t[c].rpcMap={}),s.has(c)||(t[c].rpcMap={},s.add(c)),t[c].rpcMap[l]=i)})}return t},createNamespaces(r,e){let t=r.reduce((o,s)=>{let{id:n,chainNamespace:i,rpcUrls:c}=s,l=c.default.http[0];o[i]||(o[i]=this.createDefaultNamespace(i));let u=`${i}:${n}`,h=o[i];switch(h.chains.push(u),u){case Le.caipNetworkId:h.chains.push(Le.deprecatedCaipNetworkId);break;case qe.caipNetworkId:h.chains.push(qe.deprecatedCaipNetworkId);break;default:}return h?.rpcMap&&l&&(h.rpcMap[n]=l),o},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{let e=await ue.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{let t=e.chains||[],o=e.accounts.map(s=>{let[n,i]=s.split(":");return`${n}:${i}`});return Array.from(new Set([...t,...o]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null},isOriginAllowed(r,e,t){for(let o of[...e,...t])if(o.includes("*")){let n=`^${o.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(n,"u").test(r))return!0}else if(o===r)return!0;return!1}};var J=class{constructor({provider:e,namespace:t}){this.id=f.CONNECTOR_ID.WALLET_CONNECT,this.name=ne.ConnectorNamesMap[f.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ne.ConnectorImageIds[f.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=a.getCaipNetworks.bind(a),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let t=this.getCaipNetworks(),o=p.state.universalProviderConfigOverride,s=Z.createNamespaces(t,o);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(t=>t.caipNetworkId);return it.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:lr})}},lr=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var xe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=t=>a.getCaipNetworks(t),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:f.CONNECTOR_ID.AUTH,type:"AUTH",name:f.CONNECTOR_NAMES.AUTH,provider:e,imageId:ne.ConnectorImageIds[f.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(o=>t.has(o.id)?!1:(t.add(o.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){d.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let o=this.eventListeners.get(e);o&&o.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let o=this.eventListeners.get(e);o&&o.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:o}=e;if(!e.provider)return;let s="provider"in e.provider?e.provider.provider:e.provider;if(o==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&o==="AUTH"){let n=s,i=d.state.preferredAccountTypes?.[t.chainNamespace];await n.switchNetwork(t.caipNetworkId);let c=await n.getUser({chainId:t.caipNetworkId,preferredAccountType:i});this.emit("switchNetwork",c)}}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof J);if(!e)throw new Error("WalletConnectConnector not found");return e}};var ye=class extends xe{setUniversalProvider(e){this.addConnector(new J({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let o=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{let[,,n]=s.split(":");return n}).filter((s,n,i)=>i.indexOf(s)===n)||[];return Promise.resolve({accounts:o.map(s=>A.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&E.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(d.state.balanceLoading&&e.chainId===a.state.activeCaipNetwork?.id)return{balance:d.state.balance||"0.00",symbol:d.state.balanceSymbol||""};let s=(await d.fetchTokenBalance()).find(n=>n.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&n.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:o,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let n="";return a.state.activeCaipNetwork?.chainNamespace===f.CHAIN.SOLANA?n=(await t.request({method:"solana_signMessage",params:{message:st.encode(new TextEncoder().encode(o)),pubkey:s}},a.state.activeCaipNetwork?.caipNetworkId)).signature:n=await t.request({method:"personal_sign",params:[o,s]},a.state.activeCaipNetwork?.caipNetworkId),{signature:n}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,o=this.getWalletConnectConnector();if(t.chainNamespace===f.CHAIN.EVM)try{await o.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Me(t.id)}]})}catch(s){if(s.code===Q.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===Q.ERROR_INVALID_CHAIN_ID||s.code===Q.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===Q.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await o.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Me(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}o.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(o=>o.type==="WALLET_CONNECT")?.provider}};var pr=["email","socials","swaps","onramp","activity","reownBranding"],ge={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return!!r.isEnabled&&e.includes("email")},processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.email:!!r},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.socials:typeof r=="boolean"?r?E.DEFAULT_REMOTE_FEATURES.socials:!1:r},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.swaps:typeof r=="boolean"?r?E.DEFAULT_REMOTE_FEATURES.swaps:!1:r},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.onramp:typeof r=="boolean"?r?E.DEFAULT_REMOTE_FEATURES.onramp:!1:r},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.activity:!!r},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?E.DEFAULT_REMOTE_FEATURES.reownBranding:!!r}},wt={localSettingsOverridden:new Set,getApiConfig(r,e){return e?.find(t=>t.id===r)},addWarning(r,e){if(r!==void 0){let t=ge[e],o=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(o)}},processFeature(r,e,t,o){let s=ge[r],n=e[s.localFeatureName];if(o){let i=this.getApiConfig(s.apiFeatureName,t);return i?.config===null?this.processFallbackFeature(r,n):i?.config?(n!==void 0&&this.addWarning(n,r),this.processApiFeature(r,i)):!1}return this.processFallbackFeature(r,n)},processApiFeature(r,e){return ge[r].processApi(e)},processFallbackFeature(r,e){return ge[r].processFallback(e)},async fetchRemoteFeatures(r){let e=r.features||{};this.localSettingsOverridden.clear();let t=null,o=!1;try{t=await K.fetchProjectConfig(),o=t!=null}catch(n){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",n)}let s=o?E.DEFAULT_REMOTE_FEATURES:E.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let n of pr){let i=this.processFeature(n,e,t,o);Object.assign(s,{[n]:i})}}catch(n){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",n),E.DEFAULT_REMOTE_FEATURES}if(o&&this.localSettingsOverridden.size>0){let n=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;O.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${n}`},"warning")}return s}};var ve=class{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,o)=>{if(t){let s=a.getNetworkData(t)?.requestedCaipNetworks?.find(c=>c.id===o);if(s)return s;let n=a.getNetworkData(t)?.caipNetwork;return n||a.getRequestedCaipNetworks(t).filter(c=>c.chainNamespace===t)?.[0]}return a.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>a.getCaipNetworks(t),this.getActiveChainNamespace=()=>a.state.activeChain,this.setRequestedCaipNetworks=(t,o)=>{a.setRequestedCaipNetworks(t,o)},this.getApprovedCaipNetworkIds=()=>a.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>a.state.activeChain===t||!t?a.state.activeCaipAddress:a.getAccountProp("caipAddress",t),this.setClientId=t=>{De.setClientId(t)},this.getProvider=t=>m.getProvider(t),this.getProviderType=t=>m.getProviderId(t),this.getPreferredAccountType=t=>d.state.preferredAccountTypes?.[t],this.setCaipAddress=(t,o)=>{d.setCaipAddress(t,o),t&&p.state.enableEmbedded&&this.close()},this.setBalance=(t,o,s)=>{d.setBalance(t,o,s)},this.setProfileName=(t,o)=>{d.setProfileName(t,o)},this.setProfileImage=(t,o)=>{d.setProfileImage(t,o)},this.setUser=(t,o)=>{d.setUser(t,o)},this.resetAccount=t=>{d.resetAccount(t)},this.setCaipNetwork=t=>{a.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,o)=>{a.setChainNetworkData(o,{caipNetwork:t})},this.setAllAccounts=(t,o)=>{d.setAllAccounts(t,o),p.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,o)=>{d.setStatus(t,o),v.isConnected()?w.setConnectionStatus("connected"):w.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>a.getAccountProp("address",t),this.setConnectors=t=>{let o=[...v.state.allConnectors,...t];v.setConnectors(o)},this.setConnections=(t,o)=>{R.setConnections(t,o)},this.fetchIdentity=t=>De.fetchIdentity(t),this.getReownName=t=>ue.getNamesForAddress(t),this.getConnectors=()=>v.getConnectors(),this.getConnectorImage=t=>ot.getConnectorImage(t),this.setConnectedWalletInfo=(t,o)=>{let s=m.getProviderId(o),n=t?{...t,type:s}:void 0;d.setConnectedWalletInfo(n,o)},this.getIsConnectedState=()=>!!a.state.activeCaipAddress,this.addAddressLabel=(t,o,s)=>{d.addAddressLabel(t,o,s)},this.removeAddressLabel=(t,o)=>{d.removeAddressLabel(t,o)},this.getAddress=t=>a.state.activeChain===t||!t?d.state.address:a.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>a.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{a.resetNetwork(t)},this.addConnector=t=>{v.addConnector(t)},this.resetWcConnection=()=>{R.resetWcConnection()},this.setAddressExplorerUrl=(t,o)=>{d.setAddressExplorerUrl(t,o)},this.setSmartAccountDeployed=(t,o)=>{d.setSmartAccountDeployed(t,o)},this.setSmartAccountEnabledNetworks=(t,o)=>{a.setSmartAccountEnabledNetworks(t,o)},this.setPreferredAccountType=(t,o)=>{d.setPreferredAccountType(t,o)},this.setEIP6963Enabled=t=>{p.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let o=e?.map(n=>n.namespace).filter(n=>!!n);if(o?.length)return[...new Set(o)];let s=t?.map(n=>n.chainNamespace);return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await wt.fetchRemoteFeatures(e),p.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&ct.setOnrampProviders(this.remoteFeatures.onramp),(p.state.remoteFeatures?.email||Array.isArray(p.state.remoteFeatures?.socials)&&p.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){let e=await K.fetchAllowedOrigins();if(e&&A.isClient()){let t=window.location.origin;Z.isOriginAllowed(t,e,Q.DEFAULT_ALLOWED_ANCESTORS)||O.open(_.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else O.open(_.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,B.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(o=>o.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&U.setThemeMode(e.themeMode),e.themeVariables&&U.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");a.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&a.setActiveCaipNetwork(t)}initializeConnectionController(e){R.setWcBasic(e.basic??!1)}initializeConnectorController(){v.initialize(this.chainNamespaces)}initializeProjectSettings(e){p.setProjectId(e.projectId),p.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){p.setDebug(e.debug!==!1),p.setEnableWalletConnect(e.enableWalletConnect!==!1),p.setEnableWalletGuide(e.enableWalletGuide!==!1),p.setEnableWallets(e.enableWallets!==!1),p.setEIP6963Enabled(e.enableEIP6963!==!1),p.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),p.setEnableAuthLogger(e.enableAuthLogger!==!1),p.setCustomRpcUrls(e.customRpcUrls),p.setEnableEmbedded(e.enableEmbedded),p.setAllWallets(e.allWallets),p.setIncludeWalletIds(e.includeWalletIds),p.setExcludeWalletIds(e.excludeWalletIds),p.setFeaturedWalletIds(e.featuredWalletIds),p.setTokens(e.tokens),p.setTermsConditionsUrl(e.termsConditionsUrl),p.setPrivacyPolicyUrl(e.privacyPolicyUrl),p.setCustomWallets(e.customWallets),p.setFeatures(e.features),p.setAllowUnsupportedChain(e.allowUnsupportedChain),p.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),p.setPreferUniversalLinks(e.experimental_preferUniversalLinks),p.setDefaultAccountTypes(e.defaultAccountTypes);let t=w.getPreferredAccountTypes()||{},o={...p.state.defaultAccountTypes,...t};d.setPreferredAccountTypes(o);let s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),p.setMetadata(e.metadata),p.setDisableAppend(e.disableAppend),p.setEnableEmbedded(e.enableEmbedded),p.setSIWX(e.siwx),!e.projectId){O.open(_.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===f.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");p.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return A.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let o=$.getUnsupportedNetwork(`${t}:${e}`);a.setActiveCaipNetwork(o)}}getDefaultNetwork(){return $.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return $.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return $.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(s=>s.id===e.defaultNetwork?.id);return t?$.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=a.state.activeChain,t=this.getAdapter(e),o=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");let s=await t.connectWalletConnect(o);this.close(),this.setClientId(s?.clientId||null),w.setConnectedNamespaces([...a.state.chains.keys()]),this.chainNamespaces.forEach(n=>{v.setConnectorId(b.CONNECTOR_TYPE_WALLET_CONNECT,n)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:o,provider:s,chain:n,caipNetwork:i,socialUri:c})=>{let l=a.state.activeChain,u=n||l,h=this.getAdapter(u);if(n&&n!==l&&!i){let C=this.getCaipNetworks().find(S=>S.chainNamespace===n);C&&this.setCaipNetwork(C)}if(!h)throw new Error("Adapter not found");let x=this.getCaipNetwork(u),P=await h.connect({id:e,info:t,type:o,provider:s,socialUri:c,chainId:i?.id||x?.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]||x?.rpcUrls?.default?.http?.[0]});if(!P)return;w.addConnectedNamespace(u),this.syncProvider({...P,chainNamespace:u});let I=d.state.allAccounts,{accounts:g}=I?.length>0?{accounts:[...I]}:await h.getAccounts({namespace:u,id:e});this.setAllAccounts(g,u),this.setStatus("connected",u),this.syncConnectedWalletInfo(u)},reconnectExternal:async({id:e,info:t,type:o,provider:s})=>{let n=a.state.activeChain,i=this.getAdapter(n);i?.reconnect&&(await i?.reconnect({id:e,info:t,type:o,provider:s,chainId:this.getCaipNetwork()?.id}),w.addConnectedNamespace(n),this.syncConnectedWalletInfo(n))},disconnect:async e=>{let t=e||a.state.activeChain,o=this.getAdapter(t),s=m.getProvider(t),n=m.getProviderId(t);await o?.disconnect({provider:s,providerType:n}),w.removeConnectedNamespace(t),m.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(a.state.activeChain)?.signMessage({message:e,address:d.state.address,provider:m.getProvider(a.state.activeChain)}))?.signature||"",sendTransaction:async e=>{let t=e.chainNamespace;if(E.SEND_SUPPORTED_NAMESPACES.includes(t)){let o=this.getAdapter(a.state.activeChain),s=m.getProvider(t);return(await o?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===f.CHAIN.EVM){let t=this.getAdapter(a.state.activeChain),o=m.getProvider(a.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:o,caipNetwork:s}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:d.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:a.state.activeChain}),d.state.profileImage||!1),getEnsAddress:async e=>await Z.resolveReownName(e),writeContract:async e=>{let t=this.getAdapter(a.state.activeChain),o=this.getCaipNetwork(),s=this.getCaipAddress(),n=m.getProvider(a.state.activeChain);if(!o||!s)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:o,provider:n,caipAddress:s}))?.hash},parseUnits:(e,t)=>this.getAdapter(a.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(a.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(a.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(a.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{let t=this.getAdapter(a.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(a.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{let t=this.getCaipNetwork(e);!t||!d.state.address||this.updateNativeBalance(d.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},R.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(m.getProviderId(a.state.activeChain)===b.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let s=m.getProvider(t),n=m.getProviderId(t);if(e.chainNamespace===a.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:s,providerType:n});else if(this.setCaipNetwork(e),n===b.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let o=t.chains||[],s=t.accounts.map(n=>{let{chainId:i,chainNamespace:c}=F.parseCaipAddress(n);return`${c}:${i}`});return Array.from(new Set([...o,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,o)=>{let s=e?.find(n=>n.namespace===o);return s?(s.construct({namespace:o,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[o]=s):t[o]=new ye({namespace:o,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let o=w.getConnectionStatus();o==="connected"?this.setStatus("connecting",e):o==="disconnected"?(w.clearAddressCache(),this.setStatus(o,e)):this.setStatus(o,e),t.on("switchNetwork",({address:s,chainId:n})=>{let i=this.getCaipNetworks().find(u=>u.id===n||u.caipNetworkId===n),c=a.state.activeChain===e,l=a.getAccountProp("address",e);if(i){let u=c&&s?s:l;u&&this.syncAccount({address:u,chainId:i.id,chainNamespace:e})}else this.setUnsupportedNetwork(n)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{let s=d.state.address,n=a.state.activeCaipNetwork;!s||!n?.id||this.updateNativeBalance(s,n.id,n.chainNamespace)}),t.on("accountChanged",({address:s,chainId:n})=>{let i=a.state.activeChain===e;i&&n?this.syncAccount({address:s,chainId:n,chainNamespace:e}):i&&a.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:a.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,n,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=v.getConnectorId(e);switch(this.setStatus("connecting",e),t){case f.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case f.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),o=v.getConnectorId(e),s=this.getCaipNetwork(e),n=v.getConnectors(e).find(i=>i.id===o);try{if(!t||!n)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");let i=await t?.syncConnection({namespace:e,id:n.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});if(i){let c=await t?.getAccounts({namespace:e,id:n.id});c&&c.accounts.length>0?this.setAllAccounts(c.accounts,e):this.setAllAccounts([A.createAccount(e,i.address,"eoa")],e),this.syncProvider({...i,chainNamespace:e}),await this.syncAccount({...i,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async t=>{let o=this.getAdapter(t),s=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],n=a.state.activeCaipNetwork?.id,i=s.find(c=>{let{chainId:l}=F.parseCaipAddress(c);return l===n?.toString()})||s[0];if(i){let c=F.validateCaipAddress(i),{chainId:l,address:u}=F.parseCaipAddress(c);if(m.setProviderId(t,b.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&a.state.activeCaipNetwork&&o?.namespace!==f.CHAIN.EVM){let h=o?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:a.state.activeCaipNetwork});m.setProvider(t,h)}else m.setProvider(t,this.universalProvider);v.setConnectorId(f.CONNECTOR_ID.WALLET_CONNECT,t),w.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:u,chainId:l,chainNamespace:t})}else this.setStatus("disconnected",t);this.syncConnectedWalletInfo(t),await a.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(o=>{let{address:s}=F.parseCaipAddress(o);return s}).filter((o,s,n)=>n.indexOf(o)===s);t&&this.setAllAccounts(t.map(o=>A.createAccount(e,o,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:o,chainNamespace:s}){m.setProviderId(s,e),m.setProvider(s,t),v.setConnectorId(o,s)}async syncAllAccounts(e){let t=v.getConnectorId(e);if(!t)return;let s=await this.getAdapter(e)?.getAccounts({namespace:e,id:t});s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){let t=e.chainNamespace===a.state.activeChain,o=a.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:n,chainNamespace:i}=e,{chainId:c}=w.getActiveNetworkProps(),l=n||c,u=a.state.activeCaipNetwork?.name===f.UNSUPPORTED_NETWORK_NAME,h=a.getNetworkProp("supportsAllNetworks",i);if(this.setStatus("connected",i),!(u&&!h)&&l){let x=this.getCaipNetworks().find(g=>g.id.toString()===l.toString()),P=this.getCaipNetworks().find(g=>g.chainNamespace===i);if(!h&&!x&&!P){let g=this.getApprovedCaipNetworkIds()||[],C=g.find(T=>F.parseCaipNetworkId(T)?.chainId===l.toString()),S=g.find(T=>F.parseCaipNetworkId(T)?.chainNamespace===i);x=this.getCaipNetworks().find(T=>T.caipNetworkId===C),P=this.getCaipNetworks().find(T=>T.caipNetworkId===S||"deprecatedCaipNetworkId"in T&&T.deprecatedCaipNetworkId===S)}let I=x||P;I?.chainNamespace===a.state.activeChain?p.state.enableNetworkSwitch&&!p.state.allowUnsupportedChain&&a.state.activeCaipNetwork?.name===f.UNSUPPORTED_NETWORK_NAME?a.showUnsupportedChainUI():this.setCaipNetwork(I):t||o&&this.setCaipNetworkOfNamespace(o,i),this.syncConnectedWalletInfo(i),de.isLowerCaseMatch(s,d.state.address)||this.syncAccountInfo(s,I?.id,i),t?await this.syncBalance({address:s,chainId:I?.id,chainNamespace:i}):await this.syncBalance({address:s,chainId:o?.id,chainNamespace:i})}}async syncAccountInfo(e,t,o){let s=this.getCaipAddress(o),n=t||s?.split(":")[1];if(!n)return;let i=`${o}:${n}:${e}`;this.setCaipAddress(i,o),await this.syncIdentity({address:e,chainId:n,chainNamespace:o})}async syncReownName(e,t){try{let o=await this.getReownName(e);if(o[0]){let s=o[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=v.getConnectorId(e),o=m.getProviderId(e);if(o===b.CONNECTOR_TYPE_ANNOUNCED||o===b.CONNECTOR_TYPE_INJECTED){if(t){let s=this.getConnectors().find(n=>n.id===t);if(s){let{info:n,name:i,imageUrl:c}=s,l=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:i,icon:l,...n},e)}}}else if(o===b.CONNECTOR_TYPE_WALLET_CONNECT){let s=m.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(t&&t===f.CONNECTOR_ID.COINBASE){let s=this.getConnectors().find(n=>n.id===f.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}}async syncBalance(e){!tt.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(o=>o.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,o){let s=this.getAdapter(o),n=a.getCaipNetworkByNamespace(o,t);if(s){let i=await s.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});return this.setBalance(i.balance,i.symbol,o),i}}async initializeUniversalAdapter(){let e=lt.createLogger((o,...s)=>{o&&this.handleAlertError(o),console.error(...s)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};p.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await nt.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{R.setUri(e)}),this.universalProvider.on("connect",R.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),R.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(s=>s.id==e),o=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}o?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(Z.isSessionEventData(e)){let{name:t,data:o}=e.params.event;t==="accountsChanged"&&Array.isArray(o)&&A.isCaipAddress(o[0])&&this.syncAccount(F.parseCaipAddress(o[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&A.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){B.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let t=Object.entries(_.UniversalProviderErrors).find(([,{message:c}])=>e.message.includes(c)),[o,s]=t??[],{message:n,alertErrorKey:i}=s??{};if(o&&n&&!this.reportedAlertErrors[o]){let c=_.ALERT_ERRORS[i];c&&(O.open(c,"error"),this.reportedAlertErrors[o]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let o=e;o.namespace=t,o.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=o)}async open(e){if(await this.injectModalUi(),e?.uri&&R.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return G.open({...e,data:{swap:e.arguments}});default:}return G.open(e)}async close(){await this.injectModalUi(),G.close()}setLoading(e,t){G.setLoading(e,t)}async disconnect(e){await R.disconnect(e)}getSIWX(){return p.state.siwx}getError(){return""}getChainId(){return a.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(o=>o.id===e.id);if(!t){O.open(_.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await a.switchActiveNetwork(t)}getWalletProvider(){return a.state.activeChain?m.state.providers[a.state.activeChain]:null}getWalletProviderType(){return m.getProviderId(a.state.activeChain)}subscribeProviders(e){return m.subscribeProviders(e)}getThemeMode(){return U.state.themeMode}getThemeVariables(){return U.state.themeVariables}setThemeMode(e){U.setThemeMode(e),dt(U.state.themeMode)}setTermsConditionsUrl(e){p.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){p.setPrivacyPolicyUrl(e)}setThemeVariables(e){U.setThemeVariables(e),ft(U.state.themeVariables)}subscribeTheme(e){return U.subscribe(e)}getWalletInfo(){return d.state.connectedWalletInfo}getAccount(e){let t=v.getAuthConnector(e),o=a.getAccountData(e),s=a.state.activeChain,n=w.getConnectedConnectorId(e);if(o)return{allAccounts:o.allAccounts,caipAddress:o.caipAddress,address:A.getPlainAddress(o.caipAddress),isConnected:!!o.caipAddress,status:o.status,embeddedWalletInfo:t&&n===f.CONNECTOR_ID.AUTH?{user:o.user?{...o.user,username:w.getConnectedSocialUsername()}:void 0,authProvider:o.socialProvider||"email",accountType:o.preferredAccountTypes?.[e||s],isSmartAccountDeployed:!!o.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let o=()=>{let s=this.getAccount(t);s&&e(s)};t?a.subscribeChainProp("accountState",o,t):a.subscribe(o),v.subscribe(o)}subscribeNetwork(e){return a.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return d.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){d.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){a.subscribeKey("activeCaipNetwork",e)}getState(){return V.state}subscribeState(e){return V.subscribe(e)}showErrorMessage(e){_e.showError(e)}showSuccessMessage(e){_e.showSuccess(e)}getEvent(){return{...B.state}}subscribeEvents(e){return B.subscribe(e)}replace(e){se.replace(e)}redirect(e){se.push(e)}popTransactionStack(e){se.popTransactionStack(e)}isOpen(){return G.state.open}isTransactionStackEmpty(){return se.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){p.setFeatures(e)}updateRemoteFeatures(e){p.setRemoteFeatures(e)}updateOptions(e){let o={...p.state||{},...e};p.setOptions(o)}setConnectMethodsOrder(e){p.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){p.setWalletFeaturesOrder(e)}setCollapseWallets(e){p.setCollapseWallets(e)}setSocialsOrder(e){p.setSocialsOrder(e)}getConnectMethodsOrder(){return ut.getConnectOrderMethod(p.state.features,v.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let o=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===o.id)||a.addNetwork(o)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&a.removeNetwork(e,t)}};var At=!1,we=class extends ve{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{fe.checkIfRequestExists(t)?fe.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Re.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Re.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,o)=>{let s=fe.checkIfRequestIsSafe(o),n=d.state.address,i=a.state.activeCaipNetwork;s||(n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{let t=a.state.activeChain;v.getConnectorId(t)===f.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(t=>{let o=a.state.activeChain,s=o===f.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,n=p.state.defaultAccountTypes[o],i=d.state.preferredAccountTypes?.[o],c=t.preferredAccountType||i||n;de.isLowerCaseMatch(t.address,d.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:o}),this.setCaipAddress(s,o),this.setUser({...d.state.user||{},...t},o),this.setSmartAccountDeployed(!!t.smartAccountDeployed,o),this.setPreferredAccountType(c,o);let l=t.accounts?.map(u=>A.createAccount(o,u.address,u.type||i||n));this.setAllAccounts(l||[A.createAccount(o,t.address,t.preferredAccountType||c)],o),this.setLoading(!1,o)}),e.onSocialConnected(({userName:t})=>{this.setUser({...d.state.user||{},username:t},a.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,a.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:o})=>{t&&this.setPreferredAccountType(o,a.state.activeChain)})}async syncAuthConnector(e,t){let o=f.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!o)return;this.setLoading(!0,t);let s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);let n=e.getEmail(),i=e.getUsername();this.setUser({...d.state?.user||{},username:i,email:n},a.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:c}=await e.isConnected(),l=U.getSnapshot(),u=p.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:rt(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),t&&o&&(c&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:f.CONNECTOR_ID.AUTH,info:{name:f.CONNECTOR_ID.AUTH},type:b.CONNECTOR_TYPE_AUTH,provider:e,chainId:a.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):v.getConnectorId(t)===f.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),w.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!A.isTelegram())return;let t=w.getTelegramSocialProvider();if(!t||!A.isClient())return;let s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;d.setSocialProvider(t,e),await this.authProvider?.init();let n=v.getAuthConnector();t&&n&&(this.setLoading(!0,e),await R.connectExternal({id:n.id,type:n.type,socialUri:s},n.chain),w.setConnectedSocialProvider(t),w.removeTelegramSocialProvider(),B.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!f.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let o=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,n=o||s;!this.authProvider&&this.options?.projectId&&n&&(this.authProvider=Ce.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:_.EmbeddedWalletAbortController,onTimeout:i=>{i==="iframe_load_failed"?O.open(_.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):i==="iframe_request_timeout"?O.open(_.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):i==="unverified_domain"&&O.open(_.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),V.subscribeOpen(i=>{!i&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&K.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=a.state.activeChain,o=e.chainNamespace,s=this.getAddressByChainNamespace(o);if(o===t&&s){let i=this.getAdapter(o),c=m.getProvider(o),l=m.getProviderId(o);await i?.switchNetwork({caipNetwork:e,provider:c,providerType:l}),this.setCaipNetwork(e)}else{let c=m.getProviderId(t)===b.CONNECTOR_TYPE_AUTH,l=m.getProviderId(o),u=l===b.CONNECTOR_TYPE_AUTH,h=f.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(o);if((c&&l===void 0||u)&&h)try{a.state.activeChain=e.chainNamespace,s?await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:l}):await this.connectionControllerClient?.connectExternal?.({id:f.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:o,chainId:e.id,type:b.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:l})}else l===b.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:o}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t),this.chainAdapters?.[t].syncConnectors(this.options,this)}),await this.injectModalUi(),V.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:o}){let s=`${o}:${t}`,n=this.caipNetworks?.find(i=>i.caipNetworkId===s);if(o!==f.CHAIN.EVM||n?.testnet){this.setProfileName(null,o),this.setProfileImage(null,o);return}try{let{name:i,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(i,o),this.setProfileImage(c,o)}catch{await this.syncReownName(e,o),t!==1&&this.setProfileImage(null,o)}}syncConnectedWalletInfo(e){let t=m.getProviderId(e);if(t===b.CONNECTOR_TYPE_AUTH){let o=this.authProvider;if(o){let s=w.getConnectedSocialProvider()??"email",n=o.getEmail()??o.getUsername();this.setConnectedWalletInfo({name:t,identifier:n,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(A.isClient()&&!At)try{let e={...E.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),A.isClient()&&!document.querySelector("w3m-modal")){let s=document.createElement("w3m-modal");!p.state.disableAppend&&!p.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}At=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!A.isClient())return;let o=[];(t.email||t.socials&&t.socials.length>0)&&o.push(import("./embedded-wallet-P47VCDOR.js")),t.email&&o.push(import("./email-7NZ554GK.js")),t.socials&&o.push(import("./socials-MTIVMCLR.js")),t.swaps&&t.swaps.length>0&&o.push(import("./swaps-NJ24T7D4.js")),e.send&&o.push(import("./send-AI3AMS4I.js")),e.receive&&o.push(import("./receive-FUHT6SKJ.js")),t.onramp&&t.onramp.length>0&&o.push(import("./onramp-AZQZ2ZR5.js")),t.activity&&o.push(import("./transactions-4IYUHFWV.js")),e.pay&&o.push(import("./exports-JLYTVHCN.js")),await Promise.all([...o,import("./exports-5HBIE2VU.js"),import("./w3m-modal-IS7Y5LQD.js")])}};var Tt="1.7.7";var Ae;function bs(r){return Ae||(Ae=new we({...r,sdkVersion:A.generateSdkVersion(r.adapters??[],"react",Tt)}),vt(Ae)),Ae}var W=typeof window>"u"||"Deno"in globalThis;function N(){}function bt(r,e){return typeof r=="function"?r(e):r}function kt(r){return typeof r=="number"&&r>=0&&r!==1/0}function St(r,e){return Math.max(r+(e||0)-Date.now(),0)}function ie(r,e){return typeof r=="function"?r(e):r}function Pt(r,e){return typeof r=="function"?r(e):r}function Te(r,e){let{type:t="all",exact:o,fetchStatus:s,predicate:n,queryKey:i,stale:c}=r;if(i){if(o){if(e.queryHash!==ae(i,e.options))return!1}else if(!H(e.queryKey,i))return!1}if(t!=="all"){let l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||n&&!n(e))}function Ee(r,e){let{exact:t,status:o,predicate:s,mutationKey:n}=r;if(n){if(!e.options.mutationKey)return!1;if(t){if(M(e.options.mutationKey)!==M(n))return!1}else if(!H(e.options.mutationKey,n))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function ae(r,e){return(e?.queryKeyHashFn||M)(r)}function M(r){return JSON.stringify(r,(e,t)=>je(t)?Object.keys(t).sort().reduce((o,s)=>(o[s]=t[s],o),{}):t)}function H(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>H(r[t],e[t])):!1}function Be(r,e){if(r===e)return r;let t=Et(r)&&Et(e);if(t||je(r)&&je(e)){let o=t?r:Object.keys(r),s=o.length,n=t?e:Object.keys(e),i=n.length,c=t?[]:{},l=new Set(o),u=0;for(let h=0;h<i;h++){let x=t?h:n[h];(!t&&l.has(x)||t)&&r[x]===void 0&&e[x]===void 0?(c[x]=void 0,u++):(c[x]=Be(r[x],e[x]),c[x]===r[x]&&r[x]!==void 0&&u++)}return s===i&&u===s?r:c}return e}function It(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}function Et(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function je(r){if(!Nt(r))return!1;let e=r.constructor;if(e===void 0)return!0;let t=e.prototype;return!(!Nt(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Nt(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ot(r){return new Promise(e=>{setTimeout(e,r)})}function Ut(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Be(r,e):e}function Rt(r,e,t=0){let o=[...r,e];return t&&o.length>t?o.slice(1):o}function _t(r,e,t=0){let o=[e,...r];return t&&o.length>t?o.slice(0,-1):o}var X=Symbol();function Ne(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===X?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Qe(r,e){return typeof r=="function"?r(...e):!!r}var Mt=r=>setTimeout(r,0);function ur(){let r=[],e=0,t=c=>{c()},o=c=>{c()},s=Mt,n=c=>{e?r.push(c):s(()=>{t(c)})},i=()=>{let c=r;r=[],c.length&&s(()=>{o(()=>{c.forEach(l=>{t(l)})})})};return{batch:c=>{let l;e++;try{l=c()}finally{e--,e||i()}return l},batchCalls:c=>(...l)=>{n(()=>{c(...l)})},schedule:n,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{o=c},setScheduler:c=>{s=c}}}var y=ur();var D=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var dr=class extends D{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!W&&window.addEventListener){let e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){let r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},be=new dr;var fr=class extends D{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!W&&window.addEventListener){let e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},ee=new fr;function Dt(){let r,e,t=new Promise((s,n)=>{r=s,e=n});t.status="pending",t.catch(()=>{});function o(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{o({status:"fulfilled",value:s}),r(s)},t.reject=s=>{o({status:"rejected",reason:s}),e(s)},t}function hr(r){return Math.min(1e3*2**r,3e4)}function He(r){return(r??"online")==="online"?ee.isOnline():!0}var Ft=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function ke(r){return r instanceof Ft}function Se(r){let e=!1,t=0,o=!1,s,n=Dt(),i=C=>{o||(P(new Ft(C)),r.abort?.())},c=()=>{e=!0},l=()=>{e=!1},u=()=>be.isFocused()&&(r.networkMode==="always"||ee.isOnline())&&r.canRun(),h=()=>He(r.networkMode)&&r.canRun(),x=C=>{o||(o=!0,r.onSuccess?.(C),s?.(),n.resolve(C))},P=C=>{o||(o=!0,r.onError?.(C),s?.(),n.reject(C))},I=()=>new Promise(C=>{s=S=>{(o||u())&&C(S)},r.onPause?.()}).then(()=>{s=void 0,o||r.onContinue?.()}),g=()=>{if(o)return;let C,S=t===0?r.initialPromise:void 0;try{C=S??r.fn()}catch(T){C=Promise.reject(T)}Promise.resolve(C).then(x).catch(T=>{if(o)return;let j=r.retry??(W?0:3),re=r.retryDelay??hr,ce=typeof re=="function"?re(t,T):re,le=j===!0||typeof j=="number"&&t<j||typeof j=="function"&&j(t,T);if(e||!le){P(T);return}t++,r.onFail?.(t,T),Ot(ce).then(()=>u()?void 0:I()).then(()=>{e?P(T):g()})})};return{promise:n,cancel:i,continue:()=>(s?.(),n),cancelRetry:c,continueRetry:l,canStart:h,start:()=>(h()?g():I().then(g),n)}}var Pe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kt(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(W?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var Lt=class extends Pe{#e;#t;#r;#o;#s;#i;#a;constructor(r){super(),this.#a=!1,this.#i=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#o=r.client,this.#r=this.#o.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=Cr(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(r){this.options={...this.#i,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){let t=Ut(this.state.data,r,this.options);return this.#n({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#n({type:"setState",state:r,setStateOptions:e})}cancel(r){let e=this.#s?.promise;return this.#s?.cancel(r),e?e.then(N).catch(N):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>Pt(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===X||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>ie(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!St(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(r&&this.setOptions(r),!this.options.queryFn){let l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}let t=new AbortController,o=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},s=()=>{let l=Ne(this.options,e),h=(()=>{let x={client:this.#o,queryKey:this.queryKey,meta:this.meta};return o(x),x})();return this.#a=!1,this.options.persister?this.options.persister(l,h,this):l(h)},i=(()=>{let l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:s};return o(l),l})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#n({type:"fetch",meta:i.fetchOptions?.meta});let c=l=>{ke(l)&&l.silent||this.#n({type:"error",error:l}),ke(l)||(this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#s=Se({initialPromise:e?.initialPromise,fn:i.fetchFn,abort:t.abort.bind(t),onSuccess:l=>{if(l===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){c(u);return}this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:c,onFail:(l,u)=>{this.#n({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#s.start()}#n(r){let e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...mr(t.data,this.options),fetchMeta:r.meta??null};case"success":return{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let o=r.error;return ke(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),y.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function mr(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:He(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Cr(r){let e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,o=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Wt=class extends D{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){let o=e.queryKey,s=e.queryHash??ae(o,e),n=this.get(s);return n||(n=new Lt({client:r,queryKey:o,queryHash:s,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(o)}),this.add(n)),n}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){let e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){y.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Te(e,t))}findAll(r={}){let e=this.getAll();return Object.keys(r).length>0?e.filter(t=>Te(r,t)):e}notify(r){y.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){y.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){y.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}};var qt=class extends Pe{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||ze(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){let e=()=>{this.#o({type:"continue"})};this.#r=Se({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(s,n)=>{this.#o({type:"failed",failureCount:s,error:n})},onPause:()=>{this.#o({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t=this.state.status==="pending",o=!this.#r.canStart();try{if(t)e();else{this.#o({type:"pending",variables:r,isPaused:o}),await this.#t.config.onMutate?.(r,this);let n=await this.options.onMutate?.(r);n!==this.state.context&&this.#o({type:"pending",context:n,variables:r,isPaused:o})}let s=await this.#r.start();return await this.#t.config.onSuccess?.(s,r,this.state.context,this),await this.options.onSuccess?.(s,r,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,r,this.state.context),this.#o({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,r,this.state.context,this),await this.options.onError?.(s,r,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,r,this.state.context),s}finally{this.#o({type:"error",error:s})}}finally{this.#t.runNext(this)}}#o(r){let e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),y.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function ze(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jt=class extends D{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){let o=new qt({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(o),o}add(r){this.#e.add(r);let e=Ie(r);if(typeof e=="string"){let t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){let e=Ie(r);if(typeof e=="string"){let t=this.#t.get(e);if(t)if(t.length>1){let o=t.indexOf(r);o!==-1&&t.splice(o,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){let e=Ie(r);if(typeof e=="string"){let o=this.#t.get(e)?.find(s=>s.state.status==="pending");return!o||o===r}else return!0}runNext(r){let e=Ie(r);return typeof e=="string"?this.#t.get(e)?.find(o=>o!==r&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){y.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Ee(e,t))}findAll(r={}){return this.getAll().filter(e=>Ee(r,e))}notify(r){y.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){let r=this.getAll().filter(e=>e.state.isPaused);return y.batch(()=>Promise.all(r.map(e=>e.continue().catch(N))))}};function Ie(r){return r.options.scope?.id}function Ke(r){return{onFetch:(e,t)=>{let o=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],i=e.state.data?.pageParams||[],c={pages:[],pageParams:[]},l=0,u=async()=>{let h=!1,x=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},P=Ne(e.options,e.fetchOptions),I=async(g,C,S)=>{if(h)return Promise.reject();if(C==null&&g.pages.length)return Promise.resolve(g);let j=(()=>{let Ye={client:e.client,queryKey:e.queryKey,pageParam:C,direction:S?"backward":"forward",meta:e.options.meta};return x(Ye),Ye})(),re=await P(j),{maxPages:ce}=e.options,le=S?_t:Rt;return{pages:le(g.pages,re,ce),pageParams:le(g.pageParams,C,ce)}};if(s&&n.length){let g=s==="backward",C=g?xr:Bt,S={pages:n,pageParams:i},T=C(o,S);c=await I(S,T,g)}else{let g=r??n.length;do{let C=l===0?i[0]??o.initialPageParam:Bt(o,c);if(l>0&&C==null)break;c=await I(c,C),l++}while(l<g)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=u}}}function Bt(r,{pages:e,pageParams:t}){let o=e.length-1;return e.length>0?r.getNextPageParam(e[o],e,t[o],t):void 0}function xr(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var yr=class{#e;#t;#r;#o;#s;#i;#a;#n;constructor(r={}){this.#e=r.queryCache||new Wt,this.#t=r.mutationCache||new jt,this.#r=r.defaultOptions||{},this.#o=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=be.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=ee.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(r){return this.#e.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#t.findAll({...r,status:"pending"}).length}getQueryData(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(r){let e=this.defaultQueryOptions(r),t=this.#e.build(this,e),o=t.state.data;return o===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(ie(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(r){return this.#e.findAll(r).map(({queryKey:e,state:t})=>{let o=t.data;return[e,o]})}setQueryData(r,e,t){let o=this.defaultQueryOptions({queryKey:r}),n=this.#e.get(o.queryHash)?.state.data,i=bt(e,n);if(i!==void 0)return this.#e.build(this,o).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return y.batch(()=>this.#e.findAll(r).map(({queryKey:o})=>[o,this.setQueryData(o,e,t)]))}getQueryState(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state}removeQueries(r){let e=this.#e;y.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){let t=this.#e;return y.batch(()=>(t.findAll(r).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){let t={revert:!0,...e},o=y.batch(()=>this.#e.findAll(r).map(s=>s.cancel(t)));return Promise.all(o).then(N).catch(N)}invalidateQueries(r,e={}){return y.batch(()=>(this.#e.findAll(r).forEach(t=>{t.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},e)))}refetchQueries(r,e={}){let t={...e,cancelRefetch:e.cancelRefetch??!0},o=y.batch(()=>this.#e.findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let n=s.fetch(void 0,t);return t.throwOnError||(n=n.catch(N)),s.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(o).then(N)}fetchQuery(r){let e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);let t=this.#e.build(this,e);return t.isStaleByTime(ie(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(N).catch(N)}fetchInfiniteQuery(r){return r.behavior=Ke(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(N).catch(N)}ensureInfiniteQueryData(r){return r.behavior=Ke(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return ee.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(r){this.#r=r}setQueryDefaults(r,e){this.#o.set(M(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){let e=[...this.#o.values()],t={};return e.forEach(o=>{H(r,o.queryKey)&&Object.assign(t,o.defaultOptions)}),t}setMutationDefaults(r,e){this.#s.set(M(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){let e=[...this.#s.values()],t={};return e.forEach(o=>{H(r,o.mutationKey)&&Object.assign(t,o.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;let e={...this.#r.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=ae(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===X&&(e.enabled=!1),e}defaultMutationOptions(r){return r?._defaulted?r:{...this.#r.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};var Ve=class extends D{#e;#t=void 0;#r;#o;constructor(r,e){super(),this.#e=r,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){let e=this.options;this.options=this.#e.defaultMutationOptions(r),It(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&M(e.mutationKey)!==M(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#s(),this.#i(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(r,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#s(){let r=this.#r?.state??ze();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#i(r){y.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#t.variables,t=this.#t.context;r?.type==="success"?(this.#o.onSuccess?.(r.data,e,t),this.#o.onSettled?.(r.data,null,e,t)):r?.type==="error"&&(this.#o.onError?.(r.error,e,t),this.#o.onSettled?.(void 0,r.error,e,t))}this.listeners.forEach(e=>{e(this.#t)})})}};var te=z(oe(),1),Vt=z(Kt(),1),Ge=te.createContext(void 0),$e=r=>{let e=te.useContext(Ge);if(r)return r;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},wr=({client:r,children:e})=>(te.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),(0,Vt.jsx)(Ge.Provider,{value:r,children:e}));var q=z(oe(),1);function Ar(r,e){let t=$e(e),[o]=q.useState(()=>new Ve(t,r));q.useEffect(()=>{o.setOptions(r)},[o,r]);let s=q.useSyncExternalStore(q.useCallback(i=>o.subscribe(y.batchCalls(i)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),n=q.useCallback((i,c)=>{o.mutate(i,c).catch(N)},[o]);if(s.error&&Qe(o.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:n,mutateAsync:s.mutate}}export{ir as a,Ce as b,ar as c,Le as d,Z as e,J as f,xe as g,Hr as h,zr as i,bs as j,yr as k,wr as l,Ar as m};
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
