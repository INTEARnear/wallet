function l(e,t){return e.exec(t)?.groups}var B=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Z=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,v=/^\(.+?\).*?$/;var U=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function K(e){return U.test(e)}function L(e){return l(U,e)}var D=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function N(e){return D.test(e)}function J(e){return l(D,e)}var W=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function V(e){return W.test(e)}function q(e){return l(W,e)}var G=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function $(e){return G.test(e)}function H(e){return l(G,e)}var Q=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function X(e){return Q.test(e)}function Y(e){return l(Q,e)}var ee=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function te(e){return ee.test(e)}function re(e){return l(ee,e)}var me=/^receive\(\) external payable$/;function ne(e){return me.test(e)}var oe=new Set(["indexed"]),w=new Set(["calldata","memory","storage"]);var ae="1.0.8";var c=class e extends Error{constructor(t,r={}){let o=r.cause instanceof e?r.cause.details:r.cause?.message?r.cause.message:r.details,n=r.cause instanceof e&&r.cause.docsPath||r.docsPath,i=[t||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...o?[`Details: ${o}`]:[],`Version: abitype@${ae}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=o,this.docsPath=n,this.metaMessages=r.metaMessages,this.shortMessage=t}};var S=class extends c{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},P=class extends c{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}};var A=class extends c{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},E=class extends c{constructor({param:t,name:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},M=class extends c{constructor({param:t,type:r,modifier:o}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${o}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},I=class extends c{constructor({param:t,type:r,modifier:o}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${o}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${o}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},k=class extends c{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}};var d=class extends c{constructor({signature:t,type:r}){super(`Invalid ${r} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},O=class extends c{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},R=class extends c{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}};var T=class extends c{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}};var j=class extends c{constructor({current:t,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};function ie(e,t,r){let o="";if(r)for(let n of Object.entries(r)){if(!n)continue;let i="";for(let a of n[1])i+=`[${a.type}${a.name?`:${a.name}`:""}]`;o+=`(${n[0]}{${i}})`}return t?`${t}:${e}${o}`:e}var z=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function se(e,t={}){if(V(e))return fe(e,t);if(N(e))return de(e,t);if(K(e))return ye(e,t);if(X(e))return be(e,t);if(te(e))return xe(e);if(ne(e))return{type:"receive",stateMutability:"payable"};throw new O({signature:e})}function fe(e,t={}){let r=q(e);if(!r)throw new d({signature:e,type:"function"});let o=f(r.parameters),n=[],i=o.length;for(let s=0;s<i;s++)n.push(y(o[s],{modifiers:w,structs:t,type:"function"}));let a=[];if(r.returns){let s=f(r.returns),u=s.length;for(let m=0;m<u;m++)a.push(y(s[m],{modifiers:w,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:n,outputs:a}}function de(e,t={}){let r=J(e);if(!r)throw new d({signature:e,type:"event"});let o=f(r.parameters),n=[],i=o.length;for(let a=0;a<i;a++)n.push(y(o[a],{modifiers:oe,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:n}}function ye(e,t={}){let r=L(e);if(!r)throw new d({signature:e,type:"error"});let o=f(r.parameters),n=[],i=o.length;for(let a=0;a<i;a++)n.push(y(o[a],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:n}}function be(e,t={}){let r=Y(e);if(!r)throw new d({signature:e,type:"constructor"});let o=f(r.parameters),n=[],i=o.length;for(let a=0;a<i;a++)n.push(y(o[a],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:n}}function xe(e){let t=re(e);if(!t)throw new d({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}var ge=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,he=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ve=/^u?int$/;function y(e,t){let r=ie(e,t?.type,t?.structs);if(z.has(r))return z.get(r);let o=v.test(e),n=l(o?he:ge,e);if(!n)throw new A({param:e});if(n.name&&we(n.name))throw new E({param:e,name:n.name});let i=n.name?{name:n.name}:{},a=n.modifier==="indexed"?{indexed:!0}:{},s=t?.structs??{},u,m={};if(o){u="tuple";let h=f(n.type),b=[],C=h.length;for(let x=0;x<C;x++)b.push(y(h[x],{structs:s}));m={components:b}}else if(n.type in s)u="tuple",m={components:s[n.type]};else if(ve.test(n.type))u=`${n.type}256`;else if(u=n.type,t?.type!=="struct"&&!F(u))throw new P({type:u});if(n.modifier){if(!t?.modifiers?.has?.(n.modifier))throw new M({param:e,type:t?.type,modifier:n.modifier});if(w.has(n.modifier)&&!Se(u,!!n.array))throw new I({param:e,type:t?.type,modifier:n.modifier})}let p={type:`${u}${n.array??""}`,...i,...a,...m};return z.set(r,p),p}function f(e,t=[],r="",o=0){let n=e.trim().length;for(let i=0;i<n;i++){let a=e[i],s=e.slice(i+1);switch(a){case",":return o===0?f(s,[...t,r.trim()]):f(s,t,`${r}${a}`,o);case"(":return f(s,t,`${r}${a}`,o+1);case")":return f(s,t,`${r}${a}`,o-1);default:return f(s,t,`${r}${a}`,o)}}if(r==="")return t;if(o!==0)throw new j({current:r,depth:o});return t.push(r.trim()),t}function F(e){return e==="address"||e==="bool"||e==="function"||e==="string"||B.test(e)||Z.test(e)}var $e=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function we(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||B.test(e)||Z.test(e)||$e.test(e)}function Se(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function ue(e){let t={},r=e.length;for(let a=0;a<r;a++){let s=e[a];if(!$(s))continue;let u=H(s);if(!u)throw new d({signature:s,type:"struct"});let m=u.properties.split(";"),p=[],h=m.length;for(let b=0;b<h;b++){let x=m[b].trim();if(!x)continue;let le=y(x,{type:"struct"});p.push(le)}if(!p.length)throw new R({signature:s});t[u.name]=p}let o={},n=Object.entries(t),i=n.length;for(let a=0;a<i;a++){let[s,u]=n[a];o[s]=ce(u,t)}return o}var Pe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function ce(e,t,r=new Set){let o=[],n=e.length;for(let i=0;i<n;i++){let a=e[i];if(v.test(a.type))o.push(a);else{let u=l(Pe,a.type);if(!u?.type)throw new k({abiParameter:a});let{array:m,type:p}=u;if(p in t){if(r.has(p))throw new T({type:p});o.push({...a,type:`tuple${m??""}`,components:ce(t[p]??[],t,new Set([...r,p]))})}else if(F(p))o.push(a);else throw new S({type:p})}}return o}function Ae(e){let t=ue(e),r=[],o=e.length;for(let n=0;n<o;n++){let i=e[n];$(i)||r.push(se(i,t))}return r}var pe=/^tuple(?<array>(\[(\d*)\])*)$/;function _(e){let t=e.type;if(pe.test(e.type)&&"components"in e){t="(";let r=e.components.length;for(let n=0;n<r;n++){let i=e.components[n];t+=_(i),n<r-1&&(t+=", ")}let o=l(pe,e.type);return t+=`)${o?.array??""}`,_({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function g(e){let t="",r=e.length;for(let o=0;o<r;o++){let n=e[o];t+=_(n),o!==r-1&&(t+=", ")}return t}function Ee(e){return e.type==="function"?`function ${e.name}(${g(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${g(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${g(e.inputs)})`:e.type==="error"?`error ${e.name}(${g(e.inputs)})`:e.type==="constructor"?`constructor(${g(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}export{Ee as a,Ae as b};
