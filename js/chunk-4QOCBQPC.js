import{A as f,B as o,I as m,O as u,S as p,U as h,g as C,ga as e,j as g}from"./chunk-OXOEMY67.js";import{i,k as a,o as c}from"./chunk-JY5TIRRF.js";i();c();a();i();c();a();function T(){try{return o.returnOpenHref(`${g.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes")}catch{throw new Error("Could not open social popup")}}async function w(){p.push("ConnectingFarcaster");let t=h.getAuthConnector();if(t&&!e.getAccountData()?.farcasterUrl)try{let{url:r}=await t.provider.getFarcasterUri();e.setAccountProp("farcasterUrl",r,e.state.activeChain)}catch(r){p.goBack(),m.showError(r)}}async function S(t){p.push("ConnectingSocial");let s=h.getAuthConnector(),r=null;try{let l=setTimeout(()=>{throw new Error("Social login timed out. Please try again.")},45e3);if(s&&t){if(o.isTelegram()||(r=T()),r)e.setAccountProp("socialWindow",C(r),e.state.activeChain);else if(!o.isTelegram())throw new Error("Could not create social popup");let{uri:n}=await s.provider.getSocialRedirectUri({provider:t});if(!n)throw r?.close(),new Error("Could not fetch the social redirect uri");if(r&&(r.location.href=n),o.isTelegram()){f.setTelegramSocialProvider(t);let U=o.formatTelegramSocialLoginUrl(n);o.openHref(U,"_top")}clearTimeout(l)}}catch(l){r?.close();let n=o.parseError(l);m.showError(n),u.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:n}})}}async function y(t){e.setAccountProp("socialProvider",t,e.state.activeChain),u.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"?await w():await S(t)}export{y as a};
