import{a as Xt,b as er,c as at,d as Oe,e as tr,f as ct,g as rr,h as Q,i as or,j as lt,k as nr,l as Re,m as pt,n as ut,o as sr,p as ir,q as ar,r as cr,s as lr,t as pr,u as ur,w as dr,x as fr}from"./chunk-EHAE3UOH.js";import{a as Yt}from"./chunk-T7S7YTW4.js";import"./chunk-RRN7SHYG.js";import"./chunk-XEUUDCWO.js";import"./chunk-MNNC6HL4.js";import"./chunk-KG5GTMNR.js";import{a as Pe,b as $t}from"./chunk-T4OAGIV2.js";import{a as O,b as q,c as Se,d as k,e as Gt,f as L,g as v}from"./chunk-NAWDSJ2N.js";import{$ as Jt,A as me,B as M,C as b,H as rt,I as ot,J as Bt,L as D,M as ae,O as l,P as it,Q as y,R as ce,S as Vt,V as Ie,_ as Zt,a as Ut,b as _t,c as Mt,d as Dt,e as Ft,f as tt,h as Wt,j as m,k as J,p as z,q as Lt,r as I,s as A,t as N,u as f,w as Qt,x as S,y as X,z as ie}from"./chunk-SGMZUJCA.js";import{d as qt,h as jt}from"./chunk-QQ2U7YUK.js";import"./chunk-OIFNSKKM.js";import{C as Kt,F as zt}from"./chunk-KBZLPVCS.js";import"./chunk-4XVQLAVT.js";import{a as W}from"./chunk-AMYL42KT.js";import"./chunk-V7H3HPRQ.js";import"./chunk-EAWY7VYO.js";import"./chunk-2LXNZIUV.js";import{B as be,P as Ht,pa as ke,q as nt,s as st,ua as Ce}from"./chunk-NIKCAVDA.js";import"./chunk-URLXKBQX.js";import"./chunk-FFQJ55XB.js";import"./chunk-6IYG3UUA.js";import"./chunk-WGWCH7J2.js";import{c as Te,f as _}from"./chunk-57YRCRKT.js";var mr=Te(hr=>{"use strict";var le=W();function io(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var ao=typeof Object.is=="function"?Object.is:io,co=le.useState,lo=le.useEffect,po=le.useLayoutEffect,uo=le.useDebugValue;function fo(r,e){var t=e(),o=co({inst:{value:t,getSnapshot:e}}),n=o[0].inst,s=o[1];return po(function(){n.value=t,n.getSnapshot=e,dt(n)&&s({inst:n})},[r,t,e]),lo(function(){return dt(n)&&s({inst:n}),r(function(){dt(n)&&s({inst:n})})},[r]),uo(t),t}function dt(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!ao(r,t)}catch{return!0}}function ho(r,e){return e()}var mo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ho:fo;hr.useSyncExternalStore=le.useSyncExternalStore!==void 0?le.useSyncExternalStore:mo});var gr=Te((Lo,Cr)=>{"use strict";Cr.exports=mr()});var $r=Te(Je=>{"use strict";var So=Symbol.for("react.transitional.element"),Po=Symbol.for("react.fragment");function Gr(r,e,t){var o=null;if(t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),"key"in e){t={};for(var n in e)n!=="key"&&(t[n]=e[n])}else t=e;return e=t.ref,{$$typeof:So,type:r,key:o,ref:e!==void 0?e:null,props:t}}Je.Fragment=Po;Je.jsx=Gr;Je.jsxs=Gr});var Zr=Te((ba,Yr)=>{"use strict";Yr.exports=$r()});var H=_(W(),1);var R=_(W(),1);var wr=_(gr(),1);var{use:yr}=R.default,{useSyncExternalStore:Co}=wr.default,go=(r,e)=>{let t=(0,R.useRef)();(0,R.useEffect)(()=>{t.current=Mt(r,e,!0)}),(0,R.useDebugValue)(t.current)},yo=new WeakMap;function xr(r,e){let t=e?.sync,o=(0,R.useRef)(),n=(0,R.useRef)(),s=!0,i=Co((0,R.useCallback)(p=>{let d=Ft(r,p,t);return p(),d},[r,t]),()=>{let p=tt(r,yr);try{if(!s&&o.current&&n.current&&!_t(o.current,p,n.current,new WeakMap))return o.current}catch{}return p},()=>tt(r,yr));s=!1;let c=new WeakMap;(0,R.useEffect)(()=>{o.current=i,n.current=c}),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&go(i,c);let a=(0,R.useMemo)(()=>new WeakMap,[]);return Ut(i,c,a,yo)}function Ue(r){let e=xr(l.state),t=r?.namespace||e.activeChain;if(!t)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};let o=e.chains.get(t)?.accountState,n=b.getAuthConnector(t),s=A.getConnectedConnectorId(t);return{allAccounts:o?.allAccounts||[],caipAddress:o?.caipAddress,address:N.getPlainAddress(o?.caipAddress),isConnected:!!o?.caipAddress,status:o?.status,embeddedWalletInfo:n&&s===m.CONNECTOR_ID.AUTH?{user:o?.user?{...o.user,username:A.getConnectedSocialUsername()}:void 0,authProvider:o?.socialProvider||"email",accountType:o?.preferredAccountTypes?.[t],isSmartAccountDeployed:!!o?.smartAccountDeployed}:void 0}}var ee=class r{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:o,onTimeout:n,abortController:s}){return r.instance||(r.instance=new $t({projectId:e,chainId:t,enableLogger:o,onTimeout:n,abortController:s})),r.instance}};var te={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};var _e=Kt({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function V(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}var ft=V({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});var ht=V({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});var hn=V({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});var vn=V({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),An=V({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var wo={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},G={getMethodsByChainNamespace(r){return wo[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};let t={...r},o=new Set;if(e.methods&&Object.keys(e.methods).forEach(n=>o.add(n)),e.chains&&Object.keys(e.chains).forEach(n=>o.add(n)),e.events&&Object.keys(e.events).forEach(n=>o.add(n)),e.rpcMap&&Object.keys(e.rpcMap).forEach(n=>{let[s]=n.split(":");s&&o.add(s)}),o.forEach(n=>{t[n]||(t[n]=this.createDefaultNamespace(n))}),e.methods&&Object.entries(e.methods).forEach(([n,s])=>{t[n]&&(t[n].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([n,s])=>{t[n]&&(t[n].chains=s)}),e.events&&Object.entries(e.events).forEach(([n,s])=>{t[n]&&(t[n].events=s)}),e.rpcMap){let n=new Set;Object.entries(e.rpcMap).forEach(([s,i])=>{let[c,a]=s.split(":");!c||!a||!t[c]||(t[c].rpcMap||(t[c].rpcMap={}),n.has(c)||(t[c].rpcMap={},n.add(c)),t[c].rpcMap[a]=i)})}return t},createNamespaces(r,e){let t=r.reduce((o,n)=>{let{id:s,chainNamespace:i,rpcUrls:c}=n,a=c.default.http[0];o[i]||(o[i]=this.createDefaultNamespace(i));let p=`${i}:${s}`,d=o[i];switch(d.chains.push(p),p){case ft.caipNetworkId:d.chains.push(ft.deprecatedCaipNetworkId);break;case ht.caipNetworkId:d.chains.push(ht.deprecatedCaipNetworkId);break;default:}return d?.rpcMap&&a&&(d.rpcMap[s]=a),o},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{let e=await Ie.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{let t=e.chains||[],o=e.accounts.map(n=>{let[s,i]=n.split(":");return`${s}:${i}`});return Array.from(new Set([...t,...o]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null},isOriginAllowed(r,e,t){for(let o of[...e,...t])if(o.includes("*")){let s=`^${o.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(s,"u").test(r))return!0}else if(o===r)return!0;return!1}};var Z=class{constructor({provider:e,namespace:t}){this.id=m.CONNECTOR_ID.WALLET_CONNECT,this.name=q.ConnectorNamesMap[m.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=q.ConnectorImageIds[m.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=l.getCaipNetworks.bind(l),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let t=this.getCaipNetworks(),o=f.state.universalProviderConfigOverride,n=G.createNamespaces(t,o);await this.provider.connect({optionalNamespaces:n})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(t=>t.caipNetworkId);return Bt.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xo})}},xo=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var re=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=t=>l.getCaipNetworks(t),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:m.CONNECTOR_ID.AUTH,type:"AUTH",name:m.CONNECTOR_NAMES.AUTH,provider:e,imageId:q.ConnectorImageIds[m.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(o=>t.has(o.id)?!1:(t.add(o.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){y.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let o=this.eventListeners.get(e);o&&o.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let o=this.eventListeners.get(e);o&&o.forEach(n=>n(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:o}=e;if(!e.provider)return;let n="provider"in e.provider?e.provider.provider:e.provider;if(o==="WALLET_CONNECT"){n.setDefaultChain(t.caipNetworkId);return}if(n&&o==="AUTH"){let s=n,i=y.state.preferredAccountTypes?.[t.chainNamespace];await s.switchNetwork(t.caipNetworkId);let c=await s.getUser({chainId:t.caipNetworkId,preferredAccountType:i});this.emit("switchNetwork",c)}}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof Z);if(!e)throw new Error("WalletConnectConnector not found");return e}};var Me=class extends re{setUniversalProvider(e){this.addConnector(new Z({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let o=this.provider?.session?.namespaces?.[e]?.accounts?.map(n=>{let[,,s]=n.split(":");return s}).filter((n,s,i)=>i.indexOf(n)===s)||[];return Promise.resolve({accounts:o.map(n=>N.createAccount(e,n,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&I.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(y.state.balanceLoading&&e.chainId===l.state.activeCaipNetwork?.id)return{balance:y.state.balance||"0.00",symbol:y.state.balanceSymbol||""};let n=(await y.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:n?.quantity.numeric||"0.00",symbol:n?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:o,address:n}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return l.state.activeCaipNetwork?.chainNamespace===m.CHAIN.SOLANA?s=(await t.request({method:"solana_signMessage",params:{message:qt.encode(new TextEncoder().encode(o)),pubkey:n}},l.state.activeCaipNetwork?.caipNetworkId)).signature:s=await t.request({method:"personal_sign",params:[o,n]},l.state.activeCaipNetwork?.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,o=this.getWalletConnectConnector();if(t.chainNamespace===m.CHAIN.EVM)try{await o.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(t.id)}]})}catch(n){if(n.code===te.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||n.code===te.ERROR_INVALID_CHAIN_ID||n.code===te.ERROR_CODE_DEFAULT||n?.data?.originalError?.code===te.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await o.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:nt(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}o.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(o=>o.type==="WALLET_CONNECT")?.provider}};var vo=["email","socials","swaps","onramp","activity","reownBranding"],De={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return!!r.isEnabled&&e.includes("email")},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.email:!!r},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.socials:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.socials:!1:r},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.swaps:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.swaps:!1:r},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,processApi:r=>{if(!r?.config)return!1;let e=r.config;return r.isEnabled&&e.length>0?e:!1},processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.onramp:typeof r=="boolean"?r?I.DEFAULT_REMOTE_FEATURES.onramp:!1:r},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.activity:!!r},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,processApi:r=>!!r.isEnabled,processFallback:r=>r===void 0?I.DEFAULT_REMOTE_FEATURES.reownBranding:!!r}},vr={localSettingsOverridden:new Set,getApiConfig(r,e){return e?.find(t=>t.id===r)},addWarning(r,e){if(r!==void 0){let t=De[e],o=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(o)}},processFeature(r,e,t,o){let n=De[r],s=e[n.localFeatureName];if(o){let i=this.getApiConfig(n.apiFeatureName,t);return i?.config===null?this.processFallbackFeature(r,s):i?.config?(s!==void 0&&this.addWarning(s,r),this.processApiFeature(r,i)):!1}return this.processFallbackFeature(r,s)},processApiFeature(r,e){return De[r].processApi(e)},processFallbackFeature(r,e){return De[r].processFallback(e)},async fetchRemoteFeatures(r){let e=r.features||{};this.localSettingsOverridden.clear();let t=null,o=!1;try{t=await ie.fetchProjectConfig(),o=t!=null}catch(s){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",s)}let n=o?I.DEFAULT_REMOTE_FEATURES:I.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let s of vo){let i=this.processFeature(s,e,t,o);Object.assign(n,{[s]:i})}}catch(s){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",s),I.DEFAULT_REMOTE_FEATURES}if(o&&this.localSettingsOverridden.size>0){let s=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;S.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${s}`},"warning")}return n}};var Fe=class{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,o)=>{if(t){let n=l.getNetworkData(t)?.requestedCaipNetworks?.find(c=>c.id===o);if(n)return n;let s=l.getNetworkData(t)?.caipNetwork;return s||l.getRequestedCaipNetworks(t).filter(c=>c.chainNamespace===t)?.[0]}return l.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>l.getCaipNetworks(t),this.getActiveChainNamespace=()=>l.state.activeChain,this.setRequestedCaipNetworks=(t,o)=>{l.setRequestedCaipNetworks(t,o)},this.getApprovedCaipNetworkIds=()=>l.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>l.state.activeChain===t||!t?l.state.activeCaipAddress:l.getAccountProp("caipAddress",t),this.setClientId=t=>{it.setClientId(t)},this.getProvider=t=>v.getProvider(t),this.getProviderType=t=>v.getProviderId(t),this.getPreferredAccountType=t=>y.state.preferredAccountTypes?.[t],this.setCaipAddress=(t,o)=>{y.setCaipAddress(t,o),t&&f.state.enableEmbedded&&this.close()},this.setBalance=(t,o,n)=>{y.setBalance(t,o,n)},this.setProfileName=(t,o)=>{y.setProfileName(t,o)},this.setProfileImage=(t,o)=>{y.setProfileImage(t,o)},this.setUser=(t,o)=>{y.setUser(t,o)},this.resetAccount=t=>{y.resetAccount(t)},this.setCaipNetwork=t=>{l.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,o)=>{l.setChainNetworkData(o,{caipNetwork:t})},this.setAllAccounts=(t,o)=>{y.setAllAccounts(t,o),f.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,o)=>{y.setStatus(t,o),b.isConnected()?A.setConnectionStatus("connected"):A.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>l.getAccountProp("address",t),this.setConnectors=t=>{let o=[...b.state.allConnectors,...t];b.setConnectors(o)},this.setConnections=(t,o)=>{D.setConnections(t,o)},this.fetchIdentity=t=>it.fetchIdentity(t),this.getReownName=t=>Ie.getNamesForAddress(t),this.getConnectors=()=>b.getConnectors(),this.getConnectorImage=t=>Qt.getConnectorImage(t),this.setConnectedWalletInfo=(t,o)=>{let n=v.getProviderId(o),s=t?{...t,type:n}:void 0;y.setConnectedWalletInfo(s,o)},this.getIsConnectedState=()=>!!l.state.activeCaipAddress,this.addAddressLabel=(t,o,n)=>{y.addAddressLabel(t,o,n)},this.removeAddressLabel=(t,o)=>{y.removeAddressLabel(t,o)},this.getAddress=t=>l.state.activeChain===t||!t?y.state.address:l.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>l.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{l.resetNetwork(t)},this.addConnector=t=>{b.addConnector(t)},this.resetWcConnection=()=>{D.resetWcConnection()},this.setAddressExplorerUrl=(t,o)=>{y.setAddressExplorerUrl(t,o)},this.setSmartAccountDeployed=(t,o)=>{y.setSmartAccountDeployed(t,o)},this.setSmartAccountEnabledNetworks=(t,o)=>{l.setSmartAccountEnabledNetworks(t,o)},this.setPreferredAccountType=(t,o)=>{y.setPreferredAccountType(t,o)},this.setEIP6963Enabled=t=>{f.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let o=e?.map(s=>s.namespace).filter(s=>!!s);if(o?.length)return[...new Set(o)];let n=t?.map(s=>s.chainNamespace);return[...new Set(n)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await vr.fetchRemoteFeatures(e),f.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Vt.setOnrampProviders(this.remoteFeatures.onramp),(f.state.remoteFeatures?.email||Array.isArray(f.state.remoteFeatures?.socials)&&f.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){let e=await ie.fetchAllowedOrigins();if(e&&N.isClient()){let t=window.location.origin;G.isOriginAllowed(t,e,te.DEFAULT_ALLOWED_ANCESTORS)||S.open(k.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else S.open(k.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,X.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(o=>o.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&M.setThemeMode(e.themeMode),e.themeVariables&&M.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");l.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&l.setActiveCaipNetwork(t)}initializeConnectionController(e){D.setWcBasic(e.basic??!1)}initializeConnectorController(){b.initialize(this.chainNamespaces)}initializeProjectSettings(e){f.setProjectId(e.projectId),f.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){f.setDebug(e.debug!==!1),f.setEnableWalletConnect(e.enableWalletConnect!==!1),f.setEnableWalletGuide(e.enableWalletGuide!==!1),f.setEnableWallets(e.enableWallets!==!1),f.setEIP6963Enabled(e.enableEIP6963!==!1),f.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),f.setEnableAuthLogger(e.enableAuthLogger!==!1),f.setCustomRpcUrls(e.customRpcUrls),f.setEnableEmbedded(e.enableEmbedded),f.setAllWallets(e.allWallets),f.setIncludeWalletIds(e.includeWalletIds),f.setExcludeWalletIds(e.excludeWalletIds),f.setFeaturedWalletIds(e.featuredWalletIds),f.setTokens(e.tokens),f.setTermsConditionsUrl(e.termsConditionsUrl),f.setPrivacyPolicyUrl(e.privacyPolicyUrl),f.setCustomWallets(e.customWallets),f.setFeatures(e.features),f.setAllowUnsupportedChain(e.allowUnsupportedChain),f.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),f.setPreferUniversalLinks(e.experimental_preferUniversalLinks),f.setDefaultAccountTypes(e.defaultAccountTypes);let t=A.getPreferredAccountTypes()||{},o={...f.state.defaultAccountTypes,...t};y.setPreferredAccountTypes(o);let n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),f.setMetadata(e.metadata),f.setDisableAppend(e.disableAppend),f.setEnableEmbedded(e.enableEmbedded),f.setSIWX(e.siwx),!e.projectId){S.open(k.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===m.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");f.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return N.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let o=L.getUnsupportedNetwork(`${t}:${e}`);l.setActiveCaipNetwork(o)}}getDefaultNetwork(){return L.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return L.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return L.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(n=>n.id===e.defaultNetwork?.id);return t?L.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=l.state.activeChain,t=this.getAdapter(e),o=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");let n=await t.connectWalletConnect(o);this.close(),this.setClientId(n?.clientId||null),A.setConnectedNamespaces([...l.state.chains.keys()]),this.chainNamespaces.forEach(s=>{b.setConnectorId(O.CONNECTOR_TYPE_WALLET_CONNECT,s)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:o,provider:n,chain:s,caipNetwork:i,socialUri:c})=>{let a=l.state.activeChain,p=s||a,d=this.getAdapter(p);if(s&&s!==a&&!i){let w=this.getCaipNetworks().find(E=>E.chainNamespace===s);w&&this.setCaipNetwork(w)}if(!d)throw new Error("Adapter not found");let u=this.getCaipNetwork(p),h=await d.connect({id:e,info:t,type:o,provider:n,socialUri:c,chainId:i?.id||u?.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]||u?.rpcUrls?.default?.http?.[0]});if(!h)return;A.addConnectedNamespace(p),this.syncProvider({...h,chainNamespace:p});let g=y.state.allAccounts,{accounts:C}=g?.length>0?{accounts:[...g]}:await d.getAccounts({namespace:p,id:e});this.setAllAccounts(C,p),this.setStatus("connected",p),this.syncConnectedWalletInfo(p)},reconnectExternal:async({id:e,info:t,type:o,provider:n})=>{let s=l.state.activeChain,i=this.getAdapter(s);i?.reconnect&&(await i?.reconnect({id:e,info:t,type:o,provider:n,chainId:this.getCaipNetwork()?.id}),A.addConnectedNamespace(s),this.syncConnectedWalletInfo(s))},disconnect:async e=>{let t=e||l.state.activeChain,o=this.getAdapter(t),n=v.getProvider(t),s=v.getProviderId(t);await o?.disconnect({provider:n,providerType:s}),A.removeConnectedNamespace(t),v.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(l.state.activeChain)?.signMessage({message:e,address:y.state.address,provider:v.getProvider(l.state.activeChain)}))?.signature||"",sendTransaction:async e=>{let t=e.chainNamespace;if(I.SEND_SUPPORTED_NAMESPACES.includes(t)){let o=this.getAdapter(l.state.activeChain),n=v.getProvider(t);return(await o?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===m.CHAIN.EVM){let t=this.getAdapter(l.state.activeChain),o=v.getProvider(l.state.activeChain),n=this.getCaipNetwork();if(!n)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:o,caipNetwork:n}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:y.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:l.state.activeChain}),y.state.profileImage||!1),getEnsAddress:async e=>await G.resolveReownName(e),writeContract:async e=>{let t=this.getAdapter(l.state.activeChain),o=this.getCaipNetwork(),n=this.getCaipAddress(),s=v.getProvider(l.state.activeChain);if(!o||!n)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:o,provider:s,caipAddress:n}))?.hash},parseUnits:(e,t)=>this.getAdapter(l.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(l.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(l.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(l.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{let t=this.getAdapter(l.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(l.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{let t=this.getCaipNetwork(e);!t||!y.state.address||this.updateNativeBalance(y.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},D.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(v.getProviderId(l.state.activeChain)===O.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let n=v.getProvider(t),s=v.getProviderId(t);if(e.chainNamespace===l.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:n,providerType:s});else if(this.setCaipNetwork(e),s===O.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let o=t.chains||[],n=t.accounts.map(s=>{let{chainId:i,chainNamespace:c}=z.parseCaipAddress(s);return`${c}:${i}`});return Array.from(new Set([...o,...n]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,o)=>{let n=e?.find(s=>s.namespace===o);return n?(n.construct({namespace:o,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[o]=n):t[o]=new Me({namespace:o,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let o=A.getConnectionStatus();o==="connected"?this.setStatus("connecting",e):o==="disconnected"?(A.clearAddressCache(),this.setStatus(o,e)):this.setStatus(o,e),t.on("switchNetwork",({address:n,chainId:s})=>{let i=this.getCaipNetworks().find(p=>p.id===s||p.caipNetworkId===s),c=l.state.activeChain===e,a=l.getAccountProp("address",e);if(i){let p=c&&n?n:a;p&&this.syncAccount({address:p,chainId:i.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",n=>{this.setConnections(n,e)}),t.on("pendingTransactions",()=>{let n=y.state.address,s=l.state.activeCaipNetwork;!n||!s?.id||this.updateNativeBalance(n,s.id,s.chainNamespace)}),t.on("accountChanged",({address:n,chainId:s})=>{let i=l.state.activeChain===e;i&&s?this.syncAccount({address:n,chainId:s,chainNamespace:e}):i&&l.state.activeCaipNetwork?.id?this.syncAccount({address:n,chainId:l.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(n,s,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=b.getConnectorId(e);switch(this.setStatus("connecting",e),t){case m.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case m.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),o=b.getConnectorId(e),n=this.getCaipNetwork(e),s=b.getConnectors(e).find(i=>i.id===o);try{if(!t||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");let i=await t?.syncConnection({namespace:e,id:s.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});if(i){let c=await t?.getAccounts({namespace:e,id:s.id});c&&c.accounts.length>0?this.setAllAccounts(c.accounts,e):this.setAllAccounts([N.createAccount(e,i.address,"eoa")],e),this.syncProvider({...i,chainNamespace:e}),await this.syncAccount({...i,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async t=>{let o=this.getAdapter(t),n=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],s=l.state.activeCaipNetwork?.id,i=n.find(c=>{let{chainId:a}=z.parseCaipAddress(c);return a===s?.toString()})||n[0];if(i){let c=z.validateCaipAddress(i),{chainId:a,address:p}=z.parseCaipAddress(c);if(v.setProviderId(t,O.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&l.state.activeCaipNetwork&&o?.namespace!==m.CHAIN.EVM){let d=o?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:l.state.activeCaipNetwork});v.setProvider(t,d)}else v.setProvider(t,this.universalProvider);b.setConnectorId(m.CONNECTOR_ID.WALLET_CONNECT,t),A.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:p,chainId:a,chainNamespace:t})}else this.setStatus("disconnected",t);this.syncConnectedWalletInfo(t),await l.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(o=>{let{address:n}=z.parseCaipAddress(o);return n}).filter((o,n,s)=>s.indexOf(o)===n);t&&this.setAllAccounts(t.map(o=>N.createAccount(e,o,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:o,chainNamespace:n}){v.setProviderId(n,e),v.setProvider(n,t),b.setConnectorId(o,n)}async syncAllAccounts(e){let t=b.getConnectorId(e);if(!t)return;let n=await this.getAdapter(e)?.getAccounts({namespace:e,id:t});n&&n.accounts.length>0&&this.setAllAccounts(n.accounts,e)}async syncAccount(e){let t=e.chainNamespace===l.state.activeChain,o=l.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:n,chainId:s,chainNamespace:i}=e,{chainId:c}=A.getActiveNetworkProps(),a=s||c,p=l.state.activeCaipNetwork?.name===m.UNSUPPORTED_NETWORK_NAME,d=l.getNetworkProp("supportsAllNetworks",i);if(this.setStatus("connected",i),!(p&&!d)&&a){let u=this.getCaipNetworks().find(C=>C.id.toString()===a.toString()),h=this.getCaipNetworks().find(C=>C.chainNamespace===i);if(!d&&!u&&!h){let C=this.getApprovedCaipNetworkIds()||[],w=C.find(x=>z.parseCaipNetworkId(x)?.chainId===a.toString()),E=C.find(x=>z.parseCaipNetworkId(x)?.chainNamespace===i);u=this.getCaipNetworks().find(x=>x.caipNetworkId===w),h=this.getCaipNetworks().find(x=>x.caipNetworkId===E||"deprecatedCaipNetworkId"in x&&x.deprecatedCaipNetworkId===E)}let g=u||h;g?.chainNamespace===l.state.activeChain?f.state.enableNetworkSwitch&&!f.state.allowUnsupportedChain&&l.state.activeCaipNetwork?.name===m.UNSUPPORTED_NETWORK_NAME?l.showUnsupportedChainUI():this.setCaipNetwork(g):t||o&&this.setCaipNetworkOfNamespace(o,i),this.syncConnectedWalletInfo(i),Se.isLowerCaseMatch(n,y.state.address)||this.syncAccountInfo(n,g?.id,i),t?await this.syncBalance({address:n,chainId:g?.id,chainNamespace:i}):await this.syncBalance({address:n,chainId:o?.id,chainNamespace:i})}}async syncAccountInfo(e,t,o){let n=this.getCaipAddress(o),s=t||n?.split(":")[1];if(!s)return;let i=`${o}:${s}:${e}`;this.setCaipAddress(i,o),await this.syncIdentity({address:e,chainId:s,chainNamespace:o})}async syncReownName(e,t){try{let o=await this.getReownName(e);if(o[0]){let n=o[0];this.setProfileName(n.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=b.getConnectorId(e),o=v.getProviderId(e);if(o===O.CONNECTOR_TYPE_ANNOUNCED||o===O.CONNECTOR_TYPE_INJECTED){if(t){let n=this.getConnectors().find(s=>s.id===t);if(n){let{info:s,name:i,imageUrl:c}=n,a=c||this.getConnectorImage(n);this.setConnectedWalletInfo({name:i,icon:a,...s},e)}}}else if(o===O.CONNECTOR_TYPE_WALLET_CONNECT){let n=v.getProvider(e);n?.session&&this.setConnectedWalletInfo({...n.session.peer.metadata,name:n.session.peer.metadata.name,icon:n.session.peer.metadata.icons?.[0]},e)}else if(t&&t===m.CONNECTOR_ID.COINBASE){let n=this.getConnectors().find(s=>s.id===m.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(n)},e)}}async syncBalance(e){!J.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(o=>o.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,o){let n=this.getAdapter(o),s=l.getCaipNetworkByNamespace(o,t);if(n){let i=await n.getBalance({address:e,chainId:t,caipNetwork:s,tokens:this.options.tokens});return this.setBalance(i.balance,i.symbol,o),i}}async initializeUniversalAdapter(){let e=Gt.createLogger((o,...n)=>{o&&this.handleAlertError(o),console.error(...n)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};f.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await jt.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{D.setUri(e)}),this.universalProvider.on("connect",D.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),D.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(n=>n.id==e),o=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}o?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(G.isSessionEventData(e)){let{name:t,data:o}=e.params.event;t==="accountsChanged"&&Array.isArray(o)&&N.isCaipAddress(o[0])&&this.syncAccount(z.parseCaipAddress(o[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&N.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){X.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let t=Object.entries(k.UniversalProviderErrors).find(([,{message:c}])=>e.message.includes(c)),[o,n]=t??[],{message:s,alertErrorKey:i}=n??{};if(o&&s&&!this.reportedAlertErrors[o]){let c=k.ALERT_ERRORS[i];c&&(S.open(c,"error"),this.reportedAlertErrors[o]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let o=e;o.namespace=t,o.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=o)}async open(e){if(await this.injectModalUi(),e?.uri&&D.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return ce.open({...e,data:{swap:e.arguments}});default:}return ce.open(e)}async close(){await this.injectModalUi(),ce.close()}setLoading(e,t){ce.setLoading(e,t)}async disconnect(e){await D.disconnect(e)}getSIWX(){return f.state.siwx}getError(){return""}getChainId(){return l.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(o=>o.id===e.id);if(!t){S.open(k.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await l.switchActiveNetwork(t)}getWalletProvider(){return l.state.activeChain?v.state.providers[l.state.activeChain]:null}getWalletProviderType(){return v.getProviderId(l.state.activeChain)}subscribeProviders(e){return v.subscribeProviders(e)}getThemeMode(){return M.state.themeMode}getThemeVariables(){return M.state.themeVariables}setThemeMode(e){M.setThemeMode(e),Zt(M.state.themeMode)}setTermsConditionsUrl(e){f.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){f.setPrivacyPolicyUrl(e)}setThemeVariables(e){M.setThemeVariables(e),Jt(M.state.themeVariables)}subscribeTheme(e){return M.subscribe(e)}getWalletInfo(){return y.state.connectedWalletInfo}getAccount(e){let t=b.getAuthConnector(e),o=l.getAccountData(e),n=l.state.activeChain,s=A.getConnectedConnectorId(e);if(o)return{allAccounts:o.allAccounts,caipAddress:o.caipAddress,address:N.getPlainAddress(o.caipAddress),isConnected:!!o.caipAddress,status:o.status,embeddedWalletInfo:t&&s===m.CONNECTOR_ID.AUTH?{user:o.user?{...o.user,username:A.getConnectedSocialUsername()}:void 0,authProvider:o.socialProvider||"email",accountType:o.preferredAccountTypes?.[e||n],isSmartAccountDeployed:!!o.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let o=()=>{let n=this.getAccount(t);n&&e(n)};t?l.subscribeChainProp("accountState",o,t):l.subscribe(o),b.subscribe(o)}subscribeNetwork(e){return l.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return y.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){y.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){l.subscribeKey("activeCaipNetwork",e)}getState(){return ae.state}subscribeState(e){return ae.subscribe(e)}showErrorMessage(e){ot.showError(e)}showSuccessMessage(e){ot.showSuccess(e)}getEvent(){return{...X.state}}subscribeEvents(e){return X.subscribe(e)}replace(e){me.replace(e)}redirect(e){me.push(e)}popTransactionStack(e){me.popTransactionStack(e)}isOpen(){return ce.state.open}isTransactionStackEmpty(){return me.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){f.setFeatures(e)}updateRemoteFeatures(e){f.setRemoteFeatures(e)}updateOptions(e){let o={...f.state||{},...e};f.setOptions(o)}setConnectMethodsOrder(e){f.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){f.setWalletFeaturesOrder(e)}setCollapseWallets(e){f.setCollapseWallets(e)}setSocialsOrder(e){f.setSocialsOrder(e)}getConnectMethodsOrder(){return Yt.getConnectOrderMethod(f.state.features,b.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let o=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(n=>n.id===o.id)||l.addNetwork(o)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(n=>n.id===t)&&l.removeNetwork(e,t)}};var Ar=!1,ge=class extends Fe{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{Pe.checkIfRequestExists(t)?Pe.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(rt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(rt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,o)=>{let n=Pe.checkIfRequestIsSafe(o),s=y.state.address,i=l.state.activeCaipNetwork;n||(s&&i?.id&&this.updateNativeBalance(s,i.id,i.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{let t=l.state.activeChain;b.getConnectorId(t)===m.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(t=>{let o=l.state.activeChain,n=o===m.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,s=f.state.defaultAccountTypes[o],i=y.state.preferredAccountTypes?.[o],c=t.preferredAccountType||i||s;Se.isLowerCaseMatch(t.address,y.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:o}),this.setCaipAddress(n,o),this.setUser({...y.state.user||{},...t},o),this.setSmartAccountDeployed(!!t.smartAccountDeployed,o),this.setPreferredAccountType(c,o);let a=t.accounts?.map(p=>N.createAccount(o,p.address,p.type||i||s));this.setAllAccounts(a||[N.createAccount(o,t.address,t.preferredAccountType||c)],o),this.setLoading(!1,o)}),e.onSocialConnected(({userName:t})=>{this.setUser({...y.state.user||{},username:t},l.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,l.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:o})=>{t&&this.setPreferredAccountType(o,l.state.activeChain)})}async syncAuthConnector(e,t){let o=m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!o)return;this.setLoading(!0,t);let n=e.getLoginEmailUsed();this.setLoading(n,t),n&&this.setStatus("connecting",t);let s=e.getEmail(),i=e.getUsername();this.setUser({...y.state?.user||{},username:i,email:s},l.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:c}=await e.isConnected(),a=M.getSnapshot(),p=f.getSnapshot();await Promise.all([e.syncDappData({metadata:p.metadata,sdkVersion:p.sdkVersion,projectId:p.projectId,sdkType:p.sdkType}),e.syncTheme({themeMode:a.themeMode,themeVariables:a.themeVariables,w3mThemeVariables:Lt(a.themeVariables,a.themeMode)})]),await e.getSmartAccountEnabledNetworks(),t&&o&&(c&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:m.CONNECTOR_ID.AUTH,info:{name:m.CONNECTOR_ID.AUTH},type:O.CONNECTOR_TYPE_AUTH,provider:e,chainId:l.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):b.getConnectorId(t)===m.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),A.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!N.isTelegram())return;let t=A.getTelegramSocialProvider();if(!t||!N.isClient())return;let n=new URL(window.location.href).searchParams.get("result_uri");if(!n)return;y.setSocialProvider(t,e),await this.authProvider?.init();let s=b.getAuthConnector();t&&s&&(this.setLoading(!0,e),await D.connectExternal({id:s.id,type:s.type,socialUri:n},s.chain),A.setConnectedSocialProvider(t),A.removeTelegramSocialProvider(),X.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let o=this.remoteFeatures?.email,n=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,s=o||n;!this.authProvider&&this.options?.projectId&&s&&(this.authProvider=ee.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:k.EmbeddedWalletAbortController,onTimeout:i=>{i==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):i==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):i==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),ae.subscribeOpen(i=>{!i&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ie.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=l.state.activeChain,o=e.chainNamespace,n=this.getAddressByChainNamespace(o);if(o===t&&n){let i=this.getAdapter(o),c=v.getProvider(o),a=v.getProviderId(o);await i?.switchNetwork({caipNetwork:e,provider:c,providerType:a}),this.setCaipNetwork(e)}else{let c=v.getProviderId(t)===O.CONNECTOR_TYPE_AUTH,a=v.getProviderId(o),p=a===O.CONNECTOR_TYPE_AUTH,d=m.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(o);if((c&&a===void 0||p)&&d)try{l.state.activeChain=e.chainNamespace,n?await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:a}):await this.connectionControllerClient?.connectExternal?.({id:m.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:o,chainId:e.id,type:O.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(o)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:a})}else a===O.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),n&&this.syncAccount({address:n,chainId:e.id,chainNamespace:o}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t),this.chainAdapters?.[t].syncConnectors(this.options,this)}),await this.injectModalUi(),ae.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:o}){let n=`${o}:${t}`,s=this.caipNetworks?.find(i=>i.caipNetworkId===n);if(o!==m.CHAIN.EVM||s?.testnet){this.setProfileName(null,o),this.setProfileImage(null,o);return}try{let{name:i,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:n});this.setProfileName(i,o),this.setProfileImage(c,o)}catch{await this.syncReownName(e,o),t!==1&&this.setProfileImage(null,o)}}syncConnectedWalletInfo(e){let t=v.getProviderId(e);if(t===O.CONNECTOR_TYPE_AUTH){let o=this.authProvider;if(o){let n=A.getConnectedSocialProvider()??"email",s=o.getEmail()??o.getUsername();this.setConnectedWalletInfo({name:t,identifier:s,social:n},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(N.isClient()&&!Ar)try{let e={...I.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),N.isClient()&&!document.querySelector("w3m-modal")){let n=document.createElement("w3m-modal");!f.state.disableAppend&&!f.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",n)}Ar=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!N.isClient())return;let o=[];(t.email||t.socials&&t.socials.length>0)&&o.push(import("./embedded-wallet-F7SBYATN.js")),t.email&&o.push(import("./email-S7RH4J5X.js")),t.socials&&o.push(import("./socials-REPFUPJR.js")),t.swaps&&t.swaps.length>0&&o.push(import("./swaps-UTOZVTWG.js")),e.send&&o.push(import("./send-YEACM4X4.js")),e.receive&&o.push(import("./receive-XCFNYEGR.js")),t.onramp&&t.onramp.length>0&&o.push(import("./onramp-KKCORU3Q.js")),t.activity&&o.push(import("./transactions-P3LOP6EQ.js")),e.pay&&o.push(import("./exports-4E3YLAIP.js")),await Promise.all([...o,import("./exports-IUQ75R37.js"),import("./w3m-modal-U4PUARBF.js")])}};var mt=_(W(),1);var We;function Er(r){r&&(We=r)}function Ct(){if(!We)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function r(t){await We?.open(t)}async function e(){await We?.close()}return{open:r,close:e}}var gt="1.7.7";var Le;function Nr(r){return Le||(Le=new ge({...r,sdkVersion:N.generateSdkVersion(r.adapters??[],"react",gt)}),Er(Le)),Le}var ye=_(W(),1);var Qe=_(W(),1);function Tr(r){let{children:e,config:t,initialState:o,reconnectOnMount:n=!0}=r,{onMount:s}=fr(t,{initialState:o,reconnectOnMount:n});t._internal.ssr||s();let i=(0,Qe.useRef)(!0);return(0,Qe.useEffect)(()=>{if(i.current&&t._internal.ssr)return s(),()=>{i.current=!1}},[]),e}var we=(0,ye.createContext)(void 0);function qe(r){let{children:e,config:t}=r,o={value:t};return(0,ye.createElement)(Tr,r,(0,ye.createElement)(we.Provider,o,e))}var br="2.15.4";var kr=()=>`wagmi@${br}`;var je=class extends Xt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return kr()}};var Be=class extends je{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}};var Ir=_(W(),1);function pe(r={}){let e=r.config??(0,Ir.useContext)(we);if(!e)throw new Be;return e}var j=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var $=typeof window>"u"||"Deno"in globalThis;function P(){}function Or(r,e){return typeof r=="function"?r(e):r}function Rr(r){return typeof r=="number"&&r>=0&&r!==1/0}function Ur(r,e){return Math.max(r+(e||0)-Date.now(),0)}function xe(r,e){return typeof r=="function"?r(e):r}function _r(r,e){return typeof r=="function"?r(e):r}function He(r,e){let{type:t="all",exact:o,fetchStatus:n,predicate:s,queryKey:i,stale:c}=r;if(i){if(o){if(e.queryHash!==ve(i,e.options))return!1}else if(!ue(e.queryKey,i))return!1}if(t!=="all"){let a=e.isActive();if(t==="active"&&!a||t==="inactive"&&a)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||s&&!s(e))}function Ke(r,e){let{exact:t,status:o,predicate:n,mutationKey:s}=r;if(s){if(!e.options.mutationKey)return!1;if(t){if(B(e.options.mutationKey)!==B(s))return!1}else if(!ue(e.options.mutationKey,s))return!1}return!(o&&e.state.status!==o||n&&!n(e))}function ve(r,e){return(e?.queryKeyHashFn||B)(r)}function B(r){return JSON.stringify(r,(e,t)=>yt(t)?Object.keys(t).sort().reduce((o,n)=>(o[n]=t[n],o),{}):t)}function ue(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ue(r[t],e[t])):!1}function wt(r,e){if(r===e)return r;let t=Sr(r)&&Sr(e);if(t||yt(r)&&yt(e)){let o=t?r:Object.keys(r),n=o.length,s=t?e:Object.keys(e),i=s.length,c=t?[]:{},a=0;for(let p=0;p<i;p++){let d=t?p:s[p];(!t&&o.includes(d)||t)&&r[d]===void 0&&e[d]===void 0?(c[d]=void 0,a++):(c[d]=wt(r[d],e[d]),c[d]===r[d]&&r[d]!==void 0&&a++)}return n===i&&a===n?r:c}return e}function Mr(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}function Sr(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function yt(r){if(!Pr(r))return!1;let e=r.constructor;if(e===void 0)return!0;let t=e.prototype;return!(!Pr(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Pr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Dr(r){return new Promise(e=>{setTimeout(e,r)})}function Fr(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?wt(r,e):e}function Wr(r,e,t=0){let o=[...r,e];return t&&o.length>t?o.slice(1):o}function Lr(r,e,t=0){let o=[e,...r];return t&&o.length>t?o.slice(0,-1):o}var de=Symbol();function ze(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===de?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function xt(r,e){return typeof r=="function"?r(...e):!!r}var Ao=class extends j{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!$&&window.addEventListener){let e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){let r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ve=new Ao;var Eo=class extends j{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!$&&window.addEventListener){let e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},fe=new Eo;function Qr(){let r,e,t=new Promise((n,s)=>{r=n,e=s});t.status="pending",t.catch(()=>{});function o(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{o({status:"fulfilled",value:n}),r(n)},t.reject=n=>{o({status:"rejected",reason:n}),e(n)},t}function No(r){return Math.min(1e3*2**r,3e4)}function vt(r){return(r??"online")==="online"?fe.isOnline():!0}var qr=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function Ge(r){return r instanceof qr}function $e(r){let e=!1,t=0,o=!1,n,s=Qr(),i=w=>{o||(h(new qr(w)),r.abort?.())},c=()=>{e=!0},a=()=>{e=!1},p=()=>Ve.isFocused()&&(r.networkMode==="always"||fe.isOnline())&&r.canRun(),d=()=>vt(r.networkMode)&&r.canRun(),u=w=>{o||(o=!0,r.onSuccess?.(w),n?.(),s.resolve(w))},h=w=>{o||(o=!0,r.onError?.(w),n?.(),s.reject(w))},g=()=>new Promise(w=>{n=E=>{(o||p())&&w(E)},r.onPause?.()}).then(()=>{n=void 0,o||r.onContinue?.()}),C=()=>{if(o)return;let w,E=t===0?r.initialPromise:void 0;try{w=E??r.fn()}catch(x){w=Promise.reject(x)}Promise.resolve(w).then(u).catch(x=>{if(o)return;let U=r.retry??($?0:3),K=r.retryDelay??No,F=typeof K=="function"?K(t,x):K,ne=U===!0||typeof U=="number"&&t<U||typeof U=="function"&&U(t,x);if(e||!ne){h(x);return}t++,r.onFail?.(t,x),Dr(F).then(()=>p()?void 0:g()).then(()=>{e?h(x):C()})})};return{promise:s,cancel:i,continue:()=>(n?.(),s),cancelRetry:c,continueRetry:a,canStart:d,start:()=>(d()?C():g().then(C),s)}}var jr=r=>setTimeout(r,0);function To(){let r=[],e=0,t=c=>{c()},o=c=>{c()},n=jr,s=c=>{e?r.push(c):n(()=>{t(c)})},i=()=>{let c=r;r=[],c.length&&n(()=>{o(()=>{c.forEach(a=>{t(a)})})})};return{batch:c=>{let a;e++;try{a=c()}finally{e--,e||i()}return a},batchCalls:c=>(...a)=>{s(()=>{c(...a)})},schedule:s,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{o=c},setScheduler:c=>{n=c}}}var T=To();var Ye=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rr(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??($?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var Br=class extends Ye{#e;#t;#r;#o;#n;#i;#a;constructor(r){super(),this.#a=!1,this.#i=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#o=r.client,this.#r=this.#o.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=ko(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(r){this.options={...this.#i,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){let t=Fr(this.state.data,r,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#s({type:"setState",state:r,setStateOptions:e})}cancel(r){let e=this.#n?.promise;return this.#n?.cancel(r),e?e.then(P).catch(P):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>_r(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===de||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>xe(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Ur(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(r&&this.setOptions(r),!this.options.queryFn){let a=this.observers.find(p=>p.options.queryFn);a&&this.setOptions(a.options)}let t=new AbortController,o=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},n=()=>{let a=ze(this.options,e),d=(()=>{let u={client:this.#o,queryKey:this.queryKey,meta:this.meta};return o(u),u})();return this.#a=!1,this.options.persister?this.options.persister(a,d,this):a(d)},i=(()=>{let a={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:n};return o(a),a})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#s({type:"fetch",meta:i.fetchOptions?.meta});let c=a=>{Ge(a)&&a.silent||this.#s({type:"error",error:a}),Ge(a)||(this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#n=$e({initialPromise:e?.initialPromise,fn:i.fetchFn,abort:t.abort.bind(t),onSuccess:a=>{if(a===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(p){c(p);return}this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:c,onFail:(a,p)=>{this.#s({type:"failed",failureCount:a,error:p})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(r){let e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...bo(t.data,this.options),fetchMeta:r.meta??null};case"success":return{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let o=r.error;return Ge(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),T.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function bo(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vt(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ko(r){let e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,o=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Hr=class extends j{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){let o=e.queryKey,n=e.queryHash??ve(o,e),s=this.get(n);return s||(s=new Br({client:r,queryKey:o,queryHash:n,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(o)}),this.add(s)),s}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){let e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){T.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){let e={exact:!0,...r};return this.getAll().find(t=>He(e,t))}findAll(r={}){let e=this.getAll();return Object.keys(r).length>0?e.filter(t=>He(r,t)):e}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){T.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}};var Kr=class extends Ye{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||At(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){let e=()=>{this.#o({type:"continue"})};this.#r=$e({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(n,s)=>{this.#o({type:"failed",failureCount:n,error:s})},onPause:()=>{this.#o({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t=this.state.status==="pending",o=!this.#r.canStart();try{if(t)e();else{this.#o({type:"pending",variables:r,isPaused:o}),await this.#t.config.onMutate?.(r,this);let s=await this.options.onMutate?.(r);s!==this.state.context&&this.#o({type:"pending",context:s,variables:r,isPaused:o})}let n=await this.#r.start();return await this.#t.config.onSuccess?.(n,r,this.state.context,this),await this.options.onSuccess?.(n,r,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,r,this.state.context),this.#o({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,r,this.state.context,this),await this.options.onError?.(n,r,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,r,this.state.context),n}finally{this.#o({type:"error",error:n})}}finally{this.#t.runNext(this)}}#o(r){let e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),T.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function At(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zr=class extends j{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){let o=new Kr({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(o),o}add(r){this.#e.add(r);let e=Ze(r);if(typeof e=="string"){let t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){let e=Ze(r);if(typeof e=="string"){let t=this.#t.get(e);if(t)if(t.length>1){let o=t.indexOf(r);o!==-1&&t.splice(o,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){let e=Ze(r);if(typeof e=="string"){let o=this.#t.get(e)?.find(n=>n.state.status==="pending");return!o||o===r}else return!0}runNext(r){let e=Ze(r);return typeof e=="string"?this.#t.get(e)?.find(o=>o!==r&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){T.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){let e={exact:!0,...r};return this.getAll().find(t=>Ke(e,t))}findAll(r={}){return this.getAll().filter(e=>Ke(r,e))}notify(r){T.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){let r=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(r.map(e=>e.continue().catch(P))))}};function Ze(r){return r.options.scope?.id}function Et(r){return{onFetch:(e,t)=>{let o=e.options,n=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],i=e.state.data?.pageParams||[],c={pages:[],pageParams:[]},a=0,p=async()=>{let d=!1,u=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},h=ze(e.options,e.fetchOptions),g=async(C,w,E)=>{if(d)return Promise.reject();if(w==null&&C.pages.length)return Promise.resolve(C);let U=(()=>{let se={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return u(se),se})(),K=await h(U),{maxPages:F}=e.options,ne=E?Lr:Wr;return{pages:ne(C.pages,K,F),pageParams:ne(C.pageParams,w,F)}};if(n&&s.length){let C=n==="backward",w=C?Io:Vr,E={pages:s,pageParams:i},x=w(o,E);c=await g(E,x,C)}else{let C=r??s.length;do{let w=a===0?i[0]??o.initialPageParam:Vr(o,c);if(a>0&&w==null)break;c=await g(c,w),a++}while(a<C)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function Vr(r,{pages:e,pageParams:t}){let o=e.length-1;return e.length>0?r.getNextPageParam(e[o],e,t[o],t):void 0}function Io(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var Nt=class{#e;#t;#r;#o;#n;#i;#a;#s;constructor(r={}){this.#e=r.queryCache||new Hr,this.#t=r.mutationCache||new zr,this.#r=r.defaultOptions||{},this.#o=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=Ve.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=fe.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(r){return this.#e.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#t.findAll({...r,status:"pending"}).length}getQueryData(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(r){let e=this.defaultQueryOptions(r),t=this.#e.build(this,e),o=t.state.data;return o===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(xe(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(r){return this.#e.findAll(r).map(({queryKey:e,state:t})=>{let o=t.data;return[e,o]})}setQueryData(r,e,t){let o=this.defaultQueryOptions({queryKey:r}),s=this.#e.get(o.queryHash)?.state.data,i=Or(e,s);if(i!==void 0)return this.#e.build(this,o).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return T.batch(()=>this.#e.findAll(r).map(({queryKey:o})=>[o,this.setQueryData(o,e,t)]))}getQueryState(r){let e=this.defaultQueryOptions({queryKey:r});return this.#e.get(e.queryHash)?.state}removeQueries(r){let e=this.#e;T.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){let t=this.#e;return T.batch(()=>(t.findAll(r).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){let t={revert:!0,...e},o=T.batch(()=>this.#e.findAll(r).map(n=>n.cancel(t)));return Promise.all(o).then(P).catch(P)}invalidateQueries(r,e={}){return T.batch(()=>(this.#e.findAll(r).forEach(t=>{t.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},e)))}refetchQueries(r,e={}){let t={...e,cancelRefetch:e.cancelRefetch??!0},o=T.batch(()=>this.#e.findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let s=n.fetch(void 0,t);return t.throwOnError||(s=s.catch(P)),n.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(o).then(P)}fetchQuery(r){let e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);let t=this.#e.build(this,e);return t.isStaleByTime(xe(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(P).catch(P)}fetchInfiniteQuery(r){return r.behavior=Et(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(P).catch(P)}ensureInfiniteQueryData(r){return r.behavior=Et(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return fe.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(r){this.#r=r}setQueryDefaults(r,e){this.#o.set(B(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){let e=[...this.#o.values()],t={};return e.forEach(o=>{ue(r,o.queryKey)&&Object.assign(t,o.defaultOptions)}),t}setMutationDefaults(r,e){this.#n.set(B(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){let e=[...this.#n.values()],t={};return e.forEach(o=>{ue(r,o.mutationKey)&&Object.assign(t,o.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;let e={...this.#r.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=ve(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===de&&(e.enabled=!1),e}defaultMutationOptions(r){return r?._defaulted?r:{...this.#r.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};var Tt=class extends j{#e;#t=void 0;#r;#o;constructor(r,e){super(),this.#e=r,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){let e=this.options;this.options=this.#e.defaultMutationOptions(r),Mr(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&B(e.mutationKey)!==B(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#n(),this.#i(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(r,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#n(){let r=this.#r?.state??At();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#i(r){T.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#t.variables,t=this.#t.context;r?.type==="success"?(this.#o.onSuccess?.(r.data,e,t),this.#o.onSettled?.(r.data,null,e,t)):r?.type==="error"&&(this.#o.onError?.(r.error,e,t),this.#o.onSettled?.(void 0,r.error,e,t))}this.listeners.forEach(e=>{e(this.#t)})})}};function bt(r){return{mutationFn(e){return Oe(r,e)},mutationKey:["disconnect"]}}function kt(r){return{mutationFn(e){return Re(r,e)},mutationKey:["signMessage"]}}var he=_(W(),1),Jr=_(Zr(),1),It=he.createContext(void 0),St=r=>{let e=he.useContext(It);if(r)return r;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Pt=({client:r,children:e})=>(he.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),(0,Jr.jsx)(It.Provider,{value:r,children:e}));var Y=_(W(),1);function Ae(r,e){let t=St(e),[o]=Y.useState(()=>new Tt(t,r));Y.useEffect(()=>{o.setOptions(r)},[o,r]);let n=Y.useSyncExternalStore(Y.useCallback(i=>o.subscribe(T.batchCalls(i)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),s=Y.useCallback((i,c)=>{o.mutate(i,c).catch(P)},[o]);if(n.error&&xt(o.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:s,mutateAsync:n.mutate}}var Xr=_(W(),1);function eo(r={}){let e=pe(r);return(0,Xr.useSyncExternalStore)(t=>ir(e,{onChange:t}),()=>Q(e),()=>Q(e))}function Xe(r={}){let{mutation:e}=r,t=pe(r),o=bt(t),{mutate:n,mutateAsync:s,...i}=Ae({...e,...o});return{...i,connectors:eo({config:t}).map(c=>c.connector),disconnect:n,disconnectAsync:s}}function Ot(r={}){let{mutation:e}=r,t=pe(r),o=kt(t),{mutate:n,mutateAsync:s,...i}=Ae({...e,...o});return{...i,signMessage:n,signMessageAsync:s}}function to(r){let e=[],t,o;function n(c){return J.parseEvmChainId(c)||1}function s(){return t||(t=ee.getInstance({projectId:r.options.projectId,chainId:l.getActiveCaipNetwork()?.caipNetworkId,enableLogger:r.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:k.EmbeddedWalletAbortController})),t}async function i(c={}){let a=s(),p=c.chainId;if(c.isReconnecting){let w=J.parseEvmChainId(a.getLastUsedChainId()||""),E=r.chains?.[0].id;if(p=w||E,!p)throw new Error("ChainId not found in provider")}let d=y.state.preferredAccountTypes?.eip155,{address:u,chainId:h,accounts:g}=await a.connect({chainId:p,preferredAccountType:d,socialUri:c.socialUri});e=g?.map(w=>w.address)||[u];let C=n(h);return{accounts:e,account:u,chainId:C,chain:{id:C,unsuported:!1}}}return c=>({id:m.CONNECTOR_ID.AUTH,name:m.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:m.CHAIN.EVM,async connect(a={}){if(o)return o;o||(o=new Promise(d=>{d(i(a))}));let p=await o;return o=void 0,p},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(c.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=ee.getInstance({projectId:r.options.projectId,chainId:l.getActiveCaipNetwork()?.caipNetworkId,enableLogger:r.options.enableAuthLogger,abortController:k.EmbeddedWalletAbortController,onTimeout:a=>{a==="iframe_load_failed"?S.open(k.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?S.open(k.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&S.open(k.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){let a=await this.getProvider(),{chainId:p}=await a.getChainId();return n(p)},async isAuthorized(){let a=await this.getProvider();return Promise.resolve(a.getLoginEmailUsed())},async switchChain({chainId:a}){try{let p=c.chains.find(g=>g.id===a);if(!p)throw new Ce(new Error("chain not found on connector."));let d=await this.getProvider(),u=y.state.preferredAccountTypes?.eip155,h=await d.connect({chainId:a,preferredAccountType:u});return e=h?.accounts?.map(g=>g.address)||[h.address],c.emitter.emit("change",{chainId:Number(a),accounts:e}),p}catch(p){throw p instanceof Error?new Ce(p):p}},onAccountsChanged(a){a.length===0?this.onDisconnect():c.emitter.emit("change",{accounts:a.map(be)})},onChainChanged(a){let p=Number(a);c.emitter.emit("change",{chainId:p})},async onDisconnect(a){await(await this.getProvider()).disconnect()}})}et.type="walletConnect";function et(r,e){let t=r.isNewChainsStale??!0,o,n,s,i,c,a,p;return d=>({id:"walletConnect",name:"WalletConnect",type:et.type,async setup(){let u=await this.getProvider().catch(()=>null);u&&(i||(i=this.onConnect.bind(this),u.on("connect",i)),a||(a=this.onSessionDelete.bind(this),u.on("session_delete",a)))},async connect({...u}={}){try{let h=l.getCaipNetworks(),g=await this.getProvider();if(!g)throw new pt;c||(c=this.onDisplayUri,g.on("display_uri",c));let C=await this.isChainsStale();g.session&&C&&await g.disconnect();let w=f.state.universalProviderConfigOverride;if(!g.session||C){let se=G.createNamespaces(h,w);await g.connect({optionalNamespaces:se,..."pairingTopic"in u?{pairingTopic:u.pairingTopic}:{}}),this.setRequestedChainsIds(h.map(so=>Number(so.id)))}let E=await this.getAccounts(),x=await this.getChainId(),U=g.session?.namespaces?.eip155?.chains,K=U?.some(se=>Number(se.split(":")[1])===x),F=1;K?F=x:U?.[0]&&(F=Number(U[0].split(":")[1])),c&&(g.removeListener("display_uri",c),c=void 0),i&&(g.removeListener("connect",i),i=void 0),n||(n=this.onAccountsChanged.bind(this),g.on("accountsChanged",n)),s||(s=this.onChainChanged.bind(this),g.on("chainChanged",s)),p||(p=this.onDisconnect.bind(this),g.on("disconnect",p)),a||(a=this.onSessionDelete.bind(this),g.on("session_delete",a));let ne=w?.defaultChain;return g.setDefaultChain(ne??`eip155:${F}`),{accounts:E,chainId:F}}catch(h){throw/(user rejected|connection request reset)/i.test(h?.message)?new ke(h):h}},async disconnect(){let u=await this.getProvider();try{await u?.disconnect()}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{s&&(u?.removeListener("chainChanged",s),s=void 0),p&&(u?.removeListener("disconnect",p),p=void 0),i||(i=this.onConnect.bind(this),u?.on("connect",i)),n&&(u?.removeListener("accountsChanged",n),n=void 0),a&&(u?.removeListener("session_delete",a),a=void 0),this.setRequestedChainsIds([])}},async getAccounts(){let u=await this.getProvider();return u?.session?.namespaces?u?.session?.namespaces[m.CHAIN.EVM]?.accounts?.map(C=>C.split(":")[2])??[]:[]},async getProvider({chainId:u}={}){o||(o=await e.getUniversalProvider(),o?.events.setMaxListeners(Number.POSITIVE_INFINITY));let h=A.getActiveNamespace(),g=e.getCaipNetwork()?.id;if(u&&g!==u&&h){let C=A.getStoredActiveCaipNetworkId(),E=e.getCaipNetworks(h)?.find(x=>x.id===C);E&&E.chainNamespace===m.CHAIN.EVM&&await this.switchChain?.({chainId:Number(E.id)})}return o},async getChainId(){let u=e.getCaipNetwork(m.CHAIN.EVM)?.id;if(u)return u;let g=(await this.getProvider()).session?.namespaces[m.CHAIN.EVM]?.chains?.[0];return l.getCaipNetworks().find(w=>w.id===g)?.id},async isAuthorized(){try{let[u,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return u.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:h}){let g=await this.getProvider();if(!g)throw new pt;let C=l.getCaipNetworks().find(w=>w.id===h);if(!C)throw new Ce(new er);try{await g.request({method:"wallet_switchEthereumChain",params:[{chainId:st(h)}]}),C?.caipNetworkId&&g.setDefaultChain(C?.caipNetworkId),d.emitter.emit("change",{chainId:Number(h)});let w=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...w,h]),{...C,id:C.id}}catch(w){let E=w;if(/(?:user rejected)/iu.test(E.message))throw new ke(E);try{let x;u?.blockExplorerUrls?x=u.blockExplorerUrls:x=C.blockExplorers?.default.url?[C.blockExplorers?.default.url]:[];let U=C.rpcUrls?.chainDefault?.http||[],K={blockExplorerUrls:x,chainId:st(h),chainName:C.name,iconUrls:u?.iconUrls,nativeCurrency:C.nativeCurrency,rpcUrls:U};await g.request({method:"wallet_addEthereumChain",params:[K]});let F=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...F,h]),{...C,id:C.id}}catch(x){throw new ke(x)}}},onAccountsChanged(u){u.length===0?this.onDisconnect():d.emitter.emit("change",{accounts:u.map(h=>be(h))})},onChainChanged(u){let h=Number(u);d.emitter.emit("change",{chainId:h})},onConnect(u){this.setRequestedChainsIds(l.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(u){this.setRequestedChainsIds([]),d.emitter.emit("disconnect");let h=await this.getProvider();n&&(h.removeListener("accountsChanged",n),n=void 0),s&&(h.removeListener("chainChanged",s),s=void 0),p&&(h.removeListener("disconnect",p),p=void 0),a&&(h.removeListener("session_delete",a),a=void 0),i||(i=this.onConnect.bind(this),h.on("connect",i))},onDisplayUri(u){d.emitter.emit("message",{type:"display_uri",data:u})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return o?.session?.namespaces?o?.session?.namespaces[m.CHAIN.EVM]?.accounts?.map(g=>Number.parseInt(g.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){let u=await d.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(u)]},async isChainsStale(){if(!t)return!1;let u=d.chains.map(C=>C.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(C=>u.includes(C)))return!1;let g=await this.getRequestedChainsIds();return!u.every(C=>g.includes(Number(C)))},async setRequestedChainsIds(u){await d.storage?.setItem(this.requestedChainsStorageKey,u)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}var Ee=Dt({pendingTransactions:0}),Rt={state:Ee,subscribeKey(r,e){return Wt(Ee,r,e)},increase(r){Ee[r]+=1},decrease(r){Ee[r]-=1},reset(r){Ee[r]=0}};function ro(r){try{return JSON.parse(r)}catch{throw new Error("Error parsing wallet capabilities")}}var Oo={enable:!1,pollingInterval:3e4},Ne=class extends re{constructor(e){let t=L.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=m.CHAIN.EVM,this.adapterType=m.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Oo,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:t})}construct(e){this.setupWatchers()}async getAccounts(e){let t=this.getWagmiConnector(e.id);if(!t)return{accounts:[]};if(t.id===m.CONNECTOR_ID.AUTH){let s=await t.getProvider();if(!s?.user)return{accounts:[]};let{address:i,accounts:c}=s.user;return Promise.resolve({accounts:(c||[{address:i,type:"eoa"}]).map(a=>N.createAccount("eip155",a.address,a.type))})}let{addresses:o,address:n}=ct(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(o||[n])].map(s=>N.createAccount("eip155",s||"","eoa"))})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(t=>t.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(n=>n.chainNamespace===m.CHAIN.EVM);let t={},o=[...e.connectors??[]];this.wagmiChains.forEach(n=>{let s=e.transports?.[n.id],i=L.getCaipNetworkId(n);s?t[n.id]=L.extendWagmiTransports(n,e.projectId,s):t[n.id]=L.getViemTransport(n,e.projectId,e.customRpcUrls?.[i])}),this.wagmiConfig=dr({...e,chains:this.wagmiChains,connectors:o,transports:t})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=cr(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Rt.increase("pendingTransactions")}});let e=Rt.subscribeKey("pendingTransactions",t=>{t>=m.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){sr(this.wagmiConfig,{onChange:(e,t)=>{e.status==="disconnected"&&t.address&&this.emit("disconnect"),e.status==="connected"&&((e.address!==t?.address||t.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId})),e.chainId!==t?.chainId&&this.emit("switchNetwork",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){let t=[];if(e.enableCoinbase!==!1)try{let{coinbaseWallet:o}=await import("./exports-EVE2RZNA.js");o&&t.push(o({version:"4",appName:e.metadata?.name??"Unknown",appLogoUrl:e.metadata?.icons[0]??"Unknown",preference:e.coinbasePreference??"all"}))}catch(o){console.error("Failed to import Coinbase Wallet SDK:",o)}t.forEach(o=>{let n=this.wagmiConfig._internal.connectors.setup(o);this.wagmiConfig._internal.connectors.setState(s=>[...s,n])})}addWagmiConnectors(e,t){let o=[];e.enableWalletConnect!==!1&&o.push(et(e,t)),e.enableInjected!==!1&&o.push(ur({shimDisconnect:!0}));let n=t?.remoteFeatures?.email??!0,s=Array.isArray(t?.remoteFeatures?.socials)&&t?.remoteFeatures?.socials?.length>0;(n||s)&&o.push(to({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),o.forEach(i=>{let c=this.wagmiConfig._internal.connectors.setup(i);this.wagmiConfig._internal.connectors.setState(a=>[...a,c])})}async signMessage(e){try{return{signature:await Re(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){let{chainId:t,address:o}=ct(this.wagmiConfig),n={account:o,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:t,type:"legacy",parameters:["nonce"]};await or(this.wagmiConfig,n);let s=await nr(this.wagmiConfig,n);return await lr(this.wagmiConfig,{hash:s,timeout:25e3}),{hash:s}}async writeContract(e){let{caipNetwork:t,...o}=e,n=Number(J.caipNetworkIdToNumber(t.caipNetworkId));return{hash:await pr(this.wagmiConfig,{chain:this.wagmiChains?.[n],chainId:n,address:o.tokenAddress,account:o.fromAddress,abi:o.abi,functionName:o.method,args:o.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await tr(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return zt(e.value,e.decimals)}formatUnits(e){return Ht(e.value,e.decimals)}async addWagmiConnector(e,t){if(e.id===m.CONNECTOR_ID.AUTH||e.id===m.CONNECTOR_ID.WALLET_CONNECT)return;let o=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:q.ConnectorExplorerIds[e.id],imageUrl:t?.connectorImages?.[e.id]??e.icon,name:q.ConnectorNamesMap[e.id]??e.name,imageId:q.ConnectorImageIds[e.id],type:q.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===m.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:o,chain:this.namespace,chains:[]})}async syncConnectors(e,t){ar(this.wagmiConfig,{onChange:o=>{o.forEach(n=>this.addWagmiConnector(n,e))}}),await Promise.all(this.wagmiConfig.connectors.map(o=>this.addWagmiConnector(o,e))),this.addWagmiConnectors(e,t),await this.addThirdPartyConnectors(e)}async syncConnection(e){let{id:t}=e,n=Q(this.wagmiConfig).find(c=>c.connector.id===t),i=await this.getWagmiConnector(t)?.getProvider();return{chainId:Number(n?.chainId),address:n?.accounts[0],provider:i,type:n?.connector.type?.toUpperCase(),id:n?.connector.id}}async connectWalletConnect(e){let t=this.getWalletConnectConnector();await t.authenticate();let o=this.getWagmiConnector("walletConnect");if(!o)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");let n=await at(this.wagmiConfig,{connector:o,chainId:e?Number(e):void 0});return n.chainId!==Number(e)&&await ut(this.wagmiConfig,{chainId:n.chainId}),{clientId:await t.provider.client.core.crypto.getClientId()}}async connect(e){let{id:t,provider:o,type:n,info:s,chainId:i,socialUri:c}=e,a=this.getWagmiConnector(t);if(!a)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(o&&s&&a.id===m.CONNECTOR_ID.EIP6963&&a.setEip6963Wallet?.({provider:o,info:s}),a.uid===this.wagmiConfig?.state?.current){let d=this.wagmiConfig.state?.connections?.get(a.uid);if(d)return{address:d?.accounts[0],chainId:d?.chainId,provider:o,type:n,id:t}}let p=await at(this.wagmiConfig,{connector:a,chainId:i?Number(i):void 0,socialUri:c});return{address:p.accounts[0],chainId:p.chainId,provider:o,type:n,id:t}}async reconnect(e){let{id:t}=e,o=this.getWagmiConnector(t);if(!o)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await lt(this.wagmiConfig,{connectors:[o]})}async getBalance(e){let t=e.address,o=this.getCaipNetworks().find(n=>n.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(o&&this.wagmiConfig){let n=`${o.caipNetworkId}:${e.address}`,s=this.balancePromises[n];if(s)return s;let i=A.getNativeBalanceCacheForCaipAddress(n);return i?{balance:i.balance,symbol:i.symbol}:(this.balancePromises[n]=new Promise(async c=>{try{let a=Number(e.chainId),p=await rr(this.wagmiConfig,{address:e.address,chainId:a,token:e.tokens?.[o.caipNetworkId]?.address});A.updateNativeBalanceCache({caipAddress:n,balance:p.formatted,symbol:p.symbol,timestamp:Date.now()}),c({balance:p.formatted,symbol:p.symbol})}catch(a){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",a),c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[n]}),this.balancePromises[n]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(){let e=Q(this.wagmiConfig);await Promise.allSettled(e.map(async t=>{let o=this.getWagmiConnector(t.connector.id);o&&await Oe(this.wagmiConfig,{connector:o})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){await ut(this.wagmiConfig,{chainId:e.caipNetwork.id}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],n=o?this.getWagmiConnector(o.connector.id):null;if(!n)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");let s=await n.getProvider();if(!s)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");let i=s.session?.sessionProperties?.capabilities;if(i){let a=ro(i)[e];if(a)return a}return await s.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],n=o?this.getWagmiConnector(o.connector.id):null;if(!n)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");let s=await n.getProvider();if(!s)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return s.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],n=o?this.getWagmiConnector(o.connector.id):null;if(!n)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");let s=await n.getProvider();if(!s)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return s.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");let o=Q(this.wagmiConfig)[0],n=o?this.getWagmiConnector(o.connector.id):null;if(!n)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");let s=await n.getProvider();if(!s)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return s.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{let t=Q(this.wagmiConfig),o=this.getWagmiConnector("walletConnect");o&&!t.find(n=>n.connector.id===o.id)&&lt(this.wagmiConfig,{connectors:[o]})}),this.addConnector(new Z({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}};var oe=_(W(),1);var Ro=new Nt,oo="939345e3a30974b284f27b6a7918736f",Uo={name:"Intear Wallet",description:"Intear Wallet",url:"https://wallet.intear.tech",icons:["/favicon.svg"]},no=new Ne({networks:[_e],projectId:oo,ssr:!1});Nr({adapters:[no],networks:[_e],projectId:oo,metadata:Uo,features:{analytics:!1,socials:!1,onramp:!1,swaps:!1,receive:!1,send:!1,email:!1},themeMode:"dark"});function _o({children:r}){return H.default.createElement(qe,{config:no.wagmiConfig},H.default.createElement(Pt,{client:Ro},r))}function Mo({messageToSign:r,onSignature:e}){let t=Ue({namespace:"eip155"}),{open:o}=Ct(),{disconnect:n}=Xe(),{signMessage:s,data:i,error:c}=Ot();return(0,oe.useEffect)(()=>{i&&e(i,r)},[i,e]),(0,oe.useEffect)(()=>{c&&(console.error("Signing error:",c),e(null,r),n())},[c,e,n]),(0,oe.useEffect)(()=>{if(t.isConnected&&r&&s({message:r}),!t.isConnected&&r){o({view:"Connect",namespace:"eip155"});let a=!1,p=setInterval(()=>{let d=document.getElementsByTagName("w3m-modal")[0];d&&d.className==="open"?a=!0:a&&(clearInterval(p),e(null,r))},50);return()=>clearInterval(p)}},[t.isConnected,r]),H.default.createElement(H.default.Fragment,null)}function Do({onConnection:r}){let e=Ue({namespace:"eip155"}),{open:t,close:o}=Ct(),{disconnect:n}=Xe();return(0,oe.useEffect)(()=>{n()},[]),(0,oe.useEffect)(()=>{if(e.isConnected&&e.address){let s=e.address;console.log(s),r(s),o()}},[e.isConnected,e.address,r]),(0,oe.useEffect)(()=>{if(!e.isConnected){t({view:"Connect",namespace:"eip155"});let s=!1,i=setInterval(()=>{let c=document.getElementsByTagName("w3m-modal")[0];c&&c.className==="open"?s=!0:s&&(clearInterval(i),r(null))},50);return()=>clearInterval(i)}},[e.isConnected,r]),H.default.createElement(H.default.Fragment,null)}function Fo({messageToSign:r,onSignature:e,needsSignIn:t,onConnection:o}){return H.default.createElement(_o,null,r&&H.default.createElement(Mo,{messageToSign:r,onSignature:e}),t&&H.default.createElement(Do,{onConnection:o}))}export{Fo as default};
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
