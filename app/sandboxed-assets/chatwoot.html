<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatwoot Sandbox</title>
    <script>
        function loadChatwoot() {
            const BASE_URL = "https://app.chatwoot.com";
            const script = document.createElement("script");
            const firstScriptInBody = document.getElementsByTagName("script")[0];
            script.src = BASE_URL + "/packs/js/sdk.js";
            script.async = true;
            firstScriptInBody.parentNode.insertBefore(script, firstScriptInBody);
            script.onload = function () {
                window.chatwootSDK.run({
                    websiteToken: 'eUJ4pSCSbXv2dhMiwvX2rjud',
                    baseUrl: BASE_URL
                })
            }
        }

        window.addEventListener("message", (event) => {
            if (event.data.type === "loadChatwoot") {
                loadChatwoot();
            }
            if (event.data.type === "setAccountId") {
                if (window.$chatwoot) {
                    window.$chatwoot.setConversationCustomAttributes({account_id: event.data.accountId})
                } else {
                    console.error("Chatwoot SDK not loaded, yet tried to use setAccountId");
                }
            }
        });
    </script>
</head>

<body style="width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; background-color: transparent;">

</body>

</html>
